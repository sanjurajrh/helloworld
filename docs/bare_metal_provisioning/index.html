<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="a1fc94cf-028f-4211-a781-99d570278778" product="7eff92b4-effc-4326-8604-6f852e3e9747" revision="51c1213d6be436d76c67412d39f943a517ee32cd:en-us" page="2d102de2-2e73-46a4-b2b8-66d993178333" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/bare_metal_provisioning/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/bare_metal_provisioning/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/bare_metal_provisioning/index" />
<meta property="og:title" content="Bare Metal Provisioning Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal" />
<meta property="og:description" content="Install, configure, and use the Bare Metal service in the overcloud of a Red Hat OpenStack Platform environment." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/bare_metal_provisioning/index" />
<meta name="twitter:title" content="Bare Metal Provisioning Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal" />
<meta name="twitter:description" content="Install, configure, and use the Bare Metal service in the overcloud of a Red Hat OpenStack Platform environment." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Bare Metal Provisioning Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs07.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="fc526cb5" />
<meta name="cp-chrome-build-date" content="2020-10-15T21:45:53.836Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "fc526cb5",
        builddate : "2020-10-15T21:45:53.836Z",
        fetchdate : "2020-10-19T10:38:31-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="bootstrap-grid.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=fc526cb5.css" />

<link href="chosen.css%3Fv=fc526cb5.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=fc526cb5" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->

  <!-- TrustArc -->
  <script src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__ZyeOaiFuDejQQbhUV7yg7atYZnj4WLfH77o0scv4068__MZdWWgUEYpsEWLcU0RqkaXMsEyksbpCgnf4XwXRkqz0__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       'a1fc94cf-028f-4211-a781-99d570278778');
attributes.set('ResourceTitle',    'Bare Metal Provisioning');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       '51c1213d6be436d76c67412d39f943a517ee32cd:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat OpenStack Platform');
attributes.set('ProductVersion',   '16.1');
attributes.set('ProductId',        'Red Hat OpenStack Platform 16.1');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat OpenStack Platform", "/documentation/en-us/red_hat_openstack_platform/"], ["16.1", "/documentation/en-us/red_hat_openstack_platform/16.1/"], ["Bare Metal Provisioning", "/documentation/en-us/red_hat_openstack_platform/16.1/html/bare_metal_provisioning/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__8abcou7ybLtGOLy-V9E-NQlDejOMZmdStjlYfyX9W-k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"r_lpZvXp8SCB7i4fg-b0nbL4-PRrmykZMxiJCrqO7Yc","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery-html-prefilter-3.5.0-backport.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs07-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page  kcs_external" >
  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <script>
    chrometwo_require(["wc"], function(wc){    
        wc.include("@cpelements/cp-search-autocomplete/dist/cp-search-autocomplete.umd");
    }); 
</script>

<!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <span class="sr-only">Red Hat Customer Portal</span>
          <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
            <defs>
            <style>
              .rh-logo-type {
                fill:#fff;
              }
              .rh-logo-hat {
                fill:#e00;
              }
            </style>
            </defs>
            <g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
          </svg>
        </span>
            </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom" path="/webassets/avalon/j/data.json"></cp-search-autocomplete>
                            <div class="input-group push-bottom">
                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Or <a href="https://access.redhat.com/support/cases/#/troubleshoot">troubleshoot an issue</a>.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                      <span class="sr-only">Red Hat Customer Portal</span>
                      <span class="logo-crop">
                        <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
                          <defs>
                          <style>
                            .rh-logo-type {
                              fill:#fff;
                            }
                            .rh-logo-hat {
                              fill:#e00;
                            }
                          </style>
                          </defs>
                          <title>Red Hat Customer Portal</title><g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
                        </svg>
                      </span>
                                            </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        
                                        <li><a href="https://catalog.redhat.com/" class="cta-link cta-link-darkbg">Ecosystem Catalog</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="index.html">English</a></li>
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_openstack_platform/16.1/html/bare_metal_provisioning/">日本語</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/bare_metal_provisioning/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/pdf/bare_metal_provisioning/Red_Hat_OpenStack_Platform-16.1-Bare_Metal_Provisioning-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/epub/bare_metal_provisioning/Red_Hat_OpenStack_Platform-16.1-Bare_Metal_Provisioning-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Bare Metal Provisioning</a></li><li class=" leaf"><a href="index.html#idm139728806247440">Preface</a></li><li class=" leaf"><a href="index.html#sect-introduction">1. About the Bare Metal Provisioning service</a></li><li class=" leaf"><a href="index.html#sect-planning">2. Prerequisites for bare metal provisioning</a><ol class="menu"><li class=" leaf"><a href="index.html#installation-requirements">2.1. Installation requirements</a></li><li class=" leaf"><a href="index.html#hardware-requirements">2.2. Hardware requirements</a></li><li class=" leaf"><a href="index.html#networking-requirements">2.3. Networking requirements</a><ol class="menu"><li class=" leaf"><a href="index.html#the_default_bare_metal_network">2.3.1. The default bare metal network</a></li><li class=" leaf"><a href="index.html#the_custom_composable_bare_metal_network">2.3.2. The custom composable bare metal network</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#sect-deploy">3. Deploying an overcloud with the Bare Metal Provisioning service</a><ol class="menu"><li class=" leaf"><a href="index.html#creating_the_bare_metal_provisioning_service_ironic_template">3.1. Creating the Bare Metal Provisioning service (ironic) template</a></li><li class=" leaf"><a href="index.html#configuring-the-undercloud-for-bare-metal-provisioning-over-ipv6">3.2. Configuring the undercloud for bare metal provisioning over IPv6</a></li><li class=" leaf"><a href="index.html#network_configuration">3.3. Network configuration</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring_a_custom_ipv4_provisioning_network">3.3.1. Configuring a custom IPv4 provisioning network</a></li><li class=" leaf"><a href="index.html#configuring-a-custom-ipv6-provisioning-network">3.3.2. Configuring a custom IPv6 provisioning network</a></li></ol></li><li class=" leaf"><a href="index.html#sect-example-templates">3.4. Example templates</a></li><li class=" leaf"><a href="index.html#enabling-ironic-introspection-in-the-overcloud">3.5. Enabling bare metal introspection in the overcloud</a></li><li class=" leaf"><a href="index.html#sect-deploying-the-overcloud">3.6. Deploying the overcloud</a></li><li class=" leaf"><a href="index.html#testing_the_bare_metal_provisioning_service">3.7. Testing the Bare Metal Provisioning service</a></li></ol></li><li class=" leaf"><a href="index.html#sect-configure">4. Configuring the Bare Metal Provisioning service after deployment</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring_openstack_networking">4.1. Configuring OpenStack Networking</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring_openstack_networking_to_communicate_with_the_bare_metal_provisioning_service_on_a_flat_bare_metal_network">4.1.1. Configuring OpenStack Networking to communicate with the Bare Metal Provisioning service on a flat bare metal network</a></li><li class=" leaf"><a href="index.html#configuring_openstack_networking_to_communicate_with_the_bare_metal_provisioning_service_on_a_custom_composable_bare_metal_network">4.1.2. Configuring OpenStack Networking to communicate with the Bare Metal Provisioning service on a custom composable bare metal network</a></li></ol></li><li class=" leaf"><a href="index.html#configuring_node_cleaning">4.2. Configuring node cleaning</a><ol class="menu"><li class=" leaf"><a href="index.html#manual_node_cleaning">4.2.1. Manual node cleaning</a></li></ol></li><li class=" leaf"><a href="index.html#creating_the_bare_metal_flavor">4.3. Creating the bare metal flavor</a></li><li class=" leaf"><a href="index.html#creating_the_bare_metal_images">4.4. Creating the bare metal images</a><ol class="menu"><li class=" leaf"><a href="index.html#preparing_the_deploy_images">4.4.1. Preparing the deploy images</a></li><li class=" leaf"><a href="index.html#preparing_the_user_image">4.4.2. Preparing the user image</a></li><li class=" leaf"><a href="index.html#disk-image-environment-variables">4.4.3. Disk image environment variables</a></li><li class=" leaf"><a href="index.html#installing_the_user_image">4.4.4. Installing the user image</a></li></ol></li><li class=" leaf"><a href="index.html#configuring_deploy_interfaces">4.5. Configuring deploy interfaces</a><ol class="menu"><li class=" leaf"><a href="index.html#understanding-deploy-interfaces">4.5.1. Understanding the deploy process</a></li><li class=" leaf"><a href="index.html#configuring-direct-deploy-on-the-overcloud">4.5.2. Configuring the direct deploy interface on the overcloud</a></li></ol></li><li class=" leaf"><a href="index.html#adding_physical_machines_as_bare_metal_nodes">4.6. Adding physical machines as bare metal nodes</a><ol class="menu"><li class=" leaf"><a href="index.html#enrolling_a_bare_metal_node_with_an_inventory_file">4.6.1. Enrolling a bare metal node with an inventory file</a></li><li class=" leaf"><a href="index.html#enrolling_a_bare_metal_node_manually">4.6.2. Enrolling a bare metal node manually</a></li></ol></li><li class=" leaf"><a href="index.html#configuring-redfish-virtual-media-boot">4.7. Configuring Redfish virtual media boot</a><ol class="menu"><li class=" leaf"><a href="index.html#deploying-a-bare-metal-server-with-redfish-virtual-media-boot_configuring-redfish-virtual-media-boot">4.7.1. Deploying a bare metal server with Redfish virtual media boot</a></li></ol></li><li class=" leaf"><a href="index.html#using_host_aggregates_to_separate_physical_and_virtual_machine_provisioning">4.8. Using host aggregates to separate physical and virtual machine provisioning</a></li></ol></li><li class=" leaf"><a href="index.html#administering_bare_metal_nodes">5. Administering bare metal nodes</a><ol class="menu"><li class=" leaf"><a href="index.html#launching_an_instance_with_the_command_line_interface_cli">5.1. Launching an instance with the Command Line Interface (CLI)</a></li><li class=" leaf"><a href="index.html#launching_an_instance_with_the_dashboard">5.2. Launching an instance with the dashboard</a></li><li class=" leaf"><a href="index.html#configure_port_groups_in_the_bare_metal_provisioning_service">5.3. Configure port groups in the Bare Metal Provisioning service</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring_the_switches">5.3.1. Configuring the switches</a></li><li class=" leaf"><a href="index.html#configuring_port_groups_in_the_bare_metal_provisioning_service">5.3.2. Configuring port groups in the Bare Metal Provisioning service</a></li></ol></li><li class=" leaf"><a href="index.html#determining_the_host_to_ip_address_mapping">5.4. Determining the host to IP address mapping</a></li><li class=" leaf"><a href="index.html#sect-attaching-and-detaching-a-virtual-network-interface">5.5. Attaching and detaching a virtual network interface</a></li><li class=" leaf"><a href="index.html#sect-bare-metal-notifications">5.6. Configuring notifications for the Bare Metal Provisioning service</a></li><li class=" leaf"><a href="index.html#sect-configuring-automatic-fault-recovery">5.7. Configuring automatic power fault recovery</a></li><li class=" leaf"><a href="index.html#introspecting-overcloud-nodes">5.8. Introspecting overcloud nodes</a></li></ol></li><li class=" leaf"><a href="index.html#booting-from-cinder-volumes">6. Booting from cinder volumes</a><ol class="menu"><li class=" leaf"><a href="index.html#cinder-volume-boot-for-bare-metal-nodes">6.1. Cinder volume boot for bare metal nodes</a></li><li class=" leaf"><a href="index.html#configuring-nodes-for-cinder-volume-boot">6.2. Configuring nodes for cinder volume boot</a></li><li class=" leaf"><a href="index.html#configuring-iscsi-kernel-parameters-on-the-boot-disk">6.3. Configuring iSCSI kernel parameters on the boot disk</a></li><li class=" leaf"><a href="index.html#creating-and-using-a-boot-volume-in-cinder">6.4. Creating and using a boot volume in cinder</a></li></ol></li><li class=" leaf"><a href="index.html#ml2-networking-ansible">7. ML2 networking-ansible</a><ol class="menu"><li class=" leaf"><a href="index.html#modular-layer-2-ml2-networking-ansible">7.1. Modular Layer 2 (ML2) networking-ansible</a></li><li class=" leaf"><a href="index.html#networking-requirements-for-networking-ansible">7.2. Networking requirements for networking-ansible</a></li><li class=" leaf"><a href="index.html#openstack-bare-metal-ironic-requirements-for-networking-ansible">7.3. Openstack Bare Metal (ironic) requirements for networking-ansible</a></li><li class=" leaf"><a href="index.html#enabling-networking-ansible-ml2-functionality">7.4. Enabling networking-ansible ML2 functionality</a></li><li class=" leaf"><a href="index.html#configuring-networks-for-networking-ansible">7.5. Configuring networks for networking-ansible</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring-networks-for-networking-ansible-in-access-mode">7.5.1. Configuring networks for networking-ansible in access mode</a></li><li class=" leaf"><a href="index.html#configuring-ports-for-bare-metal-guests-in-access-mode">7.5.2. Configuring ports for bare metal guests in access mode</a></li><li class=" leaf"><a href="index.html#configuring-networks-for-networking-ansible-in-trunk-mode">7.5.3. Configuring networks for networking-ansible in trunk mode</a></li><li class=" leaf"><a href="index.html#configuring-ports-for-bare-metal-guests-in-trunk-mode">7.5.4. Configuring ports for bare metal guests in trunk mode</a></li></ol></li><li class=" leaf"><a href="index.html#testing-networking-ansible-ml2-functions">7.6. Testing networking-ansible ML2 functions</a></li></ol></li><li class=" leaf"><a href="index.html#sect-troubleshoot">8. Troubleshooting the Bare Metal Provisioning service</a><ol class="menu"><li class=" leaf"><a href="index.html#pxe_boot_errors">8.1. PXE boot errors</a></li><li class=" leaf"><a href="index.html#login_errors_after_the_bare_metal_node_boots">8.2. Login errors after the bare metal node boots</a></li><li class=" leaf"><a href="index.html#the_bare_metal_provisioning_service_does_not_receive_the_correct_host_name">8.3. The Bare Metal Provisioning service does not receive the correct host name</a></li><li class=" leaf"><a href="index.html#invalid_openstack_identity_service_credentials_when_executing_bare_metal_provisioning_service_commands">8.4. Invalid OpenStack Identity service credentials when executing Bare Metal Provisioning service commands</a></li><li class=" leaf"><a href="index.html#hardware_enrollment">8.5. Hardware enrollment</a></li><li class=" leaf"><a href="index.html#emphasis_no_valid_host_emphasis_errors">8.6. No Valid Host errors</a></li><li class=" leaf"><a href="index.html#troubleshooting-idrac-issues">8.7. Troubleshooting iDRAC issues</a></li></ol></li><li class=" leaf"><a href="index.html#sect-appendix-drivers">A. Bare metal drivers</a><ol class="menu"><li class=" leaf"><a href="index.html#intelligent_platform_management_interface_ipmi">A.1. Intelligent Platform Management Interface (IPMI)</a></li><li class=" leaf"><a href="index.html#redfish">A.2. Redfish</a></li><li class=" leaf"><a href="index.html#dell_remote_access_controller_drac">A.3. Dell Remote Access Controller (DRAC)</a></li><li class=" leaf"><a href="index.html#integrated_remote_management_controller_irmc">A.4. Integrated Remote Management Controller (iRMC)</a></li><li class=" leaf"><a href="index.html#integrated_lights_out_ilo">A.5. Integrated Lights-Out (iLO)</a></li><li class=" leaf"><a href="index.html#converting_to_next_generation_power_management_drivers">A.6. Converting to next generation power management drivers</a></li></ol></li><li class=" leaf"><a href="index.html#idm139728805860944">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Bare Metal Provisioning</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm139728806100032"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat OpenStack Platform</span> <span class="productnumber">16.1</span></div><div><h2 class="subtitle">Install, Configure, and Use the Bare Metal Service (Ironic)</h2></div><div><div xml:lang="en-US" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">OpenStack</span> <span class="othername">Documentation</span> <span class="surname">Team</span></h3><code class="email"><a class="email" href="mailto:rhos-docs@redhat.com">rhos-docs@redhat.com</a></code></div></div></div><div><a href="index.html#idm139728805860944">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Install, configure, and use the Bare Metal service in the overcloud of a Red Hat OpenStack Platform environment.
			</div></div></div></div><hr/></div><section class="preface" id="idm139728806247440"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p id="preface">
			You can configure the Bare Metal Provisioning service (ironic) in the overcloud to provision and manage physical machines for end users.
		</p><p>
			Red Hat OpenStack Platform (RHOSP) director also uses the Bare Metal Provisioning service components as part of the undercloud to provision and manage the bare metal nodes that comprise the OpenStack environment, the overcloud. For more information about how director uses the Bare Metal Provisioning service, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/"><span class="emphasis"><em>Director Installation and Usage</em></span></a> guide.
		</p></section><section class="chapter" id="sect-introduction"><div class="titlepage"><div><div><h1 class="title">Chapter 1. About the Bare Metal Provisioning service</h1></div></div></div><p>
			The Bare Metal Provisioning service (ironic) provides the components that you can use to provision and manage physical machines for end users. The Bare Metal Provisioning service in the overcloud interacts with the following OpenStack services:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					OpenStack Compute (nova) provides scheduling, tenant quotas, IP assignment, and a user-facing API for virtual machine instance management, while the Bare Metal Provisioning service provides the administrative API for hardware management.
				</li><li class="listitem">
					OpenStack Identity (keystone) provides request authentication and assists the Bare Metal Provisioning service to locate other OpenStack services.
				</li><li class="listitem">
					OpenStack Image service (glance) manages images and image metadata.
				</li><li class="listitem">
					OpenStack Networking (neutron) provides DHCP and network configuration.
				</li><li class="listitem">
					OpenStack Object Storage (swift) exposes temporary image URLs for some drivers.
				</li></ul></div><p>
			The Bare Metal Provisioning service uses iPXE to provision physical machines. The following diagram outlines how the OpenStack services interact during the provisioning process when you launch a new machine with the default drivers.
		</p><p>
			<span class="inlinemediaobject"><img src="PXE_Provisioning.png" alt="The PXE Provisioning Process"/></span>

		</p></section><section class="chapter" id="sect-planning"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Prerequisites for bare metal provisioning</h1></div></div></div><p>
			Before you begin provisioning bare metal, ensure that your environment includes the necessary installation, hardware, and networking configuration.
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					For more information about installation requirements, see <a class="xref" href="index.html#installation-requirements" title="2.1. Installation requirements">Section 2.1, “Installation requirements”</a>.
				</li><li class="listitem">
					For more information about hardware requirements, see <a class="xref" href="index.html#hardware-requirements" title="2.2. Hardware requirements">Section 2.2, “Hardware requirements”</a>.
				</li><li class="listitem">
					For more information about networking requirements, see <a class="xref" href="index.html#networking-requirements" title="2.3. Networking requirements">Section 2.3, “Networking requirements”</a>.
				</li></ul></div><section class="section" id="installation-requirements"><div class="titlepage"><div><div><h2 class="title">2.1. Installation requirements</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You have installed director on the undercloud node. For more information about installing director, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/#chap-Installing_the_Undercloud">Installing the Undercloud</a>.
					</li><li class="listitem">
						You are ready to install the Bare Metal Provisioning service with the rest of the overcloud.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The Bare Metal Provisioning service in the overcloud is designed for a trusted tenant environment because the bare metal nodes have direct access to the control plane network of your Red Hat OpenStack Platform (RHOSP) installation. You can also implement a custom composable network for Ironic services in the overcloud so that users do not need to access the control plane.
				</p></div></div></section><section class="section" id="hardware-requirements"><div class="titlepage"><div><div><h2 class="title">2.2. Hardware requirements</h2></div></div></div><div class="formalpara"><p class="title"><strong>Overcloud requirements</strong></p><p>
					The hardware requirements for an overcloud with the Bare Metal Provisioning service are the same as for the standard overcloud. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/#sect-Overcloud_Requirements">Overcloud Requirements</a> in the <span class="emphasis"><em>Director Installation and Usage</em></span> guide.
				</p></div><div class="formalpara"><p class="title"><strong>Bare metal machine requirements</strong></p><p>
					The hardware requirements for bare metal machines that you want to provision vary depending on the operating system that you want to install.
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For Red Hat Enterprise Linux 8, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/">Red Hat Enterprise Linux 8 Performing a standard RHEL installation </a>.
					</li><li class="listitem">
						For Red Hat Enterprise Linux 7, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html-single/Installation_Guide/index.html">Red Hat Enterprise Linux 7 Installation Guide</a>.
					</li><li class="listitem">
						For Red Hat Enterprise Linux 6, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html-single/Installation_Guide/index.html">Red Hat Enterprise Linux 6 Installation Guide</a>.
					</li></ul></div><p>
				All bare metal machines that you want to provision require the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A NIC to connect to the bare metal network.
					</li><li class="listitem">
						A power management interface (for example, IPMI) that is connected to a network that is reachable from the <code class="literal">ironic-conductor</code> service. By default, <code class="literal">ironic-conductor</code> runs on all of the Controller nodes, unless you use composable roles and run <code class="literal">ironic-conductor</code> elsewhere.
					</li><li class="listitem">
						PXE boot on the bare metal network. Disable PXE boot on all other NICs in the deployment.
					</li></ul></div></section><section class="section" id="networking-requirements"><div class="titlepage"><div><div><h2 class="title">2.3. Networking requirements</h2></div></div></div><div class="formalpara"><p class="title"><strong>The bare metal network:</strong></p><p>
					This is a private network that the Bare Metal Provisioning service uses for the following operations:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The provisioning and management of bare metal machines on the overcloud.
					</li><li class="listitem">
						Cleaning bare metal nodes before and between deployments.
					</li><li class="listitem">
						Tenant access to the bare metal nodes.
					</li></ul></div><p>
				The bare metal network provides DHCP and PXE boot functions to discover bare metal systems. This network must use a native VLAN on a trunked interface so that the Bare Metal Provisioning service can serve PXE boot and DHCP requests.
			</p><p>
				You can configure the bare metal network in two ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use a flat bare metal network for Ironic Conductor services. This network must route to the Ironic services on the control plane. If you define an isolated bare metal network, the bare metal nodes cannot PXE boot.
					</li><li class="listitem">
						Use a custom composable network to implement Bare Metal Provisioning services in the overcloud.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The Bare Metal Provisioning service in the overcloud is designed for a trusted tenant environment because the bare metal nodes have direct access to the control plane network of your Red Hat OpenStack Platform (RHOSP) installation. You can also implement a custom composable network for Ironic services in the overcloud so that users do not need to access the control plane.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Network tagging:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The control plane network (the director provisioning network) is always untagged.
					</li><li class="listitem">
						The bare metal network must be untagged for provisioning, and must also have access to the Ironic API.
					</li><li class="listitem">
						Other networks can be tagged.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Overcloud controllers:</strong></p><p>
					The Controller nodes that host the Bare Metal Provisioning service must have access to the bare metal network.
				</p></div><div class="formalpara"><p class="title"><strong>Bare metal nodes:</strong></p><p>
					The NIC that the bare metal node is configured to PXE-boot from must have access to the bare metal network.
				</p></div><section class="section" id="the_default_bare_metal_network"><div class="titlepage"><div><div><h3 class="title">2.3.1. The default bare metal network</h3></div></div></div><p>
					In this architecture, the bare metal network is separated from the control plane network. The bare metal network is a flat network that also acts as the tenant network.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The bare metal network is created by the OpenStack operator. This network requires a route to the director provisioning network.
						</li><li class="listitem">
							Bare Metal Provisioning Service users have access to the public OpenStack APIs, and to the bare metal network. The bare metal network is routed to the director provisioning network, so users also have indirect access to the control plane.
						</li><li class="listitem">
							The Bare Metal Provisioning Service uses the bare metal network for node cleaning.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Default bare metal network architecture diagram</strong></p><p>
						<span class="inlinemediaobject"><img src="OpenStack_Bare_Metal_Provisioning_Topology_446571_0517_JCS_1.png" alt="Default bare metal network architecture diagram"/></span>

					</p></div></section><section class="section" id="the_custom_composable_bare_metal_network"><div class="titlepage"><div><div><h3 class="title">2.3.2. The custom composable bare metal network</h3></div></div></div><p>
					In this architecture, the bare metal network is a custom composable network that does not have access to the control plane. If you want to limit access to the control plane, you can create a custom composable network:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The custom composable bare metal network is created by the OpenStack operator.
						</li><li class="listitem">
							Ironic users have access to the public OpenStack APIs, and to the custom composable bare metal network.
						</li><li class="listitem">
							Ironic uses the custom composable bare metal network for node cleaning. :leveloffset: +1
						</li></ul></div></section></section></section><section class="chapter" id="sect-deploy"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Deploying an overcloud with the Bare Metal Provisioning service</h1></div></div></div><p>
			The following procedures include the deployment steps that are specific to the Bare Metal Provisioning service (ironic). For more information about overcloud deployment with director, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/#sect-Creating_the_Overcloud_CLI">Director Installation and Usage</a> guide.
		</p><section class="section" id="creating_the_bare_metal_provisioning_service_ironic_template"><div class="titlepage"><div><div><h2 class="title">3.1. Creating the Bare Metal Provisioning service (ironic) template</h2></div></div></div><p>
				Use an environment file to deploy the overcloud with the Bare Metal Provisioning service enabled. You can use the example template that is located on the director node at <code class="literal">/usr/share/openstack-tripleo-heat-templates/environments/services/ironic-overcloud.yaml</code>.
			</p><div class="formalpara"><p class="title"><strong>Completing the template</strong></p><p>
					You can specify additional configuration either in the provided template or in an additional yaml file, for example <code class="literal">~/templates/ironic.yaml</code>.
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For a hybrid deployment with both bare metal and virtual instances, you must add <code class="literal">AggregateInstanceExtraSpecsFilter</code> to the list of <code class="literal">NovaSchedulerDefaultFilters</code>. If you have not set <code class="literal">NovaSchedulerDefaultFilters</code> anywhere, you can do so in ironic.yaml. For an example, see <a class="xref" href="index.html#sect-example-templates" title="3.4. Example templates">Section 3.4, “Example templates”</a>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you are using SR-IOV, NovaSchedulerDefaultFilters is already set in <code class="literal">tripleo-heat-templates/environments/neutron-sriov.yaml</code>. Append <code class="literal">AggregateInstanceExtraSpecsFilter</code> to this list.
						</p></div></div></li><li class="listitem">
						The type of cleaning that occurs before and between deployments is set by <code class="literal">IronicCleaningDiskErase</code>. By default, this is set to ‘full’ by <code class="literal">deployment/ironic/ironic-conductor-container-puppet.yaml</code>. You can set this to ‘metadata’ to substantially speed up the process, as it cleans only the partition table, however, because the deployment is less secure in a multi-tenant environment, complete this action only in a trusted tenant environment.
					</li><li class="listitem">
						You can add drivers with the <code class="literal">IronicEnabledDrivers</code> parameter. By default, <code class="literal">ipmi</code>, <code class="literal">idrac</code> and <code class="literal">ilo</code> are enabled.
					</li></ul></div><p>
				For a full list of configuration parameters, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/overcloud_parameters/index#bare-metal-ironic-parameters">Bare Metal</a> in the <span class="emphasis"><em>Overcloud Parameters</em></span> guide.
			</p></section><section class="section" id="configuring-the-undercloud-for-bare-metal-provisioning-over-ipv6"><div class="titlepage"><div><div><h2 class="title">3.2. Configuring the undercloud for bare metal provisioning over IPv6</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
				</p></div></div><p>
				If you have IPv6 nodes and infrastructure, you can configure the undercloud and the provisioning network to use IPv6 instead of IPv4 so that director can provision and deploy Red Hat OpenStack Platform onto IPv6 nodes. However, there are some considerations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Dual stack IPv4/6 is not available.
					</li><li class="listitem">
						Tempest validations might not perform correctly.
					</li><li class="listitem">
						IPv4 to IPv6 migration is not available during upgrades.
					</li></ul></div><p>
				Modify the <code class="literal">undercloud.conf</code> file to enable IPv6 provisioning in Red Hat OpenStack Platform.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An IPv6 address on the undercloud. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/ipv6_networking_for_the_overcloud/index#sect-pre-Configuring_an_IPv6_on_the_Undercloud">Configuring an IPv6 address on the undercloud</a> in the <span class="emphasis"><em>IPv6 Networking for the Overcloud</em></span> guide.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Copy the sample <code class="literal">undercloud.conf</code> file, or modify your existing <code class="literal">undercloud.conf</code> file.
					</li><li class="listitem"><p class="simpara">
						Set the following parameter values in the <code class="literal">undercloud.conf</code> file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Set <code class="literal">ipv6_address_mode</code> to <code class="literal">dhcpv6-stateless</code> or <code class="literal">dhcpv6-stateful</code> if your NIC supports stateful DHCPv6 with Red Hat OpenStack Platform.
							</li><li class="listitem">
								Set <code class="literal">enable_routed_networks</code> to <code class="literal">true</code> if you do not want the undercloud to create a router on the provisioning network. In this case, the data center router must provide router advertisements. Otherwise, set this value to <code class="literal">false</code>.
							</li><li class="listitem">
								Set <code class="literal">local_ip</code> to the IPv6 address of the undercloud.
							</li><li class="listitem">
								Use IPv6 addressing for the undercloud interface parameters <code class="literal">undercloud_public_host</code> and <code class="literal">undercloud_admin_host</code>.
							</li><li class="listitem"><p class="simpara">
								Optional. If you want to use stateful DHCPv6, use the <code class="literal">ironic_enabled_network_interfaces</code> parameter to specify the neutron interface. You can also use the <code class="literal">ironic_default_network_interface</code> parameter to set the neutron interface as the default network interface for bare metal nodes:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">ironic_enabled_network_interfaces = neutron,flat</code>
									</li><li class="listitem">
										<code class="literal">ironic_default_network_interface = neutron</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								In the <code class="literal">[ctlplane-subnet]</code> section, use IPv6 addressing in the following parameters:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">cidr</code>
									</li><li class="listitem">
										<code class="literal">dhcp_start</code>
									</li><li class="listitem">
										<code class="literal">dhcp_end</code>
									</li><li class="listitem">
										<code class="literal">gateway</code>
									</li><li class="listitem">
										<code class="literal">inspection_iprange</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								In the <code class="literal">[ctlplane-subnet]</code> section, set an IPv6 nameserver for the subnet in the <code class="literal">dns_nameservers</code> parameter.
							</p><pre class="screen">[DEFAULT]
ipv6_address_mode = dhcpv6-stateless
enable_routed_networks: false
local_ip = &lt;ipv6-address&gt;
ironic_enabled_network_interfaces = neutron,flat
ironic_default_network_interface = neutron
undercloud_admin_host = &lt;ipv6-address&gt;
undercloud_public_host = &lt;ipv6-address&gt;

[ctlplane-subnet]
cidr = &lt;ipv6-address&gt;::&lt;ipv6-mask&gt;
dhcp_start = &lt;ipv6-address&gt;
dhcp_end = &lt;ipv6-address&gt;
dns_nameservers = &lt;ipv6-dns&gt;
gateway = &lt;ipv6-address&gt;
inspection_iprange = &lt;ipv6-address&gt;,&lt;ipv6-address&gt;</pre></li></ol></div></li></ol></div></section><section class="section" id="network_configuration"><div class="titlepage"><div><div><h2 class="title">3.3. Network configuration</h2></div></div></div><p>
				If you use the default flat bare metal network, you must create a bridge <code class="literal">br-baremetal</code> for the Bare Metal Provisioning service (ironic) to use. You can specify this bridge in an additional template:
			</p><p>
				<code class="literal">~/templates/network-environment.yaml</code>
			</p><pre class="screen">parameter_defaults:
  NeutronBridgeMappings: datacentre:br-ex,baremetal:br-baremetal
  NeutronFlatNetworks: datacentre,baremetal</pre><p>
				You can configure this bridge either in the provisioning network (control plane) of the controllers, so that you can reuse this network as the bare metal network, or add a dedicated network. The configuration requirements are the same, however the bare metal network cannot be VLAN-tagged, as it is used for provisioning.
			</p><p>
				<code class="literal">~/templates/nic-configs/controller.yaml</code>
			</p><pre class="screen">network_config:
    -
      type: ovs_bridge
          name: br-baremetal
          use_dhcp: false
          members:
            -
              type: interface
              name: eth1</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The Bare Metal Provisioning service in the overcloud is designed for a trusted tenant environment because the bare metal nodes have direct access to the control plane network of your Red Hat OpenStack Platform (RHOSP) installation.
				</p></div></div><section class="section" id="configuring_a_custom_ipv4_provisioning_network"><div class="titlepage"><div><div><h3 class="title">3.3.1. Configuring a custom IPv4 provisioning network</h3></div></div></div><p>
					The default flat provisioning network can introduce security concerns in a customer environment because a tenant can interfere with the undercloud network. To prevent this risk, you can configure a custom composable bare metal provisioning network for ironic services that does not have access to the control plane:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the shell to access the Identity service (keystone) as the administrative user:
						</p><pre class="screen">$ source ~/stackrc</pre></li><li class="listitem"><p class="simpara">
							Copy the <code class="literal">network_data.yaml</code> file:
						</p><pre class="screen">(undercloud) [stack@host01 ~]$ cp /usr/share/openstack-tripleo-heat-templates/network_data.yaml .</pre></li><li class="listitem"><p class="simpara">
							Edit the new <code class="literal">network_data.yaml</code> file and add a new network for IPv4 overcloud provisioning:
						</p><pre class="screen"># custom network for overcloud provisioning
- name: OcProvisioning
name_lower: oc_provisioning
vip: true
vlan: 205
ip_subnet: '172.23.3.0/24'
allocation_pools: [{'start': '172.23.3.10', 'end': '172.23.3.200'}]</pre></li><li class="listitem"><p class="simpara">
							Update the <code class="literal">network_environments.yaml</code> and <code class="literal">nic-configs/controller.yaml</code> files to use the new network.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									In the <code class="literal">network_environments.yaml</code> file, remap Ironic networks:
								</p><pre class="screen">ServiceNetMap:
   IronicApiNetwork: oc_provisioning
   IronicNetwork: oc_provisioning</pre></li><li class="listitem"><p class="simpara">
									In the <code class="literal">nic-configs/controller.yaml</code> file, add an interface and the necessary parameters:
								</p><pre class="screen">$network_config:
     - type: vlan
         vlan_id:
           get_param: OcProvisioningNetworkVlanID
         addresses:
         - ip_netmask:
             get_param: OcProvisioningIpSubnet</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Copy the <code class="literal">roles_data.yaml</code> file:
						</p><pre class="screen">(undercloud) [stack@host01 ~]$ cp /usr/share/openstack-tripleo-heat-templates/roles_data.yaml .</pre></li><li class="listitem"><p class="simpara">
							Edit the new <code class="literal">roles_data.yaml</code> and add the new network for the controller:
						</p><pre class="screen">  networks:
   ...
    OcProvisioning:
      subnet: oc_provisioning_subnet</pre></li><li class="listitem"><p class="simpara">
							Include the new <code class="literal">network_data.yaml</code> and <code class="literal">roles_data.yaml</code> files in the deploy command:
						</p><pre class="screen">-n /home/stack/network_data.yaml \
-r /home/stack/roles_data.yaml \</pre></li></ol></div></section><section class="section" id="configuring-a-custom-ipv6-provisioning-network"><div class="titlepage"><div><div><h3 class="title">3.3.2. Configuring a custom IPv6 provisioning network</h3></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
					</p></div></div><p>
					Create a custom IPv6 provisioning network to provision and deploy the overcloud over IPv6.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the shell to access Identity as the administrative user:
						</p><pre class="screen">$ source ~/stackrc</pre></li><li class="listitem"><p class="simpara">
							Copy the <code class="literal">network_data.yaml</code> file:
						</p><pre class="screen">$ cp /usr/share/openstack-tripleo-heat-templates/network_data.yaml .</pre></li><li class="listitem"><p class="simpara">
							Edit the new <code class="literal">network_data.yaml</code> file and add a new network for overcloud provisioning:
						</p><pre class="screen"># custom network for IPv6 overcloud provisioning
- name: OcProvisioningIPv6
vip: true
name_lower: oc_provisioning_ipv6
vlan: 10
ipv6: true
ipv6_subnet: '$IPV6_SUBNET_ADDRESS/$IPV6_MASK'
ipv6_allocation_pools: [{'start': '$IPV6_START_ADDRESS', 'end': '$IPV6_END_ADDRESS'}]
gateway_ipv6: '$IPV6_GW_ADDRESS'</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <code class="literal">$IPV6_ADDRESS</code> with the IPv6 address of your IPv6 subnet.
								</li><li class="listitem">
									Replace <code class="literal">$IPV6_MASK</code> with the IPv6 network mask for your IPv6 subnet.
								</li><li class="listitem">
									Replace <code class="literal">$IPV6_START_ADDRESS</code> and <code class="literal">$IPV6_END_ADDRESS</code> with the IPv6 range that you want to use for address allocation.
								</li><li class="listitem">
									Replace <code class="literal">$IPV6_GW_ADDRESS</code> with the IPv6 address of your gateway.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Create a new file <code class="literal">network-environment.yaml</code> and define IPv6 settings for the provisioning network:
						</p><pre class="screen">$ touch /home/stack/network-environment.yaml`</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Remap the ironic networks to use the new IPv6 provisioning network:
								</p><pre class="screen">ServiceNetMap:
   IronicApiNetwork: oc_provisioning_ipv6
   IronicNetwork: oc_provisioning_ipv6</pre></li><li class="listitem"><p class="simpara">
									Set the <code class="literal">IronicIpVersion</code> parameter to <code class="literal">6</code>:
								</p><pre class="screen">parameter_defaults:
  IronicIpVersion: 6</pre></li><li class="listitem"><p class="simpara">
									Set the <code class="literal">RabbitIPv6</code>, <code class="literal">MysqlIPv6</code>, and <code class="literal">RedisIPv6</code> parameters to <code class="literal">True</code>:
								</p><pre class="screen">parameter_defaults:
  RabbitIPv6: True
  MysqlIPv6: True
  RedisIPv6: True</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Add an interface and necessary parameters to the <code class="literal">nic-configs/controller.yaml</code> file:
						</p><pre class="screen">$network_config:
     - type: vlan
         vlan_id:
           get_param: OcProvisioningIPv6NetworkVlanID
         addresses:
         - ip_netmask:
             get_param: OcProvisioningIPv6IpSubnet</pre></li><li class="listitem"><p class="simpara">
							Copy the <code class="literal">roles_data.yaml</code> file:
						</p><pre class="screen">(undercloud) [stack@host01 ~]$ cp /usr/share/openstack-tripleo-heat-templates/roles_data.yaml .</pre></li><li class="listitem"><p class="simpara">
							Edit the new <code class="literal">roles_data.yaml</code> and add the new network for the controller:
						</p><pre class="screen">  networks:
   ...
    - OcProvisioningIPv6</pre></li></ol></div><p>
					When you deploy the overcloud, include the new <code class="literal">network_data.yaml</code> and <code class="literal">roles_data.yaml</code> files in the deployment command with the <code class="literal">-n</code> and <code class="literal">-r</code> options, and the <code class="literal">network-environment.yaml</code> file with the <code class="literal">-e</code> option:
				</p><pre class="screen">$ sudo openstack overcloud deploy --templates \
...
-n /home/stack/network_data.yaml \
-r /home/stack/roles_data.yaml \
-e /home/stack/network-environment.yaml
...</pre><p>
					For more information about IPv6 network configuration, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/ipv6_networking_for_the_overcloud/index#configuring_the_network">Configuring the network</a> in the <span class="emphasis"><em>IPv6 Networking for the Overcloud</em></span> guide.
				</p></section></section><section class="section" id="sect-example-templates"><div class="titlepage"><div><div><h2 class="title">3.4. Example templates</h2></div></div></div><p>
				The following is an example template file. This file might not meet the requirements of your environment. Before you use this example, ensure that it does not interfere with any existing configuration in your environment. This example contains the following configuration:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">AggregateInstanceExtraSpecsFilter</code> allows both virtual and bare metal instances, for a hybrid deployment.
					</li><li class="listitem">
						Disk cleaning that is performed before and between deployments erases only the partition table (metadata).
					</li></ul></div><p>
				<code class="literal">~/templates/ironic.yaml</code>
			</p><pre class="programlisting language-yaml">parameter_defaults:

    NovaSchedulerDefaultFilters:
        - RetryFilter
        - AggregateInstanceExtraSpecsFilter
        - AvailabilityZoneFilter
        - DiskFilter
        - ComputeFilter
        - ComputeCapabilitiesFilter
        - ImagePropertiesFilter

    IronicCleaningDiskErase: metadata</pre></section><section class="section" id="enabling-ironic-introspection-in-the-overcloud"><div class="titlepage"><div><div><h2 class="title">3.5. Enabling bare metal introspection in the overcloud</h2></div></div></div><p>
				To enable bare netal introspection, include both the following files in the deployment command:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">For deployments that use <code class="literal">OVN</code></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">ironic-overcloud.yaml</code>
								</li><li class="listitem">
									<code class="literal">ironic-inspector.yaml</code>
								</li></ul></div></dd><dt><span class="term">For deployments that use <code class="literal">OVS</code></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">ironic.yaml</code>
								</li><li class="listitem">
									<code class="literal">ironic-inspector.yaml</code>
								</li></ul></div></dd></dl></div><p>
				You can find these files in the <code class="literal">/usr/share/openstack-tripleo-heat-templates/environments/services</code> directory. Use the following example to include configuration details for the ironic inspector that correspond to your environment:
			</p><pre class="screen">parameter_defaults:
  IronicInspectorSubnets:
    - ip_range: 192.168.101.201,192.168.101.250
  IPAImageURLs: '["http://192.168.24.1:8088/agent.kernel", "http://192.168.24.1:8088/agent.ramdisk"]'
  IronicInspectorInterface: 'br-baremetal'</pre><div class="formalpara"><p class="title"><strong><code class="literal">IronicInspectorSubnets</code></strong></p><p>
					This parameter can contain multiple ranges and works with both spine and leaf.
				</p></div><div class="formalpara"><p class="title"><strong><code class="literal">IPAImageURLs</code></strong></p><p>
					This parameter contains details about the IPA kernel and ramdisk. In most cases, you can use the same images that you use on the undercloud. If you omit this parameter, you must include alternatives on each Controller.
				</p></div><div class="formalpara"><p class="title"><strong><code class="literal">IronicInspectorInterface</code></strong></p><p>
					Use this parameter to specify the bare metal network interface.
				</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If you use a composable Ironic or IronicConductor role, you must include the <code class="literal">IronicInspector</code> service in the Ironic role in your roles file.
				</p><pre class="screen">ServicesDefault:
  OS::TripleO::Services::IronicInspector</pre></div></div></section><section class="section" id="sect-deploying-the-overcloud"><div class="titlepage"><div><div><h2 class="title">3.6. Deploying the overcloud</h2></div></div></div><p>
				To enable the Bare Metal Provisioning service, include your ironic environment files with the <code class="literal">-e</code> option when you deploy or redeploy the overcloud, along with the rest of your overcloud configuration. Use the following example as a guide:
			</p><pre class="screen">$ openstack overcloud deploy \
  --templates \
  -e ~/templates/node-info.yaml \
  -e /usr/share/openstack-tripleo-heat-templates/environments/network-isolation.yaml \
  -e ~/templates/network-environment.yaml \
  -e /usr/share/openstack-tripleo-heat-templates/environments/services/ironic-overcloud.yaml \
  -e ~/templates/ironic.yaml \</pre><p>
				For more information about deploying the overcloud, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/index#deployment-command-options">Deployment command options</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/#sect-Including_Environment_Files_in_Overcloud_Creation">Including Environment Files in Overcloud Creation</a> in the <span class="emphasis"><em>Director Installation and Usage</em></span> guide.
			</p><p>
				For more information about deploying the overcloud over IPv6, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/ipv6_networking_for_the_overcloud/index#setting_up_your_environment">Setting up your environment</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/ipv6_networking_for_the_overcloud/index#creating_the_overcloud">Creating the overcloud</a> in the <span class="emphasis"><em>IPv6 Networking for the Overcloud</em></span> guide.
			</p></section><section class="section" id="testing_the_bare_metal_provisioning_service"><div class="titlepage"><div><div><h2 class="title">3.7. Testing the Bare Metal Provisioning service</h2></div></div></div><p>
				You can use the OpenStack Integration Test Suite to validate your Red Hat OpenStack deployment. For more information, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/openstack_integration_test_suite_guide/">OpenStack Integration Test Suite Guide</a>.
			</p><div class="orderedlist"><p class="title"><strong>Additional verification methods for the Bare Metal Provisioning service:</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the shell to access Identity as the administrative user:
					</p><pre class="screen">$ source ~/overcloudrc</pre></li><li class="listitem"><p class="simpara">
						Check that the <code class="literal">nova-compute</code> service is running on the Controller nodes:
					</p><pre class="screen">$ openstack compute service list -c Binary -c Host -c Status</pre></li><li class="listitem"><p class="simpara">
						If you changed the default ironic drivers, ensure that the required drivers are enabled:
					</p><pre class="screen">$ openstack baremetal driver list</pre></li><li class="listitem"><p class="simpara">
						Ensure that the ironic endpoints are listed:
					</p><pre class="screen">$ openstack catalog list</pre></li></ol></div></section></section><section class="chapter" id="sect-configure"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Configuring the Bare Metal Provisioning service after deployment</h1></div></div></div><p>
			This section describes the steps necessary to configure your overcloud after deployment.
		</p><section class="section" id="configuring_openstack_networking"><div class="titlepage"><div><div><h2 class="title">4.1. Configuring OpenStack Networking</h2></div></div></div><p>
				Configure OpenStack Networking to communicate with the Bare Metal Provisioning service for DHCP, PXE boot, and other requirements. You can configure the bare metal network in two ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use a flat bare metal network for Ironic Conductor services. This network must route to the Ironic services on the control plane network.
					</li><li class="listitem">
						Use a custom composable network to implement Ironic services in the overcloud.
					</li></ul></div><p>
				Follow the procedures in this section to configure OpenStack Networking for a single flat network for provisioning onto bare metal, or to configure a new composable network that does not rely on an unused isolated network or a flat network. The configuration uses the ML2 plug-in and the Open vSwitch agent.
			</p><section class="section" id="configuring_openstack_networking_to_communicate_with_the_bare_metal_provisioning_service_on_a_flat_bare_metal_network"><div class="titlepage"><div><div><h3 class="title">4.1.1. Configuring OpenStack Networking to communicate with the Bare Metal Provisioning service on a flat bare metal network</h3></div></div></div><p>
					Perform all steps in the following procedure as the <code class="literal">root</code> user on the server that hosts the OpenStack Networking service.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the shell to access Identity as the administrative user:
						</p><pre class="screen">$ source ~/overcloudrc</pre></li><li class="listitem"><p class="simpara">
							Create the flat network over which to provision bare metal instances:
						</p><pre class="screen">$ openstack network create \
  --provider-network-type flat \
  --provider-physical-network <span class="emphasis"><em>baremetal</em></span> \
  --share <span class="emphasis"><em>NETWORK_NAME</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>NETWORK_NAME</em></span> with a name for this network. The name of the physical network over which you implement the virtual network (in this case <code class="literal">baremetal</code>) was set earlier in the <code class="literal">~/templates/network-environment.yaml</code> file, with the parameter <code class="literal">NeutronBridgeMappings</code>.
						</p></li><li class="listitem"><p class="simpara">
							Create the subnet on the flat network:
						</p><pre class="screen">$ openstack subnet create \
  --network <span class="emphasis"><em>NETWORK_NAME</em></span> \
  --subnet-range <span class="emphasis"><em>NETWORK_CIDR</em></span> \
  --ip-version 4 \
  --gateway <span class="emphasis"><em>GATEWAY_IP</em></span> \
  --allocation-pool start=<span class="emphasis"><em>START_IP</em></span>,end=<span class="emphasis"><em>END_IP</em></span> \
  --dhcp <span class="emphasis"><em>SUBNET_NAME</em></span></pre><p class="simpara">
							Replace the following values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em>SUBNET_NAME</em></span> with a name for the subnet.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>NETWORK_NAME</em></span> with the name of the provisioning network that you created in the previous step.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>NETWORK_CIDR</em></span> with the Classless Inter-Domain Routing (CIDR) representation of the block of IP addresses that the subnet represents. The block of IP addresses that you specify in the range starting with <span class="emphasis"><em>START_IP</em></span> and ending with <span class="emphasis"><em>END_IP</em></span> must be within the block of IP addresses specified by NETWORK_CIDR.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>GATEWAY_IP</em></span> with the IP address or host name of the router interface that acts as the gateway for the new subnet. This address must be within the block of IP addresses specified by <span class="emphasis"><em>NETWORK_CIDR</em></span>, but outside of the block of IP addresses specified by the range starting with <span class="emphasis"><em>START_IP</em></span> and ending with <span class="emphasis"><em>END_IP</em></span>.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>START_IP</em></span> with the IP address that denotes the start of the range of IP addresses within the new subnet from which floating IP addresses will be allocated.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>END_IP</em></span> with the IP address that denotes the end of the range of IP addresses within the new subnet from which floating IP addresses will be allocated.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Create a router for the network and subnet to ensure that the OpenStack Networking Service serves metadata requests:
						</p><pre class="screen">$ openstack router create ROUTER_NAME</pre><p class="simpara">
							Replace <code class="literal">ROUTER_NAME</code> with a name for the router.
						</p></li><li class="listitem"><p class="simpara">
							Attach the subnet to the new router:
						</p><pre class="screen">$ openstack router add subnet <span class="emphasis"><em>ROUTER_NAME</em></span> <span class="emphasis"><em>BAREMETAL_SUBNET</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>ROUTER_NAME</em></span> with the name of your router and <span class="emphasis"><em>BAREMETAL_SUBNET</em></span> with the ID or name of the subnet that you created previously. This allows the metadata requests from <code class="literal">cloud-init</code> to be served and the node configured.
						</p></li></ol></div></section><section class="section" id="configuring_openstack_networking_to_communicate_with_the_bare_metal_provisioning_service_on_a_custom_composable_bare_metal_network"><div class="titlepage"><div><div><h3 class="title">4.1.2. Configuring OpenStack Networking to communicate with the Bare Metal Provisioning service on a custom composable bare metal network</h3></div></div></div><p>
					Perform all steps in the following procedure as the <code class="literal">root</code> user on the server that hosts the OpenStack Networking service.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a vlan network with a VlanID that matches the <code class="literal">OcProvisioning</code> network that you create during deployment. Name the new network <code class="literal">provisioning</code> to match the default name of the cleaning network.
						</p><pre class="screen">(overcloud) [stack@host01 ~]$ openstack network create \
  --share \
  --provider-network-type vlan \
  --provider-physical-network datacentre \
  --provider-segment 205 provisioning</pre><p class="simpara">
							If the name of the overcloud network is not <code class="literal">provisioning</code>, log in to the controller and run the following commands to rename and restart the network:
						</p><pre class="screen">heat-admin@overcloud-controller-0 ~]$ sudo vi /var/lib/config-data/puppet-generated/ironic/etc/ironic/ironic.conf</pre><pre class="screen">heat-admin@overcloud-controller-0 ~]$ sudo podman restart ironic_conductor</pre></li></ol></div></section></section><section class="section" id="configuring_node_cleaning"><div class="titlepage"><div><div><h2 class="title">4.2. Configuring node cleaning</h2></div></div></div><p>
				By default, the Bare Metal Provisioning service uses a network named <code class="literal">provisioning</code> for node cleaning. However, network names are not unique in OpenStack Networking, so it is possible for a tenant to create a network with the same name, which causes a conflict with the Bare Metal Provisioning service. To avoid the conflict, use the network UUID instead.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To configure node cleaning, provide the provider network UUID on the Controller that hosts the Bare Metal Provisioning service:
					</p><p class="simpara">
						<code class="literal">~/templates/ironic.yaml</code>
					</p><pre class="screen">parameter_defaults:
    IronicCleaningNetwork: <span class="emphasis"><em>UUID</em></span></pre><p class="simpara">
						Replace <span class="emphasis"><em>UUID</em></span> with the UUID of the bare metal network that you create in the previous steps.
					</p><p class="simpara">
						You can find the UUID with the <code class="literal">openstack network show</code> command:
					</p><pre class="screen">openstack network show <span class="emphasis"><em>NETWORK_NAME</em></span> -f value -c id</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must perform this configuration after the initial overcloud deployment, because the UUID for the network is not available beforehand.
						</p></div></div></li><li class="listitem">
						To apply the changes, redeploy the overcloud with the <code class="literal">openstack overcloud deploy</code>. For more information about the deployment command, see <a class="xref" href="index.html#sect-deploying-the-overcloud" title="3.6. Deploying the overcloud">Section 3.6, “Deploying the overcloud”</a>.
					</li><li class="listitem"><p class="simpara">
						Uncomment the following line and replace <code class="literal">&lt;None&gt;</code> with the UUID of the bare metal network:
					</p><pre class="screen">cleaning_network = &lt;None&gt;</pre></li><li class="listitem"><p class="simpara">
						Restart the Bare Metal Provisioning service:
					</p><pre class="screen"># systemctl restart openstack-ironic-conductor.service</pre></li></ol></div><p>
				Redeploying the overcloud with <code class="literal">openstack overcloud deploy</code> reverts any manual changes, so ensure that you have added the cleaning configuration to <code class="literal">~/templates/ironic.yaml</code> before you next use the <code class="literal">openstack overcloud deploy</code> command.
			</p><section class="section" id="manual_node_cleaning"><div class="titlepage"><div><div><h3 class="title">4.2.1. Manual node cleaning</h3></div></div></div><p>
					To initiate node cleaning manually, the node must be in the <code class="literal">manageable</code> state.
				</p><p>
					Node cleaning has two modes:
				</p><p>
					<span class="strong strong"><strong>Metadata only clean</strong></span> - Removes partitions from all disks on a given node. This is a faster clean cycle, but less secure because it erases only partition tables. Use this mode only on trusted tenant environments.
				</p><p>
					<span class="strong strong"><strong>Full clean</strong></span> - Removes all data from all disks, using either ATA secure erase or by shredding. This can take several hours to complete.
				</p><p>
					To initiate a <code class="literal">metadata</code> clean:
				</p><pre class="screen">$ openstack baremetal node clean _UUID_ \
    --clean-steps '[{"interface": "deploy", "step": "erase_devices_metadata"}]'</pre><p>
					To initiate a <code class="literal">full</code> clean:
				</p><pre class="screen">$ openstack baremetal node clean _UUID_ \
    --clean-steps '[{"interface": "deploy", "step": "erase_devices"}]'</pre><p>
					Replace <span class="emphasis"><em>UUID</em></span> with the UUID of the node that you want to clean.
				</p><p>
					After a successful cleaning, the node state returns to <code class="literal">manageable</code>. If the state is <code class="literal">clean failed</code>, inspect the <code class="literal">last_error</code> field for the cause of failure.
				</p></section></section><section class="section" id="creating_the_bare_metal_flavor"><div class="titlepage"><div><div><h2 class="title">4.3. Creating the bare metal flavor</h2></div></div></div><p>
				You must create a flavor to use as a part of the deployment. The specifications (memory, CPU, and disk) of this flavor must be equal to or less than the hardware specifications of your bare metal node.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the shell to access Identity as the administrative user:
					</p><pre class="screen">$ source ~/overcloudrc</pre></li><li class="listitem"><p class="simpara">
						List existing flavors:
					</p><pre class="screen">$ openstack flavor list</pre></li><li class="listitem"><p class="simpara">
						Create a new flavor for the Bare Metal Provisioning service:
					</p><pre class="screen">$ openstack flavor create \
  --id auto --ram <span class="emphasis"><em>RAM</em></span> \
  --vcpus <span class="emphasis"><em>VCPU</em></span> --disk <span class="emphasis"><em>DISK</em></span> \
  --property baremetal=true \
  --public baremetal</pre><p class="simpara">
						Replace <code class="literal">RAM</code> with the amount of memory, <code class="literal">VCPU</code> with the number of vCPUs and <code class="literal">DISK</code> with the disk storage value. Include the property <code class="literal">baremetal</code> to distinguish bare metal from virtual instances.
					</p></li><li class="listitem"><p class="simpara">
						Verify that the new flavor has the correct values:
					</p><pre class="screen">$ openstack flavor list</pre></li></ol></div></section><section class="section" id="creating_the_bare_metal_images"><div class="titlepage"><div><div><h2 class="title">4.4. Creating the bare metal images</h2></div></div></div><p>
				The deployment requires two sets of images:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The <span class="strong strong"><strong>deploy image</strong></span></span></dt><dd>
							The Bare Metal Provisioning service uses the deploy image to boot the bare metal node and copy a user image onto the bare metal node. The deploy image consists of the <code class="literal">kernel</code> image and the <code class="literal">ramdisk</code> image.
						</dd><dt><span class="term">The <span class="strong strong"><strong>user image</strong></span></span></dt><dd><p class="simpara">
							The user image is the image that you deploy onto the bare metal node. The user image also has a <code class="literal">kernel</code> image and <code class="literal">ramdisk</code> image, but additionally, the user image contains a <code class="literal">main</code> image. The main image is either a root partition, or a whole-disk image.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A <span class="strong strong"><strong>whole-disk image</strong></span> is an image that contains the partition table and boot loader. The Bare Metal Provisioning service does not control the subsequent reboot of a node deployed with a whole-disk image as the node supports localboot.
								</li><li class="listitem">
									A <span class="strong strong"><strong>root partition image</strong></span> contains only the root partition of the operating system. If you use a root partition, after the deploy image is loaded into the Image service, you can set the deploy image as the node boot image in the node properties. A subsequent reboot of the node uses netboot to pull down the user image.
								</li></ul></div></dd></dl></div><p>
				The examples in this section use a root partition image to provision bare metal nodes.
			</p><section class="section" id="preparing_the_deploy_images"><div class="titlepage"><div><div><h3 class="title">4.4.1. Preparing the deploy images</h3></div></div></div><p>
					You do not have to create the deploy image because it was already created when the overcloud was deployed by the undercloud. The deploy image consists of two images - the kernel image and the ramdisk image:
				</p><pre class="screen">/tftpboot/agent.kernel
/tftpboot/agent.ramdisk</pre><p>
					These images are often in the home directory, unless you have deleted them, or unpacked them elsewhere. If they are not in the home directory, and you still have the <code class="literal">rhosp-director-images-ipa</code> package installed, these images are in the <code class="literal">/usr/share/rhosp-director-images/ironic-python-agent*.tar</code> file.
				</p><p>
					Extract the images and upload them to the Image service:
				</p><pre class="screen">$ openstack image create \
  --container-format aki \
  --disk-format aki \
  --public \
  --file ./tftpboot/agent.kernel bm-deploy-kernel
$ openstack image create \
  --container-format ari \
  --disk-format ari \
  --public \
  --file ./tftpboot/agent.ramdisk bm-deploy-ramdisk</pre></section><section class="section" id="preparing_the_user_image"><div class="titlepage"><div><div><h3 class="title">4.4.2. Preparing the user image</h3></div></div></div><p>
					The final image that you need is the user image that you deploy onto the bare metal node. User images also have a kernel and ramdisk, along with a main image. To download and install these packages, you must first configure whole disk image environment variables to suit your requirements.
				</p></section><section class="section" id="disk-image-environment-variables"><div class="titlepage"><div><div><h3 class="title">4.4.3. Disk image environment variables</h3></div></div></div><p>
					As a part of the disk image building process, the director requires a base image and registration details to obtain packages for the new overcloud image. Define these attributes with the following Linux environment variables.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The image building process temporarily registers the image with a Red Hat subscription and unregisters the system when the image building process completes.
					</p></div></div><p>
					To build a disk image, set Linux environment variables that suit your environment and requirements:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">DIB_LOCAL_IMAGE</span></dt><dd>
								Sets the local image that you want to use as the basis for your whole disk image.
							</dd><dt><span class="term">REG_ACTIVATION_KEY</span></dt><dd>
								Use an activation key instead of login details as part of the registration process.
							</dd><dt><span class="term">REG_AUTO_ATTACH</span></dt><dd>
								Defines whether to attach the most compatible subscription automatically.
							</dd><dt><span class="term">REG_BASE_URL</span></dt><dd>
								The base URL of the content delivery server that contains packages for the image. The default Customer Portal Subscription Management process uses <code class="literal">https://cdn.redhat.com</code>. If you use a Red Hat Satellite 6 server, set this parameter to the base URL of your Satellite server.
							</dd><dt><span class="term">REG_ENVIRONMENT</span></dt><dd>
								Registers to an environment within an organization.
							</dd><dt><span class="term">REG_METHOD</span></dt><dd>
								Sets the method of registration. Use <code class="literal">portal</code> to register a system to the Red Hat Customer Portal. Use <code class="literal">satellite</code> to register a system with Red Hat Satellite 6.
							</dd><dt><span class="term">REG_ORG</span></dt><dd>
								The organization where you want to register the images.
							</dd><dt><span class="term">REG_POOL_ID</span></dt><dd>
								The pool ID of the product subscription information.
							</dd><dt><span class="term">REG_PASSWORD</span></dt><dd>
								Sets the password for the user account that registers the image.
							</dd><dt><span class="term">REG_REPOS</span></dt><dd>
								A comma-separated string of repository names. Each repository in this string is enabled through <code class="literal">subscription-manager</code>.
							</dd><dt><span class="term">REG_SAT_URL</span></dt><dd>
								The base URL of the Satellite server to register overcloud nodes. Use the Satellite HTTP URL and not the HTTPS URL for this parameter. For example, use <a class="link" href="http://satellite.example.com">http://satellite.example.com</a> and not <a class="link" href="https://satellite.example.com">https://satellite.example.com</a>.
							</dd><dt><span class="term">REG_SERVER_URL</span></dt><dd>
								Sets the host name of the subscription service to use. The default host name is for the Red Hat Customer Portal at <code class="literal">subscription.rhn.redhat.com</code>. If you use a Red Hat Satellite 6 server, set this parameter to the host name of your Satellite server.
							</dd><dt><span class="term">REG_USER</span></dt><dd>
								Sets the user name for the account that registers the image.
							</dd></dl></div></section><section class="section" id="installing_the_user_image"><div class="titlepage"><div><div><h3 class="title">4.4.4. Installing the user image</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Download the Red Hat Enterprise Linux KVM guest image from the <a class="link" href="https://access.redhat.com/downloads/content/479">Customer Portal</a>.
						</li><li class="listitem"><p class="simpara">
							Define <code class="literal">DIB_LOCAL_IMAGE</code> as the downloaded image:
						</p><pre class="screen">$ export DIB_LOCAL_IMAGE=rhel-8.0-x86_64-kvm.qcow2</pre></li><li class="listitem"><p class="simpara">
							Set your registration information. If you use Red Hat Customer Portal, you must configure the following information:
						</p><pre class="screen">$ export REG_USER='USER_NAME'
$ export REG_PASSWORD='PASSWORD'
$ export REG_AUTO_ATTACH=true
$ export REG_METHOD=portal
$ export https_proxy='IP_address:port' (if applicable)
$ export http_proxy='IP_address:port' (if applicable)</pre><p class="simpara">
							If you use Red Hat Satellite, you must configure the following information:
						</p><pre class="screen">$ export REG_USER='USER_NAME'
$ export REG_PASSWORD='PASSWORD'
$ export REG_SAT_URL='&lt;SATELLITE URL&gt;'
$ export REG_ORG='&lt;SATELLITE ORG&gt;'
$ export REG_ENV='&lt;SATELLITE ENV&gt;'
$ export REG_METHOD=&lt;METHOD&gt;</pre><p class="simpara">
							If you have any offline repositories, you can define DIB_YUM_REPO_CONF as local repository configuration:
						</p><pre class="screen">$ export DIB_YUM_REPO_CONF=&lt;path-to-local-repository-config-file&gt;</pre></li><li class="listitem"><p class="simpara">
							Create the user images with the <code class="literal">diskimage-builder</code> tool:
						</p><pre class="screen">$ disk-image-create rhel8 baremetal -o rhel-image</pre><p class="simpara">
							This command extracts the kernel as <code class="literal">rhel-image.vmlinuz</code> and initial ramdisk as <code class="literal">rhel-image.initrd</code>.
						</p></li><li class="listitem"><p class="simpara">
							Upload the images to the Image service:
						</p><pre class="screen">$ KERNEL_ID=$(openstack image create \
  --file rhel-image.vmlinuz --public \
  --container-format aki --disk-format aki \
  -f value -c id rhel-image.vmlinuz)
$ RAMDISK_ID=$(openstack image create \
  --file rhel-image.initrd --public \
  --container-format ari --disk-format ari \
  -f value -c id rhel-image.initrd)
$ openstack image create \
  --file rhel-image.qcow2   --public \
  --container-format bare \
  --disk-format qcow2 \
  --property kernel_id=$KERNEL_ID \
  --property ramdisk_id=$RAMDISK_ID \
  rhel-image</pre></li></ol></div></section></section><section class="section" id="configuring_deploy_interfaces"><div class="titlepage"><div><div><h2 class="title">4.5. Configuring deploy interfaces</h2></div></div></div><p>
				When you provision bare metal nodes, the Bare Metal Provisioning service (ironic) on the overcloud writes a base operating system image to the disk on the bare metal node. By default, the deploy interface mounts the image on an iSCSI mount and then copies the image to disk on each node. Alternatively, you can use direct deploy, which writes disk images from a HTTP location directly to disk on bare metal nodes.
			</p><section class="section" id="understanding-deploy-interfaces"><div class="titlepage"><div><div><h3 class="title">4.5.1. Understanding the deploy process</h3></div></div></div><p>
					Deploy interfaces have a critical role in the provisioning process. Deploy interfaces orchestrate the deployment and define the mechanism for transferring the image to the target disk.
				</p><h5 id="prerequisites">Prerequisites</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Dependent packages configured on the bare metal service nodes that run <code class="literal">ironic-conductor</code>.
						</li><li class="listitem">
							Configure OpenStack Compute (nova) to use the bare metal service endpoint.
						</li><li class="listitem">
							Create flavors for the available hardware, and nova must boot the new node from the correct flavor.
						</li><li class="listitem"><p class="simpara">
							Images must be available in the Image service (glance):
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									bm-deploy-kernel
								</li><li class="listitem">
									bm-deploy-ramdisk
								</li><li class="listitem">
									user-image
								</li><li class="listitem">
									user-image-vmlinuz
								</li><li class="listitem">
									user-image-initrd
								</li></ul></div></li><li class="listitem">
							Hardware to enroll with the Ironic API service.
						</li></ul></div><h5 id="workflow">Workflow</h5><p>
					Use the following example workflow to understand the standard deploy process. Depending on the ironic driver interfaces that you use, some of the steps might differ:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							The Nova scheduler receives a boot instance request from the Nova API.
						</li><li class="listitem">
							The Nova scheduler identifies the relevant hypervisor and identifies the target physical node.
						</li><li class="listitem">
							The Nova compute manager claims the resources of the selected hypervisor.
						</li><li class="listitem">
							The Nova compute manager creates unbound tenant virtual interfaces (VIFs) in the Networking service according to the network interfaces that the nova boot request specifies.
						</li><li class="listitem"><p class="simpara">
							Nova compute invokes <code class="literal">driver.spawn</code> from the Nova compute virt layer to create a spawn task that contains all of the necessary information. During the spawn process, the virt driver completes the following steps.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Updates the target ironic node with information about the deploy image, instance UUID, requested capabilities, and flavor properties.
								</li><li class="listitem">
									Calls the ironic API to validate the power and deploy interfaces of the target node.
								</li><li class="listitem">
									Attaches the VIFs to the node. Each neutron port can be attached to any ironic port or group. Port groups have higher priority than ports.
								</li><li class="listitem">
									Generates config drive.
								</li></ol></div></li><li class="listitem">
							The Nova ironic virt driver issues a deploy request with the Ironic API to the Ironic conductor that services the bare metal node.
						</li><li class="listitem">
							Virtual interfaces are plugged in and the Neutron API updates DHCP to configure PXE/TFTP options.
						</li><li class="listitem">
							The ironic node boot interface prepares (i)PXE configuration and caches the deploy kernel and ramdisk.
						</li><li class="listitem">
							The ironic node management interface issues commands to enable network boot of the node.
						</li><li class="listitem">
							The ironic node deploy interface caches the instance image, kernel, and ramdisk, if necessary.
						</li><li class="listitem">
							The ironic node power interface instructs the node to power on.
						</li><li class="listitem">
							The node boots the deploy ramdisk.
						</li><li class="listitem">
							With iSCSI deployment, the conductor copies the image over iSCSI to the physical node. With direct deployment, the deploy ramdisk downloads the image from a temporary URL. This URL must be a Swift API compatible object store or a HTTP URL.
						</li><li class="listitem">
							The node boot interface switches PXE configuration to refer to instance images and instructs the ramdisk agent to soft power off the node. If the soft power off fails, the bare metal node is powered off with IPMI/BMC.
						</li><li class="listitem">
							The deploy interface instructs the network interface to remove any provisioning ports, binds the tenant ports to the node, and powers the node on.
						</li></ol></div><p>
					The provisioning state of the new bare metal node is now <code class="literal">active</code>.
				</p></section><section class="section" id="configuring-direct-deploy-on-the-overcloud"><div class="titlepage"><div><div><h3 class="title">4.5.2. Configuring the direct deploy interface on the overcloud</h3></div></div></div><p>
					The iSCSI deploy interface is the default deploy interface. However, you can enable the direct deploy interface to download an image from a HTTP location to the target disk.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Your overcloud node memory <code class="literal">tmpfs</code> must have at least 8GB of RAM.
					</p></div></div><h5 id="procedure">Procedure</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create or modify a custom environment file <code class="literal">/home/stack/templates/direct_deploy.yaml</code> and specify the <code class="literal">IronicEnabledDeployInterfaces</code> and the <code class="literal">IronicDefaultDeployInterface</code> parameters.
						</p><pre class="screen">parameter_defaults:
  IronicEnabledDeployInterfaces: direct
  IronicDefaultDeployInterface: direct</pre><p class="simpara">
							If you register your nodes with iscsi, retain the <code class="literal">iscsi</code> value in the <code class="literal">IronicEnabledDeployInterfaces</code> parameter:
						</p><pre class="screen">parameter_defaults:
  IronicEnabledDeployInterfaces: direct,iscsi
  IronicDefaultDeployInterface: direct</pre></li><li class="listitem"><p class="simpara">
							By default, the Bare Metal Provisioning service (ironic) agent on each node obtains the image stored in the Object Storage Service (swift) through a HTTP link. Alternatively, ironic can stream this image directly to the node through the <code class="literal">ironic-conductor</code> HTTP server. To change the service that provides the image, set the <code class="literal">IronicImageDownloadSource</code> to <code class="literal">http</code> in the <code class="literal">/home/stack/templates/direct_deploy.yaml</code> file:
						</p><pre class="screen">parameter_defaults:
  IronicEnabledDeployInterfaces: direct
  IronicDefaultDeployInterface: direct
  IronicImageDownloadSource: http</pre></li><li class="listitem"><p class="simpara">
							Include the custom environment with your overcloud deployment:
						</p><pre class="screen">$ openstack overcloud deploy \
  --templates \
  ...
  -e /usr/share/openstack-tripleo-heat-templates/environments/services/ironic.yaml \
  -e /home/stack/templates/direct_deploy.yaml \
  ...</pre><p class="simpara">
							Wait until deployment completes.
						</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you did not specify <code class="literal">IronicDefaultDeployInterface</code> or want to use a different deploy interface, specify the deploy interface when you create or update a node:
					</p><pre class="screen">$ openstack baremetal node create --driver ipmi --deploy-interface direct
$ openstack baremetal node set &lt;NODE&gt; --deploy-interface direct</pre></div></div></section></section><section class="section" id="adding_physical_machines_as_bare_metal_nodes"><div class="titlepage"><div><div><h2 class="title">4.6. Adding physical machines as bare metal nodes</h2></div></div></div><p>
				There are two methods to enroll a bare metal node:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Prepare an inventory file with the node details, import the file into the Bare Metal Provisioning service, and make the nodes available.
					</li><li class="listitem">
						Register a physical machine as a bare metal node, then manually add its hardware details and create ports for each of its Ethernet MAC addresses. You can perform these steps on any node that has your <code class="literal">overcloudrc</code> file.
					</li></ol></div><p>
				After you enroll the physical machines, Compute is not immediately notified of new resources, because the Compute resource tracker synchronizes periodically. You can view changes after the next periodic task runs. You can update the frequency of the periodic task with the <code class="literal">scheduler_driver_task_period</code>, in the <code class="literal">/etc/nova/nova.conf</code> file. The default period is 60 seconds.
			</p><section class="section" id="enrolling_a_bare_metal_node_with_an_inventory_file"><div class="titlepage"><div><div><h3 class="title">4.6.1. Enrolling a bare metal node with an inventory file</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a file <code class="literal">overcloud-nodes.yaml</code>, that includes the node details. You can enroll multiple nodes with one file.
						</p><pre class="screen">nodes:
    - name: node0
      driver: ipmi
      driver_info:
        ipmi_address: &lt;IPMI_IP&gt;
        ipmi_username: &lt;USER&gt;
        ipmi_password: &lt;PASSWORD&gt;
      properties:
        cpus: &lt;CPU_COUNT&gt;
        cpu_arch: &lt;CPU_ARCHITECTURE&gt;
        memory_mb: &lt;MEMORY&gt;
        local_gb: &lt;ROOT_DISK&gt;
        root_device:
            serial: &lt;SERIAL&gt;
      ports:
        - address: &lt;PXE_NIC_MAC&gt;</pre><p class="simpara">
							Replace the following values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">&lt;IPMI_IP&gt;</code> with the address of the Bare Metal controller.
								</li><li class="listitem">
									<code class="literal">&lt;USER&gt;</code> with your username.
								</li><li class="listitem">
									<code class="literal">&lt;PASSWORD&gt;</code> with your password.
								</li><li class="listitem">
									<code class="literal">&lt;CPU_COUNT&gt;</code> with the number of CPUs.
								</li><li class="listitem">
									<code class="literal">&lt;CPU_ARCHITECTURE&gt;</code> with the type of architecture of the CPUs.
								</li><li class="listitem">
									<code class="literal">&lt;MEMORY&gt;</code> with the amount of memory in MiB.
								</li><li class="listitem">
									<code class="literal">&lt;ROOT_DISK&gt;</code> with the size of the root disk in GiB.
								</li><li class="listitem"><p class="simpara">
									<code class="literal">&lt;MAC_ADDRESS&gt;</code> with the MAC address of the NIC used to PXE boot.
								</p><p class="simpara">
									You must include <code class="literal">root_device</code> only if the machine has multiple disks. Replace <code class="literal">&lt;SERIAL&gt;</code> with the serial number of the disk that you want to use for deployment.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Configure the shell to use Identity as the administrative user:
						</p><pre class="screen">$ source ~/overcloudrc</pre></li><li class="listitem"><p class="simpara">
							Import the inventory file into ironic:
						</p><pre class="screen">$ openstack baremetal create overcloud-nodes.yaml</pre><p class="simpara">
							The nodes are now in the <code class="literal">enroll</code> state.
						</p></li><li class="listitem"><p class="simpara">
							Specify the deploy kernel and deploy ramdisk on each node:
						</p><pre class="screen">$ openstack baremetal node set <span class="emphasis"><em>NODE_UUID</em></span> \
  --driver-info deploy_kernel=<span class="emphasis"><em>KERNEL_UUID</em></span> \
  --driver-info deploy_ramdisk=<span class="emphasis"><em>INITRAMFS_UUID</em></span></pre><p class="simpara">
							Replace the following values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em>NODE_UUID</em></span> with the unique identifier for the node. Alternatively, use the logical name of the node.
								</li><li class="listitem"><p class="simpara">
									Replace <span class="emphasis"><em>KERNEL_UUID</em></span> with the unique identifier for the kernel deploy image that was uploaded to the Image service. Find this value with the following command:
								</p><pre class="screen">$ openstack image show bm-deploy-kernel -f value -c id</pre></li><li class="listitem"><p class="simpara">
									Replace <span class="emphasis"><em>INITRAMFS_UUID</em></span> with the unique identifier for the ramdisk image that was uploaded to the Image service. Find this value with the following command:
								</p><pre class="screen">$ openstack image show bm-deploy-ramdisk -f value -c id</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Set the provisioning state of the node to <code class="literal">available</code>:
						</p><pre class="screen">$ openstack baremetal node manage _NODE_UUID_
$ openstack baremetal node provide _NODE_UUID_</pre><p class="simpara">
							The Bare Metal Provisioning service cleans the node if you enabled node cleaning,
						</p></li><li class="listitem"><p class="simpara">
							Check that the nodes were successfully enrolled:
						</p><pre class="screen">$ openstack baremetal node list</pre><p class="simpara">
							There might be a delay between enrolling a node and its state being shown.
						</p></li></ol></div></section><section class="section" id="enrolling_a_bare_metal_node_manually"><div class="titlepage"><div><div><h3 class="title">4.6.2. Enrolling a bare metal node manually</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the shell to use Identity as the administrative user:
						</p><pre class="screen">$ source ~/overcloudrc</pre></li><li class="listitem"><p class="simpara">
							Add a new node:
						</p><pre class="screen">$ openstack baremetal node create --driver ipmi --name <span class="emphasis"><em>NAME</em></span></pre><p class="simpara">
							To create a node, you must specify the driver name. This example uses <code class="literal">ipmi</code>. To use a different driver, you must enable the driver by setting the <code class="literal">IronicEnabledDrivers</code> parameter. For more information about supported drivers, see <a class="xref" href="index.html#sect-appendix-drivers" title="Appendix A. Bare metal drivers">Appendix A, <em>Bare metal drivers</em></a>.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Note the unique identifier for the node.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Update the node driver information to allow the Bare Metal Provisioning service to manage the node:
						</p><pre class="screen">$ openstack baremetal node set <span class="emphasis"><em>NODE_UUID</em></span> \
  --driver_info <span class="emphasis"><em>PROPERTY</em></span>=<span class="emphasis"><em>VALUE</em></span> \
  --driver_info <span class="emphasis"><em>PROPERTY</em></span>=<span class="emphasis"><em>VALUE</em></span></pre><p class="simpara">
							Replace the following values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em>NODE_UUID</em></span> with the unique identifier for the node. Alternatively, use the logical name of the node.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>PROPERTY</em></span> with a required property that the <code class="literal">ironic driver-properties</code> command returns.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>VALUE</em></span> with a valid value for that property.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Specify the deploy kernel and deploy ramdisk for the node driver:
						</p><pre class="screen">$ openstack baremetal node set <span class="emphasis"><em>NODE_UUID</em></span> \
  --driver-info deploy_kernel=<span class="emphasis"><em>KERNEL_UUID</em></span> \
  --driver-info deploy_ramdisk=<span class="emphasis"><em>INITRAMFS_UUID</em></span></pre><p class="simpara">
							Replace the following values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em>NODE_UUID</em></span> with the unique identifier for the node. Alternatively, use the logical name of the node.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>KERNEL_UUID</em></span> with the unique identifier for the <code class="literal">.kernel</code> image that was uploaded to the Image service.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>INITRAMFS_UUID</em></span> with the unique identifier for the <code class="literal">.initramfs</code> image that was uploaded to the Image service.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Update the node properties to match the hardware specifications on the node:
						</p><pre class="screen">$ openstack baremetal node set <span class="emphasis"><em>NODE_UUID</em></span> \
  --property cpus=<span class="emphasis"><em>CPU</em></span> \
  --property memory_mb=<span class="emphasis"><em>RAM_MB</em></span> \
  --property local_gb=<span class="emphasis"><em>DISK_GB</em></span> \
  --property cpu_arch=<span class="emphasis"><em>ARCH</em></span></pre><p class="simpara">
							Replace the following values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em>NODE_UUID</em></span> with the unique identifier for the node. Alternatively, use the node’s logical name.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>CPU</em></span> with the number of CPUs.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>RAM_MB</em></span> with the RAM (in MB).
								</li><li class="listitem">
									Replace <span class="emphasis"><em>DISK_GB</em></span> with the disk size (in GB).
								</li><li class="listitem">
									Replace <span class="emphasis"><em>ARCH</em></span> with the architecture type.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Optional: Configure the node to reboot after initial deployment from a local boot loader that is installed on the node’s disk, instead of using PXE from <code class="literal">ironic-conductor</code>. You must also set the local boot capability on the flavor that you used to provision the node. To enable local boot, the image that you used to deploy the node must contain <code class="literal">grub2</code>. Run the following command to configure local boot:
						</p><pre class="screen">$ openstack baremetal node set <span class="emphasis"><em>NODE_UUID</em></span> \
  --property capabilities="boot_option:local"</pre><p class="simpara">
							Replace <span class="emphasis"><em>NODE_UUID</em></span> with the unique identifier for the node. Alternatively, use the logical name of the node.
						</p></li><li class="listitem"><p class="simpara">
							Inform the Bare Metal Provisioning service of the node network card by creating a port with the MAC address of the NIC on the provisioning network:
						</p><pre class="screen">$ openstack baremetal port create --node <span class="emphasis"><em>NODE_UUID</em></span> <span class="emphasis"><em>MAC_ADDRESS</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>NODE_UUID</em></span> with the unique identifier for the node. Replace <span class="emphasis"><em>MAC_ADDRESS</em></span> with the MAC address of the NIC used to PXE boot.
						</p></li><li class="listitem"><p class="simpara">
							If you have multiple disks, set the root device hints. This informs the deploy ramdisk which disk to use for deployment.
						</p><pre class="screen">$ openstack baremetal node set <span class="emphasis"><em>NODE_UUID</em></span> \
  --property root_device=<span class="emphasis"><em>{"<span class="emphasis"><em>PROPERTY</em></span>": "<span class="emphasis"><em>VALUE</em></span>"}</em></span></pre><p class="simpara">
							Replace the following values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em>NODE_UUID</em></span> with the unique identifier for the node. Alternatively, use the logical name of the node.
								</li><li class="listitem"><p class="simpara">
									Replace PROPERTY and VALUE with details about the disk that you want to use for deployment, for example <code class="literal">root_device='{"size": 128}'</code>
								</p><p class="simpara">
									The following properties are supported:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<code class="literal">model</code> (String): Device identifier.
										</li><li class="listitem">
											<code class="literal">vendor</code> (String): Device vendor.
										</li><li class="listitem">
											<code class="literal">serial</code> (String): Disk serial number.
										</li><li class="listitem">
											<code class="literal">hctl</code> (String): Host:Channel:Target:Lun for SCSI.
										</li><li class="listitem">
											<code class="literal">size</code> (Integer): Size of the device in GB.
										</li><li class="listitem">
											<code class="literal">wwn</code> (String): Unique storage identifier.
										</li><li class="listitem">
											<code class="literal">wwn_with_extension</code> (String): Unique storage identifier with the vendor extension appended.
										</li><li class="listitem">
											<code class="literal">wwn_vendor_extension</code> (String): Unique vendor storage identifier.
										</li><li class="listitem">
											<code class="literal">rotational</code> (Boolean): True for a rotational device (HDD), otherwise false (SSD).
										</li><li class="listitem"><p class="simpara">
											<code class="literal">name</code> (String): The name of the device, for example: /dev/sdb1 Use this property only for devices with persistent names.
										</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
												If you specify more than one property, the device must match all of those properties.
											</p></div></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Validate the configuration of the node:
						</p><pre class="screen">$ openstack baremetal node validate <span class="emphasis"><em>NODE_UUID</em></span>
+------------+--------+---------------------------------------------+
| Interface  | Result | Reason                                      |
+------------+--------+---------------------------------------------+
| boot       | False  | Cannot validate image information for node  |
|            |        | a02178db-1550-4244-a2b7-d7035c743a9b        |
|            |        | because one or more parameters are missing  |
|            |        | from its instance_info. Missing are:        |
|            |        | ['ramdisk', 'kernel', 'image_source']       |
| console    | None   | not supported                               |
| deploy     | False  | Cannot validate image information for node  |
|            |        | a02178db-1550-4244-a2b7-d7035c743a9b        |
|            |        | because one or more parameters are missing  |
|            |        | from its instance_info. Missing are:        |
|            |        | ['ramdisk', 'kernel', 'image_source']       |
| inspect    | None   | not supported                               |
| management | True   |                                             |
| network    | True   |                                             |
| power      | True   |                                             |
| raid       | True   |                                             |
| storage    | True   |                                             |
+------------+--------+---------------------------------------------+</pre><p class="simpara">
							Replace <span class="emphasis"><em>NODE_UUID</em></span> with the unique identifier for the node. Alternatively, use the logical name of the node. The output of the <code class="literal">openstack baremetal node validate</code> command reports either <code class="literal">True</code> or <code class="literal">None</code> for each interface. Interfaces marked <code class="literal">None</code> are those that you have not configured, or those that are not supported for your driver.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Interfaces might fail validation due to missing 'ramdisk', 'kernel', and 'image_source' parameters. This result is because the Compute service populates those missing parameters at the beginning of the deployment process.
							</p></div></div></li></ol></div></section></section><section class="section" id="configuring-redfish-virtual-media-boot"><div class="titlepage"><div><div><h2 class="title">4.7. Configuring Redfish virtual media boot</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
				</p></div></div><p>
				You can use Redfish virtual media boot to supply a boot image to the Baseboard Management Controller (BMC) of a node so that the BMC can insert the image into one of the virtual drives. The node can then boot from the virtual drive into the operating system that exists in the image.
			</p><p>
				Redfish hardware types support booting deploy, rescue, and user images over virtual media. The Bare Metal Provisioning service (ironic) uses kernel and ramdisk images associated with a node to build bootable ISO images for UEFI or BIOS boot modes at the moment of node deployment. The major advantage of virtual media boot is that you can eliminate the TFTP image transfer phase of PXE and use HTTP GET, or other methods, instead.
			</p><section class="section" id="deploying-a-bare-metal-server-with-redfish-virtual-media-boot_configuring-redfish-virtual-media-boot"><div class="titlepage"><div><div><h3 class="title">4.7.1. Deploying a bare metal server with Redfish virtual media boot</h3></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
					</p></div></div><p>
					To boot a node with the <code class="literal">redfish</code> hardware type over virtual media, set the boot interface to <code class="literal">redfish-virtual-media</code> and, for UEFI nodes, define the EFI System Partition (ESP) image. Then configure an enrolled node to use Redfish virtual media boot.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Redfish driver enabled in the <code class="literal">enabled_hardware_types</code> parameter in the <code class="literal">undercloud.conf</code> file.
						</li><li class="listitem">
							A bare metal node registered and enrolled.
						</li><li class="listitem">
							IPA and instance images in the Image Service (glance).
						</li><li class="listitem">
							For UEFI nodes, you must also have an EFI system partition image (ESP) available in the Image Service (glance).
						</li><li class="listitem">
							A bare metal flavor.
						</li><li class="listitem">
							A network for cleaning and provisioning.
						</li><li class="listitem"><p class="simpara">
							Sushy library installed:
						</p><pre class="screen">$ sudo yum install sushy</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the Bare Metal service (ironic) boot interface to <code class="literal">redfish-virtual-media</code>:
						</p><pre class="screen">$ openstack baremetal node set --boot-interface redfish-virtual-media $NODE_NAME</pre><p class="simpara">
							Replace <code class="literal">$NODE_NAME</code> with the name of the node.
						</p></li><li class="listitem"><p class="simpara">
							For UEFI nodes, set the boot mode to <code class="literal">uefi</code>:
						</p><pre class="screen">$ openstack baremetal node set --property capabilities="boot_mode:uefi" $NODE_NAME</pre><p class="simpara">
							Replace <code class="literal">$NODE_NAME</code> with the name of the node.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								For BIOS nodes, do not complete this step.
							</p></div></div></li><li class="listitem"><p class="simpara">
							For UEFI nodes, define the EFI System Partition (ESP) image:
						</p><pre class="screen">$ openstack baremetal node set --driver-info bootloader=$ESP $NODE_NAME</pre><p class="simpara">
							Replace <code class="literal">$ESP</code> with the glance image UUID or URL for the ESP image, and replace <code class="literal">$NODE_NAME</code> with the name of the node.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								For BIOS nodes, do not complete this step.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Create a port on the bare metal node and associate the port with the MAC address of the NIC on the bare metal node:
						</p><pre class="screen">$ openstack baremetal port create --pxe-enabled True --node $UUID $MAC_ADDRESS</pre><p class="simpara">
							Replace <code class="literal">$UUID</code> with the UUID of the bare metal node, and replace <code class="literal">$MAC_ADDRESS</code> with the MAC address of the NIC on the bare metal node.
						</p></li><li class="listitem"><p class="simpara">
							Create the new bare metal server:
						</p><pre class="screen">$ openstack server create \
    --flavor baremetal \
    --image $IMAGE \
    --network $NETWORK \
    test_instance</pre><p class="simpara">
							Replace <code class="literal">$IMAGE</code> and <code class="literal">$NETWORK</code> with the names of the image and network that you want to use.
						</p></li></ol></div></section></section><section class="section" id="using_host_aggregates_to_separate_physical_and_virtual_machine_provisioning"><div class="titlepage"><div><div><h2 class="title">4.8. Using host aggregates to separate physical and virtual machine provisioning</h2></div></div></div><p>
				OpenStack Compute uses host aggregates to partition availability zones, and group together nodes that have specific shared properties. When an instance is provisioned, the Compute scheduler compares properties on the flavor with the properties assigned to host aggregates, and ensures that the instance is provisioned in the correct aggregate and on the correct host: either on a physical machine or as a virtual machine.
			</p><p>
				Complete the steps in this section to perform the following operations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Add the property <code class="literal">baremetal</code> to your flavors and set it to either <code class="literal">true</code> or <code class="literal">false</code>.
					</li><li class="listitem">
						Create separate host aggregates for bare metal hosts and compute nodes with a matching <code class="literal">baremetal</code> property. Nodes grouped into an aggregate inherit this property.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Creating a host aggregate</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the <code class="literal">baremetal</code> property to <code class="literal">true</code> on the baremetal flavor.
					</p><pre class="screen">$ openstack flavor set baremetal --property baremetal=true</pre></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">baremetal</code> property to <code class="literal">false</code> on the flavors that virtual instances use:
					</p><pre class="screen">$ openstack flavor set <span class="emphasis"><em>FLAVOR_NAME</em></span> --property baremetal=false</pre></li><li class="listitem"><p class="simpara">
						Create a host aggregate called <code class="literal">baremetal-hosts</code>:
					</p><pre class="screen">$ openstack aggregate create --property baremetal=true baremetal-hosts</pre></li><li class="listitem"><p class="simpara">
						Add each Controller node to the <code class="literal">baremetal-hosts</code> aggregate:
					</p><pre class="screen">$ openstack aggregate add host baremetal-hosts <span class="emphasis"><em>HOSTNAME</em></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you have created a composable role with the <code class="literal">NovaIronic</code> service, add all the nodes with this service to the <code class="literal">baremetal-hosts</code> aggregate. By default, only the Controller nodes have the <code class="literal">NovaIronic</code> service.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Create a host aggregate called <code class="literal">virtual-hosts</code>:
					</p><pre class="screen">$ openstack aggregate create --property baremetal=false virtual-hosts</pre></li><li class="listitem"><p class="simpara">
						Add each Compute node to the <code class="literal">virtual-hosts</code> aggregate:
					</p><pre class="screen">$ openstack aggregate add host virtual-hosts <span class="emphasis"><em>HOSTNAME</em></span></pre></li><li class="listitem"><p class="simpara">
						If you did not add the following Compute filter scheduler when you deployed the overcloud, add it now to the existing list under <code class="literal">scheduler_default_filters</code> in <span class="strong strong"><strong><span class="emphasis"><em>/etc/nova/nova.conf</em></span></strong></span>:
					</p><pre class="screen">AggregateInstanceExtraSpecsFilter</pre></li></ol></div></section></section><section class="chapter" id="administering_bare_metal_nodes"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Administering bare metal nodes</h1></div></div></div><p>
			This chapter describes how to provision a physical machine on an enrolled bare metal node. You can launch instances either from the command line or from the OpenStack dashboard.
		</p><section class="section" id="launching_an_instance_with_the_command_line_interface_cli"><div class="titlepage"><div><div><h2 class="title">5.1. Launching an instance with the Command Line Interface (CLI)</h2></div></div></div><p>
				Use the <code class="literal">openstack</code> command line interface to deploy a bare metal instance.
			</p><div class="orderedlist"><p class="title"><strong>Deploying an instance with the command line</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the shell to access the Identity service (keystone) as the administrative user:
					</p><pre class="screen">$ source ~/overcloudrc</pre></li><li class="listitem"><p class="simpara">
						Deploy the instance:
					</p><pre class="screen">$ openstack server create \
  --nic net-id=<span class="emphasis"><em>NETWORK_UUID</em></span> \
  --flavor baremetal \
  --image <span class="emphasis"><em>IMAGE_UUID</em></span> \
  <span class="emphasis"><em>INSTANCE_NAME</em></span></pre><p class="simpara">
						Replace the following values:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Replace <span class="emphasis"><em>NETWORK_UUID</em></span> with the unique identifier for the network that you created to use with the Bare Metal Provisioning service.
							</li><li class="listitem">
								Replace <span class="emphasis"><em>IMAGE_UUID</em></span> with the unique identifier for the disk image that was uploaded to the Image service.
							</li><li class="listitem">
								Replace <span class="emphasis"><em>INSTANCE_NAME</em></span> with a name for the bare metal instance.
							</li></ul></div><p class="simpara">
						To assign the instance to a security group, include <code class="literal">--security-group SECURITY_GROUP</code>, replacing <span class="emphasis"><em>SECURITY_GROUP</em></span> with the name of the security group. Repeat this option to add the instance to multiple groups. For more information about security group management, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/users_and_identity_management_guide/#project-security">Users and Identity Management Guide</a>.
					</p></li><li class="listitem"><p class="simpara">
						Check the status of the instance:
					</p><pre class="screen">$ openstack server list --name <span class="emphasis"><em>INSTANCE_NAME</em></span></pre></li></ol></div></section><section class="section" id="launching_an_instance_with_the_dashboard"><div class="titlepage"><div><div><h2 class="title">5.2. Launching an instance with the dashboard</h2></div></div></div><p>
				Use the dashboard graphical user interface to deploy a bare metal instance.
			</p><div class="orderedlist"><p class="title"><strong>Deploying an instance with the dashboard</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the dashboard at <span class="strong strong"><strong>http[s]://<span class="emphasis"><em>DASHBOARD_IP</em></span>/dashboard</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Project &gt; Compute &gt; Instances</strong></span>
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Launch Instance</strong></span>.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								In the <span class="strong strong"><strong>Details</strong></span> tab, specify the <span class="strong strong"><strong>Instance Name</strong></span> and select <code class="literal">1</code> for <span class="strong strong"><strong>Count</strong></span>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Source</strong></span> tab, select an <code class="literal">Image</code> from <span class="strong strong"><strong>Select Boot Source</strong></span>, then click the <code class="literal">+</code> (plus) symbol to select an operating system disk image. The image that you choose moves to <span class="strong strong"><strong>Allocated</strong></span>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Flavor</strong></span> tab, select <code class="literal">baremetal</code>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Networks</strong></span> tab, use the <code class="literal">+</code> (plus) and <code class="literal">-</code> (minus) buttons to move required networks from <span class="strong strong"><strong>Available</strong></span> to <span class="strong strong"><strong>Allocated</strong></span>. Ensure that the shared network that you created for the Bare Metal Provisioning service is selected here.
							</li><li class="listitem">
								If you want to assign the instance to a security group, in the <span class="strong strong"><strong>Security Groups</strong></span> tab, use the arrow to move the group to <span class="strong strong"><strong>Allocated</strong></span>.
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Launch Instance</strong></span>.
					</li></ol></div></section><section class="section" id="configure_port_groups_in_the_bare_metal_provisioning_service"><div class="titlepage"><div><div><h2 class="title">5.3. Configure port groups in the Bare Metal Provisioning service</h2></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Port group functionality for bare metal nodes is available in this release as a <span class="strong strong"><strong>Technology Preview</strong></span>, and therefore is not fully supported by Red Hat. It should be used only for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
				</p></div></div><p>
				Port groups (bonds) provide a method to aggregate multiple network interfaces into a single ‘bonded’ interface. Port group configuration always takes precedence over an individual port configuration.
			</p><p>
				If a port group has a physical network, then all the ports in that port group must have the same physical network. The Bare Metal Provisioning service uses <code class="literal">configdrive</code> to support configuration of port groups in the instances.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Bare Metal Provisioning service API version 1.26 supports port group configuration.
				</p></div></div><section class="section" id="configuring_the_switches"><div class="titlepage"><div><div><h3 class="title">5.3.1. Configuring the switches</h3></div></div></div><p>
					To configure port groups in a bare metal deployment, you must configure the port groups on the switches manually. You must ensure that the mode and properties on the switch correspond to the mode and properties on the bare metal side as the naming can vary on the switch.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You cannot use port groups for provisioning and cleaning if you need to boot a deployment using iPXE.
					</p></div></div><p>
					With port group fallback, all the ports in a port group can fallback to individual switch ports when a connection fails. Based on whether a switch supports port group fallback or not, you can use the <code class="literal">--support-standalone-ports</code> and <code class="literal">--unsupport-standalone-ports</code> options.
				</p></section><section class="section" id="configuring_port_groups_in_the_bare_metal_provisioning_service"><div class="titlepage"><div><div><h3 class="title">5.3.2. Configuring port groups in the Bare Metal Provisioning service</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a port group by specifying the node to which it belongs, its name, address, mode, properties and whether it supports fallback to standalone ports.
						</p><pre class="screen"># openstack baremetal port group create --node NODE_UUID --name NAME --address MAC_ADDRESS --mode MODE  --property miimon=100 --property xmit_hash_policy="layer2+3" --support-standalone-ports</pre><p class="simpara">
							You can also use the <code class="literal">openstack baremetal port group set</code> command to update a port group.
						</p><p class="simpara">
							If you do not specify an address, the deployed instance port group address is the same as the OpenStack Networking port. If you do not attach the neutron port, the port group configuration fails.
						</p><p class="simpara">
							During interface attachment, port groups have a higher priority than the ports, so they are used first. Currently, it is not possible to specify whether a port group or a port is desired in an interface attachment request. Port groups that do not have any ports are ignored.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You must configure port groups manually in standalone mode either in the image or by generating the <code class="literal">configdrive</code> and adding it to the node’s <code class="literal">instance_info</code>. Ensure that you have <code class="literal">cloud-init</code> version 0.7.7 or later for the port group configuration to work.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Associate a port with a port group:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									During port creation:
								</p><pre class="screen"># openstack baremetal port create --node NODE_UUID --address MAC_ADDRESS --port-group test</pre></li><li class="listitem"><p class="simpara">
									During port update:
								</p><pre class="screen"># openstack baremetal port set PORT_UUID --port-group PORT_GROUP_UUID</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Boot an instance by providing an image that has <code class="literal">cloud-init</code> or supports bonding.
						</p><p class="simpara">
							To check if the port group is configured properly, run the following command:
						</p><pre class="screen"># cat /proc/net/bonding/bondX</pre><p class="simpara">
							Here, <code class="literal">X</code> is a number that <code class="literal">cloud-init</code> generates automatically for each configured port group, starting with a <code class="literal">0</code> and incremented by one for each configured port group.
						</p></li></ol></div></section></section><section class="section" id="determining_the_host_to_ip_address_mapping"><div class="titlepage"><div><div><h2 class="title">5.4. Determining the host to IP address mapping</h2></div></div></div><p>
				Use the following commands to determine which IP addresses are assigned to which host and bare metal node. With these commands, you can view the host to IP mapping from the undercloud without accessing the hosts directly.
			</p><pre class="screen">(undercloud) [stack@host01 ~]$ openstack stack output show overcloud HostsEntry --max-width 80

+--------------+---------------------------------------------------------------+
| Field        | Value                                                         |
+--------------+---------------------------------------------------------------+
| description  | The content that should be appended to your /etc/hosts if you |
|              | want to get                                                   |
|              | hostname-based access to the deployed nodes (useful for       |
|              | testing without                                               |
|              | setting up a DNS).                                            |
|              |                                                               |
| output_key   | HostsEntry                                                    |
| output_value | 172.17.0.10 overcloud-controller-0.localdomain overcloud-     |
|              | controller-0                                                  |
|              | 10.8.145.18 overcloud-controller-0.external.localdomain       |
|              | overcloud-controller-0.external                               |
|              | 172.17.0.10 overcloud-controller-0.internalapi.localdomain    |
|              | overcloud-controller-0.internalapi                            |
|              | 172.18.0.15 overcloud-controller-0.storage.localdomain        |
|              | overcloud-controller-0.storage                                |
|              | 172.21.2.12 overcloud-controller-0.storagemgmt.localdomain    |
|              | overcloud-controller-0.storagemgmt                            |
|              | 172.16.0.15 overcloud-controller-0.tenant.localdomain         |
|              | overcloud-controller-0.tenant                                 |
|              | 10.8.146.13 overcloud-controller-0.management.localdomain     |
|              | overcloud-controller-0.management                             |
|              | 10.8.146.13 overcloud-controller-0.ctlplane.localdomain       |
|              | overcloud-controller-0.ctlplane                               |
|              |                                                               |
|              | 172.17.0.21 overcloud-compute-0.localdomain overcloud-        |
|              | compute-0                                                     |
|              | 10.8.146.12 overcloud-compute-0.external.localdomain          |
|              | overcloud-compute-0.external                                  |
|              | 172.17.0.21 overcloud-compute-0.internalapi.localdomain       |
|              | overcloud-compute-0.internalapi                               |
|              | 172.18.0.20 overcloud-compute-0.storage.localdomain           |
|              | overcloud-compute-0.storage                                   |
|              | 10.8.146.12 overcloud-compute-0.storagemgmt.localdomain       |
|              | overcloud-compute-0.storagemgmt                               |
|              | 172.16.0.16 overcloud-compute-0.tenant.localdomain overcloud- |
|              | compute-0.tenant                                              |
|              | 10.8.146.12 overcloud-compute-0.management.localdomain        |
|              | overcloud-compute-0.management                                |
|              | 10.8.146.12 overcloud-compute-0.ctlplane.localdomain          |
|              | overcloud-compute-0.ctlplane                                  |
|              |                                                               |
|              |                                                               |
|              |                                                               |
|              |                                                               |
|              | 10.8.145.16  overcloud.localdomain                            |
|              | 10.8.146.7  overcloud.ctlplane.localdomain                    |
|              | 172.17.0.19  overcloud.internalapi.localdomain                |
|              | 172.18.0.19  overcloud.storage.localdomain                    |
|              | 172.21.2.16  overcloud.storagemgmt.localdomain                |
+--------------+---------------------------------------------------------------+</pre><p>
				To filter a particular host, run the following command:
			</p><pre class="screen">(undercloud) [stack@host01 ~]$ openstack stack output show overcloud HostsEntry -c output_value -f value | grep overcloud-controller-0

172.17.0.12 overcloud-controller-0.localdomain overcloud-controller-0
10.8.145.18 overcloud-controller-0.external.localdomain overcloud-controller-0.external
172.17.0.12 overcloud-controller-0.internalapi.localdomain overcloud-controller-0.internalapi
172.18.0.12 overcloud-controller-0.storage.localdomain overcloud-controller-0.storage
172.21.2.13 overcloud-controller-0.storagemgmt.localdomain overcloud-controller-0.storagemgmt
172.16.0.19 overcloud-controller-0.tenant.localdomain overcloud-controller-0.tenant
10.8.146.13 overcloud-controller-0.management.localdomain overcloud-controller-0.management
10.8.146.13 overcloud-controller-0.ctlplane.localdomain overcloud-controller-0.ctlplane</pre><p>
				To map the hosts to bare metal nodes, run the following command:
			</p><pre class="screen">(undercloud) [stack@host01 ~]$ openstack baremetal node list --fields uuid name instance_info -f json
[
  {
    "UUID": "c0d2568e-1825-4d34-96ec-f08bbf0ba7ae",
    "Instance Info": {
      "root_gb": "40",
      "display_name": "overcloud-compute-0",
      "image_source": "24a33990-e65a-4235-9620-9243bcff67a2",
      "capabilities": "{\"boot_option\": \"local\"}",
      "memory_mb": "4096",
      "vcpus": "1",
      "local_gb": "557",
      "configdrive": "******",
      "swap_mb": "0",
      "nova_host_id": "host01.lab.local"
    },
    "Name": "host2"
  },
  {
    "UUID": "8c3faec8-bc05-401c-8956-99c40cdea97d",
    "Instance Info": {
      "root_gb": "40",
      "display_name": "overcloud-controller-0",
      "image_source": "24a33990-e65a-4235-9620-9243bcff67a2",
      "capabilities": "{\"boot_option\": \"local\"}",
      "memory_mb": "4096",
      "vcpus": "1",
      "local_gb": "557",
      "configdrive": "******",
      "swap_mb": "0",
      "nova_host_id": "host01.lab.local"
    },
    "Name": "host3"
  }
]</pre></section><section class="section" id="sect-attaching-and-detaching-a-virtual-network-interface"><div class="titlepage"><div><div><h2 class="title">5.5. Attaching and detaching a virtual network interface</h2></div></div></div><p>
				The Bare Metal Provisioning service has an API to manage the mapping between virtual network interfaces. For example, the interfaces in the OpenStack Networking service and the physical interfaces (NICs). You can configure these interfaces for each Bare Metal Provisioning node to set the virtual network interface (VIF) to physical network interface (PIF) mapping logic. To configure the interfaces, use the <code class="literal">openstack baremetal node vif*</code> commands.
			</p><p>
				The following example procedure includes the steps necessary to attach and detach VIFs.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the VIF IDs currently connected to the bare metal node:
					</p><pre class="screen">$ openstack baremetal node vif list baremetal-0
+--------------------------------------+
| ID                                   |
+--------------------------------------+
| 4475bc5a-6f6e-466d-bcb6-6c2dce0fba16 |
+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
						After the VIF is attached, the Bare Metal Provisioning service updates the virtual port in the OpenStack Networking service with the actual MAC address of the physical port. Check this port address:
					</p><pre class="screen">$ openstack port show 4475bc5a-6f6e-466d-bcb6-6c2dce0fba16 -c mac_address -c fixed_ips
+-------------+-----------------------------------------------------------------------------+
| Field       | Value                                                                       |
+-------------+-----------------------------------------------------------------------------+
| fixed_ips   | ip_address='192.168.24.9', subnet_id='1d11c677-5946-4733-87c3-23a9e06077aa' |
| mac_address | 00:2d:28:2f:8d:95                                                           |
+-------------+-----------------------------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
						Create a new port on the network where you created the <code class="literal">baremetal-0</code> node:
					</p><pre class="screen">$ openstack port create --network baremetal --fixed-ip ip-address=192.168.24.24 baremetal-0-extra</pre></li><li class="listitem"><p class="simpara">
						Remove a port from the instance:
					</p><pre class="screen">$ openstack server remove port overcloud-baremetal-0 4475bc5a-6f6e-466d-bcb6-6c2dce0fba16</pre></li><li class="listitem"><p class="simpara">
						Check that the IP address no longer exists on the list:
					</p><pre class="screen">$ openstack server list</pre></li><li class="listitem"><p class="simpara">
						Check if there are VIFs attached to the node:
					</p><pre class="screen">$ openstack baremetal node vif list baremetal-0
$ openstack port list</pre></li><li class="listitem"><p class="simpara">
						Add the newly created port:
					</p><pre class="screen">$ openstack server add port overcloud-baremetal-0 baremetal-0-extra</pre></li><li class="listitem"><p class="simpara">
						Verify that the new IP address shows the new port:
					</p><pre class="screen">$ openstack server list
+--------------------------------------+-------------------------+--------+------------------------+----------------+---------+
| ID                                   | Name                    | Status | Networks               | Image          | Flavor  |
+--------------------------------------+-------------------------+--------+------------------------+----------------+---------+
| 53095a64-1646-4dd1-bbf3-b51cbcc38789 | overcloud-controller-2  | ACTIVE | ctlplane=192.168.24.7  | overcloud-full | control |
| 3a1bc89c-5d0d-44c7-a569-f2a3b4c73d65 | overcloud-controller-0  | ACTIVE | ctlplane=192.168.24.8  | overcloud-full | control |
| 6b01531a-f55d-40e9-b3a2-6d02be0b915b | overcloud-controller-1  | ACTIVE | ctlplane=192.168.24.16 | overcloud-full | control |
| c61cc52b-cc48-4903-a971-073c60f53091 | overcloud-novacompute-0overcloud-baremetal-0 | ACTIVE | ctlplane=192.168.24.24 | overcloud-full | compute |
+--------------------------------------+-------------------------+--------+------------------------+----------------+---------+</pre></li><li class="listitem"><p class="simpara">
						Check if the VIF ID is the UUID of the new port:
					</p><pre class="screen">$ openstack baremetal node vif list baremetal-0
+--------------------------------------+
| ID                                   |
+--------------------------------------+
| 6181c089-7e33-4f1c-b8fe-2523ff431ffc |
+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
						Check if the OpenStack Networking port MAC address is updated and matches one of the Bare Metal Provisioning service ports:
					</p><pre class="screen">$ openstack port show 6181c089-7e33-4f1c-b8fe-2523ff431ffc -c mac_address -c fixed_ips
+-------------+------------------------------------------------------------------------------+
| Field       | Value                                                                        |
+-------------+------------------------------------------------------------------------------+
| fixed_ips   | ip_address='192.168.24.24', subnet_id='1d11c677-5946-4733-87c3-23a9e06077aa' |
| mac_address | 00:2d:28:2f:8d:95                                                            |
+-------------+------------------------------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
						Reboot the bare metal node so that it recognizes the new IP address:
					</p><pre class="screen">$ openstack server reboot overcloud-baremetal-0</pre><p class="simpara">
						After you detach or attach interfaces, the bare metal OS removes, adds, or modifies the network interfaces that have changed. When you replace a port, a DHCP request obtains the new IP address, but this might take some time because the old DHCP lease is still valid. To initiate these changes immediately, reboot the bare metal host.
					</p></li></ol></div></section><section class="section" id="sect-bare-metal-notifications"><div class="titlepage"><div><div><h2 class="title">5.6. Configuring notifications for the Bare Metal Provisioning service</h2></div></div></div><p>
				You can configure the Bare Metal Provisioning service (ironic) to display notifications for different events that occur within the service. External services can use these notifications for billing purposes, monitoring a data store, and other purposes.
			</p><p>
				To enable notifications for the Bare Metal Provisioning service, you must set the following options in your <code class="literal">ironic.conf</code> configuration file.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">notification_level</code> option in the <code class="literal">[DEFAULT]</code> section determines the minimum priority level for which notifications are sent. You can set the values for this option to <code class="literal">debug</code>, <code class="literal">info</code>, <code class="literal">warning</code>, <code class="literal">error</code>, or <code class="literal">critical</code>. If the option is set to <code class="literal">warning</code>, all notifications with priority level <code class="literal">warning</code>, <code class="literal">error</code>, or <code class="literal">critical</code> are sent, but not notifications with priority level <code class="literal">debug</code> or <code class="literal">info</code>. If this option is not set, no notifications are sent. The priority level of each available notification is documented below.
					</li><li class="listitem">
						The <code class="literal">transport_url</code> option in the <code class="literal">[oslo_messaging_notifications]</code> section determines the message bus used when sending notifications. If this is not set, the default transport used for RPC is used.
					</li></ul></div><p>
				All notifications are emitted on the <code class="literal">ironic_versioned_notifications</code> topic in the message bus. Generally, each type of message that traverses the message bus is associated with a topic that describes the contents of the message.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The notifications can be lost and there is no guarantee that a notification will make it across the message bus to the end user.
				</p></div></div></section><section class="section" id="sect-configuring-automatic-fault-recovery"><div class="titlepage"><div><div><h2 class="title">5.7. Configuring automatic power fault recovery</h2></div></div></div><p>
				The Bare Metal Provisioning service (ironic) has a string field <code class="literal">fault</code> that records power, cleaning, and rescue abort failures for nodes.
			</p><div class="table" id="idm139728805978368"><p class="title"><strong>Table 5.1. Ironic node faults</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139728802805840" scope="col">Fault</th><th align="left" valign="top" id="idm139728802804752" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139728802805840"> <p>
								power failure
							</p>
							 </td><td align="left" valign="top" headers="idm139728802804752"> <p>
								The node is in maintenance mode due to power sync failures that exceed the maximum number of retries.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728802805840"> <p>
								clean failure
							</p>
							 </td><td align="left" valign="top" headers="idm139728802804752"> <p>
								The node is in maintenance mode due to the failure of a cleaning operation.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728802805840"> <p>
								rescue abort failure
							</p>
							 </td><td align="left" valign="top" headers="idm139728802804752"> <p>
								The node is in maintenance mode due to the failure of a cleaning operation during rescue abort.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728802805840"> <p>
								none
							</p>
							 </td><td align="left" valign="top" headers="idm139728802804752"> <p>
								There is no fault present.
							</p>
							 </td></tr></tbody></table></div></div><p>
				Conductor checks the value of this field periodically. If the conductor detects a <code class="literal">power failure</code> state and can successfully restore power to the node, the node is removed from maintenance mode and restored to operation.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If the operator places a node in maintenance mode manually, the conductor does not automatically remove the node from maintenance mode.
				</p></div></div><p>
				The default interval is 300 seconds, however, you can configure this interval with director using hieradata:
			</p><pre class="screen">ironic::conductor::power_failure_recovery_interval</pre><p>
				To disable automatic power fault recovery, set the value to <code class="literal">0</code>.
			</p></section><section class="section" id="introspecting-overcloud-nodes"><div class="titlepage"><div><div><h2 class="title">5.8. Introspecting overcloud nodes</h2></div></div></div><p>
				Perform introspection of overcloud nodes to monitor the specification of the nodes.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Source the rc file:
					</p><pre class="screen">$ source ~/overcloudrc</pre></li><li class="listitem"><p class="simpara">
						Run the introspection command:
					</p><pre class="screen">$ openstack baremetal introspection start [--wait] &lt;NODENAME&gt;</pre><p class="simpara">
						Replace &lt;NODENAME&gt; with the name of the node that you want to inspect.
					</p></li><li class="listitem"><p class="simpara">
						Check the introspection status:
					</p><pre class="screen">$ openstack baremetal introspection status &lt;NODENAME&gt;</pre><p class="simpara">
						Replace &lt;NODENAME&gt; with the name of the node.
					</p></li></ol></div></section></section><section class="chapter" id="booting-from-cinder-volumes"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Booting from cinder volumes</h1></div></div></div><p>
			You can create volumes in the Block Storage service (cinder) and connect these volumes to bare metal instances that you create with the Bare Metal Provisioning service (ironic).
		</p><section class="section" id="cinder-volume-boot-for-bare-metal-nodes"><div class="titlepage"><div><div><h2 class="title">6.1. Cinder volume boot for bare metal nodes</h2></div></div></div><p>
				You can boot bare metal nodes from a block storage device that is stored in OpenStack Block Storage (cinder). OpenStack Bare Metal (ironic) connects bare metal nodes to volumes through an iSCSI interface.
			</p><p>
				Ironic enables this feature during the overcloud deployment. However, consider the following conditions before you deploy the overcloud:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The overcloud requires the cinder iSCSI backend to be enabled. Set the <code class="literal">CinderEnableIscsiBackend</code> heat parameter to <code class="literal">true</code> during overcloud deployment.
					</li><li class="listitem">
						You cannot use the cinder volume boot feature with a Red Hat Ceph Storage backend.
					</li><li class="listitem">
						You must set the <code class="literal">rd.iscsi.firmware=1</code> kernel parameter on the boot disk.
					</li></ul></div></section><section class="section" id="configuring-nodes-for-cinder-volume-boot"><div class="titlepage"><div><div><h2 class="title">6.2. Configuring nodes for cinder volume boot</h2></div></div></div><p>
				You must configure certain options for each bare metal node to successfully boot from a cinder volume.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the undercloud as the <code class="literal">stack</code> user.
					</li><li class="listitem"><p class="simpara">
						Source the overcloud credentials:
					</p><pre class="screen">$ source ~/overcloudrc</pre></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">iscsi_boot</code> capability to <code class="literal">true</code> and the <code class="literal">storage-interface</code> to <code class="literal">cinder</code> for the selected node:
					</p><pre class="screen">$ openstack baremetal node set --property capabilities=iscsi_boot:true --storage-interface cinder &lt;NODEID&gt;</pre><p class="simpara">
						Replace <code class="literal">&lt;NODEID&gt;</code> with the ID of the chosen node.
					</p></li><li class="listitem"><p class="simpara">
						Create an iSCSI connector for the node:
					</p><pre class="screen">$ openstack baremetal volume connector create --node &lt;NODEID&gt; --type iqn --connector-id iqn.2010-10.org.openstack.node&lt;NUM&gt;</pre><p class="simpara">
						The connector ID for each node must be unique. In this example, the connector is <code class="literal">iqn.2010-10.org.openstack.node&lt;NUM&gt;</code> where <code class="literal">&lt;NUM&gt;</code> is an incremented number for each node.
					</p></li></ol></div></section><section class="section" id="configuring-iscsi-kernel-parameters-on-the-boot-disk"><div class="titlepage"><div><div><h2 class="title">6.3. Configuring iSCSI kernel parameters on the boot disk</h2></div></div></div><p>
				You must enable the iSCSI booting in the kernel on the image. To accomplish this, mount the QCOW2 image and enable iSCSI components on the image.
			</p><div class="orderedlist"><p class="title"><strong>Prerequisites</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Download a Red Hat Enterprise Linux QCOW2 image and copy it to the <code class="literal">/home/stack/</code> directory on the undercloud. You can download Red Hat Enterprise Linux KVM images in QCOW2 format from the following pages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/downloads/content/69/">Red Hat Enterprise Linux 7 </a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/downloads/content/479/">Red Hat Enterprise Linux 8</a>
							</li></ul></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the undercloud as the <code class="literal">stack</code> user.
					</li><li class="listitem"><p class="simpara">
						Mount the QCOW2 image and access it as the <code class="literal">root</code> user:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Load the <code class="literal">nbd</code> kernel module:
							</p><pre class="screen">$ sudo modprobe nbd</pre></li><li class="listitem"><p class="simpara">
								Connect the QCOW image as <code class="literal">/dev/nbd0</code>:
							</p><pre class="screen">$ sudo qemu-nbd --connect=/dev/nbd0 &lt;IMAGE&gt;</pre></li><li class="listitem"><p class="simpara">
								Check the partitions on the NBD:
							</p><pre class="screen">$ sudo fdisk /dev/nbd0 -l</pre><p class="simpara">
								New Red Hat Enterprise Linux QCOW2 images contain only one partition, which is usually named <code class="literal">/dev/nbd0p1</code> on the NBD.
							</p></li><li class="listitem"><p class="simpara">
								Create a mount point for the image:
							</p><pre class="screen">mkdir /tmp/mountpoint</pre></li><li class="listitem"><p class="simpara">
								Mount the image:
							</p><pre class="screen">sudo mount /dev/nbd0p1 /tmp/mountpoint/</pre></li><li class="listitem"><p class="simpara">
								Mount your <code class="literal">dev</code> directory so that the image has access to device information on the host:
							</p><pre class="screen">sudo mount -o bind /dev /tmp/mountpoint/dev</pre></li><li class="listitem"><p class="simpara">
								Change the root directory to the mount point:
							</p><pre class="screen">sudo chroot /tmp/mountpoint /bin/bash</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure iSCSI on the image:
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Some commands in this step might report the following error:
						</p><pre class="screen">lscpu: cannot open /proc/cpuinfo: No such file or directory</pre><p>
							This error is not critical and you can ignore the error.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Move the <code class="literal">resolv.conf</code> file to a temporary location:
							</p><pre class="screen"># mv /etc/resolv.conf /etc/resolv.conf.bak</pre></li><li class="listitem"><p class="simpara">
								Create a temporary <code class="literal">resolv.conf</code> file to resolve DNS requests for the Red Hat Content Delivery Network. This example uses <code class="literal">8.8.8.8</code> for the nameserver:
							</p><pre class="screen"># echo "nameserver 8.8.8.8" &gt; /etc/resolv.conf</pre></li><li class="listitem"><p class="simpara">
								Register the mounted image to the Red Hat Content Delivery Network:
							</p><pre class="screen"># subscription-manager register</pre><p class="simpara">
								Enter your user name and password when the command prompts you.
							</p></li><li class="listitem"><p class="simpara">
								Attach a subscription that contains Red Hat Enterprise Linux:
							</p><pre class="screen"># subscription-manager list --all --available
# subscription-manager attach --pool &lt;POOLID&gt;</pre><p class="simpara">
								Substitute <code class="literal">&lt;POOLID&gt;</code> with the pool ID of the subscription.
							</p></li><li class="listitem"><p class="simpara">
								Disable the default repositories:
							</p><pre class="screen"># subscription-manager repos --disable "*"</pre></li><li class="listitem"><p class="simpara">
								Enable the Red Hat Enterprise Linux repository:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Red Hat Enterprise Linux 7:
									</p><pre class="screen"># subscription-manager repos --enable "rhel-7-server-rpms"</pre></li><li class="listitem"><p class="simpara">
										Red Hat Enterprise Linux 8:
									</p><pre class="screen"># subscription-manager repos --enable "rhel-8-for-x86_64-baseos-eus-rpms"</pre></li></ul></div></li><li class="listitem"><p class="simpara">
								Install the <code class="literal">iscsi-initiator-utils</code> package:
							</p><pre class="screen"># yum install -y iscsi-initiator-utils</pre></li><li class="listitem"><p class="simpara">
								Unregister the mounted image:
							</p><pre class="screen"># subscription-manager unregister</pre></li><li class="listitem"><p class="simpara">
								Restore the original <code class="literal">resolv.conf</code> file:
							</p><pre class="screen"># mv /etc/resolv.conf.bak /etc/resolv.conf</pre></li><li class="listitem"><p class="simpara">
								Check the kernel version on the mounted image:
							</p><pre class="screen"># rpm -qa kernel</pre><p class="simpara">
								For example, if the output is <code class="literal">kernel-3.10.0-1062.el7.x86_64</code>, the kernel version is <code class="literal">3.10.0-1062.el7.x86_64</code>. Note this kernel version for the next step.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									New Red Hat Enterprise Linux QCOW2 images have only one kernel version installed. If more than one kernel version is installed, use the latest one.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">network</code> and <code class="literal">iscsi</code> dracut modules to the initramfs image:
							</p><pre class="screen"># dracut --force --add "network iscsi" /boot/initramfs-&lt;KERNELVERSION&gt;.img &lt;KERNELVERSION&gt;</pre><p class="simpara">
								Replace <code class="literal">&lt;KERNELVERSION&gt;</code> with the version number that you obtained from <code class="literal">rpm -qa kernel</code>. The following example uses <code class="literal">3.10.0-1062.el7.x86_64</code> as the kernel version:
							</p><pre class="screen"># dracut --force --add "network iscsi" /boot/initramfs-3.10.0-1062.el7.x86_64.img 3.10.0-1062.el7.x86_64</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/default/grub</code> configuration file and add <code class="literal">rd.iscsi.firmware=1</code> to the <code class="literal">GRUB_CMDLINE_LINUX</code> parameter:
							</p><pre class="screen"># vi /etc/default/grub</pre><p class="simpara">
								The following example shows the <code class="literal">GRUB_CMDLINE_LINUX</code> parameter with the added <code class="literal">rd.iscsi.firmware=1</code> kernel argument:
							</p><pre class="screen">GRUB_CMDLINE_LINUX="console=tty0 crashkernel=auto console=ttyS0,115200n8 no_timer_check net.ifnames=0 rd.iscsi.firmware=1"</pre><p class="simpara">
								Save these changes.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Do not rebuild the <code class="literal">grub</code> menu configuration at this step. A later step in this procedure rebuilds the <code class="literal">grub</code> menu as a temporary virtual machine.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Exit from the mounted image back to your host operating system:
							</p><pre class="screen"># exit</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Unmount the image:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Unmount the <code class="literal">dev</code> directory from the temporary mount point:
							</p><pre class="screen">$ sudo umount /tmp/mountpoint/dev</pre></li><li class="listitem"><p class="simpara">
								Unmount the image from the mount point:
							</p><pre class="screen">$ sudo umount /tmp/mountpoint</pre></li><li class="listitem"><p class="simpara">
								Disconnect the QCOW2 image from <code class="literal">/dev/nbd0/</code>:
							</p><pre class="screen">$ sudo qemu-nbd --disconnect /dev/nbd0</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Rebuild the <code class="literal">grub</code> menu configuration on the image:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">libguestfs-tools</code> package:
							</p><pre class="screen">$ sudo yum -y install libguestfs-tools</pre></li><li class="listitem"><p class="simpara">
								Set the <code class="literal">libguestfs</code> backend to use QEMU directly:
							</p><pre class="screen">$ export LIBGUESTFS_BACKEND=direct</pre></li><li class="listitem"><p class="simpara">
								Update the grub configuration on the image:
							</p><pre class="screen">$ guestfish -a &lt;IMAGE&gt; -m /dev/sda1 sh "/sbin/grub2-mkconfig -o /boot/grub2/grub.cfg"</pre></li></ol></div></li></ol></div></section><section class="section" id="creating-and-using-a-boot-volume-in-cinder"><div class="titlepage"><div><div><h2 class="title">6.4. Creating and using a boot volume in cinder</h2></div></div></div><p>
				You must upload the iSCSI-enabled image to OpenStack Image Storage (glance) and create the boot volume in OpenStack Block Storage (cinder).
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the undercloud as the <code class="literal">stack</code> user.
					</li><li class="listitem"><p class="simpara">
						Upload the iSCSI-enabled image to glance:
					</p><pre class="screen">$ openstack image create --disk-format qcow2 --container-format bare --file rhel-server-7.7-x86_64-kvm.qcow2 rhel-server-7.7-iscsi</pre></li><li class="listitem"><p class="simpara">
						Create a volume from the image:
					</p><pre class="screen">$ openstack volume create --size 10 --image rhel-server-7.7-iscsi --bootable rhel-test-volume</pre></li><li class="listitem"><p class="simpara">
						Create a bare metal instance that uses the boot volume in cinder:
					</p><pre class="screen">$ openstack server create --flavor baremetal --volume rhel-test-volume --key default rhel-test</pre></li></ol></div></section></section><section class="chapter" id="ml2-networking-ansible"><div class="titlepage"><div><div><h1 class="title">Chapter 7. ML2 networking-ansible</h1></div></div></div><p>
			You can enable and configure the <code class="literal">networking-ansible</code> ML2 driver on an overcloud with the Networking service (neutron) and integrate it with the Bare Metal Provisioning service (ironic)
		</p><section class="section" id="modular-layer-2-ml2-networking-ansible"><div class="titlepage"><div><div><h2 class="title">7.1. Modular Layer 2 (ML2) networking-ansible</h2></div></div></div><p>
				OpenStack Networking (neutron) contains <code class="literal">networking-ansible</code>, which is an ML2 driver that uses Ansible Engine Networking to manage network switches. This driver also integrates with OpenStack Bare Metal (ironic) to configure VLANs on switch ports for the bare metal guests. This means that any bare metal guest that uses a VLAN neutron network causes this driver to configure the physical switch using Ansible Engine Networking.
			</p><p>
				The current <code class="literal">networking-ansible</code> driver includes the following functionality:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Define a VLAN on the switch when creating a network in Red Hat OpenStack Platform (RHOSP)
					</li><li class="listitem">
						Assign a VLAN to an access port on the switch when creating or updating a port in RHOSP
					</li><li class="listitem">
						Remove a VLAN from an access port on the switch when deleting a port in RHOSP
					</li></ul></div></section><section class="section" id="networking-requirements-for-networking-ansible"><div class="titlepage"><div><div><h2 class="title">7.2. Networking requirements for networking-ansible</h2></div></div></div><p>
				To enable <code class="literal">networking-ansible</code> functionality, your environment must include the following networking configuration:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						A network switch with Ansible Network Automation support:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Juniper Networks (<code class="literal">junos</code>)
							</li><li class="listitem">
								Arista Extensible Operating System (<code class="literal">eos</code>)
							</li></ul></div></li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Arista Extensible Operating System (<code class="literal">eos</code>) support is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
				</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The network switch requires an SSH user so that Ansible Network Automation can interact with the device. This user requires the following permissions on the switch:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Access mode
							</li><li class="listitem">
								Assign a VLAN to a port
							</li><li class="listitem">
								Create VLANs
							</li></ul></div><p class="simpara">
						For security purposes, do not provide the SSH user with administrator access to the switch.
					</p></li><li class="listitem">
						Prepare the VLANs that you want the switch to use. To prepare the VLANs, create each VLAN on the switch, and then delete each VLAN.
					</li><li class="listitem">
						The network switch ports reserved for bare metal guests initially require configuration to connect to the dedicated network for introspection. Beyond this, these ports require no additional configuration.
					</li></ul></div></section><section class="section" id="openstack-bare-metal-ironic-requirements-for-networking-ansible"><div class="titlepage"><div><div><h2 class="title">7.3. Openstack Bare Metal (ironic) requirements for <code class="literal">networking-ansible</code></h2></div></div></div><p>
				The <code class="literal">networking-ansible</code> driver integrates with the Openstack Bare Metal (ironic) service. To ensure successful integration, deploy the Bare Metal Provisioning service (ironic) to your overcloud with the following recommendations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The overcloud requires a provisioning network. Use one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								A bridged network for ironic services.
							</li><li class="listitem">
								A custom composable network for ironic services.
							</li></ul></div><p class="simpara">
						For more information about configuring the provisioning network, see <a class="xref" href="index.html#sect-deploy" title="Chapter 3. Deploying an overcloud with the Bare Metal Provisioning service">Chapter 3, <em>Deploying an overcloud with the Bare Metal Provisioning service</em></a>.
					</p></li><li class="listitem"><p class="simpara">
						The overcloud requires a tenant network for the bare metal systems to use after the provisioning process. The examples in this guide use the default <code class="literal">baremetal</code> network mapped to a bridge named <code class="literal">br-baremetal</code>. This network also requires a range of VLAN IDs. The following heat parameters set these values to suit examples in this guide:
					</p><pre class="screen">parameter_defaults:
  NeutronNetworkVLANRanges: baremetal:1200:1299
  NeutronFlatNetworks: datacentre,baremetal
  NeutronBridgeMappings: datacentre:br-ex,baremetal:br-baremetal</pre></li><li class="listitem">
						The overcloud uses the introspection service to automatically identify certain hardware details and map them for other services to use. It is recommended that you enable the ironic introspection service to help map your interface-to-port details for <code class="literal">networking-ansible</code> to use. You can also accomplish this task manually.
					</li></ul></div><p>
				For more information about deploying the Bare Metal Provisioning service (ironic), see <a class="xref" href="index.html#sect-deploy" title="Chapter 3. Deploying an overcloud with the Bare Metal Provisioning service">Chapter 3, <em>Deploying an overcloud with the Bare Metal Provisioning service</em></a>.
			</p></section><section class="section" id="enabling-networking-ansible-ml2-functionality"><div class="titlepage"><div><div><h2 class="title">7.4. Enabling networking-ansible ML2 functionality</h2></div></div></div><p>
				To enable the <code class="literal">networking-ansible</code> ML2 driver in your overcloud, you must add two environment files to your deployment:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">/usr/share/openstack-tripleo-heat-templates/environments/neutron-ml2-ansible.yaml</code></span></dt><dd>
							This file enables the <code class="literal">networking-ansible</code> driver and sets the network type to <code class="literal">vlan</code>. This file already exists in the core heat template collection.
						</dd><dt><span class="term"><code class="literal">/home/stack/templates/ml2-ansible-hosts.yaml</code></span></dt><dd>
							A file that contains details about your switches. You create this file manually.
						</dd></dl></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/home/stack/templates/ml2-ansible-hosts.yaml</code> and add the following initial content:
					</p><pre class="screen">parameter_defaults:
  ML2HostConfigs:</pre></li><li class="listitem"><p class="simpara">
						The <code class="literal">ML2HostConfigs</code> parameter requires a <code class="literal">dict</code> value with details about your switches. Each initial key in the <code class="literal">dict</code> is a name for the switch. This value defines a specific <code class="literal">ansible:[switchname]</code> section in your OpenStack Networking (neutron) ML2 configuration. Each switch name key requires its own <code class="literal">dict</code> that contains the actual switch details. For example, to configure three switches, add three switch keys:
					</p><pre class="screen">parameter_defaults:
  ML2HostConfigs:
    switch1:
      [SWITCH DETAILS]
    switch2:
      [SWITCH DETAILS]
    switch3:
      [SWITCH DETAILS]</pre></li><li class="listitem"><p class="simpara">
						Each switch requires certain key value pairs in the <code class="literal">dict</code>:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ansible_network_os</code></span></dt><dd><p class="simpara">
									(Required) The operating system of the switch. Options include <code class="literal">junos</code> and <code class="literal">eos</code>.
								</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
										Arista Extensible Operating System (<code class="literal">eos</code>) support is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
									</p></div></div></dd><dt><span class="term"><code class="literal">ansible_host</code></span></dt><dd>
									(Required) The IP or hostname of the switch.
								</dd><dt><span class="term"><code class="literal">ansible_user</code></span></dt><dd>
									(Required) The user that Ansible uses to access the switch.
								</dd><dt><span class="term"><code class="literal">ansible_ssh_pass</code></span></dt><dd>
									(Required) The SSH password that Ansible uses to access the switch.
								</dd><dt><span class="term"><code class="literal">mac</code></span></dt><dd>
									Chassis MAC ID of the network device. Used to map the link layer discovery protocol (LLDP) MAC address value to the switch name defined in the <code class="literal">ML2HostConfigs</code> configuration. This is a required value when using introspection to perform automatic port configuration.
								</dd><dt><span class="term"><code class="literal">manage_vlans</code></span></dt><dd>
									A Boolean variable to define whether OpenStack Networking (neutron) controls the creation and deletion of VLANs on the physical device. This functionality causes the switch to create and delete VLANs with IDs respective to their Neutron networks. If you have predefined these VLANs on the switch and do not require Neutron to create or delete VLANs on the switch, set this parameter to <code class="literal">false</code>. The default value is <code class="literal">true</code>.
								</dd></dl></div></li><li class="listitem"><p class="simpara">
						The following example shows how to map these values to their respective keys in a full <code class="literal">ML2HostConfigs</code> parameter:
					</p><pre class="screen">parameter_defaults:
  ML2HostConfigs:
    switch1:
      ansible_network_os: juno
      ansible_host: 10.0.0.1
      ansible_user: ansible
      ansible_ssh_pass: "p@55w0rd!"
      mac: 01:23:45:67:89:AB
      manage_vlans: false</pre></li><li class="listitem">
						Save the <code class="literal">/home/stack/templates/ml2-ansible-hosts.yaml</code> file.
					</li><li class="listitem"><p class="simpara">
						When you run the overcloud deployment command, include the <code class="literal">/usr/share/openstack-tripleo-heat-templates/environments/neutron-ml2-ansible.yaml</code> and <code class="literal">/home/stack/templates/ml2-ansible-hosts.yaml</code> files with the <code class="literal">-e</code> option. The following example demonstrates how to include these files:
					</p><pre class="screen">$ openstack overcloud deploy --templates \
  ...
  -e /usr/share/openstack-tripleo-heat-templates/environments/neutron-ml2-ansible.yaml \
  -e /home/stack/templates/ml2-ansible-hosts.yaml \
  ...</pre></li></ol></div><p>
				Director enables the driver as a part of the OpenStack Networking (neutron) API on the <code class="literal">neutron_api</code> container.
			</p></section><section class="section" id="configuring-networks-for-networking-ansible"><div class="titlepage"><div><div><h2 class="title">7.5. Configuring networks for networking-ansible</h2></div></div></div><p>
				After you deploy the overcloud with bare metal provisioning and the <code class="literal">networking-ansible</code> driver enabled, you must create provisioning and tenant networks for your bare metal nodes. You must also configure ports for your bare metal nodes either in access mode or trunk mode, depending on your requirements.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Access mode</span></dt><dd>
							In access mode, switch ports carry the traffic of only one VLAN and operate on a single broadcast domain. All traffic that arrives to access ports belongs to the VLAN that is assigned to the port.
						</dd><dt><span class="term">Trunk mode</span></dt><dd><p class="simpara">
							In trunk mode, switch ports can belong to more than one VLAN. You can use switch ports in trunk mode to carry the traffic of a group of VLANs, or if you want to exchange traffic between multiple switches with more than one VLAN.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
							</p></div></div></dd></dl></div><p>
				The Bare Metal service (ironic) uses <code class="literal">networking-ansible</code> to assign the switchport of the bare metal guest to the ironic provisioning network so that the provisioning process can complete successfully. After provisioning is complete, ironic assigns the switchport of the bare metal guest to the VLAN that the Networking service (neutron) assigns to the tenant networks of the bare metal guest.
			</p><section class="section" id="configuring-networks-for-networking-ansible-in-access-mode"><div class="titlepage"><div><div><h3 class="title">7.5.1. Configuring networks for networking-ansible in access mode</h3></div></div></div><p>
					After you deploy the overcloud with bare metal provisioning and the <code class="literal">networking-ansible</code> driver enabled, create the following networks for your bare metal nodes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Provisioning network</span></dt><dd>
								Bare metal systems use this network for their initial creation.
							</dd><dt><span class="term">Tenant network</span></dt><dd>
								Bare metal systems switch to this network after provisioning and use this network for internal communication.
							</dd></dl></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Create the provisioning network and subnet. This depends on the type of provisioning network you are using. For more information about configuring the provisioning network, see <a class="xref" href="index.html#sect-configure" title="Chapter 4. Configuring the Bare Metal Provisioning service after deployment">Chapter 4, <em>Configuring the Bare Metal Provisioning service after deployment</em></a>.
						</li><li class="listitem"><p class="simpara">
							Create a tenant network and subnet:
						</p><pre class="screen">$ openstack network create --provider-network-type vlan --provider-physical-network baremetal tenant-net
$ openstack subnet create --network tenant-net --subnet-range 192.168.3.0/24 --allocation-pool start=192.168.3.10,end=192.168.3.20 tenant-subnet</pre><p class="simpara">
							Ensure that you set the <code class="literal">--provider-network-type</code> option to <code class="literal">vlan</code> to ensure <code class="literal">networking-ansible</code> functionality.
						</p></li></ol></div></section><section class="section" id="configuring-ports-for-bare-metal-guests-in-access-mode"><div class="titlepage"><div><div><h3 class="title">7.5.2. Configuring ports for bare metal guests in access mode</h3></div></div></div><p>
					Bare metal guests require port information to connect to the switch. There are two methods to accomplish this:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Automatic:</strong></span> Introspection of nodes. To use the automatic method, set the <code class="literal">mac</code> value for the respective switch as a part of the <code class="literal">ML2HostConfigs</code> parameter.
						</li><li class="listitem">
							<span class="strong strong"><strong>Manual:</strong></span> Set the OpenStack Networking (neutron) port configuration. Use this method if your overcloud does not include bare metal introspection functionality.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Automatic:</strong></span>
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Run the introspection command:
								</p><pre class="screen">$ openstack baremetal introspection start [--wait] &lt;NODENAME&gt;</pre><p class="simpara">
									The bare metal nodes obtain the MAC address of the switch during introspection. The <code class="literal">networking-ansible</code> ML2 driver uses this MAC address to map to the same MAC address that you define with the <code class="literal">mac</code> parameter for the respective switch in the <code class="literal">ML2HostConfigs</code> parameter.
								</p></li><li class="listitem">
									Wait until the introspection completes.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Manual:</strong></span>
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create a port for the bare metal node. Use the following example command as a basis to create the port:
								</p><pre class="screen">$ openstack baremetal port create [NODE NIC MAC] --node [NODE UUID] \
    --local-link-connection port_id=[SWICH PORT ID] \
    --local-link-connection switch_info=[SWITCH NAME] \
    --local-link-connection switch_id=[SWITCH MAC]</pre><p class="simpara">
									Replace the following values in brackets with your own environment details:
								</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">[NODE NIC MAC]</code></span></dt><dd>
												The MAC address of the NIC that is connected to the switch.
											</dd><dt><span class="term"><code class="literal">--node [NODE UUID]</code></span></dt><dd>
												The UUID of the node that uses the new port.
											</dd><dt><span class="term"><code class="literal">--local-link-connection port_id=[SWITCH PORT ID]</code></span></dt><dd>
												The port ID on the switch that connects to the bare metal node.
											</dd><dt><span class="term"><code class="literal">--local-link-connection switch_info=[SWITCH NAME]</code></span></dt><dd>
												The name of the switch that connects to the bare metal node. The switch name must match the respective switch name that you define in the <code class="literal">ML2HostConfigs</code> parameter.
											</dd><dt><span class="term"><code class="literal">--local-link-connection switch_id=[SWITCH MAC]</code></span></dt><dd>
												The MAC address of the switch. This must match the respective <code class="literal">mac</code> value from the switch configuration from the <code class="literal">ML2HostConfigs</code> parameter. This is an alternative option to using <code class="literal">switch_info</code>.
											</dd></dl></div></li></ol></div></li></ul></div></section><section class="section" id="configuring-networks-for-networking-ansible-in-trunk-mode"><div class="titlepage"><div><div><h3 class="title">7.5.3. Configuring networks for networking-ansible in trunk mode</h3></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
					</p></div></div><p>
					After you deploy the overcloud with bare metal provisioning and the <code class="literal">networking-ansible</code> driver enabled, create the following networks for your bare metal nodes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Provisioning network</span></dt><dd>
								Bare metal systems use this network for their initial creation.
							</dd><dt><span class="term">Tenant network</span></dt><dd>
								Bare metal systems switch to this network after provisioning and use this network for internal communication.
							</dd></dl></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Create the provisioning network and subnet. This depends on the type of provisioning network you are using. For more information about configuring the provisioning network, see <a class="xref" href="index.html#sect-configure" title="Chapter 4. Configuring the Bare Metal Provisioning service after deployment">Chapter 4, <em>Configuring the Bare Metal Provisioning service after deployment</em></a>.
						</li><li class="listitem"><p class="simpara">
							Create a primary tenant VLAN network, a secondary tenant network, and subnets for each network that use the physical network that the guest is attached to:
						</p><pre class="screen">$ openstack network create --provider-network-type vlan --provider-physical-network baremetal primary-tenant-net
$ openstack network create --provider-network-type vlan --provider-physical-network baremetal secondary-tenant-net
$ openstack subnet create --network primary-tenant-net --subnet-range 192.168.3.0/24 --allocation-pool start=192.168.3.10,end=192.168.3.20 primary-tenant-subnet
$ openstack subnet create --network secondary-tenant-net --subnet-range 192.168.7.0/24 --allocation-pool start=192.168.7.10,end=192.168.7.20 secondary-tenant-subnet</pre><p class="simpara">
							Ensure that you set the <code class="literal">--provider-network-type</code> option to <code class="literal">vlan</code> to ensure <code class="literal">networking-ansible</code> functionality.
						</p></li></ol></div></section><section class="section" id="configuring-ports-for-bare-metal-guests-in-trunk-mode"><div class="titlepage"><div><div><h3 class="title">7.5.4. Configuring ports for bare metal guests in trunk mode</h3></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
					</p></div></div><p>
					Bare metal guests require port information to connect to the switch so that you can use the Bare Metal Provisioning service (ironic) to deploy on multiple networks with a single switch port. The switch port is configured in trunk mode using the VLANs that the Networking service (neutron) assigns from the supplied networks.
				</p><p>
					Complete the following steps to configure trunk ports for bare metal guests.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a port and a trunk, and assign the port to the trunk as the parent port:
						</p><pre class="screen">$ port create --network primary-tenant-net primary-port
$ network trunk create --parent-port primary-port my-trunk</pre></li><li class="listitem"><p class="simpara">
							Create a port for the secondary network and add the new port as a subport to the trunk:
						</p><pre class="screen">$ port create --network secondary-tenant-net secondary-port
$ network trunk set --subport port=secondary-port,segmentation-type=vlan,segmentation-id=1234 my-trunk</pre></li></ol></div></section></section><section class="section" id="testing-networking-ansible-ml2-functions"><div class="titlepage"><div><div><h2 class="title">7.6. Testing networking-ansible ML2 functions</h2></div></div></div><p>
				After the <code class="literal">networking-ansible</code> configuration for the bare metal node is complete, create a bare metal workload to verify that the configuration is correct.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An overcloud with OpenStack Baremetal (ironic) services.
					</li><li class="listitem">
						An enabled <code class="literal">networking-ansible</code> ML2 driver.
					</li><li class="listitem">
						The <code class="literal">ML2HostConfigs</code> parameter contains switch access details.
					</li><li class="listitem">
						A registered bare metal node.
					</li><li class="listitem">
						Configuration of the respective bare metal port used for the node connection on the switch. This port can be either an access port or a trunk port.
					</li><li class="listitem">
						A VLAN-based provisioning network defined in OpenStack Networking (neutron) for initial provisioning.
					</li><li class="listitem">
						A VLAN-based tenant network defined in OpenStack Networking (neutron) for internal communication.
					</li><li class="listitem">
						Disk images and key pairs available in the overcloud.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the bare metal system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To create a bare metal system that uses an access port, run the following command:
							</p><pre class="screen">openstack server create --flavor baremetal --image overcloud-full --key default --network tenant-net test1</pre></li><li class="listitem"><p class="simpara">
								To create a bare metal system that uses a trunk port, run the following command:
							</p><pre class="screen">openstack server create --flavor baremetal --image overcloud-full --port {primary-port-uuid} --key default test1</pre></li></ul></div></li></ol></div><p>
				The overcloud initially creates the bare metal system on the provisioning network. When the creation completes, the <code class="literal">networking-ansible</code> driver changes the port configuration on the switch so that the bare metal system uses the tenant network.
			</p></section></section><section class="chapter" id="sect-troubleshoot"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Troubleshooting the Bare Metal Provisioning service</h1></div></div></div><p>
			Diagnose issues in an environment that includes the Bare Metal Provisioning service (ironic).
		</p><section class="section" id="pxe_boot_errors"><div class="titlepage"><div><div><h2 class="title">8.1. PXE boot errors</h2></div></div></div><div class="formalpara"><p class="title"><strong><span class="emphasis"><em>Permission Denied</em></span> errors</strong></p><p>
					If the console of your bare metal node returns a <code class="literal">Permission Denied</code> error, ensure that you have applied the appropriate SELinux context to the <code class="literal">/httpboot</code> and <code class="literal">/tftpboot</code> directories:
				</p></div><pre class="screen"># semanage fcontext -a -t httpd_sys_content_t "/httpboot(/.*)?"
# restorecon -r -v /httpboot
# semanage fcontext -a -t tftpdir_t "/tftpboot(/.*)?"
# restorecon -r -v /tftpboot</pre><div class="formalpara"><p class="title"><strong>Boot process freezes at <code class="literal">/pxelinux.cfg/XX-XX-XX-XX-XX-XX</code></strong></p><p>
					On the console of your node, if it looks like you receive an IP address but then the process stops, you might be using the wrong PXE boot template in your <code class="literal">ironic.conf</code> file.
				</p></div><p>
				<span class="inlinemediaobject"><img src="PXE_Troubleshooting.png" alt="PXE Process Freezes During Boot"/></span>

			</p><pre class="screen">$ grep ^pxe_config_template ironic.conf
pxe_config_template=$pybasedir/drivers/modules/ipxe_config.template</pre><p>
				The default template is <code class="literal">pxe_config.template</code>, so it is easy to omit the <span class="emphasis"><em>i</em></span> and inadvertently enter <code class="literal">ipxe_config.template</code> instead.
			</p></section><section class="section" id="login_errors_after_the_bare_metal_node_boots"><div class="titlepage"><div><div><h2 class="title">8.2. Login errors after the bare metal node boots</h2></div></div></div><p>
				Failure to log in to the node when you use the root password that you set during configuration indicates that you are not booted into the deployed image. You might be logged in to the <code class="literal">deploy-kernel/deploy-ramdisk</code> image and the system has not yet loaded the correct image.
			</p><p>
				To fix this issue, verify that the PXE Boot Configuration file in the <code class="literal">/httpboot/pxelinux.cfg/MAC_ADDRESS</code> on the Compute or Bare Metal Provisioning service node and ensure that all the IP addresses listed in this file correspond to IP addresses on the Bare Metal network.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The only network that the Bare Metal Provisioning service node uses is the Bare Metal network. If one of the endpoints is not on the network, the endpoint cannot reach the Bare Metal Provisioning service node as a part of the boot process.
				</p></div></div><p>
				For example, the kernel line in your file is as follows:
			</p><pre class="screen">kernel <span class="strong strong"><strong>http://192.168.200.2:8088/5a6cdbe3-2c90-4a90-b3c6-85b449b30512/deploy_kernel</strong></span> selinux=0 disk=cciss/c0d0,sda,hda,vda iscsi_target_iqn=iqn.2008-10.org.openstack:5a6cdbe3-2c90-4a90-b3c6-85b449b30512 deployment_id=<span class="strong strong"><strong>5a6cdbe3-2c90-4a90-b3c6-85b449b30512</strong></span> deployment_key=VWDYDVVEFCQJNOSTO9R67HKUXUGP77CK ironic_api_url=<span class="strong strong"><strong>http://192.168.200.2:6385</strong></span> troubleshoot=0 text nofb nomodeset vga=normal boot_option=netboot ip=${ip}:${next-server}:${gateway}:${netmask} BOOTIF=${mac}  ipa-api-url=<span class="strong strong"><strong>http://192.168.200.2:6385</strong></span> ipa-driver-name=<span class="strong strong"><strong>ipmi</strong></span> boot_mode=bios initrd=<span class="strong strong"><strong>deploy_ramdisk</strong></span> coreos.configdrive=0 || goto deploy</pre><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 83%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139728803407952" scope="col">Value in the above example <code class="literal">kernel</code> line</th><th align="left" valign="top" id="idm139728803406416" scope="col">Corresponding information</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139728803407952"> <p>
								http://192.168.200.2:8088
							</p>
							 </td><td align="left" valign="top" headers="idm139728803406416"> <p>
								Parameter <code class="literal">http_url</code> in <code class="literal">/etc/ironic/ironic.conf</code> file. This IP address must be on the Bare Metal network.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728803407952"> <p>
								5a6cdbe3-2c90-4a90-b3c6-85b449b30512
							</p>
							 </td><td align="left" valign="top" headers="idm139728803406416"> <p>
								UUID of the baremetal node in <code class="literal">ironic node-list</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728803407952"> <p>
								deploy_kernel
							</p>
							 </td><td align="left" valign="top" headers="idm139728803406416"> <p>
								This is the deploy kernel image in the Image service that is copied down as <code class="literal">/httpboot/&lt;NODE_UUID&gt;/deploy_kernel</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728803407952"> <p>
								http://192.168.200.2:6385
							</p>
							 </td><td align="left" valign="top" headers="idm139728803406416"> <p>
								Parameter <code class="literal">api_url</code> in <code class="literal">/etc/ironic/ironic.conf</code> file. This IP address must be on the Bare Metal network.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728803407952"> <p>
								ipmi
							</p>
							 </td><td align="left" valign="top" headers="idm139728803406416"> <p>
								The IPMI Driver in use by the Bare Metal Provisioning service for this node.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728803407952"> <p>
								deploy_ramdisk
							</p>
							 </td><td align="left" valign="top" headers="idm139728803406416"> <p>
								This is the deploy ramdisk image in the Image service that is copied down as <code class="literal">/httpboot/&lt;NODE_UUID&gt;/deploy_ramdisk</code>.
							</p>
							 </td></tr></tbody></table></div><p>
				If a value does not correspond between the <code class="literal">/httpboot/pxelinux.cfg/MAC_ADDRESS</code> and the <code class="literal">ironic.conf</code> file:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Update the value in the <code class="literal">ironic.conf</code> file
					</li><li class="listitem">
						Restart the Bare Metal Provisioning service
					</li><li class="listitem">
						Re-deploy the Bare Metal instance
					</li></ol></div></section><section class="section" id="the_bare_metal_provisioning_service_does_not_receive_the_correct_host_name"><div class="titlepage"><div><div><h2 class="title">8.3. The Bare Metal Provisioning service does not receive the correct host name</h2></div></div></div><p>
				If the Bare Metal Provisioning service does not receive the right host name, it means that <code class="literal">cloud-init</code> is failing. To fix this, connect the Bare Metal subnet to a router in the OpenStack Networking service. This configuration routes requests to the meta-data agent correctly.
			</p></section><section class="section" id="invalid_openstack_identity_service_credentials_when_executing_bare_metal_provisioning_service_commands"><div class="titlepage"><div><div><h2 class="title">8.4. Invalid OpenStack Identity service credentials when executing Bare Metal Provisioning service commands</h2></div></div></div><p>
				If you cannot authenticate to the Identity service, check the <code class="literal">identity_uri</code> parameter in the <code class="literal">ironic.conf</code> file and ensure that you remove the <code class="literal">/v2.0</code> from the <code class="literal">keystone</code> AdminURL. For example, set the <code class="literal">identity_uri</code> to <code class="literal">http://IP:PORT</code>.
			</p></section><section class="section" id="hardware_enrollment"><div class="titlepage"><div><div><h2 class="title">8.5. Hardware enrollment</h2></div></div></div><p>
				Incorrect node registration details can cause issues with enrolled hardware. Ensure that you enter property names and values correctly. When you input property names incorrectly, the system adds the properties to the node details but ignores them.
			</p><p>
				Use the <code class="literal">openstack baremetal node set</code> command to update node details. For example, update the amount of memory that the node is registered to use to 2 GB:
			</p><pre class="screen">$ openstack baremetal node set --property memory_mb=2048 <span class="emphasis"><em>NODE_UUID</em></span></pre></section><section class="section" id="emphasis_no_valid_host_emphasis_errors"><div class="titlepage"><div><div><h2 class="title">8.6. <span class="emphasis"><em>No Valid Host</em></span> errors</h2></div></div></div><p>
				If the Compute scheduler cannot find a suitable bare metal on which to boot an instance, a <code class="literal">NoValidHost</code> error appears in <code class="literal">/var/log/nova/nova-conductor.log</code> or immediately after launch failure in the dashboard. This is usually caused by a mismatch between the resources that Compute expects and the resources the bare metal node provides.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the hypervisor resources that are available:
					</p><pre class="screen">$ openstack hypervisor stats show</pre><p class="simpara">
						The resources reported here must match the resources that the bare metal nodes provide.
					</p></li><li class="listitem"><p class="simpara">
						Check that Compute recognizes the bare metal nodes as hypervisors:
					</p><pre class="screen">$ openstack hypervisor list</pre><p class="simpara">
						The nodes, identified by UUID, appear in the list.
					</p></li><li class="listitem"><p class="simpara">
						Check the details for a bare metal node:
					</p><pre class="screen">$ openstack baremetal node list
$ openstack baremetal node show <span class="emphasis"><em>NODE_UUID</em></span></pre><p class="simpara">
						Verify that the node details match the details that Compute reports.
					</p></li><li class="listitem"><p class="simpara">
						Check that the selected flavor does not exceed the available resources of the bare metal nodes:
					</p><pre class="screen">$ openstack flavor show <span class="emphasis"><em>FLAVOR_NAME</em></span></pre></li><li class="listitem"><p class="simpara">
						Check the output of the <code class="literal">openstack baremetal node list</code> command to ensure that your bare metal nodes are not in maintenance mode. Remove maintenance mode if necessary:
					</p><pre class="screen">$ openstack baremetal node maintenance unset <span class="emphasis"><em>NODE_UUID</em></span></pre></li><li class="listitem"><p class="simpara">
						Check the output of the <code class="literal">openstack baremetal node list</code> command to ensure that your bare metal nodes are in an <code class="literal">available</code> state. Move the node to <code class="literal">available</code> if necessary:
					</p><pre class="screen">$ openstack baremetal node provide <span class="emphasis"><em>NODE_UUID</em></span></pre></li></ol></div></section><section class="section" id="troubleshooting-idrac-issues"><div class="titlepage"><div><div><h2 class="title">8.7. Troubleshooting iDRAC issues</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Redfish management interface fails to set boot device</span></dt><dd><p class="simpara">
							When you use the <code class="literal">idrac-redfish</code> management interface with certain iDRAC firmware versions and attempt to set the boot device on a bare metal server with UEFI boot, iDRAC returns the following error:
						</p><pre class="screen">Unable to Process the request because the value entered for the
parameter Continuous is not supported by the implementation.</pre><p class="simpara">
							If you encounter this issue, set the <code class="literal">force_persistent_boot_device</code> parameter in the <code class="literal">driver-info</code> on the node to <code class="literal">Never</code>:
						</p><pre class="screen">openstack baremetal node set --driver-info force_persistent_boot_device=Never ${node_uuid}</pre></dd><dt><span class="term">Timeout when powering off</span></dt><dd><p class="simpara">
							Some servers can be too slow when powering off, and time out. The default retry count is <code class="literal">6</code>, which results in a 30 second timeout. To increase the timeout duration to 90 seconds, set the <code class="literal">ironic::agent::rpc_response_timeout</code> value to <code class="literal">18</code> in the undercloud hieradata overrides file and re-run the <code class="literal">openstack undercloud install</code> command:
						</p><pre class="screen">ironic::agent::rpc_response_timeout: 18</pre></dd><dt><span class="term">Vendor passthrough timeout</span></dt><dd><p class="simpara">
							When iDRAC is not available to execute vendor passthrough commands, these commands take too long and time out:
						</p><pre class="screen">openstack baremetal node passthru call --http-method GET \
aed58dca-1b25-409a-a32f-3a817d59e1e0 list_unfinished_jobs
Timed out waiting for a reply to message ID 547ce7995342418c99ef1ea4a0054572 (HTTP 500)</pre><p class="simpara">
							To increase the timeout duration for messaging, increase the value of the <code class="literal">ironic::default::rpc_response_timeout</code> parameter in the undercloud hieradata overrides file and re-run the <code class="literal">openstack undercloud install</code> command:
						</p><pre class="screen">ironic::default::rpc_response_timeout: 600</pre></dd></dl></div></section></section><section class="appendix" id="sect-appendix-drivers"><div class="titlepage"><div><div><h1 class="title">Appendix A. Bare metal drivers</h1></div></div></div><p>
			You can configure bare metal nodes to use one of the drivers that are enabled in the Bare Metal Provisioning service. Each driver includes a provisioning method and a power management type. Some drivers require additional configuration. Each driver described in this section uses PXE for provisioning; drivers are listed by their power management type.
		</p><p>
			You can add drivers with the <code class="literal">IronicEnabledHardwareTypes</code> parameter in your <code class="literal">ironic.yaml</code> file. By default, <code class="literal">ipmi</code>, <code class="literal">redfish</code>, <code class="literal">idrac</code> and <code class="literal">ilo</code> are enabled.
		</p><p>
			For the full list of supported plug-ins and drivers, see <a class="link" href="https://access.redhat.com/articles/1535373#Ironic">Component, Plug-In, and Driver Support in Red Hat OpenStack Platform</a>.
		</p><section class="section" id="intelligent_platform_management_interface_ipmi"><div class="titlepage"><div><div><h2 class="title">A.1. Intelligent Platform Management Interface (IPMI)</h2></div></div></div><p>
				IPMI is an interface that provides out-of-band remote management features, including power management and server monitoring. To use this power management type, all Bare Metal Provisioning service nodes require an IPMI that is connected to the shared Bare Metal network. Enable the <code class="literal">ipmi</code> driver, and set the following information in the <code class="literal">driver_info</code> of the node:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">ipmi_address</code> - The IP address of the IPMI NIC.
					</li><li class="listitem">
						<code class="literal">ipmi_username</code> - The IPMI user name.
					</li><li class="listitem">
						<code class="literal">ipmi_password</code> - The IPMI password.
					</li></ul></div></section><section class="section" id="redfish"><div class="titlepage"><div><div><h2 class="title">A.2. Redfish</h2></div></div></div><p>
				A standard RESTful API for IT infrastructure developed by the Distributed Management Task Force (DMTF)
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">redfish_username</code> - The Redfish username.
					</li><li class="listitem">
						<code class="literal">redfish_password</code> - The Redfish password.
					</li><li class="listitem">
						<code class="literal">redfish_address</code> - The IP address of the Redfish controller.
					</li><li class="listitem">
						<code class="literal">redfish_system_id</code> - The canonical path to the system resource. This path must include the root service, version, and the path/unique ID for the system. For example: <code class="literal">/redfish/v1/Systems/CX34R87</code>.
					</li><li class="listitem">
						<code class="literal">redfish_verify_ca</code> - Either a Boolean value, a path to a CA_BUNDLE file, or a directory with certificates of trusted CAs. If you set this value to <code class="literal">True</code> the driver verifies the host certificates. If you set this value to <code class="literal">False</code> the driver ignores verifying the SSL certificate. If you set this value to a path, the driver uses the specified certificate or one of the certificates in the directory. The default is <code class="literal">True</code>.
					</li></ul></div></section><section class="section" id="dell_remote_access_controller_drac"><div class="titlepage"><div><div><h2 class="title">A.3. Dell Remote Access Controller (DRAC)</h2></div></div></div><p>
				DRAC is an interface that provides out-of-band remote management features, including power management and server monitoring. To use this power management type, all Bare Metal Provisioning service nodes require a DRAC that is connected to the shared Bare Metal network. Enable the <code class="literal">idrac</code> driver, and set the following information in the <code class="literal">driver_info</code> of the node:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">drac_address</code> - The IP address of the DRAC NIC.
					</li><li class="listitem">
						<code class="literal">drac_username</code> - The DRAC user name.
					</li><li class="listitem">
						<code class="literal">drac_password</code> - The DRAC password.
					</li></ul></div></section><section class="section" id="integrated_remote_management_controller_irmc"><div class="titlepage"><div><div><h2 class="title">A.4. Integrated Remote Management Controller (iRMC)</h2></div></div></div><p>
				iRMC from Fujitsu is an interface that provides out-of-band remote management features including power management and server monitoring. To use this power management type on a Bare Metal Provisioning service node, the node requires an iRMC interface that is connected to the shared Bare Metal network. Enable the <code class="literal">irmc</code> driver, and set the following information in the <code class="literal">driver_info</code> of the node:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">irmc_address</code> - The IP address of the iRMC interface NIC.
					</li><li class="listitem">
						<code class="literal">irmc_username</code> - The iRMC user name.
					</li><li class="listitem">
						<code class="literal">irmc_password</code> - The iRMC password.
					</li></ul></div><p>
				To use IPMI to set the boot mode or SCCI to get sensor data, you must complete the following additional steps:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable the sensor method in the <code class="literal">ironic.conf</code> file:
					</p><pre class="screen">$ openstack-config --set /etc/ironic/ironic.conf \
   irmc sensor_method <span class="emphasis"><em>METHOD</em></span></pre><p class="simpara">
						Replace <span class="emphasis"><em>METHOD</em></span> with <code class="literal">scci</code> or <code class="literal">ipmitool</code>.
					</p></li><li class="listitem"><p class="simpara">
						If you enabled SCCI, install the <code class="literal">python-scciclient</code> package:
					</p><pre class="screen"># dnf install python-scciclient</pre></li><li class="listitem"><p class="simpara">
						Restart the Bare Metal conductor service:
					</p><pre class="screen"># systemctl restart openstack-ironic-conductor.service</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To use the iRMC driver, iRMC S4 or higher is required.
				</p></div></div></section><section class="section" id="integrated_lights_out_ilo"><div class="titlepage"><div><div><h2 class="title">A.5. Integrated Lights-Out (iLO)</h2></div></div></div><p>
				iLO from Hewlett-Packard is an interface that provides out-of-band remote management features including power management and server monitoring. To use this power management type, all Bare Metal nodes require an iLO interface that is connected to the shared Bare Metal network. Enable the <code class="literal">ilo</code> driver, and set the following information in the <code class="literal">driver_info</code> of the node:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">ilo_address</code> - The IP address of the iLO interface NIC.
					</li><li class="listitem">
						<code class="literal">ilo_username</code> - The iLO user name.
					</li><li class="listitem">
						<code class="literal">ilo_password</code> - The iLO password.
					</li></ul></div><p>
				You must also install the <code class="literal">python-proliantutils</code> package and restart the Bare Metal conductor service:
			</p><pre class="screen"># dnf install python-proliantutils
# systemctl restart openstack-ironic-conductor.service</pre></section><section class="section" id="converting_to_next_generation_power_management_drivers"><div class="titlepage"><div><div><h2 class="title">A.6. Converting to next generation power management drivers</h2></div></div></div><p>
				Red Hat OpenStack Platform now uses next generation drivers, also known as <span class="emphasis"><em>hardware types</em></span>, that replace older drivers.
			</p><p>
				The following table shows an analogous comparison between older drivers and their next generation hardware type equivalent:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139728797951536" scope="col">Old driver</th><th align="left" valign="top" id="idm139728797950448" scope="col">New hardware type</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139728797951536"> <p>
								<code class="literal">pxe_ipmitool</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139728797950448"> <p>
								<code class="literal">ipmi</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728797951536"> <p>
								<code class="literal">pxe_drac</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139728797950448"> <p>
								<code class="literal">idrac</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728797951536"> <p>
								<code class="literal">pxe_ilo</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139728797950448"> <p>
								<code class="literal">ilo</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728797951536"> <p>
								<code class="literal">pxe_irmc</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139728797950448"> <p>
								<code class="literal">irmc</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139728797951536"> <p>
								<code class="literal">fake_pxe</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139728797950448"> <p>
								<code class="literal">fake-hardware</code>
							</p>
							 </td></tr></tbody></table></div><p>
				In Red Hat OpenStack Platform (RHOSP) 15, these older drivers have been removed and are no longer accessible. You must change to the new hardware types before you upgrade to RHOSP 15.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the current list of enabled hardware types:
					</p><pre class="screen">$ source ~/overcloud
$ openstack baremetal driver list --type dynamic</pre></li><li class="listitem"><p class="simpara">
						If you use a hardware type driver that is not enabled, use the <code class="literal">IronicEnabledHardwareTypes</code> parameter in an environment file to enable the driver:
					</p><pre class="screen">parameter_defaults:
  IronicEnabledHardwareTypes: ipmi,redfish,idrac</pre></li><li class="listitem"><p class="simpara">
						Save the file and run the overcloud deployment command:
					</p><pre class="screen">$ openstack overcloud deploy -e [ENVIRONMENT_FILE] -r [ROLES_DATA] -n [NETWORK_DATA]</pre><p class="simpara">
						Ensure that you include all environment and data files relevant to your overcloud.
					</p></li><li class="listitem"><p class="simpara">
						Run the following commands. Substitute the <code class="literal">OLDDRIVER</code> and <code class="literal">NEWDRIVER</code> variables for your power management type:
					</p><pre class="screen">$ source ~/overcloud
$ OLDDRIVER="pxe_ipmitool"
$ NEWDRIVER="ipmi"
$ for NODE in $(openstack baremetal node list --driver $OLDDRIVER -c UUID -f value) ; do openstack baremetal node set $NODE --driver $NEWDRIVER; done</pre></li></ol></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm139728805860944"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="rh-summit-red-a.svg" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>

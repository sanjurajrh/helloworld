<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="7472ac40-930e-4726-8792-47aa243a99d5" product="7eff92b4-effc-4326-8604-6f852e3e9747" revision="c2973328ba7082bc1ee91cdd08745139619ae7de:en-us" page="6dd66d9f-759b-400d-acfa-37adfe5a747c" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/index" />
<meta property="og:title" content="Network Functions Virtualization Planning and Configuration Guide Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal" />
<meta property="og:description" content="This guide contains important planning information and describes the configuration procedures for single root input/output virtualization (SR-IOV) and dataplane development kit (DPDK) for network functions virtualization infrastructure (NFVi) in your Red Hat OpenStack Platform deployment." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/index" />
<meta name="twitter:title" content="Network Functions Virtualization Planning and Configuration Guide Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal" />
<meta name="twitter:description" content="This guide contains important planning information and describes the configuration procedures for single root input/output virtualization (SR-IOV) and dataplane development kit (DPDK) for network functions virtualization infrastructure (NFVi) in your Red Hat OpenStack Platform deployment." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Network Functions Virtualization Planning and Configuration Guide Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs07.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="fc526cb5" />
<meta name="cp-chrome-build-date" content="2020-10-15T21:45:53.836Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "fc526cb5",
        builddate : "2020-10-15T21:45:53.836Z",
        fetchdate : "2020-10-19T10:39:25-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="bootstrap-grid.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=fc526cb5.css" />

<link href="chosen.css%3Fv=fc526cb5.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=fc526cb5" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->

  <!-- TrustArc -->
  <script src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__ZyeOaiFuDejQQbhUV7yg7atYZnj4WLfH77o0scv4068__MZdWWgUEYpsEWLcU0RqkaXMsEyksbpCgnf4XwXRkqz0__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       '7472ac40-930e-4726-8792-47aa243a99d5');
attributes.set('ResourceTitle',    'Network Functions Virtualization Planning and Configuration Guide');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       'c2973328ba7082bc1ee91cdd08745139619ae7de:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat OpenStack Platform');
attributes.set('ProductVersion',   '16.1');
attributes.set('ProductId',        'Red Hat OpenStack Platform 16.1');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat OpenStack Platform", "/documentation/en-us/red_hat_openstack_platform/"], ["16.1", "/documentation/en-us/red_hat_openstack_platform/16.1/"], ["Network Functions Virtualization Planning and Configuration Guide", "/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__8abcou7ybLtGOLy-V9E-NQlDejOMZmdStjlYfyX9W-k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"SWoQ4I3tOz2zR5_3RZYwSK6W_HmzVoc696ds2-80zHc","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery-html-prefilter-3.5.0-backport.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs07-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page  kcs_external" >
  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <script>
    chrometwo_require(["wc"], function(wc){    
        wc.include("@cpelements/cp-search-autocomplete/dist/cp-search-autocomplete.umd");
    }); 
</script>

<!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <span class="sr-only">Red Hat Customer Portal</span>
          <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
            <defs>
            <style>
              .rh-logo-type {
                fill:#fff;
              }
              .rh-logo-hat {
                fill:#e00;
              }
            </style>
            </defs>
            <g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
          </svg>
        </span>
            </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom" path="/webassets/avalon/j/data.json"></cp-search-autocomplete>
                            <div class="input-group push-bottom">
                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Or <a href="https://access.redhat.com/support/cases/#/troubleshoot">troubleshoot an issue</a>.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                      <span class="sr-only">Red Hat Customer Portal</span>
                      <span class="logo-crop">
                        <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
                          <defs>
                          <style>
                            .rh-logo-type {
                              fill:#fff;
                            }
                            .rh-logo-hat {
                              fill:#e00;
                            }
                          </style>
                          </defs>
                          <title>Red Hat Customer Portal</title><g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
                        </svg>
                      </span>
                                            </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        
                                        <li><a href="https://catalog.redhat.com/" class="cta-link cta-link-darkbg">Ecosystem Catalog</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="index.html">English</a></li>
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/">日本語</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/pdf/network_functions_virtualization_planning_and_configuration_guide/Red_Hat_OpenStack_Platform-16.1-Network_Functions_Virtualization_Planning_and_Configuration_Guide-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/epub/network_functions_virtualization_planning_and_configuration_guide/Red_Hat_OpenStack_Platform-16.1-Network_Functions_Virtualization_Planning_and_Configuration_Guide-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Network Functions Virtualization Planning and Configuration Guide</a></li><li class=" leaf"><a href="index.html#idm140654534189440">Preface</a></li><li class=" leaf"><a href="index.html#c_overview">1. Overview of NFV</a></li><li class=" leaf"><a href="index.html#ch-hardware-requirements">2. Hardware requirements</a><ol class="menu"><li class=" leaf"><a href="index.html#ref_supported-nics">2.1. Tested NICs</a></li><li class=" leaf"><a href="index.html#proc_finding-numa-topology">2.2. Discovering your NUMA node topology</a></li><li class=" leaf"><a href="index.html#bios_settings">2.3. BIOS Settings</a></li></ol></li><li class=" leaf"><a href="index.html#ch-software">3. Software requirements</a><ol class="menu"><li class=" leaf"><a href="index.html#registering_and_enabling_repositories">3.1. Registering and enabling repositories</a></li><li class=" leaf"><a href="index.html#sect-supported-conf">3.2. Supported configurations for NFV deployments</a></li><li class=" leaf"><a href="index.html#sect-supported-drivers">3.3. Supported drivers</a></li><li class=" leaf"><a href="index.html#sect-third-party-software">3.4. Compatibility with third-party software</a></li></ol></li><li class=" leaf"><a href="index.html#ch-network-considerations">4. Network considerations</a></li><li class=" leaf"><a href="index.html#assembly_sriov_parameters">5. Planning an SR-IOV deployment</a><ol class="menu"><li class=" leaf"><a href="index.html#concept_sriov-cpu-partitioning">5.1. Hardware partitioning for an SR-IOV deployment</a></li><li class=" leaf"><a href="index.html#assembly_sriov-topology">5.2. Topology of an NFV SR-IOV deployment</a><ol class="menu"><li class=" leaf"><a href="index.html#concept_sriov-nohci">5.2.1. Topology for NFV SR-IOV without HCI</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#part-sriov-nfv-configuration">6. Deploying SR-IOV technologies</a><ol class="menu"><li class=" leaf"><a href="index.html#prerequisites">6.1. Prerequisites</a></li><li class=" leaf"><a href="index.html#sect-configuring-sriov">6.2. Configuring SR-IOV</a></li><li class=" leaf"><a href="index.html#sect-configuring-host-sriov">6.3. NIC partitioning</a></li><li class=" leaf"><a href="index.html#sect-configuring-hw-offload">6.4. Configuring OVS hardware offload</a><ol class="menu"><li class=" leaf"><a href="index.html#verifying_ovs_hardware_offload">6.4.1. Verifying OVS hardware offload</a></li></ol></li><li class=" leaf"><a href="index.html#tuning_examples_for_ovs_hardware_offload">6.5. Tuning examples for OVS hardware offload</a></li><li class=" leaf"><a href="index.html#components_of_ovs_hardware_offload">6.6. Components of OVS hardware offload</a></li><li class=" leaf"><a href="index.html#troubleshooting_ovs_hardware_offload">6.7. Troubleshooting OVS hardware offload</a></li><li class=" leaf"><a href="index.html#debugging_hw_offload_flow">6.8. Debugging HW Offload flow</a></li><li class=" leaf"><a href="index.html#sect-deploying-sriov-instance">6.9. Deploying an instance for SR-IOV</a></li><li class=" leaf"><a href="index.html#sect-creating-host-aggregates">6.10. Creating host aggregates</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_ovsdpdk_parameters">7. Planning your OVS-DPDK deployment</a><ol class="menu"><li class=" leaf"><a href="index.html#concept_ovsdpdk-cpu-partitioning">7.1. OVS-DPDK with CPU partitioning and NUMA topology</a></li><li class=" leaf"><a href="index.html#c_derive-parameters">7.2. Workflows and derived parameters</a></li><li class=" leaf"><a href="index.html#c_derive-dpdk">7.3. Derived OVS-DPDK parameters</a></li><li class=" leaf"><a href="index.html#concept_ovsdpdk-cpu-parameters">7.4. Calculating OVS-DPDK parameters manually</a><ol class="menu"><li class=" leaf"><a href="index.html#c_ovsdpdk-cpu-parameters">7.4.1. CPU parameters</a></li><li class=" leaf"><a href="index.html#c_ovsdpdk-memory-params">7.4.2. Memory parameters</a></li><li class=" leaf"><a href="index.html#c_ovspdkd-networking-params">7.4.3. Networking parameters</a></li><li class=" leaf"><a href="index.html#c_ovsdpdk-other-params">7.4.4. Other parameters</a></li><li class=" leaf"><a href="index.html#c_ovsdpdk-instance-extra-specs">7.4.5. Instance extra specifications</a></li></ol></li><li class=" leaf"><a href="index.html#proc_two-numa-ovsdpdk">7.5. Two NUMA node example OVS-DPDK deployment</a></li><li class=" leaf"><a href="index.html#assembly_ovsdpdk-topology">7.6. Topology of an NFV OVS-DPDK deployment</a></li></ol></li><li class=" leaf"><a href="index.html#part-dpdk-configure">8. Configuring an OVS-DPDK deployment</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_derive-dpdk">8.1. Deriving DPDK parameters with workflows</a></li><li class=" leaf"><a href="index.html#c_ovsdpdk-composeable">8.2. OVS-DPDK topology</a></li><li class=" leaf"><a href="index.html#proc-ovsdpdk-mtu">8.3. Setting the MTU value for OVS-DPDK interfaces</a></li><li class=" leaf"><a href="index.html#proc-ovsdpdk-firewall">8.4. Configuring a firewall for security groups</a></li><li class=" leaf"><a href="index.html#proc_ovsdpdk-multiqueu">8.5. Setting multiqueue for OVS-DPDK interfaces</a></li><li class=" leaf"><a href="index.html#r-ovsdpdk-limitations">8.6. Known limitations</a></li><li class=" leaf"><a href="index.html#p-ovs-dpdk-flavor-deploy-instance">8.7. Creating a flavor and deploying an instance for OVS-DPDK</a></li><li class=" leaf"><a href="index.html#p-ovsdpdk-troubleshoot">8.8. Troubleshooting the configuration</a></li></ol></li><li class=" leaf"><a href="index.html#parent_assembly_Tuning">9. Tuning a Red Hat OpenStack Platform environment</a><ol class="menu"><li class=" leaf"><a href="index.html#parent_assembly_ET">9.1. Pinning emulator threads</a><ol class="menu"><li class=" leaf"><a href="index.html#emulator_threads_ET">9.1.1. Configuring CPUs to host emulator threads</a></li><li class=" leaf"><a href="index.html#confirm_emulator_threads_ET">9.1.2. Verify the emulator thread pinning</a></li></ol></li><li class=" leaf"><a href="index.html#enabling_rt_kvm_for_nfv_workloads">9.2. Enabling RT-KVM for NFV Workloads</a><ol class="menu"><li class=" leaf"><a href="index.html#planning_for_your_rt_kvm_compute_nodes">9.2.1. Planning for your RT-KVM Compute nodes</a></li><li class=" leaf"><a href="index.html#configuring_ovs_dpdk_with_rt_kvm">9.2.2. Configuring OVS-DPDK with RT-KVM</a></li><li class=" leaf"><a href="index.html#launching_an_rt_kvm_instance">9.2.3. Launching an RT-KVM instance</a></li></ol></li><li class=" leaf"><a href="index.html#trusted_virtual_function_ET">9.3. Trusted Virtual Functions</a><ol class="menu"><li class=" leaf"><a href="index.html#trusted_virtual_function_trusted_virtual_function">9.3.1. Configuring trust between virtual and physical functions</a></li><li class=" leaf"><a href="index.html#building_trusted_vf_network_trusted_virtual_function">9.3.2. Utilizing trusted VF networks</a></li></ol></li><li class=" leaf"><a href="index.html#configuring-rx-tx-queue-size_ET">9.4. Configuring RX/TX queue size</a></li><li class=" leaf"><a href="index.html#configuring-a-numa-aware-vswitch">9.5. Configuring a NUMA-aware vSwitch</a></li><li class=" leaf"><a href="index.html#configuring_quality_of_service_qos_in_an_nfvi_environment">9.6. Configuring Quality of Service (QoS) in an NFVi environment</a></li><li class=" leaf"><a href="index.html#hci-dpdk_ET">9.7. Deploying an overcloud with HCI and DPDK</a><ol class="menu"><li class=" leaf"><a href="index.html#example-configuration_hci-dpdk">9.7.1. Example NUMA node configuration</a></li><li class=" leaf"><a href="index.html#example-ceph-file_hci-dpdk">9.7.2. Example ceph configuration file</a></li><li class=" leaf"><a href="index.html#example-dpdk-file_hci-dpdk">9.7.3. Example DPDK configuration file</a></li><li class=" leaf"><a href="index.html#example-nova-file_hci-dpdk">9.7.4. Example nova configuration file</a></li><li class=" leaf"><a href="index.html#hci-matrix_hci-dpdk">9.7.5. Recommended configuration for HCI-DPDK deployments</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#assembly_config-vxlan-dpdk-sriov-hybrid">10. Example: Configuring OVS-DPDK and SR-IOV with VXLAN tunnelling</a><ol class="menu"><li class=" leaf"><a href="index.html#p-vxlan-dpdk-sriov-role-data">10.1. Configuring roles data</a></li><li class=" leaf"><a href="index.html#p-vxlan-dpdk-sriov-hybrid-networkenv">10.2. Configuring OVS-DPDK parameters</a></li><li class=" leaf"><a href="index.html#p-vxlan-dpdk-sriov-hybrid-controller">10.3. Configuring the controller node</a></li><li class=" leaf"><a href="index.html#p-vxlan-dpdk-sriov-hybrid-compute">10.4. Configuring the Compute node for DPDK and SR-IOV</a></li><li class=" leaf"><a href="index.html#p-vxlan-dpdk-sriov-hybrid-deploy">10.5. Deploying the overcloud</a></li></ol></li><li class=" leaf"><a href="index.html#assembly-upgrade">11. Upgrading Red Hat OpenStack platform with NFV</a></li><li class=" leaf"><a href="index.html#ch-performance">12. NFV Performance</a></li><li class=" leaf"><a href="index.html#ref-more-information">13. Finding more information</a></li><li class=" leaf"><a href="index.html#appe-sample-ovsdpdk-sriov-files">A. Sample DPDK SRIOV YAML files</a><ol class="menu"><li class=" leaf"><a href="index.html#ref_vxlan-dpdk-sriov-hybrid-yaml">A.1. Sample VXLAN DPDK SRIOV YAML files</a><ol class="menu"><li class=" leaf"><a href="index.html#ap-vxlan-dpdk-sriov-hybrid-roles-data">A.1.1. roles_data.yaml</a></li><li class=" leaf"><a href="index.html#ap-vxlan-dpdk-sriov-hybrid-network-environment">A.1.2. network-environment-overrides.yaml</a></li><li class=" leaf"><a href="index.html#ap-vxlan-dpdk-sriov-hybrid-controller">A.1.3. controller.yaml</a></li><li class=" leaf"><a href="index.html#ap-vxlan-dpdk-sriov-hybrid-compute">A.1.4. compute-ovs-dpdk.yaml</a></li><li class=" leaf"><a href="index.html#ap-vxlan-dpdk-sriov-hybrid-overcloud-deploy">A.1.5. overcloud_deploy.sh</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#idm140654531652848">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Network Functions Virtualization Planning and Configuration Guide</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm140654533571600"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat OpenStack Platform</span> <span class="productnumber">16.1</span></div><div><h2 class="subtitle">Planning and Configuring the Network Functions Virtualization (NFV) OpenStack Deployment</h2></div><div><div xml:lang="en-US" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">OpenStack</span> <span class="othername">Documentation</span> <span class="surname">Team</span></h3><code class="email"><a class="email" href="mailto:rhos-docs@redhat.com">rhos-docs@redhat.com</a></code></div></div></div><div><a href="index.html#idm140654531652848">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This guide contains important planning information and describes the configuration procedures for single root input/output virtualization (SR-IOV) and dataplane development kit (DPDK) for network functions virtualization infrastructure (NFVi) in your Red Hat OpenStack Platform deployment.
			</div></div></div></div><hr/></div><section class="preface" id="idm140654534189440"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p id="preface">
			Red Hat OpenStack Platform provides the foundation to build a private or public cloud on top of Red Hat Enterprise Linux. It offers a massively scalable, fault-tolerant platform for the development of cloud-enabled workloads.
		</p><p>
			This guide describes the steps to plan and configure single root input/output virtualization(SR-IOV) and Open vSwitch with Data Plane Development Kit (OVS-DPDK) using the Red Hat OpenStack Platform director for NFV deployments.
		</p></section><section class="chapter" id="c_overview"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Overview of NFV</h1></div></div></div><p>
			Network Functions Virtualization (NFV) is a software solution that virtualizes a network function, such as a network switch, on general purpose, cloud-based infrastructure. NFV allows the Communication Service Provider to move away from traditional or proprietary hardware.
		</p><p>
			For a high-level overview of NFV concepts, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/network_functions_virtualization_product_guide/">Network Functions Virtualization Product Guide</a>.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				OVS-DPDK and SR-IOV configuration depends on your hardware and topology. This guide provides examples for CPU assignments, memory allocation, and NIC configurations that might vary from your topology and use case.
			</p></div></div><p>
			Use Red Hat OpenStack Platform director to isolate specific network types, for example, external, tenant, internal API, and so on. You can deploy a network on a single network interface, or distributed over a multiple-host network interface. With Open vSwitch you can create bonds by assigning multiple interfaces to a single bridge. Configure network isolation in a Red Hat OpenStack Platform installation with template files. If you do not provide template files, the service networks deploy on the provisioning network. There are two types of template configuration files:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<code class="literal">network-environment.yaml</code> - this file contains network details, such as subnets and IP address ranges, for the overcloud nodes. This file also contains the different settings that override the default parameter values for various scenarios.
				</li><li class="listitem">
					Host network templates, for example, <code class="literal">compute.yaml</code> and <code class="literal">controller.yaml</code> - define the network interface configuration for the overcloud nodes. The values of the network details are provided by the <code class="literal">network-environment.yaml</code> file.
				</li></ul></div><p>
			These heat template files are located at <code class="literal">/usr/share/openstack-tripleo-heat-templates/</code> on the undercloud node.
		</p><p>
			The Hardware requirements and Software requirements sections provide more details on how to plan and configure the heat template files for NFV using the Red Hat OpenStack Platform director.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				You can edit YAML files to configure NFV. For an introduction to the YAML file format, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/getting_started_with_kubernetes/yaml_in_a_nutshell">YAML in a Nutshell</a>.
			</p></div></div></section><section class="chapter" id="ch-hardware-requirements"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Hardware requirements</h1></div></div></div><p>
			This section describes the hardware requirements for NFV.
		</p><p>
			You can use <a class="link" href="https://access.redhat.com/ecosystem/">Red Hat Technologies Ecosystem</a> to check for a list of certified hardware, software, cloud providers, and components. Choose the category and select the product version.
		</p><p>
			For a complete list of the certified hardware for Red Hat OpenStack Platform, see <a class="link" href="https://access.redhat.com/ecosystem/search/#/category/Server?sort=sortTitle%20asc&amp;certifications=Red%20Hat%20OpenStack%20Platform%2012&amp;ecosystem=Red%20Hat%20Enterprise%20Linux">Red Hat OpenStack Platform certified hardware</a>.
		</p><section class="section" id="ref_supported-nics"><div class="titlepage"><div><div><h2 class="title">2.1. Tested NICs</h2></div></div></div><p>
				For a list of tested NICs for NFV, see <a class="link" href="https://access.redhat.com/articles/3538141#network-adapter-support-2">Network Adapter Support</a>.
			</p><p>
				If you configure OVS-DPDK on Mellanox ConnectX-4 or ConnectX-5 network interfaces, you must set the corresponding kernel driver in the compute-ovs-dpdk.yaml file:
			</p><pre class="screen">members
 - type: ovs_dpdk_port
    name: dpdk0
    driver: mlx5_core
    members:
    - type: interface
      name: enp3s0f0</pre></section><section class="section" id="proc_finding-numa-topology"><div class="titlepage"><div><div><h2 class="title">2.2. Discovering your NUMA node topology</h2></div></div></div><p>
				When you plan your deployment, you must understand the NUMA topology of your Compute node to partition the CPU and memory resources for optimum performance. To determine the NUMA information, perform one of the following tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Enable hardware introspection to retrieve this information from bare-metal nodes.
					</li><li class="listitem">
						Log on to each bare-metal node to manually collect the information.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You must install and configure the undercloud before you can retrieve NUMA information through hardware introspection. For more information about undercloud configuration, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/director_installation_and_usage/">Director Installation and Usage Guide</a>.
				</p></div></div><div id="proc_introspection-numa-topology" class="formalpara"><p class="title"><strong>Retrieving hardware introspection details</strong></p><p>
					The Bare Metal service hardware-inspection-extras feature is enabled by default, and you can use it to retrieve hardware details for overcloud configuration. For more information about the <code class="literal">inspection_extras</code> parameter in the <code class="literal">undercloud.conf</code> file, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/director_installation_and_usage/installing-the-undercloud#configuring-the-director">Configuring the Director</a>.
				</p></div><p>
				For example, the <code class="literal">numa_topology</code> collector is part of the hardware-inspection extras and includes the following information for each NUMA node:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						RAM (in kilobytes)
					</li><li class="listitem">
						Physical CPU cores and their sibling threads
					</li><li class="listitem">
						NICs associated with the NUMA node
					</li></ul></div><p>
				To retrieve the information listed above, substitute &lt;UUID&gt; with the UUID of the bare-metal node to complete the following command:
			</p><pre class="screen"># openstack baremetal introspection data save &lt;UUID&gt; | jq .numa_topology</pre><p>
				The following example shows the retrieved NUMA information for a bare-metal node:
			</p><pre class="screen">{
  "cpus": [
    {
      "cpu": 1,
      "thread_siblings": [
        1,
        17
      ],
      "numa_node": 0
    },
    {
      "cpu": 2,
      "thread_siblings": [
        10,
        26
      ],
      "numa_node": 1
    },
    {
      "cpu": 0,
      "thread_siblings": [
        0,
        16
      ],
      "numa_node": 0
    },
    {
      "cpu": 5,
      "thread_siblings": [
        13,
        29
      ],
      "numa_node": 1
    },
    {
      "cpu": 7,
      "thread_siblings": [
        15,
        31
      ],
      "numa_node": 1
    },
    {
      "cpu": 7,
      "thread_siblings": [
        7,
        23
      ],
      "numa_node": 0
    },
    {
      "cpu": 1,
      "thread_siblings": [
        9,
        25
      ],
      "numa_node": 1
    },
    {
      "cpu": 6,
      "thread_siblings": [
        6,
        22
      ],
      "numa_node": 0
    },
    {
      "cpu": 3,
      "thread_siblings": [
        11,
        27
      ],
      "numa_node": 1
    },
    {
      "cpu": 5,
      "thread_siblings": [
        5,
        21
      ],
      "numa_node": 0
    },
    {
      "cpu": 4,
      "thread_siblings": [
        12,
        28
      ],
      "numa_node": 1
    },
    {
      "cpu": 4,
      "thread_siblings": [
        4,
        20
      ],
      "numa_node": 0
    },
    {
      "cpu": 0,
      "thread_siblings": [
        8,
        24
      ],
      "numa_node": 1
    },
    {
      "cpu": 6,
      "thread_siblings": [
        14,
        30
      ],
      "numa_node": 1
    },
    {
      "cpu": 3,
      "thread_siblings": [
        3,
        19
      ],
      "numa_node": 0
    },
    {
      "cpu": 2,
      "thread_siblings": [
        2,
        18
      ],
      "numa_node": 0
    }
  ],
  "ram": [
    {
      "size_kb": 66980172,
      "numa_node": 0
    },
    {
      "size_kb": 67108864,
      "numa_node": 1
    }
  ],
  "nics": [
    {
      "name": "ens3f1",
      "numa_node": 1
    },
    {
      "name": "ens3f0",
      "numa_node": 1
    },
    {
      "name": "ens2f0",
      "numa_node": 0
    },
    {
      "name": "ens2f1",
      "numa_node": 0
    },
    {
      "name": "ens1f1",
      "numa_node": 0
    },
    {
      "name": "ens1f0",
      "numa_node": 0
    },
    {
      "name": "eno4",
      "numa_node": 0
    },
    {
      "name": "eno1",
      "numa_node": 0
    },
    {
      "name": "eno3",
      "numa_node": 0
    },
    {
      "name": "eno2",
      "numa_node": 0
    }
  ]
}</pre></section><section class="section" id="bios_settings"><div class="titlepage"><div><div><h2 class="title">2.3. BIOS Settings</h2></div></div></div><p>
				The following table describes the required BIOS settings for NFV:
			</p><div class="table" id="idm140654528221712"><p class="title"><strong>Table 2.1. BIOS Settings</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140654523626944" scope="col">Parameter</th><th align="left" valign="top" id="idm140654523625856" scope="col">Setting</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">C3 Power State</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Disabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">C6 Power State</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Disabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">MLC Streamer</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Enabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">MLC Spacial Prefetcher</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Enabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">DCU Data Prefetcher</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Enabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">DCA</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Enabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">CPU Power and Performance</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Performance.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">Memory RAS and Performance Config → NUMA Optimized</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Enabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">Turbo Boost</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Disabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140654523626944"> <p>
								<code class="literal">VT-d</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140654523625856"> <p>
								Enabled for Intel cards if VFIO functionality is needed.
							</p>
							 </td></tr></tbody></table></div></div></section></section><section class="chapter" id="ch-software"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Software requirements</h1></div></div></div><p>
			This section describes the supported configurations and drivers, and subscription details necessary for NFV.
		</p><section class="section" id="registering_and_enabling_repositories"><div class="titlepage"><div><div><h2 class="title">3.1. Registering and enabling repositories</h2></div></div></div><p>
				To install Red Hat OpenStack Platform, you must register Red Hat OpenStack Platform director using the Red Hat Subscription Manager, and subscribe to the required channels. For more information about registering and updating your undercloud, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/index#registering-the-undercloud-and-attaching-subscriptions">Registering your system</a>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Register your system with the Content Delivery Network, entering your Customer Portal user name and password when prompted.
					</p><pre class="screen">[stack@director ~]$ sudo subscription-manager register</pre></li><li class="listitem"><p class="simpara">
						Determine the entitlement pool ID for Red Hat OpenStack Platform director, for example {Pool ID} from the following command and output:
					</p><pre class="screen">[stack@director ~]$ sudo subscription-manager list --available --all --matches="Red Hat OpenStack"
Subscription Name:   Name of SKU
Provides:            Red Hat Single Sign-On
                     Red Hat Enterprise Linux Workstation
                     Red Hat CloudForms
                     Red Hat OpenStack
                     Red Hat Software Collections (for RHEL Workstation)
                     Red Hat Virtualization
SKU:                 SKU-Number
Contract:            Contract-Number
Pool ID:             {Pool-ID}-123456
Provides Management: Yes
Available:           1
Suggested:           1
Service Level:       Support-level
Service Type:        Service-Type
Subscription Type:   Sub-type
Ends:                End-date
System Type:         Physical</pre></li><li class="listitem"><p class="simpara">
						Include the <code class="literal">Pool ID</code> value in the following command to attach the Red Hat OpenStack Platform 16.1 entitlement.
					</p><pre class="screen">[stack@director ~]$ sudo subscription-manager attach --pool={Pool-ID}-123456</pre></li><li class="listitem"><p class="simpara">
						Disable the default repositories.
					</p><pre class="screen">subscription-manager repos --disable=*</pre></li><li class="listitem"><p class="simpara">
						Enable the required repositories for Red Hat OpenStack Platform with NFV.
					</p><pre class="screen">$ sudo subscription-manager repos --enable=rhel-8-for-x86_64-baseos-eus-rpms \
--enable=rhel-8-for-x86_64-appstream-eus-rpms \
--enable=rhel-8-for-x86_64-highavailability-eus-rpms \
--enable=ansible-2.9-for-rhel-8-x86_64-rpms \
--enable=openstack-16.1-for-rhel-8-x86_64-rpms \
--enable=rhel-8-for-x86_64-nfv-rpms \
--enable=advanced-virt-for-rhel-8-x86_64-rpms \
--enable=fast-datapath-for-rhel-8-x86_64-rpms</pre></li><li class="listitem"><p class="simpara">
						Update your system so you have the latest base system packages.
					</p><pre class="screen">[stack@director ~]$ sudo dnf update -y
[stack@director ~]$ sudo reboot</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To register your overcloud nodes, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/#ansible-based-registration">Ansible Based Registration</a>.
				</p></div></div></section><section class="section" id="sect-supported-conf"><div class="titlepage"><div><div><h2 class="title">3.2. Supported configurations for NFV deployments</h2></div></div></div><p>
				Red Hat OpenStack Platform (RHOSP) supports the following NFV deployments using director:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Single root I/O virtualization (SR-IOV)
					</li><li class="listitem">
						Open vSwitch with Data Plane Development Kit (OVS-DPDK)
					</li></ul></div><p>
				Additionally, you can deploy RHOSP with any of the following features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/index#Chap-Roles">Composable roles</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/hyperconverged_infrastructure_guide/index">Hyper-converged infrastructure</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/instances_and_images_guide/index#realtime-compute">Real-time KVM</a>
					</li><li class="listitem">
						<a class="link" href="index.html#sect-configuring-hw-offload">OVS hardware offload</a>
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Red Hat’s embedded OpenDaylight SDN solution was deprecated in RHOSP 14. Red Hat support, including bug fixes, for OpenDaylight ends with the RHOSP 13 lifecycle, planned for June 27, 2021.
				</p></div></div><p>
				RHOSP NFV deployments with Open Virtual Network (OVN) as the default Software Defined Networking (SDN) solution are unsupported. Use the following steps to deploy RHOSP with the OVS mechanism driver:
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Modify the <code class="literal">containers-prepare-parameter.yaml</code> file so that the <code class="literal">neutron_driver</code> parameter is set to <code class="literal">null</code>.
					</p><pre class="screen">parameter_defaults:
  ContainerImagePrepare:
  - push_destination: true
    set:
     neutron_driver: null
     ...</pre></li><li class="listitem"><p class="simpara">
						Include the <code class="literal">neutron-ovs.yaml</code> environment file in the <code class="literal">/usr/share/openstack-tripleo-heat-templates/environments/services</code> directory with your deployment script.
					</p><pre class="screen">TEMPLATES=/usr/share/openstack-tripleo-heat-templates

openstack overcloud deploy --templates \
-e ${TEMPLATES}/environments/network-environment.yaml \
-e ${TEMPLATES}/environments/network-isolation.yaml \
-e ${TEMPLATES}/environments/services/neutron-ovs.yaml \
-e ${TEMPLATES}/environments/services/neutron-ovs-dpdk.yaml \
-e ${TEMPLATES}/environments/services/neutron-sriov.yaml \
-e /home/stack/containers-prepare-parameter.yaml</pre></li></ol></div></section><section class="section" id="sect-supported-drivers"><div class="titlepage"><div><div><h2 class="title">3.3. Supported drivers</h2></div></div></div><p>
				For a complete list of supported drivers, see <a class="link" href="https://access.redhat.com/articles/1535373">Component, Plug-In, and Driver Support in Red Hat OpenStack Platform </a>.
			</p><p>
				For a list of NICs tested for Red Hat OpenStack Platform deployments with NFV, see <a class="link" href="index.html#ref_supported-nics" title="2.1. Tested NICs">Tested NICs</a>.
			</p></section><section class="section" id="sect-third-party-software"><div class="titlepage"><div><div><h2 class="title">3.4. Compatibility with third-party software</h2></div></div></div><p>
				For a complete list of products and services tested, supported, and certified to perform with Red Hat OpenStack Platform, see <a class="link" href="https://access.redhat.com/ecosystem/search/#/category/Software?page=3&amp;sort=sortTitle%20asc&amp;ecosystem=Red%20Hat%20OpenStack%20Platform">Third Party Software compatible with Red Hat OpenStack Platform</a>. You can filter the list by product version and software category.
			</p><p>
				For a complete list of products and services tested, supported, and certified to perform with Red Hat Enterprise Linux, see <a class="link" href="https://access.redhat.com/ecosystem/search/#/category/Software?sort=sortTitle%20asc&amp;certifications=Red%20Hat%20Enterprise%20Linux%207&amp;ecosystem=Red%20Hat%20Enterprise%20Linux">Third Party Software compatible with Red Hat Enterprise Linux</a>. You can filter the list by product version and software category.
			</p></section></section><section class="chapter" id="ch-network-considerations"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Network considerations</h1></div></div></div><p>
			The undercloud host requires at least the following networks:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Provisioning network - Provides DHCP and PXE-boot functions to help discover bare-metal systems for use in the overcloud.
				</li><li class="listitem">
					External network - A separate network for remote connectivity to all nodes. The interface connecting to this network requires a routable IP address, either defined statically, or generated dynamically from an external DHCP service.
				</li></ul></div><p>
			The minimal overcloud network configuration includes the following NIC configurations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Single NIC configuration - One NIC for the provisioning network on the native VLAN and tagged VLANs that use subnets for the different overcloud network types.
				</li><li class="listitem">
					Dual NIC configuration - One NIC for the provisioning network and the other NIC for the external network.
				</li><li class="listitem">
					Dual NIC configuration - One NIC for the provisioning network on the native VLAN, and the other NIC for tagged VLANs that use subnets for different overcloud network types.
				</li><li class="listitem">
					Multiple NIC configuration - Each NIC uses a subnet for a different overcloud network type.
				</li></ul></div><p>
			For more information on the networking requirements, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/index#preparing-your-network">Networking requirements</a>.
		</p></section><section class="chapter" id="assembly_sriov_parameters"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Planning an SR-IOV deployment</h1></div></div></div><p>
			Optimize single root I/O virtualization (SR-IOV) deployments for NFV by setting individual parameters based on your Compute node hardware.
		</p><p>
			See <a class="link" href="index.html#proc_finding-numa-topology" title="2.2. Discovering your NUMA node topology">Discovering your NUMA node topology</a> to evaluate your hardware impact on the SR-IOV parameters.
		</p><section class="section" id="concept_sriov-cpu-partitioning"><div class="titlepage"><div><div><h2 class="title">5.1. Hardware partitioning for an SR-IOV deployment</h2></div></div></div><p>
				To achieve high performance with SR-IOV, partition the resources between the host and the guest.
			</p><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_NFV-Hardware-Capacities_464931_0118_SR-IOV.png" alt="OpenStack NFV Hardware Capacities 464931 0118 SR IOV"/></div></div><p>
				A typical topology includes 14 cores per NUMA node on dual socket Compute nodes. Both hyper-threading (HT) and non-HT cores are supported. Each core has two sibling threads. One core is dedicated to the host on each NUMA node. The virtual network function (VNF) handles the SR-IOV interface bonding. All the interrupt requests (IRQs) are routed on the host cores. The VNF cores are dedicated to the VNFs. They provide isolation from other VNFs and isolation from the host. Each VNF must use resources on a single NUMA node. The SR-IOV NICs used by the VNF must also be associated with that same NUMA node. This topology does not have a virtualization overhead. The host, OpenStack Networking (neutron), and Compute (nova) configuration parameters are exposed in a single file for ease, consistency, and to avoid incoherence that is fatal to proper isolation, causing preemption, and packet loss. The host and virtual machine isolation depend on a <code class="literal">tuned</code> profile, which defines the boot parameters and any Red Hat OpenStack Platform modifications based on the list of isolated CPUs.
			</p></section><section class="section" id="assembly_sriov-topology"><div class="titlepage"><div><div><h2 class="title">5.2. Topology of an NFV SR-IOV deployment</h2></div></div></div><p>
				The following image has two VNFs each with the management interface represented by <code class="literal">mgt</code> and the data plane interfaces. The management interface manages the <code class="literal">ssh</code> access, and so on. The data plane interfaces bond the VNFs to DPDK to ensure high availability, as VNFs bond the data plane interfaces using the DPDK library. The image also has two provider networks for redundancy. The Compute node has two regular NICs bonded together and shared between the VNF management and the Red Hat OpenStack Platform API management.
			</p><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_NFV_Planning_Topology_427302_0717_JCS_SR-IOV-deployment.png" alt="NFV SR-IOV deployment"/></div></div><p>
				The image shows a VNF that uses DPDK at an application level, and has access to SR-IOV virtual functions (VFs) and physical functions (PFs), for better availability or performance, depending on the fabric configuration. DPDK improves performance, while the VF/PF DPDK bonds provide support for failover, and high availability. The VNF vendor must ensure that the DPDK poll mode driver (PMD) supports the SR-IOV card that is being exposed as a VF/PF. The management network uses OVS, therefore the VNF sees a mgmt network device using the standard virtIO drivers. You can use that device to initially connect to the VNF, and ensure that the DPDK application bonds the two VF/PFs.
			</p><section class="section" id="concept_sriov-nohci"><div class="titlepage"><div><div><h3 class="title">5.2.1. Topology for NFV SR-IOV without HCI</h3></div></div></div><p>
					Observe the topology for SR-IOV without hyper-converged infrastructure (HCI) for NFV in the image below. It consists of compute and controller nodes with 1 Gbps NICs, and the director node.
				</p><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_NFV_Planning_Topology_SR-IOV_Non_HCI.png" alt="NFV SR-IOV Topology without HCI"/></div></div></section></section></section><section class="chapter" id="part-sriov-nfv-configuration"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Deploying SR-IOV technologies</h1></div></div></div><p>
			In your Red Hat OpenStack Platform NFV deployment, you can achieve higher performance with single root I/O virtualization (SR-IOV), when you configure direct access from your instances to a shared PCIe resource through virtual resources.
		</p><section class="section" id="prerequisites"><div class="titlepage"><div><div><h2 class="title">6.1. Prerequisites</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For details on how to install and configure the undercloud before deploying the overcloud, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/director_installation_and_usage/">Director Installation and Usage Guide</a>.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Do not manually edit any values in <code class="literal">/etc/tuned/cpu-partitioning-variables.conf</code> that director heat templates modify.
				</p></div></div></section><section class="section" id="sect-configuring-sriov"><div class="titlepage"><div><div><h2 class="title">6.2. Configuring SR-IOV</h2></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The following CPU assignments, memory allocation, and NIC configurations are examples, and might be different from your use case.
				</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Generate the built-in <code class="literal">ComputeSriov</code> to define nodes in the OpenStack cluster that run <code class="literal">NeutronSriovAgent</code>, <code class="literal">NeutronSriovHostConfig</code>, and default compute services.
					</p><pre class="screen"># openstack overcloud roles generate \
-o /home/stack/templates/roles_data.yaml \
Controller ComputeSriov</pre></li><li class="listitem"><p class="simpara">
						To prepare the SR-IOV containers, include the <code class="literal">neutron-sriov.yaml</code> and <code class="literal">roles_data.yaml</code> files when you generate the <code class="literal">overcloud_images.yaml</code> file.
					</p><pre class="screen">sudo openstack tripleo container image prepare \
  --roles-file ~/templates/roles_data.yaml \
  -e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-sriov.yaml \
  -e ~/containers-prepare-parameter.yaml \
  --output-env-file=/home/stack/templates/overcloud_images.yaml</pre><p class="simpara">
						For more information on container image preparation, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/">Director Installation and Usage</a>.
					</p></li><li class="listitem"><p class="simpara">
						Configure the parameters for the SR-IOV nodes under <code class="literal">parameter_defaults</code> appropriately for your cluster, and your hardware configuration. Typically, you add these settings to the <code class="literal">network-environment.yaml</code> file.
					</p><pre class="screen">  NeutronNetworkType: 'vlan'
  NeutronNetworkVLANRanges:
    - tenant:22:22
    - tenant:25:25
  NeutronTunnelTypes: ''</pre></li><li class="listitem"><p class="simpara">
						In the same file, configure role specific parameters for SR-IOV compute nodes.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">numvfs</code> parameter replaces the <code class="literal">NeutronSriovNumVFs</code> parameter in the network configuration templates. Red Hat does not support modification of the <code class="literal">NeutronSriovNumVFs</code> parameter or the <code class="literal">numvfs</code> parameter after deployment. If you modify either parameter after deployment, it might cause a disruption for the running instances that have an SR-IOV port on that physical function (PF). In this case, you must hard reboot these instances to make the SR-IOV PCI device available again. The <code class="literal">NovaVcpuPinSet</code> parameter is now deprecated, and is replaced by <code class="literal">NovaComputeCpuDedicatedSet</code> for dedicated, pinned workflows.
						</p></div></div><pre class="screen">  ComputeSriovParameters:
    IsolCpusList: "1-19,21-39"
    KernelArgs: "default_hugepagesz=1GB hugepagesz=1G hugepages=32 iommu=pt intel_iommu=on isolcpus=1-19,21-39"
    TunedProfileName: "cpu-partitioning"
    NeutronBridgeMappings:
      - tenant:br-link0
    NeutronPhysicalDevMappings:
      - tenant:p7p1
      - tenant:p7p2
    NovaPCIPassthrough:
      - devname: "p7p1"
        physical_network: "tenant"
      - devname: "p7p2"
        physical_network: "tenant"
    NovaComputeCpuDedicatedSet: '1-19,21-39'
    NovaReservedHostMemory: 4096</pre></li><li class="listitem"><p class="simpara">
						Configure the SR-IOV enabled interfaces in the <code class="literal">compute.yaml</code> network configuration template. To create SR-IOV virtual functions (VFs), configure the interfaces as standalone NICs:
					</p><pre class="screen">             - type: sriov_pf
                name: p7p3
                mtu: 9000
                numvfs: 10
                use_dhcp: false
                defroute: false
                nm_controlled: true
                hotplug: true
                promisc: false

              - type: sriov_pf
                name: p7p4
                mtu: 9000
                numvfs: 10
                use_dhcp: false
                defroute: false
                nm_controlled: true
                hotplug: true
                promisc: false</pre></li><li class="listitem"><p class="simpara">
						Ensure that the list of default filters includes the value <code class="literal">AggregateInstanceExtraSpecsFilter</code>.
					</p><pre class="screen">NovaSchedulerDefaultFilters: ['AvailabilityZoneFilter','ComputeFilter','ComputeCapabilitiesFilter','ImagePropertiesFilter','ServerGroupAntiAffinityFilter','ServerGroupAffinityFilter','PciPassthroughFilter','AggregateInstanceExtraSpecsFilter']</pre></li><li class="listitem">
						Run the <a class="link" href="index.html#ap-vxlan-dpdk-sriov-hybrid-overcloud-deploy"><code class="literal">overcloud_deploy.sh</code></a> script.
					</li></ol></div></section><section class="section" id="sect-configuring-host-sriov"><div class="titlepage"><div><div><h2 class="title">6.3. NIC partitioning</h2></div></div></div><p>
				This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
			</p><p>
				You can configure single root I/O virtualization (SR-IOV) so that an Red Hat OpenStack Platform host can use virtual functions (VFs).
			</p><p>
				When you partition a single, high-speed NIC into multiple VFs, you can use the NIC for both control and data plane traffic. You can then apply a QoS (Quality of Service) priority value to VF interfaces as desired.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Ensure that you complete the following steps when creating the templates for an overcloud deployment:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the interface type <code class="literal">sriov_pf</code> in an <code class="literal">os-net-config</code> role file to configure a physical function that the host can use.
					</p><pre class="screen">        - type: sriov_pf
          name: &lt;interface name&gt;
          use_dhcp: false
          numvfs: &lt;number of vfs&gt;
          promisc: &lt;true/false&gt; #optional (Defaults to true)</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">numvfs</code> parameter replaces the <code class="literal">NeutronSriovNumVFs</code> parameter in the network configuration templates. Red Hat does not support modification of the <code class="literal">NeutronSriovNumVFs</code> parameter or the <code class="literal">numvfs</code> parameter after deployment. If you modify either parameter after deployment, it might cause a disruption for the running instances that have an SR-IOV port on that physical function (PF). In this case, you must hard reboot these instances to make the SR-IOV PCI device available again.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Use the interface type <code class="literal">sriov_vf</code> to configure virtual functions in a bond that the host can use.
					</p><pre class="screen">               - type: linux_bond
                 name: internal_bond
                 bonding_options: mode=active-backup
                 use_dhcp: false
                 members:
                 - type: sriov_vf
                   device: nic7
                   vfid: 1
                 - type: sriov_vf
                   device: nic8
                   vfid: 1

               - type: vlan
                 vlan_id:
                   get_param: InternalApiNetworkVlanID
                 device: internal_bond
                 addresses:
                 - ip_netmask:
                     get_param: InternalApiIpSubnet</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The VLAN tag must be unique across all VFs that belong to a common PF device. You must assign VLAN tags to an interface type:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										linux_bond
									</li><li class="listitem">
										ovs_bridge
									</li><li class="listitem">
										ovs_dpdk_port
									</li></ul></div></li><li class="listitem">
								The applicable VF ID range starts at zero, and ends at the maximum number of VFs minus one.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						To reserve virtual functions for VMs, use the <code class="literal">NovaPCIPassthrough</code> parameter. You must assign a regex value to the <code class="literal">address</code> parameter to identify the VFs that you want to pass through to Nova, to be used by virtual instances, and not by the host.
					</p><p class="simpara">
						You can obtain these values from <code class="literal">lspci</code>, so, if necessary, boot a compute node into a Linux environment to obtain this information.
					</p><p class="simpara">
						The <code class="literal">lspci</code> command returns the address of each device in the format <code class="literal">&lt;bus&gt;:&lt;device&gt;:&lt;slot&gt;</code>. Enter these address values in the <code class="literal">NovaPCIPassthrough</code> parameter in the following format:
					</p><pre class="screen">  NovaPCIPassthrough:
    - physical_network: "sriovnet2"
      address: {"domain": ".*", "bus": "06", "slot": "11", "function": "[5-7]"}
    - physical_network: "sriovnet2"
      address: {"domain": ".*", "bus": "06", "slot": "10", "function": "[5]"}</pre></li><li class="listitem"><p class="simpara">
						Ensure that <code class="literal">IOMMU</code> is enabled on all nodes that require NIC partitioning. For example, if you want NIC Partitioning for compute nodes, enable IOMMU using the <code class="literal">KernelArgs</code> parameter for that role:
					</p><pre class="screen">parameter_defaults:
  ComputeParameters:
    KernelArgs: "intel_iommu=on iommu=pt"</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Validation</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the number of VFs.
					</p><pre class="screen">[root@overcloud-compute-0 heat-admin]# cat /sys/class/net/p4p1/device/sriov_numvfs
10
[root@overcloud-compute-0 heat-admin]# cat /sys/class/net/p4p2/device/sriov_numvfs
10</pre></li><li class="listitem"><p class="simpara">
						Check Linux bonds.
					</p><pre class="screen">[root@overcloud-compute-0 heat-admin]# cat /proc/net/bonding/intapi_bond
Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)

Bonding Mode: fault-tolerance (active-backup)
Primary Slave: None
Currently Active Slave: p4p1_1
MII Status: up
MII Polling Interval (ms): 0
Up Delay (ms): 0
Down Delay (ms): 0

Slave Interface: p4p1_1
MII Status: up
Speed: 10000 Mbps
Duplex: full
Link Failure Count: 0
Permanent HW addr: 16:b4:4c:aa:f0:a8
Slave queue ID: 0

Slave Interface: p4p2_1
MII Status: up
Speed: 10000 Mbps
Duplex: full
Link Failure Count: 0
Permanent HW addr: b6:be:82:ac:51:98
Slave queue ID: 0
[root@overcloud-compute-0 heat-admin]# cat /proc/net/bonding/st_bond
Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)

Bonding Mode: fault-tolerance (active-backup)
Primary Slave: None
Currently Active Slave: p4p1_3
MII Status: up
MII Polling Interval (ms): 0
Up Delay (ms): 0
Down Delay (ms): 0

Slave Interface: p4p1_3
MII Status: up
Speed: 10000 Mbps
Duplex: full
Link Failure Count: 0
Permanent HW addr: 9a:86:b7:cc:17:e4
Slave queue ID: 0

Slave Interface: p4p2_3
MII Status: up
Speed: 10000 Mbps
Duplex: full
Link Failure Count: 0
Permanent HW addr: d6:07:f8:78:dd:5b
Slave queue ID: 0</pre></li><li class="listitem"><p class="simpara">
						List OVS bonds.
					</p><pre class="screen">[root@overcloud-compute-0 heat-admin]# ovs-appctl bond/show
---- bond_prov ----
bond_mode: active-backup
bond may use recirculation: no, Recirc-ID : -1
bond-hash-basis: 0
updelay: 0 ms
downdelay: 0 ms
lacp_status: off
lacp_fallback_ab: false
active slave mac: f2:ad:c7:00:f5:c7(dpdk2)

slave dpdk2: enabled
  active slave
  may_enable: true

slave dpdk3: enabled
  may_enable: true

---- bond_tnt ----
bond_mode: active-backup
bond may use recirculation: no, Recirc-ID : -1
bond-hash-basis: 0
updelay: 0 ms
downdelay: 0 ms
lacp_status: off
lacp_fallback_ab: false
active slave mac: b2:7e:b8:75:72:e8(dpdk0)

slave dpdk0: enabled
  active slave
  may_enable: true

slave dpdk1: enabled
  may_enable: true</pre></li><li class="listitem"><p class="simpara">
						Show OVS connections.
					</p><pre class="screen">[root@overcloud-compute-0 heat-admin]# ovs-vsctl show
cec12069-9d4c-4fa8-bfe4-decfdf258f49
    Manager "ptcp:6640:127.0.0.1"
        is_connected: true
    Bridge br-tenant
        fail_mode: standalone
        Port br-tenant
            Interface br-tenant
                type: internal
        Port bond_tnt
            Interface "dpdk0"
                type: dpdk
                options: {dpdk-devargs="0000:82:02.2"}
            Interface "dpdk1"
                type: dpdk
                options: {dpdk-devargs="0000:82:04.2"}
    Bridge "sriov2"
        Controller "tcp:127.0.0.1:6633"
            is_connected: true
        fail_mode: secure
        Port "phy-sriov2"
            Interface "phy-sriov2"
                type: patch
                options: {peer="int-sriov2"}
        Port "sriov2"
            Interface "sriov2"
                type: internal
    Bridge br-int
        Controller "tcp:127.0.0.1:6633"
            is_connected: true
        fail_mode: secure
        Port "int-sriov2"
            Interface "int-sriov2"
                type: patch
                options: {peer="phy-sriov2"}
        Port br-int
            Interface br-int
                type: internal
        Port "vhu93164679-22"
            tag: 4
            Interface "vhu93164679-22"
                type: dpdkvhostuserclient
                options: {vhost-server-path="/var/lib/vhost_sockets/vhu93164679-22"}
        Port "vhu5d6b9f5a-0d"
            tag: 3
            Interface "vhu5d6b9f5a-0d"
                type: dpdkvhostuserclient
                options: {vhost-server-path="/var/lib/vhost_sockets/vhu5d6b9f5a-0d"}
        Port patch-tun
            Interface patch-tun
                type: patch
                options: {peer=patch-int}
        Port "int-sriov1"
            Interface "int-sriov1"
                type: patch
                options: {peer="phy-sriov1"}
        Port int-br-vfs
            Interface int-br-vfs
                type: patch
                options: {peer=phy-br-vfs}
    Bridge br-vfs
        Controller "tcp:127.0.0.1:6633"
            is_connected: true
        fail_mode: secure
        Port phy-br-vfs
            Interface phy-br-vfs
                type: patch
                options: {peer=int-br-vfs}
        Port bond_prov
            Interface "dpdk3"
                type: dpdk
                options: {dpdk-devargs="0000:82:04.5"}
            Interface "dpdk2"
                type: dpdk
                options: {dpdk-devargs="0000:82:02.5"}
        Port br-vfs
            Interface br-vfs
                type: internal
    Bridge "sriov1"
        Controller "tcp:127.0.0.1:6633"
            is_connected: true
        fail_mode: secure
        Port "sriov1"
            Interface "sriov1"
                type: internal
        Port "phy-sriov1"
            Interface "phy-sriov1"
                type: patch
                options: {peer="int-sriov1"}
    Bridge br-tun
        Controller "tcp:127.0.0.1:6633"
            is_connected: true
        fail_mode: secure
        Port br-tun
            Interface br-tun
                type: internal
        Port patch-int
            Interface patch-int
                type: patch
                options: {peer=patch-tun}
        Port "vxlan-0a0a7315"
            Interface "vxlan-0a0a7315"
                type: vxlan
                options: {df_default="true", in_key=flow, local_ip="10.10.115.10", out_key=flow, remote_ip="10.10.115.21"}
    ovs_version: "2.10.0"</pre></li></ol></div><p>
				If you used <code class="literal">NovaPCIPassthrough</code> to pass VFs to instances, test by <a class="link" href="index.html#sect-deploying-sriov-instance" title="6.9. Deploying an instance for SR-IOV">deploying an SR-IOV instance</a>.
			</p></section><section class="section" id="sect-configuring-hw-offload"><div class="titlepage"><div><div><h2 class="title">6.4. Configuring OVS hardware offload</h2></div></div></div><p>
				The procedure for OVS hardware offload configuration shares many of the same steps as configuring SR-IOV.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Generate the <code class="literal">ComputeSriov</code> role:
					</p><pre class="screen">openstack overcloud roles generate -o roles_data.yaml Controller ComputeSriov</pre></li><li class="listitem">
						Add the <code class="literal">OvsHwOffload</code> parameter under role-specific parameters with a value of <code class="literal">true</code>.
					</li><li class="listitem"><p class="simpara">
						Configure the <code class="literal">physical_network</code> parameter to match your environment.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For VLAN, set the <code class="literal">physical_network</code> parameter to the name of the network you create in neutron after deployment. This value should also be in <code class="literal">NeutronBridgeMappings</code>.
							</li><li class="listitem"><p class="simpara">
								For VXLAN, set the <code class="literal">physical_network</code> parameter to the string value <code class="literal">null</code>.
							</p><p class="simpara">
								Example:
							</p><pre class="screen">parameter_defaults:
  ComputeSriovParameters:
    IsolCpusList: 2-9,21-29,11-19,31-39
    KernelArgs: "default_hugepagesz=1GB hugepagesz=1G hugepages=128 intel_iommu=on iommu=pt"
    OvsHwOffload: true
    TunedProfileName: "cpu-partitioning"
    NeutronBridgeMappings:
      - tenant:br-tenant
    NeutronPhysicalDevMappings:
      - tenant:p7p1
      - tenant:p7p2
    NovaPCIPassthrough:
      - devname: "p7p1"
        physical_network: "null"
      - devname: "p7p2"
        physical_network: "null"
    NovaReservedHostMemory: 4096
    NovaComputeCpuDedicatedSet: 1-9,21-29,11-19,31-39</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Ensure that the list of default filters includes <code class="literal">NUMATopologyFilter</code>:
					</p><pre class="screen">  NovaSchedulerDefaultFilters: [\'RetryFilter',\'AvailabilityZoneFilter',\'ComputeFilter',\'ComputeCapabilitiesFilter',\'ImagePropertiesFilter',\'ServerGroupAntiAffinityFilter',\'ServerGroupAffinityFilter',\'PciPassthroughFilter',\'NUMATopologyFilter']</pre></li><li class="listitem"><p class="simpara">
						Configure one or more network interfaces intended for hardware offload in the <code class="literal">compute-sriov.yaml</code> configuration file:
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Do not use the <code class="literal">NeutronSriovNumVFs</code> parameter when configuring Open vSwitch hardware offload. The <code class="literal">numvfs</code> parameter specifies the number of VFs in a network configuration file used by <code class="literal">os-net-config</code>.
						</p></div></div><pre class="screen">  - type: ovs_bridge
    name: br-tenant
    mtu: 9000
    members:
    - type: sriov_pf
      name: p7p1
      numvfs: 5
      mtu: 9000
      primary: true
      promisc: true
      use_dhcp: false
      link_mode: switchdev</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Do not configure Mellanox network interfaces as a nic-config interface type <code class="literal">ovs-vlan</code> because this prevents tunnel endpoints such as VXLAN from passing traffic due to driver limitations.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Include the <code class="literal">ovs-hw-offload.yaml</code> file in the <code class="literal">overcloud deploy</code> command:
					</p><pre class="screen">TEMPLATES_HOME=”/usr/share/openstack-tripleo-heat-templates”
CUSTOM_TEMPLATES=”/home/stack/templates”

openstack overcloud deploy --templates \
  -r ${CUSTOM_TEMPLATES}/roles_data.yaml \
  -e ${TEMPLATES_HOME}/environments/ovs-hw-offload.yaml \
  -e ${CUSTOM_TEMPLATES}/network-environment.yaml \
  -e ${CUSTOM_TEMPLATES}/neutron-ovs.yaml</pre></li></ol></div><section class="section" id="verifying_ovs_hardware_offload"><div class="titlepage"><div><div><h3 class="title">6.4.1. Verifying OVS hardware offload</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Confirm that a PCI device is in <code class="literal">switchdev</code> mode:
						</p><pre class="screen"># devlink dev eswitch show pci/0000:03:00.0
pci/0000:03:00.0: mode switchdev inline-mode none encap enable</pre></li><li class="listitem"><p class="simpara">
							Verify if offload is enabled in OVS:
						</p><pre class="screen"># ovs-vsctl get Open_vSwitch . other_config:hw-offload
“true”</pre></li></ol></div></section></section><section class="section" id="tuning_examples_for_ovs_hardware_offload"><div class="titlepage"><div><div><h2 class="title">6.5. Tuning examples for OVS hardware offload</h2></div></div></div><p>
				For optimal performance you must complete additional configuration steps.
			</p><div class="formalpara"><p class="title"><strong>Adjusting the number of channels for each network interface to improve performance</strong></p><p>
					A channel includes an interrupt request (IRQ) and the set of queues that trigger the IRQ. When you set the <code class="literal">mlx5_core</code> driver to <code class="literal">switchdev</code> mode, the <code class="literal">mlx5_core</code> driver defaults to one combined channel, which might not deliver optimal performance.
				</p></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the PF representors, enter the following command to adjust the number of CPUs available to the host. Replace $(nproc) with the number of CPUs you want to make available:
					</p><pre class="screen">$ sudo ethtool -L enp3s0f0 combined $(nproc)</pre></li></ul></div><div class="formalpara"><p class="title"><strong>CPU pinning</strong></p><p>
					To prevent performance degradation from cross-NUMA operations, locate NICs, their applications, the VF guest, and OVS in the same NUMA node. For more information, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html-single/instances_and_images_guide/index#ch-cpu_pinning">Configuring CPU pinning on the Compute node</a> in the <span class="emphasis"><em>Instances and Images Guide</em></span>.
				</p></div></section><section class="section" id="components_of_ovs_hardware_offload"><div class="titlepage"><div><div><h2 class="title">6.6. Components of OVS hardware offload</h2></div></div></div><p>
				A reference for configuring and troubleshooting the components of OVS HW Offload with Mellanox smart NICs.
			</p><div class="formalpara"><p class="title"><strong>Nova</strong></p><p>
					Configure the Nova scheduler to use the <code class="literal">NovaPCIPassthrough</code> filter with the <code class="literal">NUMATopologyFilter</code> and <code class="literal">DerivePciWhitelistEnabled</code> parameters. When you enable OVS HW Offload, the Nova scheduler operates similarly to SR-IOV passthrough for instance spawning.
				</p></div><div class="formalpara"><p class="title"><strong>Neutron</strong></p><p>
					When you enable OVS HW Offload, use the <code class="literal">devlink</code> cli tool to set the NIC e-switch mode to <code class="literal">switchdev</code>. <code class="literal">Switchdev</code> mode establishes representor ports on the NIC that are mapped to the VFs.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To allocate a port from a <code class="literal">switchdev</code>-enabled NIC, create a neutron port and set the value of <code class="literal">binding-profile</code> to <code class="literal">capabilities</code>:
					</p><pre class="screen">$ openstack port create --network private --vnic-type=direct --binding-profile '{"capabilities": ["switchdev"]}' direct_port1</pre></li></ol></div><p>
				Pass this port information when you create the instance. You associate the representor port with the instance VF interface and connect the representor port to OVS bridge br-int for one-time OVS datapath processing. A VF port representor functions like a software version of a physical “patch panel” front-end. For more information about new instance creation, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/13/html/network_functions_virtualization_planning_and_configuration_guide/part-sriov-nfv-configuration#sect-deploying-sriov-instance">Deploying an Instance for SR-IOV</a>
			</p><div class="formalpara"><p class="title"><strong>OVS</strong></p><p>
					In an environment with hardware offload configured, the first packet transmitted traverses the OVS kernel path, and this packet journey establishes the ml2 OVS rules for incoming and outgoing traffic for the instance traffic. When the flows of the traffic stream are established, OVS uses the traffic control (TC) Flower utility to push these flows on the NIC hardware.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use director to apply the following configuration on OVS:
					</p><pre class="screen">$ sudo ovs-vsctl set Open_vSwitch . other_config:hw-offload=true</pre></li><li class="listitem">
						Restart to enable HW Offload.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Traffic Control (TC) subsystems</strong></p><p>
					When you enable the <code class="literal">hw-offload</code> flag, OVS uses the TC datapath. TC Flower is an iproute2 utility that writes datapath flows on hardware. This ensures that the flow is programmed on both the hardware and software datapaths, for redundancy.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Apply the following configuration. This is the default option if you do not explicitly configure <code class="literal">tc-policy</code>:
					</p><pre class="screen">$ sudo ovs-vsctl set Open_vSwitch . other_config:tc-policy=none</pre></li><li class="listitem">
						Restart OVS.
					</li></ol></div><div class="formalpara"><p class="title"><strong>NIC PF and VF drivers</strong></p><p>
					Mlx5_core is the PF and VF driver for the Mellanox ConnectX-5 NIC. The mlx5_core driver performs the following tasks:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Creates routing tables on hardware.
					</li><li class="listitem">
						Manages network flow management.
					</li><li class="listitem">
						Configures the Ethernet switch device driver model, <code class="literal">switchdev</code>.
					</li><li class="listitem">
						Creates block devices.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the following <code class="literal">devlink</code> commands to query the mode of the PCI device.
					</p><pre class="screen">$ sudo devlink dev eswitch set pci/0000:03:00.0 mode switchdev
$ sudo devlink dev eswitch show pci/0000:03:00.0
pci/0000:03:00.0: mode switchdev inline-mode none encap enable</pre></li></ul></div><div class="formalpara"><p class="title"><strong>NIC firmware</strong></p><p>
					The NIC firmware performs the following tasks:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Maintains routing tables and rules.
					</li><li class="listitem">
						Fixes the pipelines of the tables.
					</li><li class="listitem">
						Manages hardware resources.
					</li><li class="listitem">
						Creates VFs.
					</li></ul></div><p>
				The firmware works with the driver for optimal performance.
			</p><p>
				Although the NIC firmware is non-volatile and persists after you reboot, you can modify the configuration during run time.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Apply the following configuration on the interfaces, and the representor ports, to ensure that TC Flower pushes the flow programming at the port level:
					</p><pre class="screen"> $ sudo ethtool -K enp3s0f0 hw-tc-offload on</pre></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Ensure that you keep the firmware updated.<code class="literal">Yum</code> or <code class="literal">dnf</code> updates might not complete the firmware update. For more information, see your vendor documentation.
				</p></div></div></section><section class="section" id="troubleshooting_ovs_hardware_offload"><div class="titlepage"><div><div><h2 class="title">6.7. Troubleshooting OVS hardware offload</h2></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Linux Kernel 4.13 or newer
					</li><li class="listitem">
						OVS 2.8 or newer
					</li><li class="listitem">
						RHOSP 12 or newer
					</li><li class="listitem">
						Iproute 4.12 or newer
					</li><li class="listitem"><p class="simpara">
						Mellanox NIC firmware:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								FW ConnectX-5 16.21.0338 or newer
							</li><li class="listitem">
								FW ConnectX-4 14.21.0338 or newer
							</li></ul></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Mellanox ConnectX-5 and ConnectX-4Lx NICs support both VLAN and VXLAN Offload. Mellanox ConnectX-4 supports VLAN Offload only.
				</p></div></div><p>
				For more information about supported prerequisites, see <a class="link" href="https://access.redhat.com/articles/3538141">https://access.redhat.com/articles/3538141</a>
			</p><div class="formalpara"><p class="title"><strong>Configuring the network in an OVS HW offload deployment</strong></p><p>
					In a HW offload deployment, you can choose one of the following scenarios for your network configuration according to your requirements:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can base guest VMs on VXLAN and VLAN by using either the same set of interfaces attached to a bond or a different set of NICs for each type.
					</li><li class="listitem">
						You can bond two ports of a Mellanox NIC by using Linux bond.
					</li><li class="listitem">
						You can host tenant VXLAN networks on VLAN interfaces on top of the Linux bond.
					</li><li class="listitem">
						You can host a VLAN network on an ovs-bridge which has Linux bond as a member.
					</li></ul></div><p>
				Refer to the below example network configuration:
			</p><pre class="screen">             - type: ovs_bridge
                name: br-offload
                mtu: 9000
                use_dhcp: false
                members:
                - type: linux_bond
                  name: bond-pf
                  bonding_options: "mode=active-backup miimon=100"
                  members:
                  - type: sriov_pf
                    name: p5p1
                    numvfs: 3
                    primary: true
                    promisc: true
                    use_dhcp: false
                    defroute: false
                    link_mode: switchdev
                  - type: sriov_pf
                    name: p5p2
                    numvfs: 3
                    promisc: true
                    use_dhcp: false
                    defroute: false
                    link_mode: switchdev

              - type: vlan
                vlan_id:
                  get_param: TenantNetworkVlanID
                device: bond-pf
                addresses:
                - ip_netmask:
                    get_param: TenantIpSubnet</pre><p>
				Refer to the below validated bonding configurations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						active-backup - mode=1
					</li><li class="listitem">
						active-active or balance-xor - mode=2
					</li><li class="listitem">
						802.3ad (LACP) - mode=4
					</li></ul></div><div class="formalpara"><p class="title"><strong>Verifying the interface configuration</strong></p><p>
					Verify the interface configuration with the following procedure.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						During deployment, use the host network configuration tool <code class="literal">os-net-config</code> to enable <code class="literal">hw-tc-offload</code>.
					</li><li class="listitem">
						Enable <code class="literal">hw-tc-offload</code> on the <code class="literal">sriov_config</code> service any time you reboot the Compute node.
					</li><li class="listitem"><p class="simpara">
						Set the <code class="literal">hw-tc-offload</code> parameter to <code class="literal">on</code> for the NICs that are attached to the bond:.
					</p><pre class="screen">[root@overcloud-computesriov-0 ~]# ethtool -k ens1f0 | grep tc-offload
hw-tc-offload: on</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verifying the interface mode</strong></p><p>
					Verify the interface mode with the following procedure.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Set the eswitch mode to <code class="literal">switchdev</code> for the interfaces you use for HW offload.
					</li><li class="listitem">
						Use the host network configuration tool <code class="literal">os-net-config</code> to enable <code class="literal">eswitch</code> during deployment.
					</li><li class="listitem"><p class="simpara">
						Enable <code class="literal">eswitch</code> on the <code class="literal">sriov_config</code> service any time you reboot the Compute node.
					</p><pre class="screen">[root@overcloud-computesriov-0 ~]# devlink dev eswitch show pci/$(ethtool -i ens1f0 | grep bus-info | cut -d ':' -f 2,3,4 | awk '{$1=$1};1')</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The driver of the PF interface is set to <code class="literal">"mlx5e_rep"</code>, to show that it is a representor of the e-switch uplink port. This does not affect the functionality.
				</p></div></div><div class="formalpara"><p class="title"><strong>Verifying the offload state in OVS</strong></p><p>
					Verify the offload state in OVS with the following procedure.
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enable hardware offload in OVS in the Compute node.
					</p><pre class="screen">[root@overcloud-computesriov-0 ~]# ovs-vsctl get Open_vSwitch . other_config:hw-offload
"true"</pre></li></ul></div><div class="formalpara"><p class="title"><strong>Verifying the name of the VF representor port</strong></p><p>
					To ensure consistent naming of VF representor ports, <code class="literal">os-net-config</code> uses udev rules to rename the ports in the &lt;PF-name&gt;_&lt;VF_id&gt; format.
				</p></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						After deployment, verify that the VF representor ports are named correctly.
					</p><pre class="screen">root@overcloud-computesriov-0 ~]# cat /etc/udev/rules.d/80-persistent-os-net-config.rules
# This file is autogenerated by os-net-config

SUBSYSTEM=="net", ACTION=="add", ATTR{phys_switch_id}!="", ATTR{phys_port_name}=="pf*vf*", ENV{NM_UNMANAGED}="1"
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", KERNELS=="0000:65:00.0", NAME="ens1f0"
SUBSYSTEM=="net", ACTION=="add", ATTR{phys_switch_id}=="98039b7f9e48", ATTR{phys_port_name}=="pf0vf*", IMPORT{program}="/etc/udev/rep-link-name.sh $attr{phys_port_name}", NAME="ens1f0_$env{NUMBER}"
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", KERNELS=="0000:65:00.1", NAME="ens1f1"
SUBSYSTEM=="net", ACTION=="add", ATTR{phys_switch_id}=="98039b7f9e49", ATTR{phys_port_name}=="pf1vf*", IMPORT{program}="/etc/udev/rep-link-name.sh $attr{phys_port_name}", NAME="ens1f1_$env{NUMBER}"</pre></li></ul></div><div class="formalpara"><p class="title"><strong>Examining network traffic flow</strong></p><p>
					HW offloaded network flow functions in a similar way to physical switches or routers with application-specific integrated circuit (ASIC) chips. You can access the ASIC shell of a switch or router to examine the routing table and for other debugging. The following procedure uses a Broadcom chipset from a Cumulus Linux switch as an example. Replace the values that are appropriate to your environment.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To get Broadcom chip table content, use the <code class="literal">bcmcmd</code> command.
					</p><pre class="screen">root@dni-7448-26:~# cl-bcmcmd l2 show

mac=00:02:00:00:00:08 vlan=2000 GPORT=0x2 modid=0 port=2/xe1
mac=00:02:00:00:00:09 vlan=2000 GPORT=0x2 modid=0 port=2/xe1 Hit</pre></li><li class="listitem"><p class="simpara">
						Inspect the Traffic Control (TC) Layer.
					</p><pre class="screen"># tc -s filter show dev p5p1_1 ingress
…
filter block 94 protocol ip pref 3 flower chain 5
filter block 94 protocol ip pref 3 flower chain 5 handle 0x2
  eth_type ipv4
  src_ip 172.0.0.1
  ip_flags nofrag
  in_hw in_hw_count 1
        action order 1: mirred (Egress Redirect to device eth4) stolen
        index 3 ref 1 bind 1 installed 364 sec used 0 sec
        Action statistics:
        Sent 253991716224 bytes 169534118 pkt (dropped 0, overlimits 0 requeues 0)
        Sent software 43711874200 bytes 30161170 pkt
        Sent hardware 210279842024 bytes 139372948 pkt
        backlog 0b 0p requeues 0
        cookie 8beddad9a0430f0457e7e78db6e0af48
        no_percpu</pre></li><li class="listitem">
						Examine the <code class="literal">in_hw</code> flags and the statistics in this output. The word <code class="literal">hardware</code> indicates that the hardware processes the network traffic. If you use <code class="literal">tc-policy=none</code>, you can check this output or a tcpdump to investigate when hardware or software handles the packets. You can see a corresponding log message in <code class="literal">dmesg</code> or in <code class="literal">ovs-vswitch.log</code> when the driver is unable to offload packets.
					</li><li class="listitem"><p class="simpara">
						For Mellanox, as an example, the log entries resemble syndrome messages in <code class="literal">dmesg</code>.
					</p><pre class="screen">[13232.860484] mlx5_core 0000:3b:00.0: mlx5_cmd_check:756:(pid 131368): SET_FLOW_TABLE_ENTRY(0x936) op_mod(0x0) failed, status bad parameter(0x3), syndrome (0x6b1266)</pre><p class="simpara">
						In this example, the error code (0x6b1266) represents the following behavior:
					</p><pre class="screen">0x6B1266 |  set_flow_table_entry: pop vlan and forward to uplink is not allowed</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Validating systems</strong></p><p>
					Validate your system with the following procedure.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Ensure SR-IOV and VT-d are enabled on the system.
					</li><li class="listitem">
						Enable IOMMU in Linux by adding <code class="literal">intel_iommu=on</code> to kernel parameters, for example, using GRUB.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Limitations</strong></p><p>
					You cannot use the OVS firewall driver with HW offload because the connection tracking properties of the flows are unsupported in the offload path in OVS 2.11.
				</p></div></section><section class="section" id="debugging_hw_offload_flow"><div class="titlepage"><div><div><h2 class="title">6.8. Debugging HW Offload flow</h2></div></div></div><p>
				You can use the following procedure if you encounter the following message in the <code class="literal">ovs-vswitch.log</code> file:
			</p><pre class="screen">2020-01-31T06:22:11.257Z|00473|dpif_netlink(handler402)|ERR|failed to offload flow: Operation not supported: p6p1_5</pre><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To enable logging on the offload modules and to get additional log information for this failure, use the following commands on the Compute node:
					</p><pre class="screen">ovs-appctl vlog/set dpif_netlink:file:dbg
# Module name changed recently (check based on the version used
ovs-appctl vlog/set netdev_tc_offloads:file:dbg [OR] ovs-appctl vlog/set netdev_offload_tc:file:dbg
ovs-appctl vlog/set tc:file:dbg</pre></li><li class="listitem"><p class="simpara">
						Inspect the <code class="literal">ovs-vswitchd</code> logs again to see additional details about the issue.
					</p><p class="simpara">
						In the following example logs, the offload failed because of an unsupported attribute mark.
					</p><pre class="screen"> 2020-01-31T06:22:11.218Z|00471|dpif_netlink(handler402)|DBG|system@ovs-system: put[create] ufid:61bd016e-eb89-44fc-a17e-958bc8e45fda recirc_id(0),dp_hash(0/0),skb_priority(0/0),in_port(7),skb_mark(0),ct_state(0/0),ct_zone(0/0),ct_mark(0/0),ct_label(0/0),eth(src=fa:16:3e:d2:f5:f3,dst=fa:16:3e:c4:a3:eb),eth_type(0x0800),ipv4(src=10.1.1.8/0.0.0.0,dst=10.1.1.31/0.0.0.0,proto=1/0,tos=0/0x3,ttl=64/0,frag=no),icmp(type=0/0,code=0/0), actions:set(tunnel(tun_id=0x3d,src=10.10.141.107,dst=10.10.141.124,ttl=64,tp_dst=4789,flags(df|key))),6

2020-01-31T06:22:11.253Z|00472|netdev_tc_offloads(handler402)|DBG|offloading attribute pkt_mark isn't supported

2020-01-31T06:22:11.257Z|00473|dpif_netlink(handler402)|ERR|failed to offload flow: Operation not supported: p6p1_5</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Debugging Mellanox NICs</strong></p><p>
					Mellanox has provided a system information script, similar to a Red Hat SOS report.
				</p></div><p>
				<a class="link" href="https://github.com/Mellanox/linux-sysinfo-snapshot/blob/master/sysinfo-snapshot.py">https://github.com/Mellanox/linux-sysinfo-snapshot/blob/master/sysinfo-snapshot.py</a>
			</p><p>
				When you run this command, you create a zip file of the relevant log information, which is useful for support cases.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You can run this system information script with the following command:
					</p><pre class="screen"># ./sysinfo-snapshot.py --asap --asap_tc --ibdiagnet --openstack</pre></li></ul></div><p>
				You can also install Mellanox Firmware Tools (MFT), mlxconfig, mlxlink and the OpenFabrics Enterprise Distribution (OFED) drivers.
			</p><div class="formalpara"><p class="title"><strong>Useful CLI commands</strong></p><p>
					Use the <code class="literal">ethtool</code> utility with the following options to gather diagnostic information:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						ethtool -l &lt;uplink representor&gt; : View the number of channels
					</li><li class="listitem">
						ethtool -I &lt;uplink/VFs&gt; : Check statistics
					</li><li class="listitem">
						ethtool -i &lt;uplink rep&gt; : View driver information
					</li><li class="listitem">
						ethtool -g &lt;uplink rep&gt; : Check ring sizes
					</li><li class="listitem">
						ethtool -k &lt;uplink/VFs&gt; : View enabled features
					</li></ul></div><p>
				Use the <code class="literal">tcpdump</code> utility at the representor and PF ports to similarly check traffic flow.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Any changes you make to the link state of the representor port, affect the VF link state also.
					</li><li class="listitem">
						Representor port statistics present VF statistics also.
					</li></ul></div><p>
				Use the below commands to get useful diagnostic information:
			</p><pre class="screen">$ovs-appctl dpctl/dump-flows -m type=offloaded

$tc filter show dev ens1_0 ingress

$tc -s filter show dev ens1_0 ingress

$ tc monitor</pre></section><section class="section" id="sect-deploying-sriov-instance"><div class="titlepage"><div><div><h2 class="title">6.9. Deploying an instance for SR-IOV</h2></div></div></div><p>
				Use host aggregates to separate high performance compute hosts. For information on creating host aggregates and associated flavors for scheduling see <a class="link" href="index.html#sect-creating-host-aggregates" title="6.10. Creating host aggregates">Creating host aggregates</a>.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Pinned CPU instances can be located on the same Compute node as unpinned instances. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/instances_and_images_guide/index#ch-cpu_pinning">Configuring CPU pinning on the Compute node</a> in the Instances and Images Guide.
				</p></div></div><p>
				Deploy an instance for single root I/O virtualization (SR-IOV) by performing the following steps:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a flavor.
					</p><pre class="screen"># openstack flavor create &lt;flavor&gt; --ram &lt;MB&gt; --disk &lt;GB&gt; --vcpus &lt;#&gt;</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						You can specify the NUMA affinity policy for PCI passthrough devices and SR-IOV interfaces by adding the extra spec <code class="literal">hw:pci_numa_affinity_policy</code> to your flavor. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/instances_and_images_guide/index#section-update-flavor-metadata">Update flavor metadata</a> in the <span class="emphasis"><em>Instance and Images Guide</em></span>.
					</p></div></div></li><li class="listitem"><p class="simpara">
						Create the network.
					</p><pre class="screen"># openstack network create net1 --provider-physical-network tenant --provider-network-type vlan --provider-segment &lt;VLAN-ID&gt;
# openstack subnet create subnet1 --network net1 --subnet-range 192.0.2.0/24 --dhcp</pre></li><li class="listitem"><p class="simpara">
						Create the port.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use vnic-type <code class="literal">direct</code> to create an SR-IOV virtual function (VF) port.
							</p><pre class="screen"># openstack port create --network net1 --vnic-type direct sriov_port</pre></li><li class="listitem"><p class="simpara">
								Use the following command to create a virtual function with hardware offload.
							</p><pre class="screen"># openstack port create --network net1 --vnic-type direct --binding-profile '{"capabilities": ["switchdev"]} sriov_hwoffload_port</pre></li><li class="listitem"><p class="simpara">
								Use vnic-type <code class="literal">direct-physical</code> to create an SR-IOV PF port.
							</p><pre class="screen"># openstack port create --network net1 --vnic-type direct-physical sriov_port</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Deploy an instance.
					</p><pre class="screen"># openstack server create --flavor &lt;flavor&gt; --image &lt;image&gt; --nic port-id=&lt;id&gt; &lt;instance name&gt;</pre></li></ol></div></section><section class="section" id="sect-creating-host-aggregates"><div class="titlepage"><div><div><h2 class="title">6.10. Creating host aggregates</h2></div></div></div><p>
				For better performance, deploy guests that have cpu pinning and hugepages. You can schedule high performance instances on a subset of hosts by matching aggregate metadata with flavor metadata.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">AggregateInstanceExtraSpecsFilter</code> value is included in the <code class="literal">scheduler_default_filters</code> parameter in the <code class="literal">nova.conf</code> file. This configuration can be set through the heat parameter <code class="literal">NovaSchedulerDefaultFilters</code> under role-specific parameters before deployment.
					</p><pre class="screen">  ComputeOvsDpdkSriovParameters:
    NovaSchedulerDefaultFilters: ['AggregateInstanceExtraSpecsFilter', 'RetryFilter','AvailabilityZoneFilter','ComputeFilter','ComputeCapabilitiesFilter','ImagePropertiesFilter','ServerGroupAntiAffinityFilter','ServerGroupAffinityFilter','PciPassthroughFilter','NUMATopologyFilter']</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To add this parameter to the configuration of an exiting cluster, you can add it to the heat templates, and run the original deployment script again.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Create an aggregate group for SR-IOV, and add relevant hosts. Define metadata, for example, <code class="literal">sriov=true</code>, that matches defined flavor metadata.
					</p><pre class="screen"># openstack aggregate create sriov_group
# openstack aggregate add host sriov_group compute-sriov-0.localdomain
# openstack aggregate set sriov=true sriov_group</pre></li><li class="listitem"><p class="simpara">
						Create a flavor.
					</p><pre class="screen"># openstack flavor create &lt;flavor&gt; --ram &lt;MB&gt; --disk &lt;GB&gt; --vcpus &lt;#&gt;</pre></li><li class="listitem"><p class="simpara">
						Set additional flavor properties. Note that the defined metadata, <code class="literal">sriov=true</code>, matches the defined metadata on the SR-IOV aggregate.
					</p><pre class="screen">openstack flavor set --property sriov=true --property hw:cpu_policy=dedicated --property hw:mem_page_size=1GB &lt;flavor&gt;</pre></li></ol></div></section></section><section class="chapter" id="assembly_ovsdpdk_parameters"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Planning your OVS-DPDK deployment</h1></div></div></div><p>
			To optimize your OVS-DPDK deployment, you should understand how to configure the OVS-DPDK parameters relative to your Compute node hardware. For more information about CPUs and NUMA topology, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_product_guide/ch-nfv_tuning_for_performance">NFV performance considerations</a>.
		</p><section class="section" id="concept_ovsdpdk-cpu-partitioning"><div class="titlepage"><div><div><h2 class="title">7.1. OVS-DPDK with CPU partitioning and NUMA topology</h2></div></div></div><p>
				OVS-DPDK partitions the hardware resources for host, guests, and itself. The OVS-DPDK Poll Mode Drivers (PMDs) run DPDK active loops, which require dedicated CPU cores. Therefore you must allocate some CPUs, and huge pages, to OVS-DPDK.
			</p><p>
				A sample partitioning includes 16 cores per NUMA node on dual-socket Compute nodes. The traffic requires additional NICs because you cannot share NICs between the host and OVS-DPDK.
			</p><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_NFV-Hardware-Capacities_464931_0118_OVS-DPDK.png" alt="OpenStack NFV Hardware Capacities 464931 0118 OVS DPDK"/></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You must reserve DPDK PMD threads on both NUMA nodes, even if a NUMA node does not have an associated DPDK NIC.
				</p></div></div><p>
				For optimum OVS-DPDK performance, reserve a block of memory local to the NUMA node. Choose NICs associated with the same NUMA node that you use for memory and CPU pinning. Ensure that both bonded interfaces are from NICs on the same NUMA node.
			</p></section><section class="section" id="c_derive-parameters"><div class="titlepage"><div><div><h2 class="title">7.2. Workflows and derived parameters</h2></div></div></div><p>
				This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
			</p><p>
				You can use the Red Hat OpenStack Platform Workflow (mistral) service to derive parameters based on the capabilities of your available bare-metal nodes. Workflows use a YAML file to define a set of tasks and actions to perform. You can use a pre-defined workbook, <code class="literal">derive_params.yaml</code>, in the directory <code class="literal">tripleo-common/workbooks/</code>. This workbook provides workflows to derive each supported parameter from the results of Bare Metal introspection. The <code class="literal">derive_params.yaml</code> workflows use the formulas from <code class="literal">tripleo-common/workbooks/derive_params_formulas.yaml</code> to calculate the derived parameters.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can modify <code class="literal">derive_params_formulas.yaml</code> to suit your environment.
				</p></div></div><p>
				The <code class="literal">derive_params.yaml</code> workbook assumes all nodes for a particular composable role have the same hardware specifications. The workflow considers the flavor-profile association and nova placement scheduler to match nodes associated with a role, then uses the introspection data from the first node that matches the role.
			</p><p>
				For more information about Workflows, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/director_installation_and_usage/troubleshooting-director-errors#troubleshooting-workflows-and-executions">Troubleshooting Workflows and Executions</a>
			</p><p>
				You can use the <code class="literal">-p</code> or <code class="literal">--plan-environment-file</code> option to add a custom <code class="literal">plan_environment.yaml</code> file, containing a list of workbooks and any input values, to the <code class="literal">openstack overcloud deploy</code> command. The resultant workflows merge the derived parameters back into the custom <code class="literal">plan_environment.yaml</code>, where they are available for the overcloud deployment.
			</p><p>
				For details on how to use the <code class="literal">--plan-environment-file</code> option in your deployment, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/#plan_environment">Plan Environment Metadata</a>.
			</p></section><section class="section" id="c_derive-dpdk"><div class="titlepage"><div><div><h2 class="title">7.3. Derived OVS-DPDK parameters</h2></div></div></div><p>
				The workflows in <code class="literal">derive_params.yaml</code> derive the DPDK parameters associated with the role that uses the <code class="literal">ComputeNeutronOvsDpdk</code> service.
			</p><p>
				The workflows can automatically derive the following parameters for OVS-DPDK. The <code class="literal">NovaVcpuPinSet</code> parameter is now deprecated, and is replaced by <code class="literal">NovaComputeCpuDedicatedSet</code> for dedicated, pinned workflows:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						IsolCpusList
					</li><li class="listitem">
						KernelArgs
					</li><li class="listitem">
						NovaReservedHostMemory
					</li><li class="listitem">
						NovaComputeCpuDedicatedSet
					</li><li class="listitem">
						OvsDpdkCoreList
					</li><li class="listitem">
						OvsDpdkSocketMemory
					</li><li class="listitem">
						OvsPmdCoreList
					</li></ul></div><p>
				The <code class="literal">OvsDpdkMemoryChannels</code> parameter cannot be derived from the introspection memory bank data because the format of memory slot names are inconsistent across different hardware environments.
			</p><p>
				In most cases, the default number of <code class="literal">OvsDpdkMemoryChannels</code> is four. Consult your hardware manual to determine the number of memory channels per socket, and update the default number with this value.
			</p><p>
				For more information about workflow parameters, see <a class="xref" href="index.html#proc_derive-dpdk" title="8.1. Deriving DPDK parameters with workflows">Section 8.1, “Deriving DPDK parameters with workflows”</a>.
			</p></section><section class="section" id="concept_ovsdpdk-cpu-parameters"><div class="titlepage"><div><div><h2 class="title">7.4. Calculating OVS-DPDK parameters manually</h2></div></div></div><p>
				This section describes how OVS-DPDK uses parameters within the director <code class="literal">network_environment.yaml</code> heat templates to configure the CPU and memory for optimum performance. Use this information to evaluate the hardware support on your Compute nodes and how to partition the hardware to optimize your OVS-DPDK deployment.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					For more information on an how to generate these values with the <code class="literal">derived_parameters.yaml</code> workflow instead, see <a class="link" href="index.html#c_derive-parameters" title="7.2. Workflows and derived parameters">Overview of workflows and derived parameters</a>.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Always pair CPU sibling threads, or logical CPUs, together in the physical core when allocating CPU cores.
				</p></div></div><p>
				For details on how to determine the CPU and NUMA nodes on your Compute nodes, see <a class="link" href="index.html#proc_finding-numa-topology" title="2.2. Discovering your NUMA node topology">Discovering your NUMA node topology</a>. Use this information to map CPU and other parameters to support the host, guest instance, and OVS-DPDK process needs.
			</p><section class="section" id="c_ovsdpdk-cpu-parameters"><div class="titlepage"><div><div><h3 class="title">7.4.1. CPU parameters</h3></div></div></div><p>
					OVS-DPDK uses the following parameters for CPU partitioning:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">OvsPmdCoreList</span></dt><dd><p class="simpara">
								Provides the CPU cores that are used for the DPDK poll mode drivers (PMD). Choose CPU cores that are associated with the local NUMA nodes of the DPDK interfaces. Use <code class="literal">OvsPmdCoreList</code> for the <code class="literal">pmd-cpu-mask</code> value in OVS. Observe the following recommendations for <code class="literal">OvsPmdCoreList</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Pair the sibling threads together.
									</li><li class="listitem">
										Exclude all cores from the <code class="literal">OvsDpdkCoreList</code>
									</li><li class="listitem">
										Avoid allocating the logical CPUs of both thread siblings on the first physical core to both NUMA nodes as these should be used for the <code class="literal">OvsDpdkCoreList</code> parameter.
									</li><li class="listitem">
										Performance depends on the number of physical cores allocated for this PMD Core list. On the NUMA node which is associated with DPDK NIC, allocate the required cores.
									</li><li class="listitem">
										For NUMA nodes with a DPDK NIC, determine the number of physical cores required based on the performance requirement, and include all the sibling threads or logical CPUs for each physical core.
									</li><li class="listitem">
										For NUMA nodes without DPDK NICs, allocate the sibling threads or logical CPUs of any physical core except the first physical core of the NUMA node. You need a minimal DPDK poll mode driver on the NUMA node without DPDK NICs present to properly create guest instances.
									</li></ul></div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You must reserve DPDK PMD threads on both NUMA nodes, even if a NUMA node does not have an associated DPDK NIC.
					</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">NovaComputeCpuDedicatedSet</span></dt><dd><p class="simpara">
								A comma-separated list or range of physical host CPU numbers to which processes for pinned instance CPUs can be scheduled. For example, <code class="literal">NovaComputeCpuDedicatedSet: [4-12,^8,15]</code> reserves cores from 4-12 and 15, excluding 8.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Exclude all cores from the <code class="literal">OvsPmdCoreList</code> and the <code class="literal">OvsDpdkCoreList</code>.
									</li><li class="listitem">
										Include all remaining cores.
									</li><li class="listitem">
										Pair the sibling threads together.
									</li></ul></div></dd><dt><span class="term">NovaComputeCpuSharedSet</span></dt><dd>
								A comma-separated list or range of physical host CPU numbers used to determine the host CPUs for instance emulator threads. The recommended value for this parameter matches the value set for <code class="literal">OvsDpdkCoreList</code>.
							</dd><dt><span class="term">IsolCpusList</span></dt><dd><p class="simpara">
								A set of CPU cores isolated from the host processes. <code class="literal">IsolCpusList</code> is the <code class="literal">isolated_cores</code> value in the <code class="literal">cpu-partitioning-variable.conf</code> file for the <code class="literal">tuned-profiles-cpu-partitioning</code> component. Observe the following recommendations for <code class="literal">IsolCpusList</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Match the list of cores in <code class="literal">OvsPmdCoreList</code> and <code class="literal">NovaComputeCpuDedicatedSet</code>.
									</li><li class="listitem">
										Pair the sibling threads together.
									</li></ul></div></dd><dt><span class="term">OvsDpdkCoreList</span></dt><dd><p class="simpara">
								Provides CPU cores for non data path OVS-DPDK processes, such as handler and revalidator threads. This parameter has no impact on overall data path performance on multi-NUMA node hardware. <code class="literal">OvsDpdkCoreList</code> is the <code class="literal">dpdk-lcore-mask</code> value in OVS, and these cores are shared with the host. Observe the following recommendations for <code class="literal">OvsDpdkCoreList</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Allocate the first physical core, and sibling thread, from each NUMA node, even if the NUMA node has no associated DPDK NIC.
									</li><li class="listitem">
										These cores must be mutually exclusive from the list of cores in <code class="literal">OvsPmdCoreList</code> and <code class="literal">NovaComputeCpuDedicatedSet</code>.
									</li></ul></div></dd></dl></div></section><section class="section" id="c_ovsdpdk-memory-params"><div class="titlepage"><div><div><h3 class="title">7.4.2. Memory parameters</h3></div></div></div><p>
					OVS-DPDK uses the following memory parameters:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">OvsDpdkMemoryChannels</span></dt><dd><p class="simpara">
								Maps memory channels in the CPU per NUMA node. <code class="literal">OvsDpdkMemoryChannels</code> is the <code class="literal">other_config:dpdk-extra=”-n &lt;value&gt;”</code> value in OVS. Observe the following recommendations for <code class="literal">OvsDpdkMemoryChannels</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Use <code class="literal">dmidecode -t memory</code> or your hardware manual to determine the number of memory channels available.
									</li><li class="listitem">
										Use <code class="literal">ls /sys/devices/system/node/node* -d</code> to determine the number of NUMA nodes.
									</li><li class="listitem">
										Divide the number of memory channels available by the number of NUMA nodes.
									</li></ul></div></dd><dt><span class="term">NovaReservedHostMemory</span></dt><dd><p class="simpara">
								Reserves memory in MB for tasks on the host. <code class="literal">NovaReservedHostMemory</code> is the <code class="literal">reserved_host_memory_mb</code> value for the Compute node in <code class="literal">nova.conf</code>. Observe the following recommendation for <code class="literal">NovaReservedHostMemory</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Use the static recommended value of 4096 MB.
									</li></ul></div></dd><dt><span class="term">OvsDpdkSocketMemory</span></dt><dd><p class="simpara">
								Specifies the amount of memory in MB to pre-allocate from the hugepage pool, per NUMA node. <code class="literal">OvsDpdkSocketMemory</code> is the <code class="literal">other_config:dpdk-socket-mem</code> value in OVS. Observe the following recommendations for <code class="literal">OvsDpdkSocketMemory</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Provide as a comma-separated list.
									</li><li class="listitem">
										For a NUMA node without a DPDK NIC, use the static recommendation of 1024 MB (1GB)
									</li><li class="listitem">
										Calculate the <code class="literal">OvsDpdkSocketMemory</code> value from the MTU value of each NIC on the NUMA node.
									</li><li class="listitem"><p class="simpara">
										The following equation approximates the value for <code class="literal">OvsDpdkSocketMemory</code>:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
												MEMORY_REQD_PER_MTU = (ROUNDUP_PER_MTU + 800) * (4096 * 64) Bytes
											</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
														800 is the overhead value.
													</li><li class="listitem">
														4096 * 64 is the number of packets in the mempool.
													</li></ul></div></li></ul></div></li><li class="listitem">
										Add the MEMORY_REQD_PER_MTU for each of the MTU values set on the NUMA node and add another 512 MB as buffer. Round the value up to a multiple of 1024.
									</li></ul></div></dd></dl></div><div class="formalpara"><p class="title"><strong>Sample Calculation - MTU 2000 and MTU 9000</strong></p><p>
						DPDK NICs dpdk0 and dpdk1 are on the same NUMA node 0, and configured with MTUs 9000, and 2000 respectively. The sample calculation to derive the memory required is as follows:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Round off the MTU values to the nearest multiple of 1024 bytes.
						</p><pre class="screen">The MTU value of 9000 becomes 9216 bytes.
The MTU value of 2000 becomes 2048 bytes.</pre></li><li class="listitem"><p class="simpara">
							Calculate the required memory for each MTU value based on these rounded byte values.
						</p><pre class="screen">Memory required for 9000 MTU = (9216 + 800) * (4096*64) = 2625634304
Memory required for 2000 MTU = (2048 + 800) * (4096*64) = 746586112</pre></li><li class="listitem"><p class="simpara">
							Calculate the combined total memory required, in bytes.
						</p><pre class="screen">2625634304 + 746586112 + 536870912 = 3909091328 bytes.</pre><p class="simpara">
							This calculation represents (Memory required for MTU of 9000) + (Memory required for MTU of 2000) + (512 MB buffer).
						</p></li><li class="listitem"><p class="simpara">
							Convert the total memory required into MB.
						</p><pre class="screen">3909091328 / (1024*1024) = 3728 MB.</pre></li><li class="listitem"><p class="simpara">
							Round this value up to the nearest 1024.
						</p><pre class="screen">3724 MB rounds up to 4096 MB.</pre></li><li class="listitem"><p class="simpara">
							Use this value to set <code class="literal">OvsDpdkSocketMemory</code>.
						</p><pre class="programlisting language-yaml">    OvsDpdkSocketMemory: “4096,1024”</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Sample Calculation - MTU 2000</strong></p><p>
						DPDK NICs dpdk0 and dpdk1 are on the same NUMA node 0, and each are configured with MTUs of 2000. The sample calculation to derive the memory required is as follows:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Round off the MTU values to the nearest multiple of 1024 bytes.
						</p><pre class="screen">The MTU value of 2000 becomes 2048 bytes.</pre></li><li class="listitem"><p class="simpara">
							Calculate the required memory for each MTU value based on these rounded byte values.
						</p><pre class="screen">Memory required for 2000 MTU = (2048 + 800) * (4096*64) = 746586112</pre></li><li class="listitem"><p class="simpara">
							Calculate the combined total memory required, in bytes.
						</p><pre class="screen">746586112 + 536870912 = 1283457024 bytes.</pre><p class="simpara">
							This calculation represents (Memory required for MTU of 2000) + (512 MB buffer).
						</p></li><li class="listitem"><p class="simpara">
							Convert the total memory required into MB.
						</p><pre class="screen">1283457024 / (1024*1024) = 1224 MB.</pre></li><li class="listitem"><p class="simpara">
							Round this value up to the nearest multiple of 1024.
						</p><pre class="screen">1224 MB rounds up to 2048 MB.</pre></li><li class="listitem"><p class="simpara">
							Use this value to set <code class="literal">OvsDpdkSocketMemory</code>.
						</p><pre class="programlisting language-yaml">    OvsDpdkSocketMemory: “2048,1024”</pre></li></ol></div></section><section class="section" id="c_ovspdkd-networking-params"><div class="titlepage"><div><div><h3 class="title">7.4.3. Networking parameters</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">NeutronDpdkDriverType</span></dt><dd>
								Sets the driver type used by DPDK. Use the default value of <code class="literal">vfio-pci</code>.
							</dd><dt><span class="term">NeutronDatapathType</span></dt><dd>
								Datapath type for OVS bridges. DPDK uses the default value of <code class="literal">netdev</code>.
							</dd><dt><span class="term">NeutronVhostuserSocketDir</span></dt><dd>
								Sets the vhost-user socket directory for OVS. Use <code class="literal">/var/lib/vhost_sockets</code> for vhost client mode.
							</dd></dl></div></section><section class="section" id="c_ovsdpdk-other-params"><div class="titlepage"><div><div><h3 class="title">7.4.4. Other parameters</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">NovaSchedulerDefaultFilters</span></dt><dd>
								Provides an ordered list of filters that the Compute node uses to find a matching Compute node for a requested guest instance.
							</dd><dt><span class="term">VhostuserSocketGroup</span></dt><dd>
								Sets the vhost-user socket directory group. The default value is <code class="literal">qemu</code>. Set <code class="literal">VhostuserSocketGroup</code> to <code class="literal">hugetlbfs</code> so that the <code class="literal">ovs-vswitchd</code> and <code class="literal">qemu</code> processes can access the shared huge pages and unix socket that configures the virtio-net device. This value is role-specific and should be applied to any role leveraging OVS-DPDK.
							</dd><dt><span class="term">KernelArgs</span></dt><dd><p class="simpara">
								Provides multiple kernel arguments to <code class="literal">/etc/default/grub</code> for the Compute node at boot time. Add the following values based on your configuration:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										<code class="literal">hugepagesz</code>: Sets the size of the huge pages on a CPU. This value can vary depending on the CPU hardware. Set to 1G for OVS-DPDK deployments (<code class="literal">default_hugepagesz=1GB hugepagesz=1G</code>). Use this command to check for the <code class="literal">pdpe1gb</code> CPU flag that confirms your CPU supports 1G.
									</p><pre class="screen">lshw -class processor | grep pdpe1gb</pre></li><li class="listitem">
										<code class="literal">hugepages count</code>: Sets the number of huge pages available based on available host memory. Use most of your available memory, except <code class="literal">NovaReservedHostMemory</code>. You must also configure the huge pages count value within the flavor of your Compute nodes.
									</li><li class="listitem">
										<code class="literal">iommu</code>: For Intel CPUs, add <code class="literal">“intel_iommu=on iommu=pt”`</code>
									</li><li class="listitem">
										<code class="literal">isolcpus</code>: Sets the CPU cores for tuning. This value matches <code class="literal">IsolCpusList</code>.
									</li></ul></div></dd></dl></div></section><section class="section" id="c_ovsdpdk-instance-extra-specs"><div class="titlepage"><div><div><h3 class="title">7.4.5. Instance extra specifications</h3></div></div></div><p>
					Before deploying instances in an NFV environment, create a flavor that utilizes CPU pinning, huge pages, and emulator thread pinning.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">hw:cpu_policy</span></dt><dd>
								When this parameter is set to <code class="literal">dedicated</code>, the guest uses pinned CPUs. Instances created from a flavor with this parameter set have an effective overcommit ratio of 1:1. The default value is <code class="literal">shared</code>.
							</dd><dt><span class="term">hw:mem_page_size</span></dt><dd><p class="simpara">
								Set this parameter to a valid string of a specific value with standard suffix (For example, <code class="literal">4KB</code>, <code class="literal">8MB</code>, or <code class="literal">1GB</code>). Use 1GB to match the <code class="literal">hugepagesz</code> boot parameter. Calculate the number of huge pages available for the virtual machines by subtracting <code class="literal">OvsDpdkSocketMemory</code> from the boot parameter. The following values are also valid:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										small (default) - The smallest page size is used
									</li><li class="listitem">
										large - Only use large page sizes. (2MB or 1GB on x86 architectures)
									</li><li class="listitem">
										any - The compute driver can attempt to use large pages, but defaults to small if none available.
									</li></ul></div></dd><dt><span class="term">hw:emulator_threads_policy</span></dt><dd>
								Set the value of this parameter to <code class="literal">share</code> so that emulator threads are locked to CPUs that you’ve identified in the heat parameter, <code class="literal">NovaComputeCpuSharedSet</code>. If an emulator thread is running on a vCPU with the poll mode driver (PMD) or real-time processing, you can experience negative effects, such as packet loss.
							</dd></dl></div></section></section><section class="section" id="proc_two-numa-ovsdpdk"><div class="titlepage"><div><div><h2 class="title">7.5. Two NUMA node example OVS-DPDK deployment</h2></div></div></div><p>
				The Compute node in the following example includes two NUMA nodes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						NUMA 0 has cores 0-7. The sibling thread pairs are (0,1), (2,3), (4,5), and (6,7)
					</li><li class="listitem">
						NUMA 1 has cores 8-15. The sibling thread pairs are (8,9), (10,11), (12,13), and (14,15).
					</li><li class="listitem">
						Each NUMA node connects to a physical NIC, namely NIC1 on NUMA 0, and NIC2 on NUMA 1.
					</li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_NFV_NUMA-Nodes_453316_0717_ECE_OVS-DPDK-Deployment.png" alt="OpenStack NFV NUMA Nodes 453316 0717 ECE OVS DPDK Deployment"/></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Reserve the first physical cores or both thread pairs on each NUMA node (0,1 and 8,9) for non-datapath DPDK processes, such as <code class="literal">OvsDpdkCoreList</code>.
				</p></div></div><p>
				This example also assumes a 1500 MTU configuration, so the <code class="literal">OvsDpdkSocketMemory</code> is the same for all use cases:
			</p><pre class="programlisting language-yaml">OvsDpdkSocketMemory: “1024,1024”</pre><div class="formalpara"><p class="title"><strong>NIC 1 for DPDK, with one physical core for PMD</strong></p><p>
					In this use case, you allocate one physical core on NUMA 0 for PMD. You must also allocate one physical core on NUMA 1, even though DPDK is not enabled on the NIC for that NUMA node. The remaining cores, not reserved for <code class="literal">OvsDpdkCoreList</code>, are allocated for guest instances. The resulting parameter settings are:
				</p></div><pre class="programlisting language-yaml">OvsPmdCoreList: “2,3,10,11”
NovaComputeCpuDedicatedSet: “4,5,6,7,12,13,14,15”</pre><div class="formalpara"><p class="title"><strong>NIC 1 for DPDK, with two physical cores for PMD</strong></p><p>
					In this use case, you allocate two physical cores on NUMA 0 for PMD. You must also allocate one physical core on NUMA 1, even though DPDK is not enabled on the NIC for that NUMA node. The remaining cores, not reserved for <code class="literal">OvsDpdkCoreList</code>, are allocated for guest instances. The resulting parameter settings are:
				</p></div><pre class="programlisting language-yaml">OvsPmdCoreList: “2,3,4,5,10,11”
NovaComputeCpuDedicatedSet: “6,7,12,13,14,15”</pre><div class="formalpara"><p class="title"><strong>NIC 2 for DPDK, with one physical core for PMD</strong></p><p>
					In this use case, you allocate one physical core on NUMA 1 for PMD. You must also allocate one physical core on NUMA 0, even though DPDK is not enabled on the NIC for that NUMA node. The remaining cores, not reserved for <code class="literal">OvsDpdkCoreList</code>, are allocated for guest instances. The resulting parameter settings are:
				</p></div><pre class="programlisting language-yaml">OvsPmdCoreList: “2,3,10,11”
NovaComputeCpuDedicatedSet: “4,5,6,7,12,13,14,15”</pre><div class="formalpara"><p class="title"><strong>NIC 2 for DPDK, with two physical cores for PMD</strong></p><p>
					In this use case, you allocate two physical cores on NUMA 1 for PMD. You must also allocate one physical core on NUMA 0, even though DPDK is not enabled on the NIC for that NUMA node. The remaining cores, not reserved for <code class="literal">OvsDpdkCoreList</code>, are allocated for guest instances. The resulting parameter settings are:
				</p></div><pre class="programlisting language-yaml">OvsPmdCoreList: “2,3,10,11,12,13”
NovaComputeCpuDedicatedSet: “4,5,6,7,14,15”</pre><div class="formalpara"><p class="title"><strong>NIC 1 and NIC2 for DPDK, with two physical cores for PMD</strong></p><p>
					In this use case, you allocate two physical cores on each NUMA node for PMD. The remaining cores, not reserved for <code class="literal">OvsDpdkCoreList</code>, are allocated for guest instances. The resulting parameter settings are:
				</p></div><pre class="programlisting language-yaml">OvsPmdCoreList: “2,3,4,5,10,11,12,13”
NovaComputeCpuDedicatedSet: “6,7,14,15”</pre></section><section class="section" id="assembly_ovsdpdk-topology"><div class="titlepage"><div><div><h2 class="title">7.6. Topology of an NFV OVS-DPDK deployment</h2></div></div></div><p>
				This example deployment shows an OVS-DPDK configuration and consists of two virtual network functions (VNFs) with two interfaces each:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The management interface, represented by <code class="literal">mgt</code>.
					</li><li class="listitem">
						The data plane interface.
					</li></ul></div><p>
				In the OVS-DPDK deployment, the VNFs operate with inbuilt DPDK that supports the physical interface. OVS-DPDK enables bonding at the vSwitch level. For improved performance in your OVS-DPDK deployment, it is recommended that you separate kernel and OVS-DPDK NICs. To separate the management (<code class="literal">mgt</code>) network, connected to the Base provider network for the virtual machine, ensure you have additional NICs. The Compute node consists of two regular NICs for the Red Hat OpenStack Platform API management that can be reused by the Ceph API but cannot be shared with any OpenStack tenant.
			</p><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_NFV_Planning_Topology_427302_1216_JCS_OSV-DPDK-deployment.png" alt="NFV OVS-DPDK deployment"/></div></div><div class="formalpara"><p class="title"><strong>NFV OVS-DPDK topology</strong></p><p>
					The following image shows the topology for OVS-DPDK for NFV. It consists of Compute and Controller nodes with 1 or 10 Gbps NICs, and the director node.
				</p></div><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_NFV_Planning_Topology_OVS-DPDK.png" alt="NFV OVS-DPDK Topology"/></div></div></section></section><section class="chapter" id="part-dpdk-configure"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Configuring an OVS-DPDK deployment</h1></div></div></div><p>
			This section deploys OVS-DPDK within the Red Hat OpenStack Platform environment. The overcloud usually consists of nodes in predefined roles such as Controller nodes, Compute nodes, and different storage node types. Each of these default roles contains a set of services defined in the core heat templates on the director node.
		</p><p>
			You must install and configure the undercloud before you can deploy the overcloud. See the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/director_installation_and_usage/">Director Installation and Usage Guide</a> for details.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				You must determine the best values for the OVS-DPDK parameters found in the <code class="literal">network-environment.yaml</code> file to optimize your OpenStack network for OVS-DPDK.
			</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				Do not manually edit or change <code class="literal">isolated_cores</code> or other values in <code class="literal">etc/tuned/cpu-partitioning-variables.conf</code> that the director heat templates modify.
			</p></div></div><section class="section" id="proc_derive-dpdk"><div class="titlepage"><div><div><h2 class="title">8.1. Deriving DPDK parameters with workflows</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
				</p></div></div><p>
				See <a class="xref" href="index.html#c_derive-parameters" title="7.2. Workflows and derived parameters">Section 7.2, “Workflows and derived parameters”</a> for an overview of the Mistral workflow for DPDK.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You must have bare metal introspection, including hardware inspection extras (<code class="literal">inspection_extras</code>) enabled to provide the data retrieved by this workflow. Hardware inspection extras are enabled by default. For more information about hardware of the nodes, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/index#inspecting-the-hardware-of-nodes-basic">Inspecting the hardware of nodes</a>.
				</p></div><div class="formalpara"><p class="title"><strong>Define the Workflows and Input Parameters for DPDK</strong></p><p>
					The following list outlines the input parameters you can provide to the OVS-DPDK workflows:
				</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">num_phy_cores_per_numa_node_for_pmd</span></dt><dd>
							This input parameter specifies the required minimum number of cores for the NUMA node associated with the DPDK NIC. One physical core is assigned for the other NUMA nodes not associated with DPDK NIC. Ensure that this parameter is set to 1.
						</dd><dt><span class="term">huge_page_allocation_percentage</span></dt><dd>
							This input parameter specifies the required percentage of total memory, excluding <code class="literal">NovaReservedHostMemory</code>, that can be configured as huge pages. The <code class="literal">KernelArgs</code> parameter is derived using the calculated huge pages based on the <code class="literal">huge_page_allocation_percentage</code> specified. Ensure that this parameter is set to 50.
						</dd></dl></div><p>
				The workflows calculate appropriate DPDK parameter values from these input parameters and the bare-metal introspection details.
			</p><p>
				To define the workflows and input parameters for DPDK:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Copy the <code class="literal">usr/share/openstack-tripleo-heat-templates/plan-samples/plan-environment-derived-params.yaml</code> file to a local directory and set the input parameters to suit your environment.
					</p><pre class="literallayout">  workflow_parameters:
    tripleo.derive_params.v1.derive_parameters:
      <span class="marked marked"><span class="marked marked"><!--Empty--></span><span class="marked marked"><!--Empty--></span># DPDK Parameters </span><span class="marked marked"><span class="marked marked"><!--Empty--></span></span>#
      # Specifies the minimum number of CPU physical cores to be allocated for DPDK
      # PMD threads. The actual allocation will be based on network config, if
      # the a DPDK port is associated with a numa node, then this configuration
      # will be used, else 1.
      num_phy_cores_per_numa_node_for_pmd: 1
      # Amount of memory to be configured as huge pages in percentage. Ouf the
      # total available memory (excluding the NovaReservedHostMemory), the
      # specified percentage of the remaining is configured as huge pages.
      huge_page_allocation_percentage: 50</pre></li><li class="listitem"><p class="simpara">
						Run the <code class="literal">openstack overcloud deploy</code> command and include the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">update-plan-only</code> option
							</li><li class="listitem">
								The role file and all environment files specific to your environment
							</li><li class="listitem"><p class="simpara">
								The <code class="literal">plan-environment-derived-parms.yaml</code> file with the <code class="literal">--plan-environment-file</code> optional argument
							</p><pre class="screen">$ openstack overcloud deploy --templates --update-plan-only \
-r /home/stack/roles_data.yaml \
-e /home/stack/&lt;environment-file&gt; \
... _#repeat as necessary_ ...
**-p /home/stack/plan-environment-derived-params.yaml**</pre></li></ul></div></li></ol></div><p>
				The output of this command shows the derived results, which are also merged into the <code class="literal">plan-environment.yaml</code> file.
			</p><pre class="screen">Started Mistral Workflow tripleo.validations.v1.check_pre_deployment_validations. Execution ID: 55ba73f2-2ef4-4da1-94e9-eae2fdc35535
Waiting for messages on queue '472a4180-e91b-4f9e-bd4c-1fbdfbcf414f' with no timeout.
Removing the current plan files
Uploading new plan files
Started Mistral Workflow tripleo.plan_management.v1.update_deployment_plan. Execution ID: 7fa995f3-7e0f-4c9e-9234-dd5292e8c722
Plan updated.
Processing templates in the directory /tmp/tripleoclient-SY6RcY/tripleo-heat-templates
Invoking workflow (tripleo.derive_params.v1.derive_parameters) specified in plan-environment file
Started Mistral Workflow tripleo.derive_params.v1.derive_parameters. Execution ID: 2d4572bf-4c5b-41f8-8981-c84a363dd95b
Workflow execution is completed. result:
ComputeOvsDpdkParameters:
 IsolCpusList: 1,2,3,4,5,6,7,9,10,17,18,19,20,21,22,23,11,12,13,14,15,25,26,27,28,29,30,31
 KernelArgs: default_hugepagesz=1GB hugepagesz=1G hugepages=32 iommu=pt intel_iommu=on
   isolcpus=1,2,3,4,5,6,7,9,10,17,18,19,20,21,22,23,11,12,13,14,15,25,26,27,28,29,30,31
 NovaReservedHostMemory: 4096
 NovaComputeCpuDedicatedSet: 2,3,4,5,6,7,18,19,20,21,22,23,10,11,12,13,14,15,26,27,28,29,30,31
 OvsDpdkCoreList: 0,16,8,24
 OvsDpdkMemoryChannels: 4
 OvsDpdkSocketMemory: 1024,1024
 OvsPmdCoreList: 1,17,9,25</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The <code class="literal">OvsDpdkMemoryChannels</code> parameter cannot be derived from introspection details. In most cases, this value should be 4.
				</p></div></div><div class="formalpara"><p class="title"><strong>Deploy the overcloud with the derived parameters</strong></p><p>
					To deploy the overcloud with these derived parameters:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Copy the derived parameters from the deploy command output to the <code class="literal">network-environment.yaml</code> file.
					</p><pre class="screen">  # DPDK compute node.
  ComputeOvsDpdkParameters:
    KernelArgs: default_hugepagesz=1GB hugepagesz=1G hugepages=32 iommu=pt intel_iommu=on
    TunedProfileName: "cpu-partitioning"
    IsolCpusList: "1,2,3,4,5,6,7,9,10,17,18,19,20,21,22,23,11,12,13,14,15,25,26,27,28,29,30,31"
    NovaComputeCpuDedicatedSet: ['2,3,4,5,6,7,18,19,20,21,22,23,10,11,12,13,14,15,26,27,28,29,30,31']
    NovaReservedHostMemory: 4096
    OvsDpdkSocketMemory: "1024,1024"
    OvsDpdkMemoryChannels: "4"
    OvsDpdkCoreList: "0,16,8,24"
    OvsPmdCoreList: "1,17,9,25"</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must assign at least one CPU with sibling thread on each NUMA node with or without DPDK NICs present for DPDK PMD to avoid failures in creating guest instances.
						</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							These parameters apply to the specific role, ComputeOvsDpdk. You can apply these parameters globally, but role-specific parameters overwrite any global parameters.
						</p></div></div></li><li class="listitem">
						Deploy the overcloud using the role file and all environment files specific to your environment.
					</li></ol></div><pre class="literallayout"> openstack overcloud deploy --templates \
 -r /home/stack/roles_data.yaml \
 -e /home/stack/<span class="strong strong"><strong>&lt;environment-file&gt;</strong></span> \
... <span class="emphasis"><em>#repeat as necessary</em></span> ...</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					In a cluster with Compute, ComputeOvsDpdk, and ComputeSriov, the workflow applies the formula only for the ComputeOvsDpdk role, not Compute or ComputeSriovs.
				</p></div></div></section><section class="section" id="c_ovsdpdk-composeable"><div class="titlepage"><div><div><h2 class="title">8.2. OVS-DPDK topology</h2></div></div></div><p>
				With Red Hat OpenStack Platform, you can create custom deployment roles, using the composable roles feature to add or remove services from each role. For more information on Composable Roles, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/index#Chap-Roles">Composable Services and Custom Roles</a> in <span class="emphasis"><em>Advanced Overcloud Customization</em></span>.
			</p><p>
				This image shows a example OVS-DPDK topology with two bonded ports for the control plane and data plane:
			</p><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_NFV_Config-Guide_Topology_450694_0617_ECE_OVS-DPDK.png" alt="OpenStack NFV Config Guide Topology 450694 0617 ECE OVS DPDK"/></div></div><p>
				To configure OVS-DPDK, perform the following tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If you use composable roles, copy and modify the <code class="literal">roles_data.yaml</code> file to add the custom role for OVS-DPDK.
					</li><li class="listitem">
						Update the appropriate <code class="literal">network-environment.yaml</code> file to include parameters for kernel arguments, and DPDK arguments.
					</li><li class="listitem">
						Update the <code class="literal">compute.yaml</code> file to include the bridge for DPDK interface parameters.
					</li><li class="listitem">
						Update the <code class="literal">controller.yaml</code> file to include the same bridge details for DPDK interface parameters.
					</li><li class="listitem">
						Run the <code class="literal">overcloud_deploy.sh</code> script to deploy the overcloud with the DPDK parameters.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					This guide provides examples for CPU assignments, memory allocation, and NIC configurations that can vary from your topology and use case. For more information on hardware and configuration options, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_product_guide/">Network Functions Virtualization Product Guide</a> and <a class="xref" href="index.html#ch-hardware-requirements" title="Chapter 2. Hardware requirements">Chapter 2, <em>Hardware requirements</em></a> .
				</p></div></div><h4 id="prerequisites_2">Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						OVS 2.10
					</li><li class="listitem">
						DPDK 17
					</li><li class="listitem">
						A supported NIC. To view the list of supported NICs for NFV, see <a class="xref" href="index.html#ref_supported-nics" title="2.1. Tested NICs">Section 2.1, “Tested NICs”</a>.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The Red Hat OpenStack Platform operates in OVS client mode for OVS-DPDK deployments.
				</p></div></div></section><section class="section" id="proc-ovsdpdk-mtu"><div class="titlepage"><div><div><h2 class="title">8.3. Setting the MTU value for OVS-DPDK interfaces</h2></div></div></div><p>
				Red Hat OpenStack Platform supports jumbo frames for OVS-DPDK. To set the maximum transmission unit (MTU) value for jumbo frames you must:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Set the global MTU value for networking in the <code class="literal">network-environment.yaml</code> file.
					</li><li class="listitem">
						Set the physical DPDK port MTU value in the <code class="literal">compute.yaml</code> file. This value is also used by the vhost user interface.
					</li><li class="listitem">
						Set the MTU value within any guest instances on the Compute node to ensure that you have a comparable MTU value from end to end in your configuration.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					VXLAN packets include an extra 50 bytes in the header. Calculate your MTU requirements based on these additional header bytes. For example, an MTU value of 9000 means the VXLAN tunnel MTU value is 8950 to account for these extra bytes.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You do not need any special configuration for the physical NIC because the NIC is controlled by the DPDK PMD, and has the same MTU value set by the <code class="literal">compute.yaml</code> file. You cannot set an MTU value larger than the maximum value supported by the physical NIC.
				</p></div></div><p>
				To set the MTU value for OVS-DPDK interfaces:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the <code class="literal">NeutronGlobalPhysnetMtu</code> parameter in the <code class="literal">network-environment.yaml</code> file.
					</p><pre class="programlisting language-yaml">parameter_defaults:
  # MTU global configuration
  NeutronGlobalPhysnetMtu: 9000</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Ensure that the NeutronDpdkSocketMemory value in the <code class="literal">network-environment.yaml</code> file is large enough to support jumbo frames. For details, see <a class="xref" href="index.html#c_ovsdpdk-memory-params" title="7.4.2. Memory parameters">Section 7.4.2, “Memory parameters”</a> .
						</p></div></div></li><li class="listitem"><p class="simpara">
						Set the MTU value on the bridge to the Compute node in the <code class="literal">controller.yaml</code> file.
					</p><pre class="literallayout">  -
    type: ovs_bridge
    name: br-link0
    use_dhcp: false
    members:
      -
        type: interface
        name: nic3
        <span class="strong strong"><strong>mtu: 9000</strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the MTU values for an OVS-DPDK bond in the <code class="literal">compute.yaml</code> file:
					</p><pre class="literallayout">- type: ovs_user_bridge
  name: br-link0
  use_dhcp: false
  members:
    - type: ovs_dpdk_bond
      name: dpdkbond0
      <span class="strong strong"><strong>mtu: 9000</strong></span>
      rx_queue: 2
      members:
        - type: ovs_dpdk_port
          name: dpdk0
          <span class="strong strong"><strong>mtu: 9000</strong></span>
          members:
            - type: interface
              name: nic4
        - type: ovs_dpdk_port
          name: dpdk1
          <span class="strong strong"><strong>mtu: 9000</strong></span>
          members:
            - type: interface
              name: nic5</pre></li></ol></div></section><section class="section" id="proc-ovsdpdk-firewall"><div class="titlepage"><div><div><h2 class="title">8.4. Configuring a firewall for security groups</h2></div></div></div><p>
				Dataplane interfaces require high performance in a stateful firewall. To protect these interfaces, consider deploying a telco-grade firewall as a virtual network function (VNF).
			</p><p>
				To configure control plane interfaces, set the <code class="literal">NeutronOVSFirewallDriver</code> parameter to <code class="literal">openvswitch</code>. To use the flow-based OVS firewall driver, modify the <code class="literal">network-environment.yaml</code> file under <code class="literal">parameter_defaults</code>.
			</p><p>
				Example:
			</p><pre class="screen">parameter_defaults:
  NeutronOVSFirewallDriver: openvswitch</pre><p>
				Use the <code class="literal">openstack port set</code> command to disable the OVS firewall driver for dataplane interfaces.
			</p><p>
				Example:
			</p><pre class="screen">openstack port set --no-security-group  --disable-port-security ${PORT}</pre></section><section class="section" id="proc_ovsdpdk-multiqueu"><div class="titlepage"><div><div><h2 class="title">8.5. Setting multiqueue for OVS-DPDK interfaces</h2></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Multiqueue is experimental and unsupported.
				</p></div></div><p>
				To set the same number of queues for interfaces in OVS-DPDK on the Compute node, modify the <code class="literal">compute.yaml</code> file:
			</p><pre class="literallayout">- type: ovs_user_bridge
  name: br-link0
  use_dhcp: false
  members:
    - type: ovs_dpdk_bond
      name: dpdkbond0
      mtu: 9000
      <span class="strong strong"><strong>rx_queue: 2</strong></span>
      members:
        - type: ovs_dpdk_port
          name: dpdk0
          mtu: 9000
          members:
            - type: interface
              name: nic4
        - type: ovs_dpdk_port
          name: dpdk1
          mtu: 9000
          members:
            - type: interface
              name: nic5</pre></section><section class="section" id="r-ovsdpdk-limitations"><div class="titlepage"><div><div><h2 class="title">8.6. Known limitations</h2></div></div></div><p>
				Observe the following limitations when configuring OVS-DPDK with Red Hat OpenStack Platform for NFV:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use Linux bonds for control plane networks. Ensure that both the PCI devices used in the bond are on the same NUMA node for optimum performance. Neutron Linux bridge configuration is not supported by Red Hat.
					</li><li class="listitem">
						You require huge pages for every instance running on the hosts with OVS-DPDK. If huge pages are not present in the guest, the interface appears but does not function.
					</li><li class="listitem">
						With OVS-DPDK, there is a performance degradation of services that use tap devices, such as Distributed Virtual Routing (DVR). The resulting performance is not suitable for a production environment.
					</li><li class="listitem">
						When using OVS-DPDK, all bridges on the same Compute node must be of type <code class="literal">ovs_user_bridge</code>. The director may accept the configuration, but Red Hat OpenStack Platform does not support mixing <code class="literal">ovs_bridge</code> and <code class="literal">ovs_user_bridge</code> on the same node.
					</li></ul></div></section><section class="section" id="p-ovs-dpdk-flavor-deploy-instance"><div class="titlepage"><div><div><h2 class="title">8.7. Creating a flavor and deploying an instance for OVS-DPDK</h2></div></div></div><p>
				After you configure OVS-DPDK for your Red Hat OpenStack Platform deployment with NFV, you can create a flavor, and deploy an instance using the following steps:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create an aggregate group, and add relevant hosts for OVS-DPDK. Define metadata, for example <code class="literal">dpdk=true</code>, that matches defined flavor metadata.
					</p><pre class="screen"> # openstack aggregate create dpdk_group
 # openstack aggregate add host dpdk_group [compute-host]
 # openstack aggregate set --property dpdk=true dpdk_group</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Pinned CPU instances can be located on the same Compute node as unpinned instances. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/instances_and_images_guide/index#ch-cpu_pinning">Configuring CPU pinning on the Compute node</a> in the Instances and Images Guide.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Create a flavor.
					</p><pre class="screen"># openstack flavor create &lt;flavor&gt; --ram &lt;MB&gt; --disk &lt;GB&gt; --vcpus &lt;#&gt;</pre></li><li class="listitem"><p class="simpara">
						Set flavor properties. Note that the defined metadata, <code class="literal">dpdk=true</code>, matches the defined metadata in the DPDK aggregate.
					</p><pre class="screen"># openstack flavor set &lt;flavor&gt; --property dpdk=true --property hw:cpu_policy=dedicated --property hw:mem_page_size=1GB --property hw:emulator_threads_policy=isolate</pre><p class="simpara">
						For details on the emulator threads policy for performance improvements, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/instances_and_images_guide/#section-schedule-emulator-threads">Configure Emulator Threads to run on a Dedicated Physical CPU</a> .
					</p></li><li class="listitem"><p class="simpara">
						Create the network.
					</p><pre class="screen"># openstack network create net1 --provider-physical-network tenant --provider-network-type vlan --provider-segment &lt;VLAN-ID&gt;
# openstack subnet create subnet1 --network net1 --subnet-range 192.0.2.0/24 --dhcp</pre></li><li class="listitem"><p class="simpara">
						Optional: If you use multiqueue with OVS-DPDK, set the <code class="literal">hw_vif_multiqueue_enabled</code> property on the image and the flavor that you want to use to create a instance:
					</p><pre class="screen"># openstack image set --property hw_vif_multiqueue_enabled=true &lt;image&gt;
# openstack flavor set --property hw:vif_multiqueue_enabled=true &lt;flavor&gt;</pre></li><li class="listitem"><p class="simpara">
						Deploy an instance.
					</p><pre class="screen"># openstack server create --flavor &lt;flavor&gt; --image &lt;glance image&gt; --nic net-id=&lt;network ID&gt; &lt;server_name&gt;</pre></li></ol></div></section><section class="section" id="p-ovsdpdk-troubleshoot"><div class="titlepage"><div><div><h2 class="title">8.8. Troubleshooting the configuration</h2></div></div></div><p>
				This section describes the steps to troubleshoot the OVS-DPDK configuration.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Review the bridge configuration, and confirm that the bridge has <code class="literal">datapath_type=netdev</code>.
					</p><pre class="screen"># ovs-vsctl list bridge br0
_uuid               : bdce0825-e263-4d15-b256-f01222df96f3
auto_attach         : []
controller          : []
datapath_id         : "00002608cebd154d"
datapath_type       : netdev
datapath_version    : "&lt;built-in&gt;"
external_ids        : {}
fail_mode           : []
flood_vlans         : []
flow_tables         : {}
ipfix               : []
mcast_snooping_enable: false
mirrors             : []
name                : "br0"
netflow             : []
other_config        : {}
ports               : [52725b91-de7f-41e7-bb49-3b7e50354138]
protocols           : []
rstp_enable         : false
rstp_status         : {}
sflow               : []
status              : {}
stp_enable          : false</pre></li><li class="listitem"><p class="simpara">
						Confirm that the docker container <code class="literal">neutron_ovs_agent</code> is configured to start automatically.
					</p><pre class="screen"># docker inspect neutron_ovs_agent | grep -A1 RestartPolicy
            "RestartPolicy": {
                "Name": "always",</pre></li><li class="listitem"><p class="simpara">
						Optionally, you can view logs for errors, such as if the container fails to start.
					</p><pre class="screen"># less /var/log/containers/neutron/openvswitch-agent.log</pre></li><li class="listitem"><p class="simpara">
						Confirm that the Poll Mode Driver CPU mask of the <code class="literal">ovs-dpdk</code> is pinned to the CPUs. In case of hyper threading, use sibling CPUs.
					</p><p class="simpara">
						For example, to check the sibling of <code class="literal">CPU4</code>, run the following command:
					</p><pre class="screen"># cat /sys/devices/system/cpu/cpu4/topology/thread_siblings_list
4,20</pre><p class="simpara">
						The sibling of <code class="literal">CPU4</code> is <code class="literal">CPU20</code>, therefore proceed with the following command:
					</p><pre class="screen"># ovs-vsctl set Open_vSwitch . other_config:pmd-cpu-mask=0x100010</pre><p class="simpara">
						Display the status:
					</p><pre class="screen"># tuna -t ovs-vswitchd -CP
thread  ctxt_switches pid SCHED_ rtpri affinity voluntary nonvoluntary       cmd
3161	OTHER 	0    	6	765023      	614	ovs-vswitchd
3219   OTHER 	0    	6     	1        	0   	handler24
3220   OTHER 	0    	6     	1        	0   	handler21
3221   OTHER 	0    	6     	1        	0   	handler22
3222   OTHER 	0    	6     	1        	0   	handler23
3223   OTHER 	0    	6     	1        	0   	handler25
3224   OTHER 	0    	6     	1        	0   	handler26
3225   OTHER 	0    	6     	1        	0   	handler27
3226   OTHER 	0    	6     	1        	0   	handler28
3227   OTHER 	0    	6     	2        	0   	handler31
3228   OTHER 	0    	6     	2        	4   	handler30
3229   OTHER 	0    	6     	2        	5   	handler32
3230   OTHER 	0    	6	953538      	431   revalidator29
3231   OTHER 	0    	6   1424258      	976   revalidator33
3232   OTHER 	0    	6   1424693      	836   revalidator34
3233   OTHER 	0    	6	951678      	503   revalidator36
3234   OTHER 	0    	6   1425128      	498   revalidator35
*3235   OTHER 	0    	4	151123       	51       	pmd37*
*3236   OTHER 	0   	20	298967       	48       	pmd38*
3164   OTHER 	0    	6 	47575        	0  dpdk_watchdog3
3165   OTHER 	0    	6	237634        	0   vhost_thread1
3166   OTHER 	0    	6  	3665        	0       	urcu2</pre></li></ol></div></section></section><section class="chapter" id="parent_assembly_Tuning"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Tuning a Red Hat OpenStack Platform environment</h1></div></div></div><section class="section" id="parent_assembly_ET"><div class="titlepage"><div><div><h2 class="title">9.1. Pinning emulator threads</h2></div></div></div><p>
				Emulator threads handle interrupt requests and non-blocking processes for virtual machine hardware emulation. These threads float across the CPUs that the guest uses for processing. If threads used for the poll mode driver (PMD) or real-time processing run on these guest CPUs, you can experience packet loss or missed deadlines.
			</p><p>
				You can separate emulator threads from VM processing tasks by pinning the threads to their own guest CPUs, increasing performance as a result.
			</p><section class="section" id="emulator_threads_ET"><div class="titlepage"><div><div><h3 class="title">9.1.1. Configuring CPUs to host emulator threads</h3></div></div></div><p>
					To improve performance, reserve a subset of host CPUs identified in the <code class="literal">OvsDpdkCoreList</code> parameter for hosting emulator threads.
				</p><h5 id="procedure">Procedure</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Deploy an overcloud with <code class="literal">NovaComputeCpuSharedSet</code> defined for a given role. The value of <code class="literal">NovaComputeCpuSharedSet</code> applies to the <code class="literal">cpu_shared_set</code> parameter in the <code class="literal">nova.conf</code> file for hosts within that role.
						</p><pre class="screen">parameter_defaults:
    ComputeOvsDpdkParameters:
        OvsDpdkCoreList: “0-1,16-17”
        NovaComputeCpuSharedSet: “0-1,16-17”
        NovaComputeCpuDedicatedSet: “2-15,18-31”</pre></li><li class="listitem"><p class="simpara">
							Create a flavor to build instances with emulator threads separated into a shared pool.
						</p><pre class="screen">openstack flavor create --ram &lt;size_mb&gt; --disk &lt;size_gb&gt; --vcpus &lt;vcpus&gt; &lt;flavor&gt;</pre></li><li class="listitem"><p class="simpara">
							Add the <code class="literal">hw:emulator_threads_policy</code> extra specification, and set the value to <code class="literal">share</code>. Instances created with this flavor will use the instance CPUs defined in the <code class="literal">cpu_share_set</code> parameter in the nova.conf file.
						</p><pre class="screen">openstack flavor set &lt;flavor&gt; --property hw:emulator_threads_policy=share</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You must set the <code class="literal">cpu_share_set</code> parameter in the <code class="literal">nova.conf</code> file to enable the share policy for this extra specification. You should use heat for this preferably, as editing <code class="literal">nova.conf</code> manually might not persist across redeployments.
					</p></div></div></section><section class="section" id="confirm_emulator_threads_ET"><div class="titlepage"><div><div><h3 class="title">9.1.2. Verify the emulator thread pinning</h3></div></div></div><h5 id="procedure_2">Procedure</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Identify the host and name for a given instance.
						</p><pre class="screen">openstack server show &lt;instance_id&gt;</pre></li><li class="listitem"><p class="simpara">
							Use SSH to log on to the identified host as heat-admin.
						</p><pre class="screen">ssh heat-admin@compute-1
[compute-1]$ sudo virsh dumpxml instance-00001 | grep `'emulatorpin cpuset'`</pre></li></ol></div></section></section><section class="section" id="enabling_rt_kvm_for_nfv_workloads"><div class="titlepage"><div><div><h2 class="title">9.2. Enabling RT-KVM for NFV Workloads</h2></div></div></div><p>
				To facilitate installing and configuring Red Hat Enterprise Linux 8.0 Real Time KVM (RT-KVM), Red Hat OpenStack Platform provides the following features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A real-time Compute node role that provisions Red Hat Enterprise Linux for real-time.
					</li><li class="listitem">
						The additional RT-KVM kernel module.
					</li><li class="listitem">
						Automatic configuration of the Compute node.
					</li></ul></div><section class="section" id="planning_for_your_rt_kvm_compute_nodes"><div class="titlepage"><div><div><h3 class="title">9.2.1. Planning for your RT-KVM Compute nodes</h3></div></div></div><p>
					You must use Red Hat certified servers for your RT-KVM Compute nodes. For more information, see: <a class="link" href="https://access.redhat.com/ecosystem/search/#/ecosystem/Red%20Hat%20Enterprise%20Linux?sort=sortTitle%20asc&amp;certifications=Red%20Hat%20Enterprise%20Linux%20for%20Real%20Time%207&amp;category=Server">Red Hat Enterprise Linux for Real Time 7 certified servers</a>.
				</p><p>
					For details on how to enable the <code class="literal">rhel-8-server-nfv-rpms</code> repository for RT-KVM, and ensuring your system is up to date, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/director_installation_and_usage/preparing-for-director-installation#registering-the-undercloud-and-attaching-subscriptions">Registering and updating your undercloud</a>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You need a separate subscription to a <code class="literal">Red Hat OpenStack Platform for Real Time</code> SKU before you can access this repository.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Building the real-time image</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the libguestfs-tools package on the undercloud to get the virt-customize tool:
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ sudo dnf install libguestfs-tools</pre></li><li class="listitem"><p class="simpara">
							Extract the images:
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ tar -xf /usr/share/rhosp-director-images/overcloud-full.tar
(undercloud) [stack@undercloud-0 ~]$ tar -xf /usr/share/rhosp-director-images/ironic-python-agent.tar</pre></li><li class="listitem"><p class="simpara">
							Copy the default image:
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ cp overcloud-full.qcow2 overcloud-realtime-compute.qcow2</pre></li><li class="listitem"><p class="simpara">
							Register your image to enable Red Hat repositories relevant to your customizations. Replace <code class="literal">[username]</code> and <code class="literal">[password]</code> with valid credentials in the following example.
						</p><pre class="screen">virt-customize -a overcloud-realtime-compute.qcow2 --run-command \
'subscription-manager register --username=[username] --password=[password]' \
subscription-manager release --set 8.1</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								For security, you can remove credentials from the history file if they are used on the command prompt. You can delete individual lines in history using the <code class="literal">history -d</code> command followed by the line number.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Find a list of pool IDs from your account’s subscriptions, and attach the appropriate pool ID to your image.
						</p><pre class="screen">sudo subscription-manager list --all --available | less
...
virt-customize -a overcloud-realtime-compute.qcow2 --run-command \
'subscription-manager attach --pool [pool-ID]'</pre></li><li class="listitem"><p class="simpara">
							Add the repositories necessary for Red Hat OpenStack Platform with NFV.
						</p><pre class="screen">virt-customize -a overcloud-realtime-compute.qcow2 --run-command \
'sudo subscription-manager repos --enable=rhel-8-for-x86_64-baseos-eus-rpms \
--enable=rhel-8-for-x86_64-appstream-eus-rpms \
--enable=rhel-8-for-x86_64-highavailability-eus-rpms \
--enable=ansible-2.9-for-rhel-8-x86_64-rpms \
--enable=openstack-16.1-for-rhel-8-x86_64-rpms \
--enable=rhel-8-for-x86_64-nfv-rpms \
--enable=advanced-virt-for-rhel-8-x86_64-rpms \
--enable=fast-datapath-for-rhel-8-x86_64-rpms'</pre></li><li class="listitem"><p class="simpara">
							Create a script to configure real-time capabilities on the image.
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ cat &lt;&lt;'EOF' &gt; rt.sh
  #!/bin/bash

  set -eux

  dnf -v -y --setopt=protected_packages= erase kernel.$(uname -m)
  dnf -v -y install kernel-rt kernel-rt-kvm tuned-profiles-nfv-host
  EOF</pre></li><li class="listitem"><p class="simpara">
							Run the script to configure the real-time image:
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ virt-customize -a overcloud-realtime-compute.qcow2 -v --run rt.sh 2&gt;&amp;1 | tee virt-customize.log</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If you see the following line in the <code class="literal">rt.sh</code> script output, <code class="literal">"grubby fatal error: unable to find a suitable template"</code>, you can ignore this error.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Examine the <code class="literal">virt-customize.log</code> file that resulted from the previous command, to check that the packages installed correctly using the <code class="literal">rt.sh</code> script .
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ cat virt-customize.log | grep Verifying

  Verifying  : kernel-3.10.0-957.el7.x86_64                                 1/1
  Verifying  : 10:qemu-kvm-tools-rhev-2.12.0-18.el7_6.1.x86_64              1/8
  Verifying  : tuned-profiles-realtime-2.10.0-6.el7_6.3.noarch              2/8
  Verifying  : linux-firmware-20180911-69.git85c5d90.el7.noarch             3/8
  Verifying  : tuned-profiles-nfv-host-2.10.0-6.el7_6.3.noarch              4/8
  Verifying  : kernel-rt-kvm-3.10.0-957.10.1.rt56.921.el7.x86_64            5/8
  Verifying  : tuna-0.13-6.el7.noarch                                       6/8
  Verifying  : kernel-rt-3.10.0-957.10.1.rt56.921.el7.x86_64                7/8
  Verifying  : rt-setup-2.0-6.el7.x86_64                                    8/8</pre></li><li class="listitem"><p class="simpara">
							Relabel SELinux:
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ virt-customize -a overcloud-realtime-compute.qcow2 --selinux-relabel</pre></li><li class="listitem"><p class="simpara">
							Extract vmlinuz and initrd:
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ mkdir image
(undercloud) [stack@undercloud-0 ~]$ guestmount -a overcloud-realtime-compute.qcow2 -i --ro image
(undercloud) [stack@undercloud-0 ~]$ cp image/boot/vmlinuz-3.10.0-862.rt56.804.el7.x86_64 ./overcloud-realtime-compute.vmlinuz
(undercloud) [stack@undercloud-0 ~]$ cp image/boot/initramfs-3.10.0-862.rt56.804.el7.x86_64.img ./overcloud-realtime-compute.initrd
(undercloud) [stack@undercloud-0 ~]$ guestunmount image</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The software version in the <code class="literal">vmlinuz</code> and <code class="literal">initramfs</code> filenames vary with the kernel version.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Upload the image:
						</p><pre class="screen">(undercloud) [stack@undercloud-0 ~]$ openstack overcloud image upload --update-existing --os-image-name overcloud-realtime-compute.qcow2</pre></li></ol></div><p>
					You now have a real-time image you can use with the <code class="literal">ComputeOvsDpdkRT</code> composable role on your selected Compute nodes.
				</p><div class="formalpara"><p class="title"><strong>Modifying BIOS settings on RT-KVM Compute nodes</strong></p><p>
						To reduce latency on your RT-KVM Compute nodes, disable all options for the following parameters in your Compute node BIOS settings:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Power Management
						</li><li class="listitem">
							Hyper-Threading
						</li><li class="listitem">
							CPU sleep states
						</li><li class="listitem">
							Logical processors
						</li></ul></div><p>
					See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_for_real_time/8/html/tuning_guide/chap-general_system_tuning#Setting_BIOS_parameters">Setting BIOS parameters</a> for descriptions of these settings and the impact of disabling them. See your hardware manufacturer documentation for complete details on how to change BIOS settings.
				</p></section><section class="section" id="configuring_ovs_dpdk_with_rt_kvm"><div class="titlepage"><div><div><h3 class="title">9.2.2. Configuring OVS-DPDK with RT-KVM</h3></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You must determine the best values for the OVS-DPDK parameters that you set in the <code class="literal">network-environment.yaml</code> file to optimize your OpenStack network for OVS-DPDK. For more details, see <a class="xref" href="index.html#proc_derive-dpdk" title="8.1. Deriving DPDK parameters with workflows">Section 8.1, “Deriving DPDK parameters with workflows”</a>.
					</p></div></div><section class="section" id="p-ovsdpdk-rtkvm-role-data"><div class="titlepage"><div><div><h4 class="title">9.2.2.1. Generating the ComputeOvsDpdk composable role</h4></div></div></div><p>
						Use the <code class="literal">ComputeOvsDpdkRT</code> role to specify Compute nodes for the real-time compute image.
					</p><p>
						Generate <code class="literal">roles_data.yaml</code> for the <code class="literal">ComputeOvsDpdkRT</code> role.
					</p><pre class="screen"># (undercloud) [stack@undercloud-0 ~]$ openstack overcloud roles generate -o roles_data.yaml Controller ComputeOvsDpdkRT</pre></section><section class="section" id="p-ovsdpdk-rtkvm-networkenv"><div class="titlepage"><div><div><h4 class="title">9.2.2.2. Configuring the OVS-DPDK parameters</h4></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Determine the best values for the OVS-DPDK parameters in the <code class="literal">network-environment.yaml</code> file to optimize your deployment. For more information, see <a class="xref" href="index.html#proc_derive-dpdk" title="8.1. Deriving DPDK parameters with workflows">Section 8.1, “Deriving DPDK parameters with workflows”</a>.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Add the NIC configuration for the OVS-DPDK role you use under <code class="literal">resource_registry</code>:
							</p><pre class="programlisting language-yaml">resource_registry:
  # Specify the relative/absolute path to the config files you want to use for override the default.
  OS::TripleO::ComputeOvsDpdkRT::Net::SoftwareConfig: nic-configs/compute-ovs-dpdk.yaml
  OS::TripleO::Controller::Net::SoftwareConfig: nic-configs/controller.yaml</pre></li><li class="listitem"><p class="simpara">
								Under <code class="literal">parameter_defaults</code>, set the OVS-DPDK, and RT-KVM parameters:
							</p><pre class="programlisting language-yaml">  # DPDK compute node.
  ComputeOvsDpdkRTParameters:
    KernelArgs: "default_hugepagesz=1GB hugepagesz=1G hugepages=32 iommu=pt intel_iommu=on isolcpus=1-7,17-23,9-15,25-31"
    TunedProfileName: "realtime-virtual-host"
    IsolCpusList: "1,2,3,4,5,6,7,9,10,17,18,19,20,21,22,23,11,12,13,14,15,25,26,27,28,29,30,31"
    NovaComputeCpuDedicatedSet: ['2,3,4,5,6,7,18,19,20,21,22,23,10,11,12,13,14,15,26,27,28,29,30,31']
    NovaReservedHostMemory: 4096
    OvsDpdkSocketMemory: "1024,1024"
    OvsDpdkMemoryChannels: "4"
    OvsDpdkCoreList: "0,16,8,24"
    OvsPmdCoreList: "1,17,9,25"
    VhostuserSocketGroup: "hugetlbfs"
  ComputeOvsDpdkRTImage: "overcloud-realtime-compute"</pre></li></ol></div></section><section class="section" id="p-ovsdpdk-rtkvm-deploy"><div class="titlepage"><div><div><h4 class="title">9.2.2.3. Deploying the overcloud</h4></div></div></div><p>
						Deploy the overcloud for ML2-OVS:
					</p><pre class="programlisting language-yaml">(undercloud) [stack@undercloud-0 ~]$ openstack overcloud deploy \
--templates \
-r /home/stack/ospd-16-vlan-dpdk-ctlplane-bonding-rt/roles_data.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/network-isolation.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-ovs.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-ovs-dpdk.yaml \
-e /home/stack/ospd-16-vxlan-dpdk-data-bonding-rt-hybrid/containers-prepare-parameter.yaml \
-e /home/stack/ospd-16-vxlan-dpdk-data-bonding-rt-hybrid/network-environment.yaml</pre></section></section><section class="section" id="launching_an_rt_kvm_instance"><div class="titlepage"><div><div><h3 class="title">9.2.3. Launching an RT-KVM instance</h3></div></div></div><p>
					Perform the following steps to launch an RT-KVM instance on a real-time enabled Compute node:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create an RT-KVM flavor on the overcloud:
						</p><pre class="screen"># openstack flavor create  r1.small 99 4096 20 4
# openstack flavor set --property hw:cpu_policy=dedicated 99
# openstack flavor set --property hw:cpu_realtime=yes 99
# openstack flavor set --property hw:mem_page_size=1GB 99
# openstack flavor set --property hw:cpu_realtime_mask="^0-1" 99
# openstack flavor set --property hw:cpu_emulator_threads=isolate 99</pre></li><li class="listitem"><p class="simpara">
							Launch an RT-KVM instance:
						</p><pre class="screen"># openstack server create  --image &lt;rhel&gt; --flavor r1.small --nic net-id=&lt;dpdk-net&gt; test-rt</pre></li><li class="listitem"><p class="simpara">
							To verify that the instance uses the assigned emulator threads, run the following command:
						</p><pre class="screen"># virsh dumpxml &lt;instance-id&gt; | grep vcpu -A1
&lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;
&lt;cputune&gt;
  &lt;vcpupin vcpu='0' cpuset='1'/&gt;
  &lt;vcpupin vcpu='1' cpuset='3'/&gt;
  &lt;vcpupin vcpu='2' cpuset='5'/&gt;
  &lt;vcpupin vcpu='3' cpuset='7'/&gt;
  &lt;emulatorpin cpuset='0-1'/&gt;
  &lt;vcpusched vcpus='2-3' scheduler='fifo'
  priority='1'/&gt;
&lt;/cputune&gt;</pre></li></ol></div></section></section><section class="section" id="trusted_virtual_function_ET"><div class="titlepage"><div><div><h2 class="title">9.3. Trusted Virtual Functions</h2></div></div></div><p>
				You can configure trust between physical functions (PFs) and virtual functions (VFs), so that VFs can perform privileged actions, such as enabling promiscuous mode, or modifying a hardware address.
			</p><section class="section" id="trusted_virtual_function_trusted_virtual_function"><div class="titlepage"><div><div><h3 class="title">9.3.1. Configuring trust between virtual and physical functions</h3></div></div></div><h5 id="prerequisites_3">Prerequisites</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							An operational installation of Red Hat OpenStack Platform including director
						</li></ul></div><h5 id="procedure_3">Procedure</h5><p>
					Complete the following steps to configure and deploy the overcloud with trust between physical and virtual functions:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Add the <code class="literal">NeutronPhysicalDevMappings</code> parameter in the <code class="literal">parameter_defaults</code> section to link between the logical network name and the physical interface.
						</p><pre class="screen">parameter_defaults:
  NeutronPhysicalDevMappings:
    - sriov2:p5p2</pre></li><li class="listitem"><p class="simpara">
							Add the new property, <code class="literal">trusted</code>, to the SR-IOV parameters.
						</p><pre class="screen">parameter_defaults:
  NeutronPhysicalDevMappings:
    - sriov2:p5p2
  NovaPCIPassthrough:
    - devname: "p5p2"
      physical_network: "sriov2"
      trusted: "true"</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You must include double quotation marks around the value "true".
							</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Complete the following step in trusted environments, as it allows trusted port binding by non-administrative accounts.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Modify permissions to allow users to create and update port bindings.
						</p><pre class="screen">parameter_defaults:
  NeutronApiPolicies: {
    operator_create_binding_profile: { key: 'create_port:binding:profile', value: 'rule:admin_or_network_owner'},
    operator_get_binding_profile: { key: 'get_port:binding:profile', value: 'rule:admin_or_network_owner'},
    operator_update_binding_profile: { key: 'update_port:binding:profile', value: 'rule:admin_or_network_owner'}
  }</pre></li></ol></div></section><section class="section" id="building_trusted_vf_network_trusted_virtual_function"><div class="titlepage"><div><div><h3 class="title">9.3.2. Utilizing trusted VF networks</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a network of type <code class="literal">vlan</code>.
						</p><pre class="screen">openstack network create trusted_vf_network  --provider-network-type vlan \
 --provider-segment 111 --provider-physical-network sriov2 \
 --external --disable-port-security</pre></li><li class="listitem"><p class="simpara">
							Create a subnet.
						</p><pre class="screen">openstack subnet create --network trusted_vf_network \
  --ip-version 4 --subnet-range 192.168.111.0/24 --no-dhcp \
 subnet-trusted_vf_network</pre></li><li class="listitem"><p class="simpara">
							Create a port. Set the <code class="literal">vnic-type</code> option to <code class="literal">direct</code>, and the <code class="literal">binding-profile</code> option to <code class="literal">true</code>.
						</p><pre class="screen">openstack port create --network sriov111 \
--vnic-type direct --binding-profile trusted=true \
sriov111_port_trusted</pre></li><li class="listitem"><p class="simpara">
							Create an instance, and bind it to the previously-created trusted port.
						</p><pre class="screen">openstack server create --image rhel --flavor dpdk  --network internal --port trusted_vf_network_port_trusted --config-drive True --wait rhel-dpdk-sriov_trusted</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verify the trusted VF configuration on the hypervisor</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							On the compute node that you created the instance, run the following command:
						</li></ol></div><pre class="screen"># ip link
7: p5p2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9000 qdisc mq state UP mode DEFAULT group default qlen 1000
    link/ether b4:96:91:1c:40:fa brd ff:ff:ff:ff:ff:ff
    vf 6 MAC fa:16:3e:b8:91:c2, vlan 111, spoof checking off, link-state auto, trust on, query_rss off
    vf 7 MAC fa:16:3e:84:cf:c8, vlan 111, spoof checking off, link-state auto, trust off, query_rss off</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Verify that the trust status of the VF is <code class="literal">trust on</code>. The example output contains details of an environment that contains two ports. Note that <code class="literal">vf 6</code> contains the text <code class="literal">trust on</code>.
						</li></ol></div></section></section><section class="section" id="configuring-rx-tx-queue-size_ET"><div class="titlepage"><div><div><h2 class="title">9.4. Configuring RX/TX queue size</h2></div></div></div><p>
				You can experience packet loss at high packet rates above 3.5 million packets per second (mpps) for many reasons, such as:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						a network interrupt
					</li><li class="listitem">
						a SMI
					</li><li class="listitem">
						packet processing latency in the Virtual Network Function
					</li></ul></div><p>
				To prevent packet loss, increase the queue size from the default of 512 to a maximum of 1024.
			</p><h4 id="prerequisites_4">Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						To configure RX, ensure that you have libvirt v2.3 and QEMU v2.7.
					</li><li class="listitem">
						To configure TX, ensure that you have libvirt v3.7 and QEMU v2.10.
					</li></ul></div><h4 id="procedure_4">Procedure</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To increase the RX and TX queue size, include the following lines to the <code class="literal">parameter_defaults:</code> section of a relevant director role. Here is an example with ComputeOvsDpdk role:
					</p><pre class="screen">parameter_defaults:
  ComputeOvsDpdkParameters:
    -NovaLibvirtRxQueueSize: 1024
    -NovaLibvirtTxQueueSize: 1024</pre></li></ul></div><h4 id="testing">Testing</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You can observe the values for RX queue size and TX queue size in the nova.conf file:
					</p><pre class="screen">[libvirt]
rx_queue_size=1024
tx_queue_size=1024</pre></li><li class="listitem"><p class="simpara">
						You can check the values for RX queue size and TX queue size in the VM instance XML file generated by libvirt on the compute host.
					</p><pre class="screen">&lt;devices&gt;
   &lt;interface type='vhostuser'&gt;
     &lt;mac address='56:48:4f:4d:5e:6f'/&gt;
     &lt;source type='unix' path='/tmp/vhost-user1' mode='server'/&gt;
     &lt;model type='virtio'/&gt;
     &lt;driver name='vhost' rx_queue_size='1024'   tx_queue_size='1024' /&gt;
     &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x10' function='0x0'/&gt;
   &lt;/interface&gt;
&lt;/devices&gt;</pre><p class="simpara">
						To verify the values for RX queue size and TX queue size, use the following command on a KVM host:
					</p><pre class="screen">$ virsh dumpxml &lt;vm name&gt; | grep queue_size</pre></li><li class="listitem">
						You can check for improved performance, such as 3.8 mpps/core at 0 frame loss.
					</li></ul></div></section><section class="section" id="configuring-a-numa-aware-vswitch"><div class="titlepage"><div><div><h2 class="title">9.5. Configuring a NUMA-aware vSwitch</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					This feature is available in this release as a <span class="emphasis"><em>Technology Preview</em></span>, and therefore is not fully supported by Red Hat. It should only be used for testing, and should not be deployed in a production environment. For more information about Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail">Scope of Coverage Details</a>.
				</p></div></div><p>
				Before you implement a NUMA-aware vSwitch, examine the following components of your hardware configuration:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The number of physical networks.
					</li><li class="listitem">
						The placement of PCI cards.
					</li><li class="listitem">
						The physical architecture of the servers.
					</li></ul></div><p>
				Memory-mapped I/O (MMIO) devices, such as PCIe NICs, are associated with specific NUMA nodes. When a VM and the NIC are on different NUMA nodes, there is a significant decrease in performance. To increase performance, align PCIe NIC placement and instance processing on the same NUMA node.
			</p><p>
				Use this feature to ensure that instances that share a physical network are located on the same NUMA node. To optimize utilization of datacenter hardware, you must use multiple physnets.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					To configure NUMA-aware networks for optimal server utilization, you must understand the mapping of the PCIe slot and the NUMA node. For detailed information on your specific hardware, refer to your vendor’s documentation.
				</p></div></div><p>
				To prevent a cross-NUMA configuration, place the VM on the correct NUMA node, by providing the location of the NIC to Nova.
			</p><h4 id="prerequisites_5">Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You have enabled the filter <code class="literal">NUMATopologyFilter</code>
					</li></ul></div><h4 id="procedure_5">Procedure</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Set a new <code class="literal">NeutronPhysnetNUMANodesMapping</code> parameter to map the physical network to the NUMA node that you associate with the physical network.
					</li><li class="listitem"><p class="simpara">
						If you use tunnels, such as VxLAN or GRE, you must also set the <code class="literal">NeutronTunnelNUMANodes</code> parameter.
					</p><pre class="screen">parameter_defaults:
  NeutronPhysnetNUMANodesMapping: {&lt;physnet_name&gt;: [&lt;NUMA_NODE&gt;]}
  NeutronTunnelNUMANodes: &lt;NUMA_NODE&gt;,&lt;NUMA_NODE&gt;</pre></li></ul></div><p>
				Here is an example with two physical networks tunneled to NUMA node 0:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						the tenant physnet is associated with NUMA node 1.
					</li><li class="listitem">
						the management network does not have NUMA affinity, and can use either NUMA node.
					</li><li class="listitem"><p class="simpara">
						all tunneled networks are assigned to NUMA node 0. This is a global setting.
					</p><pre class="screen">parameter_defaults:
  NeutronBridgeMappings:
    - tenant:br-link0
  NeutronPhysnetNUMANodesMapping: {tenant: [1], mgmt: [0,1]}
  NeutronTunnelNUMANodes: 0</pre></li><li class="listitem"><p class="simpara">
						In the below example, assign the physnet of the device named <span class="emphasis"><em>eno2</em></span> to NUMA number 0.
					</p><pre class="screen"># ethtool -i eno2
bus-info: 0000:18:00.1

# cat /sys/devices/pci0000:16/0000:16:02.0/0000:18:00.1/numa_node
0

NeutronBridgeMappings: 'physnet1:br-physnet1'
NeutronPhysnetNUMANodesMapping: {physnet1: [0] }

- type: ovs_user_bridge
                name: br-physnet1
                mtu: 9000
                members:
                  - type: ovs_dpdk_port
                    name: dpdk2
                    members:
                      - type: interface
                        name: eno2</pre></li></ul></div><h4 id="testing_2">Testing</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Observe the configuration in the file /var/lib/config-data/puppet-generated/nova_libvirt/etc/nova/nova.conf
					</p><pre class="screen">[neutron_physnet_tenant]
numa_nodes=1
[neutron_tunnel]
numa_nodes=1</pre></li><li class="listitem"><p class="simpara">
						Confirm the new configuration with the <code class="literal">lscpu</code> command:
					</p><pre class="screen">$ lscpu</pre></li><li class="listitem">
						Launch a VM, with the NIC attached to the appropriate network
					</li></ul></div><h4 id="known_limitations">Known Limitations</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You cannot start a VM that has two NICs connected to physnets on different NUMA nodes, if you did not specify a two-node guest NUMA topology.
					</li><li class="listitem">
						You cannot start a VM that has one NIC connected to a physnet and another NIC connected to a tunneled network on different NUMA nodes, if you did not specify a two-node guest NUMA topology.
					</li><li class="listitem">
						You cannot start a VM that has one vhost port and one VF on different NUMA nodes, if you did not specify a two-node guest NUMA topology.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						NUMA-aware vSwitch parameters are specific to overcloud roles. For example, Compute node 1 and Compute node 2 can have different NUMA topologies.
					</li><li class="listitem">
						If the interfaces of a VM have NUMA affinity, ensure that the affinity is for a single NUMA node only. You can locate any interface without NUMA affinity on any NUMA node.
					</li><li class="listitem">
						Configure NUMA affinity for data plane networks, not management networks.
					</li><li class="listitem">
						NUMA affinity for tunneled networks is a global setting that applies to all VMs.
					</li></ul></div></section><section class="section" id="configuring_quality_of_service_qos_in_an_nfvi_environment"><div class="titlepage"><div><div><h2 class="title">9.6. Configuring Quality of Service (QoS) in an NFVi environment</h2></div></div></div><p>
				For details on Configuring QoS, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_guide/sec-qos">Configure Quality-of-Service (QoS)</a>. Support is limited to QoS rule type <code class="literal">bandwidth-limit</code> on SR-IOV and OVS-DPDK egress interfaces.
			</p></section><section class="section" id="hci-dpdk_ET"><div class="titlepage"><div><div><h2 class="title">9.7. Deploying an overcloud with HCI and DPDK</h2></div></div></div><p>
				You can deploy your NFV infrastructure with hyper-converged nodes, by co-locating and configuring Compute and Ceph Storage services for optimized resource usage.
			</p><p>
				For more information about hyper-converged infrastructure (HCI), see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/hyperconverged_infrastructure_guide/index">Hyper Converged Infrastructure Guide</a>
			</p><h5 id="deploying-the-overcloud_hci-dpdk">Prerequisites</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat OpenStack Platform 16.1.
					</li><li class="listitem">
						Ceph 12.2.12-79 (luminous) or newer.
					</li><li class="listitem">
						Ceph-ansible 3.2.38 or newer.
					</li></ul></div><h5 id="procedure_6">Procedure</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install <code class="literal">ceph-ansible</code> on the undercloud.
					</p><pre class="literallayout">$ sudo yum install ceph-ansible -y</pre></li><li class="listitem"><p class="simpara">
						Generate the <code class="literal">roles_data.yaml</code> file for the ComputeHCI role.
					</p><pre class="literallayout">$ openstack overcloud roles generate -o ~/&lt;templates&gt;/roles_data.yaml Controller \
 ComputeHCIOvsDpdk</pre></li><li class="listitem">
						Create and configure a new flavor with the <code class="literal">openstack flavor create</code> and <code class="literal">openstack flavor set</code> commands. For more information about creating a flavor, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/index#sect-Creating_a_New_Role">Creating a new role</a> in the <span class="emphasis"><em>Advanced Overcloud Customization Guide</em></span>.
					</li><li class="listitem"><p class="simpara">
						Deploy the overcloud with the custom <code class="literal">roles_data.yaml</code> file that you generated.
					</p><pre class="literallayout"># time openstack overcloud deploy --templates \
 --timeout 360 \
 -r ~/&lt;templates&gt;/roles_data.yaml \
 -e /usr/share/openstack-tripleo-heat-templates/environments/ceph-ansible/ceph-ansible.yaml \
 -e /usr/share/openstack-tripleo-heat-templates/environments/network-isolation.yaml \
 -e /usr/share/openstack-tripleo-heat-templates/environments/services-docker/neutron-ovs-dpdk.yaml \
 -e /usr/share/openstack-tripleo-heat-templates/environments/host-config-and-reboot.yaml \
 -e ~/&lt;templates&gt;/&lt;custom environment file&gt;</pre></li></ol></div><section class="section" id="example-configuration_hci-dpdk"><div class="titlepage"><div><div><h3 class="title">9.7.1. Example NUMA node configuration</h3></div></div></div><p>
					For increased performance, place the tenant network and Ceph object service daemon (OSD)s in one NUMA node, such as NUMA-0, and the VNF and any non-NFV VMs in another NUMA node, such as NUMA-1.
				</p><h5 id="cpu_allocation">CPU allocation:</h5><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140654528818736" scope="col">NUMA-0</th><th align="left" valign="top" id="idm140654528817648" scope="col">NUMA-1</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140654528818736"> <p>
									Number of Ceph OSDs * 4 HT
								</p>
								 </td><td align="left" valign="top" headers="idm140654528817648"> <p>
									Guest vCPU for the VNF and non-NFV VMs
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140654528818736"> <p>
									DPDK lcore - 2 HT
								</p>
								 </td><td align="left" valign="top" headers="idm140654528817648"> <p>
									DPDK lcore - 2 HT
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140654528818736"> <p>
									DPDK PMD - 2 HT
								</p>
								 </td><td align="left" valign="top" headers="idm140654528817648"> <p>
									DPDK PMD - 2 HT
								</p>
								 </td></tr></tbody></table></div><h5 id="example_of_cpu_allocation">Example of CPU allocation:</h5><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140654528797568" scope="col"> </th><th align="left" valign="top" id="idm140654528796640" scope="col">NUMA-0</th><th align="left" valign="top" id="idm140654528795552" scope="col">NUMA-1</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140654528797568"> <p>
									Ceph OSD
								</p>
								 </td><td align="left" valign="top" headers="idm140654528796640"> <p>
									32,34,36,38,40,42,76,78,80,82,84,86
								</p>
								 </td><td align="left" valign="top" headers="idm140654528795552"> </td></tr><tr><td align="left" valign="top" headers="idm140654528797568"> <p>
									DPDK-lcore
								</p>
								 </td><td align="left" valign="top" headers="idm140654528796640"> <p>
									0,44
								</p>
								 </td><td align="left" valign="top" headers="idm140654528795552"> <p>
									1,45
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140654528797568"> <p>
									DPDK-pmd
								</p>
								 </td><td align="left" valign="top" headers="idm140654528796640"> <p>
									2,46
								</p>
								 </td><td align="left" valign="top" headers="idm140654528795552"> <p>
									3,47
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140654528797568"> <p>
									nova
								</p>
								 </td><td align="left" valign="top" headers="idm140654528796640"> </td><td align="left" valign="top" headers="idm140654528795552"> <p>
									5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="example-ceph-file_hci-dpdk"><div class="titlepage"><div><div><h3 class="title">9.7.2. Example ceph configuration file</h3></div></div></div><pre class="programlisting language-yaml">parameter_defaults:
  CephPoolDefaultSize: 3
  CephPoolDefaultPgNum: 64
  CephPools:
    - {"name": backups, "pg_num": 128, "pgp_num": 128, "application": "rbd"}
    - {"name": volumes, "pg_num": 256, "pgp_num": 256, "application": "rbd"}
    - {"name": vms, "pg_num": 64, "pgp_num": 64, "application": "rbd"}
    - {"name": images, "pg_num": 32, "pgp_num": 32, "application": "rbd"}
  CephConfigOverrides:
    osd_recovery_op_priority: 3
    osd_recovery_max_active: 3
    osd_max_backfills: 1
  CephAnsibleExtraConfig:
    nb_retry_wait_osd_up: 60
    delay_wait_osd_up: 20
    is_hci: true
    # 3 OSDs * 4 vCPUs per SSD = 12 vCPUs (list below not used for VNF)
    ceph_osd_docker_cpuset_cpus: "32,34,36,38,40,42,76,78,80,82,84,86" # <span id="CO1-1"><!--Empty--></span><span class="callout">1</span>
    # cpu_limit 0 means no limit as we are limiting CPUs with cpuset above
    ceph_osd_docker_cpu_limit: 0                                       # <span id="CO1-2"><!--Empty--></span><span class="callout">2</span>
    # numactl preferred to cross the numa boundary if we have to
    # but try to only use memory from numa node0
    # cpuset-mems would not let it cross numa boundary
    # lots of memory so NUMA boundary crossing unlikely
    ceph_osd_numactl_opts: "-N 0 --preferred=0"                        # <span id="CO1-3"><!--Empty--></span><span class="callout">3</span>
  CephAnsibleDisksConfig:
    osds_per_device: 1
    osd_scenario: lvm
    osd_objectstore: bluestore
    devices:
      - /dev/sda
      - /dev/sdb
      - /dev/sdc</pre><p>
					Assign CPU resources for ceph OSD processes with the following parameters. Adjust the values based on the workload and hardware in this hyperconverged environment.
				</p><div class="calloutlist"><dl class="calloutlist"><dt><a href="index.html#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							ceph_osd_docker_cpuset_cpus: Allocate 4 CPU threads for each OSD for SSD disks, or 1 CPU for each OSD for HDD disks. Include the list of cores and sibling threads from the NUMA node associated with ceph, and the CPUs not found in the three lists: <code class="literal">NovaVcpuPinSet</code>, <code class="literal">OvsDpdkCoreList</code>, and <code class="literal">OvsPmdCoreList</code>.
						</div></dd><dt><a href="index.html#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							ceph_osd_docker_cpu_limit: Set this value to <code class="literal">0</code>, to pin the ceph OSDs to the CPU list from <code class="literal">ceph_osd_docker_cpuset_cpus</code>.
						</div></dd><dt><a href="index.html#CO1-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							ceph_osd_numactl_opts: Set this value to <code class="literal">preferred</code> for cross-NUMA operations, as a precaution.
						</div></dd></dl></div></section><section class="section" id="example-dpdk-file_hci-dpdk"><div class="titlepage"><div><div><h3 class="title">9.7.3. Example DPDK configuration file</h3></div></div></div><pre class="programlisting language-yaml">parameter_defaults:
  ComputeHCIParameters:
    KernelArgs: "default_hugepagesz=1GB hugepagesz=1G hugepages=240 intel_iommu=on iommu=pt                                           # <span id="CO2-1"><!--Empty--></span><span class="callout">1</span>
      isolcpus=2,46,3,47,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87"
    TunedProfileName: "cpu-partitioning"
    IsolCpusList:                                               # <span id="CO2-2"><!--Empty--></span><span class="callout">2</span>
      ”2,46,3,47,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,49,51,
      53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87"
    VhostuserSocketGroup: hugetlbfs
    OvsDpdkSocketMemory: "4096,4096"                            # <span id="CO2-3"><!--Empty--></span><span class="callout">3</span>
    OvsDpdkMemoryChannels: "4"

    OvsPmdCoreList: "2,46,3,47"                                 # <span id="CO2-4"><!--Empty--></span><span class="callout">4</span>
    OvsDpdkCoreList: "0,44,1,45"                                # <span id="CO2-5"><!--Empty--></span><span class="callout">5</span>
    NumDpdkInterfaceRxQueues: 1</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="index.html#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							KernelArgs: To calculate <code class="literal">hugepages</code>, subtract the value of the <code class="literal">NovaReservedHostMemory</code> parameter from total memory.
						</div></dd><dt><a href="index.html#CO2-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							IsolCpusList: Assign a set of CPU cores that you want to isolate from the host processes with this parameter. Add the value of the <code class="literal">OvsPmdCoreList</code> parameter to the value of the <code class="literal">NovaVcpuPinSet</code> parameter to calculate the value for the <code class="literal">IsolCpusList</code> parameter.
						</div></dd><dt><a href="index.html#CO2-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							OvsDpdkSocketMemory: Specify the amount of memory in MB to pre-allocate from the hugepage pool per NUMA node with the <code class="literal">OvsDpdkSocketMemory</code> parameter. For more information about calculating OVS-DPDK parameters, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/assembly_ovsdpdk_parameters#concept_ovsdpdk-cpu-partitionin">ovsdpdk parameters</a>
						</div></dd><dt><a href="index.html#CO2-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							OvsPmdCoreList: Specify the CPU cores that are used for the DPDK poll mode drivers (PMD) with this parameter. Choose CPU cores that are associated with the local NUMA nodes of the DPDK interfaces. Allocate 2 HT sibling threads for each NUMA node to calculate the value for the <code class="literal">OvsPmdCoreList</code> parameter.
						</div></dd><dt><a href="index.html#CO2-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							OvsDpdkCoreList: Specify CPU cores for non-data path OVS-DPDK processes, such as handler, and revalidator threads, with this parameter. Allocate 2 HT sibling threads for each NUMA node to calculate the value for the <code class="literal">OvsDpdkCoreList</code> parameter.
						</div></dd></dl></div></section><section class="section" id="example-nova-file_hci-dpdk"><div class="titlepage"><div><div><h3 class="title">9.7.4. Example nova configuration file</h3></div></div></div><pre class="programlisting language-yaml">parameter_defaults:
  ComputeHCIExtraConfig:
    nova::cpu_allocation_ratio: 16 # 2
    NovaReservedHugePages:                                         # <span id="CO3-1"><!--Empty--></span><span class="callout">1</span>
        - node:0,size:1GB,count:4
        - node:1,size:1GB,count:4
  NovaReservedHostMemory: 123904                                   # <span id="CO3-2"><!--Empty--></span><span class="callout">2</span>
  # All left over cpus from NUMA-1
  NovaVcpuPinSet:                                                  # <span id="CO3-3"><!--Empty--></span><span class="callout">3</span>
  ['5','7','9','11','13','15','17','19','21','23','25','27','29','31','33','35','37','39','41','43','49','51','|
  53','55','57','59','61','63','65','67','69','71','73','75','77','79','81','83','85','87</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="index.html#CO3-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							NovaReservedHugePages: Pre-allocate memory in MB from the hugepage pool with the <code class="literal">NovaReservedHugePages</code> parameter. It is the same memory total as the value for the <code class="literal">OvsDpdkSocketMemory</code> parameter.
						</div></dd><dt><a href="index.html#CO3-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							NovaReservedHostMemory: Reserve memory in MB for tasks on the host with the <code class="literal">NovaReservedHostMemory</code> parameter. Use the following guidelines to calculate the amount of memory that you must reserve:
						</div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									5 GB for each OSD.
								</li><li class="listitem">
									0.5 GB overhead for each VM.
								</li><li class="listitem">
									4GB for general host processing. Ensure that you allocate sufficient memory to prevent potential performance degradation caused by cross-NUMA OSD operation.
								</li></ul></div></dd><dt><a href="index.html#CO3-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							NovaVcpuPinSet: List the CPUs not found in <code class="literal">OvsPmdCoreList</code>, <code class="literal">OvsDpdkCoreList</code>, or <code class="literal">Ceph_osd_docker_cpuset_cpus</code> with the <code class="literal">NovaVcpuPinSet</code> parameter. The CPUs must be in the same NUMA node as the DPDK NICs.
						</div></dd></dl></div></section><section class="section" id="hci-matrix_hci-dpdk"><div class="titlepage"><div><div><h3 class="title">9.7.5. Recommended configuration for HCI-DPDK deployments</h3></div></div></div><div class="table" id="idm140654531567600"><p class="title"><strong>Table 9.1. Tunable parameters for HCI deployments</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140654531562752" scope="col">Block Device Type</th><th align="left" valign="top" id="idm140654531561664" scope="col">OSDs, Memory, vCPUs per device</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140654531562752"> <p>
									NVMe
								</p>
								 </td><td align="left" valign="top" headers="idm140654531561664"> <p>
									Memory : 5GB per OSD<br/> OSDs per device: 4<br/> vCPUs per device: 3
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140654531562752"> <p>
									SSD
								</p>
								 </td><td align="left" valign="top" headers="idm140654531561664"> <p>
									Memory : 5GB per OSD<br/> OSDs per device: 1<br/> vCPUs per device: 4
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140654531562752"> <p>
									HDD
								</p>
								 </td><td align="left" valign="top" headers="idm140654531561664"> <p>
									Memory : 5GB per OSD<br/> OSDs per device: 1<br/> vCPUs per device: 1
								</p>
								 </td></tr></tbody></table></div></div><p>
					Use the same NUMA node for the following functions:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Disk controller
						</li><li class="listitem">
							Storage networks
						</li><li class="listitem">
							Storage CPU and memory
						</li></ul></div><p>
					Allocate another NUMA node for the following functions of the DPDK provider network:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							NIC
						</li><li class="listitem">
							PMD CPUs
						</li><li class="listitem">
							Socket memory
						</li></ul></div></section></section></section><section class="chapter" id="assembly_config-vxlan-dpdk-sriov-hybrid"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Example: Configuring OVS-DPDK and SR-IOV with VXLAN tunnelling</h1></div></div></div><p>
			This section describes how to deploy Compute nodes with both OVS-DPDK and SR-IOV interfaces. The cluster includes ML2/OVS and VXLAN tunnelling.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				You must determine the best values for the OVS-DPDK parameters that you set in the <code class="literal">network-environment.yaml</code> file to optimize your OpenStack network for OVS-DPDK. For details, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/part-dpdk-configure#proc_derive-dpdk">Deriving DPDK parameters with workflows</a>.
			</p></div></div><section class="section" id="p-vxlan-dpdk-sriov-role-data"><div class="titlepage"><div><div><h2 class="title">10.1. Configuring roles data</h2></div></div></div><p>
				Red Hat OpenStack Platform provides a set of default roles in the <code class="literal">roles_data.yaml</code> file. You can create your own <code class="literal">roles_data.yaml</code> file to support the roles you require.
			</p><p>
				For the purposes of this example, the ComputeOvsDpdkSriov role is created. For information on creating roles in Red Hat OpenStack Platform, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/">Advanced Overcloud Customization</a>. For details on the specific role used for this example, see <a class="link" href="index.html#ap-vxlan-dpdk-sriov-hybrid-roles-data" title="A.1.1. roles_data.yaml">roles_data.yaml</a>.
			</p></section><section class="section" id="p-vxlan-dpdk-sriov-hybrid-networkenv"><div class="titlepage"><div><div><h2 class="title">10.2. Configuring OVS-DPDK parameters</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					You must determine the best values for the OVS-DPDK parameters that you set in the <code class="literal">network-environment.yaml</code> file to optimize your OpenStack network for OVS-DPDK. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_planning_and_configuration_guide/part-dpdk-configure#proc_derive-dpdk">Deriving DPDK parameters with workflows</a>.
				</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the custom resources for OVS-DPDK under <code class="literal">resource_registry</code>:
					</p><pre class="programlisting language-yaml">  resource_registry:
    # Specify the relative/absolute path to the config files you want to use for override the default.
    OS::TripleO::ComputeOvsDpdkSriov::Net::SoftwareConfig: nic-configs/computeovsdpdksriov.yaml
    OS::TripleO::Controller::Net::SoftwareConfig: nic-configs/controller.yaml</pre></li><li class="listitem"><p class="simpara">
						Under <code class="literal">parameter_defaults</code>, set the tunnel type to <code class="literal">vxlan</code>, and the network type to <code class="literal">vxlan,vlan</code>:
					</p><pre class="programlisting language-yaml">NeutronTunnelTypes: 'vxlan'
NeutronNetworkType: 'vxlan,vlan'</pre></li><li class="listitem"><p class="simpara">
						Under <code class="literal">parameters_defaults</code>, set the bridge mapping:
					</p><pre class="programlisting language-yaml"># The OVS logical-&gt;physical bridge mappings to use.
NeutronBridgeMappings:
  - dpdk-mgmt:br-link0</pre></li><li class="listitem"><p class="simpara">
						Under <code class="literal">parameter_defaults</code>, set the role-specific parameters for the <code class="literal">ComputeOvsDpdkSriov</code> role:
					</p><pre class="programlisting language-yaml">  ##########################
  # OVS DPDK configuration #
  ##########################
  ComputeOvsDpdkSriovParameters:
    KernelArgs: "default_hugepagesz=1GB hugepagesz=1G hugepages=32 iommu=pt intel_iommu=on isolcpus=2-19,22-39"
    TunedProfileName: "cpu-partitioning"
    IsolCpusList: "2-19,22-39"
    NovaComputeCpuDedicatedSet: ['4-19,24-39']
    NovaReservedHostMemory: 4096
    OvsDpdkSocketMemory: "3072,1024"
    OvsDpdkMemoryChannels: "4"
    OvsDpdkCoreList: "0,20,1,21"
    OvsPmdCoreList: "2,22,3,23"
    NovaComputeCpuSharedSet: [0,20,1,21]
    NovaLibvirtRxQueueSize: 1024
    NovaLibvirtTxQueueSize: 1024</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To prevent failures during guest creation, assign at least one CPU with sibling thread on each NUMA node. In the example, the values for the <code class="literal">OvsPmdCoreList</code> parameter denote cores 2 and 22 from NUMA 0, and cores 3 and 23 from NUMA 1.
						</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							These huge pages are consumed by the virtual machines, and also by OVS-DPDK using the <code class="literal">OvsDpdkSocketMemory</code> parameter as shown in this procedure. The number of huge pages available for the virtual machines is the <code class="literal">boot</code> parameter minus the <code class="literal">OvsDpdkSocketMemory</code>.
						</p><p>
							You must also add <code class="literal">hw:mem_page_size=1GB</code> to the flavor you associate with the DPDK instance.
						</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							<code class="literal">OvsDPDKCoreList</code> and <code class="literal">OvsDpdkMemoryChannels</code> are the required settings for this procedure. For optimum operation, ensure you deploy DPDK with appropriate parameters and values.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Configure the role-specific parameters for SR-IOV:
					</p><pre class="programlisting language-yaml">  NovaPCIPassthrough:
    - devname: "p7p3"
      trusted: "true"
      physical_network: "sriov-1"
    - devname: "p7p4"
      trusted: "true"
      physical_network: "sriov-2"</pre></li></ol></div></section><section class="section" id="p-vxlan-dpdk-sriov-hybrid-controller"><div class="titlepage"><div><div><h2 class="title">10.3. Configuring the controller node</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the control-plane Linux bond for an isolated network.
					</p><pre class="programlisting language-yaml">  - type: linux_bond
    name: bond_api
    bonding_options: "mode=active-backup"
    use_dhcp: false
    dns_servers:
      get_param: DnsServers
    members:
    - type: interface
      name: nic2
      primary: true</pre></li><li class="listitem"><p class="simpara">
						Assign VLANs to this Linux bond.
					</p><pre class="programlisting language-yaml">  - type: vlan
    vlan_id:
      get_param: InternalApiNetworkVlanID
    device: bond_api
    addresses:
    - ip_netmask:
        get_param: InternalApiIpSubnet

  - type: vlan
    vlan_id:
      get_param: StorageNetworkVlanID
    device: bond_api
    addresses:
    - ip_netmask:
        get_param: StorageIpSubnet

  - type: vlan
    vlan_id:
      get_param: StorageMgmtNetworkVlanID
    device: bond_api
    addresses:
    - ip_netmask:
        get_param: StorageMgmtIpSubnet

  - type: vlan
    vlan_id:
      get_param: ExternalNetworkVlanID
    device: bond_api
    addresses:
    - ip_netmask:
        get_param: ExternalIpSubnet
    routes:
    - default: true
      next_hop:
        get_param: ExternalInterfaceDefaultRoute</pre></li><li class="listitem"><p class="simpara">
						Create the OVS bridge to access <code class="literal">neutron-dhcp-agent</code> and <code class="literal">neutron-metadata-agent</code> services.
					</p><pre class="programlisting language-yaml">  - type: ovs_bridge
    name: br-link0
    use_dhcp: false
    mtu: 9000
    members:
    - type: interface
      name: nic3
      mtu: 9000
    - type: vlan
      vlan_id:
        get_param: TenantNetworkVlanID
      mtu: 9000
      addresses:
      - ip_netmask:
          get_param: TenantIpSubnet</pre></li></ol></div></section><section class="section" id="p-vxlan-dpdk-sriov-hybrid-compute"><div class="titlepage"><div><div><h2 class="title">10.4. Configuring the Compute node for DPDK and SR-IOV</h2></div></div></div><p>
				Create the <code class="literal">computeovsdpdksriov.yaml</code> file from the default <code class="literal">compute.yaml</code> file, and make the following changes:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the control-plane Linux bond for an isolated network.
					</p><pre class="programlisting language-yaml">  - type: linux_bond
    name: bond_api
    bonding_options: "mode=active-backup"
    use_dhcp: false
    dns_servers:
      get_param: DnsServers
    members:
    - type: interface
      name: nic3
      primary: true
    - type: interface
      name: nic4</pre></li><li class="listitem"><p class="simpara">
						Assign VLANs to this Linux bond.
					</p><pre class="programlisting language-yaml">  - type: vlan
    vlan_id:
      get_param: InternalApiNetworkVlanID
    device: bond_api
    addresses:
    - ip_netmask:
        get_param: InternalApiIpSubnet

  - type: vlan
    vlan_id:
      get_param: StorageNetworkVlanID
    device: bond_api
    addresses:
    - ip_netmask:
        get_param: StorageIpSubnet</pre></li><li class="listitem"><p class="simpara">
						Set a bridge with a DPDK port to link to the controller.
					</p><pre class="programlisting language-yaml">  - type: ovs_user_bridge
    name: br-link0
    use_dhcp: false
    ovs_extra:
      - str_replace:
          template: set port br-link0 tag=_VLAN_TAG_
          params:
            _VLAN_TAG_:
               get_param: TenantNetworkVlanID
    addresses:
      - ip_netmask:
          get_param: TenantIpSubnet
    members:
      - type: ovs_dpdk_bond
        name: dpdkbond0
        mtu: 9000
        rx_queue: 2
        members:
          - type: ovs_dpdk_port
            name: dpdk0
            members:
              - type: interface
                name: nic7
          - type: ovs_dpdk_port
            name: dpdk1
            members:
              - type: interface
                name: nic8</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To include multiple DPDK devices, repeat the <code class="literal">type</code> code section for each DPDK device that you want to add.
						</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When using OVS-DPDK, all bridges on the same Compute node must be of type <code class="literal">ovs_user_bridge</code>. Red Hat OpenStack Platform does not support both <code class="literal">ovs_bridge</code> and <code class="literal">ovs_user_bridge</code> located on the same node.
						</p></div></div></li></ol></div></section><section class="section" id="p-vxlan-dpdk-sriov-hybrid-deploy"><div class="titlepage"><div><div><h2 class="title">10.5. Deploying the overcloud</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Run the <a class="link" href="index.html#ap-vxlan-dpdk-sriov-hybrid-overcloud-deploy"><code class="literal">overcloud_deploy.sh</code></a> script:
					</li></ol></div></section></section><section class="chapter" id="assembly-upgrade"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Upgrading Red Hat OpenStack platform with NFV</h1></div></div></div><p>
			There are additional considerations and steps required to upgrade Red Hat OpenStack Platform when you have OVS-DPDK configured. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/12/html-single/upgrading_red_hat_openstack_platform/#preparing_for_nfv_upgrades">Preparing an NFV-Configured Overcloud</a> in the <span class="emphasis"><em>Upgrading Red Hat OpenStack Platform</em></span> Guide.
		</p></section><section class="chapter" id="ch-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 12. NFV Performance</h1></div></div></div><p>
			Red Hat OpenStack Platform director configures the Compute nodes to enforce resource partitioning and fine tuning to achieve line rate performance for the guest virtual network functions (VNFs). The key performance factors in the NFV use case are throughput, latency, and jitter.
		</p><p>
			You can enable high-performance packet switching between physical NICs and virtual machines using data plane development kit (DPDK) accelerated virtual machines. OVS 2.10 embeds support for DPDK 17 and includes support for <code class="literal">vhost-user</code> multiqueue, allowing scalable performance. OVS-DPDK provides line-rate performance for guest VNFs.
		</p><p>
			Single root I/O virtualization (SR-IOV) networking provides enhanced performance, including improved throughput for specific networks and virtual machines.
		</p><p>
			Other important features for performance tuning include huge pages, NUMA alignment, host isolation, and CPU pinning. VNF flavors require huge pages and emulator thread isolation for better performance. Host isolation and CPU pinning improve NFV performance and prevent spurious packet loss.
		</p><p>
			For a high-level introduction to CPUs and NUMA topology, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/network_functions_virtualization_product_guide/ch-nfv_tuning_for_performance">NFV Performance Considerations</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/instances_and_images_guide/#section-schedule-emulator-threads">Configure Emulator Threads to run on a Dedicated Physical CPU</a>.
		</p></section><section class="chapter" id="ref-more-information"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Finding more information</h1></div></div></div><p>
			The following table includes additional Red Hat documentation for reference:
		</p><p>
			The Red Hat OpenStack Platform documentation suite can be found here: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/">Red Hat OpenStack Platform Documentation Suite</a>
		</p><div class="table" id="idm140654531456304"><p class="title"><strong>Table 13.1. List of Available Documentation</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 37%; " class="col_1"><!--Empty--></col><col style="width: 63%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140654531450624" scope="col">Component</th><th align="left" valign="top" id="idm140654531449536" scope="col">Reference</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140654531450624"> <p>
							Red Hat Enterprise Linux
						</p>
						 </td><td align="left" valign="top" headers="idm140654531449536"> <p>
							Red Hat OpenStack Platform is supported on Red Hat Enterprise Linux 8.0. For information on installing Red Hat Enterprise Linux, see the corresponding installation guide at: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/">Red Hat Enterprise Linux Documentation Suite</a>.
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140654531450624"> <p>
							Red Hat OpenStack Platform
						</p>
						 </td><td align="left" valign="top" headers="idm140654531449536"> <p>
							To install OpenStack components and their dependencies, use the Red Hat OpenStack Platform director. The director uses a basic OpenStack installation as the undercloud to install, configure, and manage the OpenStack nodes in the final overcloud. You need one extra host machine for the installation of the undercloud, in addition to the environment necessary for the deployed overcloud. For detailed instructions, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/"> Red Hat OpenStack Platform Director Installation and Usage</a>.
						</p>
						 <p>
							For information on configuring advanced features for a Red Hat OpenStack Platform enterprise environment using the Red Hat OpenStack Platform director such as network isolation, storage configuration, SSL communication, and general configuration method, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/">Advanced Overcloud Customization</a>.
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140654531450624"> <p>
							NFV Documentation
						</p>
						 </td><td align="left" valign="top" headers="idm140654531449536"> <p>
							For a high level overview of the NFV concepts, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/network_functions_virtualization_product_guide/">Network Functions Virtualization Product Guide</a>.
						</p>
						 </td></tr></tbody></table></div></div></section><section class="appendix" id="appe-sample-ovsdpdk-sriov-files"><div class="titlepage"><div><div><h1 class="title">Appendix A. Sample DPDK SRIOV YAML files</h1></div></div></div><p>
			This section provides sample yaml files as a reference to add single root I/O virtualization (SR-IOV) and Data Plane Development Kit (DPDK) interfaces on the same compute node.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				These templates are from a fully-configured environment, and include parameters unrelated to NFV, that might not apply to your deployment.
			</p></div></div><section class="section" id="ref_vxlan-dpdk-sriov-hybrid-yaml"><div class="titlepage"><div><div><h2 class="title">A.1. Sample VXLAN DPDK SRIOV YAML files</h2></div></div></div><section class="section" id="ap-vxlan-dpdk-sriov-hybrid-roles-data"><div class="titlepage"><div><div><h3 class="title">A.1.1. <code class="literal">roles_data.yaml</code></h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Run the <code class="literal">openstack overcloud roles generate</code> command to generate the <code class="literal">roles_data.yaml</code> file. Include role names in the command according to the roles that you want to deploy in your environment, such as <code class="literal">Controller</code>, <code class="literal">ComputeSriov</code>, <code class="literal">ComputeOvsDpdkRT</code>, <code class="literal">ComputeOvsDpdkSriov</code>, or other roles. For example, to generate a <code class="literal">roles_data.yaml</code> file that contains the roles <code class="literal">Controller</code> and <code class="literal">ComputeOvsDpdkSriov</code>, run the following command:
						</li></ol></div><pre class="programlisting language-bash"> $ openstack overcloud roles generate -o roles_data.yaml Controller ComputeOvsDpdkSriov</pre><pre class="programlisting language-yaml">###############################################################################
# File generated by TripleO
###############################################################################
###############################################################################
# Role: Controller                                                            #
###############################################################################
- name: Controller
  description: |
    Controller role that has all the controller services loaded and handles
    Database, Messaging and Network functions.
  CountDefault: 1
  tags:
    - primary
    - controller
  networks:
    - External
    - InternalApi
    - Storage
    - StorageMgmt
    - Tenant
  # For systems with both IPv4 and IPv6, you may specify a gateway network for
  # each, such as ['ControlPlane', 'External']
  default_route_networks: ['External']
  HostnameFormatDefault: '%stackname%-controller-%index%'
  # Deprecated &amp; backward-compatible values (FIXME: Make parameters consistent)
  # Set uses_deprecated_params to True if any deprecated params are used.
  uses_deprecated_params: True
  deprecated_param_extraconfig: 'controllerExtraConfig'
  deprecated_param_flavor: 'OvercloudControlFlavor'
  deprecated_param_image: 'controllerImage'
  deprecated_nic_config_name: 'controller.yaml'
  ServicesDefault:
    - OS::TripleO::Services::Aide
    - OS::TripleO::Services::AodhApi
    - OS::TripleO::Services::AodhEvaluator
    - OS::TripleO::Services::AodhListener
    - OS::TripleO::Services::AodhNotifier
    - OS::TripleO::Services::AuditD
    - OS::TripleO::Services::BarbicanApi
    - OS::TripleO::Services::BarbicanBackendSimpleCrypto
    - OS::TripleO::Services::BarbicanBackendDogtag
    - OS::TripleO::Services::BarbicanBackendKmip
    - OS::TripleO::Services::BarbicanBackendPkcs11Crypto
    - OS::TripleO::Services::CACerts
    - OS::TripleO::Services::CeilometerAgentCentral
    - OS::TripleO::Services::CeilometerAgentNotification
    - OS::TripleO::Services::CephExternal
    - OS::TripleO::Services::CephMds
    - OS::TripleO::Services::CephMgr
    - OS::TripleO::Services::CephMon
    - OS::TripleO::Services::CephRbdMirror
    - OS::TripleO::Services::CephRgw
    - OS::TripleO::Services::CertmongerUser
    - OS::TripleO::Services::CinderApi
    - OS::TripleO::Services::CinderBackendDellPs
    - OS::TripleO::Services::CinderBackendDellSc
    - OS::TripleO::Services::CinderBackendDellEMCUnity
    - OS::TripleO::Services::CinderBackendDellEMCVMAXISCSI
    - OS::TripleO::Services::CinderBackendDellEMCVNX
    - OS::TripleO::Services::CinderBackendDellEMCXTREMIOISCSI
    - OS::TripleO::Services::CinderBackendNetApp
    - OS::TripleO::Services::CinderBackendScaleIO
    - OS::TripleO::Services::CinderBackendVRTSHyperScale
    - OS::TripleO::Services::CinderBackendNVMeOF
    - OS::TripleO::Services::CinderBackup
    - OS::TripleO::Services::CinderHPELeftHandISCSI
    - OS::TripleO::Services::CinderScheduler
    - OS::TripleO::Services::CinderVolume
    - OS::TripleO::Services::Clustercheck
    - OS::TripleO::Services::Collectd
    - OS::TripleO::Services::Congress
    - OS::TripleO::Services::ContainerImagePrepare
    - OS::TripleO::Services::DesignateApi
    - OS::TripleO::Services::DesignateCentral
    - OS::TripleO::Services::DesignateProducer
    - OS::TripleO::Services::DesignateWorker
    - OS::TripleO::Services::DesignateMDNS
    - OS::TripleO::Services::DesignateSink
    - OS::TripleO::Services::Docker
    - OS::TripleO::Services::Ec2Api
    - OS::TripleO::Services::Etcd
    - OS::TripleO::Services::ExternalSwiftProxy
    - OS::TripleO::Services::Fluentd
    - OS::TripleO::Services::GlanceApi
    - OS::TripleO::Services::GlanceRegistry
    - OS::TripleO::Services::GnocchiApi
    - OS::TripleO::Services::GnocchiMetricd
    - OS::TripleO::Services::GnocchiStatsd
    - OS::TripleO::Services::HAproxy
    - OS::TripleO::Services::HeatApi
    - OS::TripleO::Services::HeatApiCloudwatch
    - OS::TripleO::Services::HeatApiCfn
    - OS::TripleO::Services::HeatEngine
    - OS::TripleO::Services::Horizon
    - OS::TripleO::Services::Ipsec
    - OS::TripleO::Services::IronicApi
    - OS::TripleO::Services::IronicConductor
    - OS::TripleO::Services::IronicInspector
    - OS::TripleO::Services::IronicPxe
    - OS::TripleO::Services::IronicNeutronAgent
    - OS::TripleO::Services::Iscsid
    - OS::TripleO::Services::Keepalived
    - OS::TripleO::Services::Kernel
    - OS::TripleO::Services::Keystone
    - OS::TripleO::Services::LoginDefs
    - OS::TripleO::Services::ManilaApi
    - OS::TripleO::Services::ManilaBackendCephFs
    - OS::TripleO::Services::ManilaBackendIsilon
    - OS::TripleO::Services::ManilaBackendNetapp
    - OS::TripleO::Services::ManilaBackendUnity
    - OS::TripleO::Services::ManilaBackendVNX
    - OS::TripleO::Services::ManilaBackendVMAX
    - OS::TripleO::Services::ManilaScheduler
    - OS::TripleO::Services::ManilaShare
    - OS::TripleO::Services::Memcached
    - OS::TripleO::Services::MetricsQdr
    - OS::TripleO::Services::MistralApi
    - OS::TripleO::Services::MistralEngine
    - OS::TripleO::Services::MistralExecutor
    - OS::TripleO::Services::MistralEventEngine
    - OS::TripleO::Services::MongoDb
    - OS::TripleO::Services::MySQL
    - OS::TripleO::Services::MySQLClient
    - OS::TripleO::Services::NeutronApi
    - OS::TripleO::Services::NeutronBgpVpnApi
    - OS::TripleO::Services::NeutronSfcApi
    - OS::TripleO::Services::NeutronCorePlugin
    - OS::TripleO::Services::NeutronDhcpAgent
    - OS::TripleO::Services::NeutronL2gwAgent
    - OS::TripleO::Services::NeutronL2gwApi
    - OS::TripleO::Services::NeutronL3Agent
    - OS::TripleO::Services::NeutronLbaasv2Agent
    - OS::TripleO::Services::NeutronLbaasv2Api
    - OS::TripleO::Services::NeutronLinuxbridgeAgent
    - OS::TripleO::Services::NeutronMetadataAgent
    - OS::TripleO::Services::NeutronML2FujitsuCfab
    - OS::TripleO::Services::NeutronML2FujitsuFossw
    - OS::TripleO::Services::NeutronOvsAgent
    - OS::TripleO::Services::NeutronVppAgent
    - OS::TripleO::Services::NovaApi
    - OS::TripleO::Services::NovaConductor
    - OS::TripleO::Services::NovaConsoleauth
    - OS::TripleO::Services::NovaIronic
    - OS::TripleO::Services::NovaMetadata
    - OS::TripleO::Services::NovaPlacement
    - OS::TripleO::Services::NovaScheduler
    - OS::TripleO::Services::NovaVncProxy
    - OS::TripleO::Services::Ntp
    - OS::TripleO::Services::ContainersLogrotateCrond
    - OS::TripleO::Services::OctaviaApi
    - OS::TripleO::Services::OctaviaDeploymentConfig
    - OS::TripleO::Services::OctaviaHealthManager
    - OS::TripleO::Services::OctaviaHousekeeping
    - OS::TripleO::Services::OctaviaWorker
    - OS::TripleO::Services::OpenDaylightApi
    - OS::TripleO::Services::OpenDaylightOvs
    - OS::TripleO::Services::OVNDBs
    - OS::TripleO::Services::OVNController
    - OS::TripleO::Services::Pacemaker
    - OS::TripleO::Services::PankoApi
    - OS::TripleO::Services::OsloMessagingRpc
    - OS::TripleO::Services::OsloMessagingNotify
    - OS::TripleO::Services::Redis
    - OS::TripleO::Services::Rhsm
    - OS::TripleO::Services::RsyslogSidecar
    - OS::TripleO::Services::Securetty
    - OS::TripleO::Services::SensuClient
    - OS::TripleO::Services::SkydiveAgent
    - OS::TripleO::Services::SkydiveAnalyzer
    - OS::TripleO::Services::Snmp
    - OS::TripleO::Services::Sshd
    - OS::TripleO::Services::SwiftProxy
    - OS::TripleO::Services::SwiftDispersion
    - OS::TripleO::Services::SwiftRingBuilder
    - OS::TripleO::Services::SwiftStorage
    - OS::TripleO::Services::Tacker
    - OS::TripleO::Services::Timezone
    - OS::TripleO::Services::TripleoFirewall
    - OS::TripleO::Services::TripleoPackages
    - OS::TripleO::Services::Tuned
    - OS::TripleO::Services::Vpp
    - OS::TripleO::Services::Zaqar
    - OS::TripleO::Services::Ptp
    - OS::TripleO::Services::Xinetd
###############################################################################
# Role: ComputeOvsDpdkSriov                                                   #
###############################################################################
- name: ComputeOvsDpdkSriov
  description: |
    Compute OvS DPDK Role
  CountDefault: 1
  networks:
    - InternalApi
    - Tenant
    - Storage
  RoleParametersDefault:
    VhostuserSocketGroup: "hugetlbfs"
    TunedProfileName: "cpu-partitioning"
  ServicesDefault:
    - OS::TripleO::Services::Aide
    - OS::TripleO::Services::AuditD
    - OS::TripleO::Services::BootParams
    - OS::TripleO::Services::CACerts
    - OS::TripleO::Services::CephClient
    - OS::TripleO::Services::CephExternal
    - OS::TripleO::Services::CertmongerUser
    - OS::TripleO::Services::Collectd
    - OS::TripleO::Services::ComputeCeilometerAgent
    - OS::TripleO::Services::ComputeNeutronCorePlugin
    - OS::TripleO::Services::ComputeNeutronL3Agent
    - OS::TripleO::Services::ComputeNeutronMetadataAgent
    - OS::TripleO::Services::ComputeNeutronOvsDpdk
    - OS::TripleO::Services::NeutronSriovAgent
    - OS::TripleO::Services::NeutronSriovHostConfig
    - OS::TripleO::Services::Docker
    - OS::TripleO::Services::Fluentd
    - OS::TripleO::Services::Ipsec
    - OS::TripleO::Services::Iscsid
    - OS::TripleO::Services::Kernel
    - OS::TripleO::Services::LoginDefs
    - OS::TripleO::Services::MetricsQdr
    - OS::TripleO::Services::MySQLClient
    - OS::TripleO::Services::NeutronBgpVpnBagpipe
    - OS::TripleO::Services::NovaCompute
    - OS::TripleO::Services::NovaLibvirt
    - OS::TripleO::Services::NovaLibvirtGuests
    - OS::TripleO::Services::NovaMigrationTarget
    - OS::TripleO::Services::Ntp
    - OS::TripleO::Services::ContainersLogrotateCrond
    - OS::TripleO::Services::OpenDaylightOvs
    - OS::TripleO::Services::OVNMetadataAgent
    - OS::TripleO::Services::Rhsm
    - OS::TripleO::Services::RsyslogSidecar
    - OS::TripleO::Services::Securetty
    - OS::TripleO::Services::SensuClient
    - OS::TripleO::Services::SkydiveAgent
    - OS::TripleO::Services::Snmp
    - OS::TripleO::Services::Sshd
    - OS::TripleO::Services::Timezone
    - OS::TripleO::Services::TripleoFirewall
    - OS::TripleO::Services::TripleoPackages
    - OS::TripleO::Services::Ptp</pre></section><section class="section" id="ap-vxlan-dpdk-sriov-hybrid-network-environment"><div class="titlepage"><div><div><h3 class="title">A.1.2. <code class="literal">network-environment-overrides.yaml</code></h3></div></div></div><pre class="programlisting language-yaml">resource_registry:
  # Specify the relative/absolute path to the config files you want to use for override the default.
  OS::TripleO::ComputeOvsDpdkSriov::Net::SoftwareConfig: nic-configs/computeovsdpdksriov.yaml
  OS::TripleO::Controller::Net::SoftwareConfig: nic-configs/controller.yaml

# Customize all these values to match the local environment
parameter_defaults:
  # The tunnel type for the tenant network (vxlan or gre). Set to '' to disable tunneling.
  NeutronTunnelTypes: 'vxlan'
  # The tenant network type for Neutron (vlan or vxlan).
  NeutronNetworkType: 'vxlan,vlan'
  # The OVS logical-&gt;physical bridge mappings to use.
  NeutronBridgeMappings: 'access:br-access,dpdk-mgmt:br-link0'
  # The Neutron ML2 and OpenVSwitch vlan mapping range to support.
  NeutronNetworkVLANRanges: 'access:423:423,dpdk-mgmt:134:137,sriov-1:138:139,sriov-2:138:139'
  # Define the DNS servers (maximum 2) for the overcloud nodes
  DnsServers: ["10.46.0.31","10.46.0.32"]
  # Nova flavor to use.
  OvercloudControllerFlavor: controller
  OvercloudComputeOvsDpdkSriovFlavor: computeovsdpdksriov
  # Number of nodes to deploy.
  ControllerCount: 3
  ComputeOvsDpdkSriovCount: 2
  # NTP server configuration.
  NtpServer: ['clock.redhat.com']
  # MTU global configuration
  NeutronGlobalPhysnetMtu: 9000
  # Configure the classname of the firewall driver to use for implementing security groups.
  NeutronOVSFirewallDriver: openvswitch
  SshServerOptions:
    UseDns: 'no'
  # Enable log level DEBUG for supported components
  Debug: True

  ControllerHostnameFormat: 'controller-%index%'
  ControllerSchedulerHints:
    'capabilities:node': 'controller-%index%'
  ComputeOvsDpdkSriovHostnameFormat: 'computeovsdpdksriov-%index%'
  ComputeOvsDpdkSriovSchedulerHints:
    'capabilities:node': 'computeovsdpdksriov-%index%'

  # From Rocky live migration with NumaTopologyFilter disabled by default
  # https://bugs.launchpad.net/nova/+bug/1289064
  NovaEnableNUMALiveMigration: true

  ##########################
  # OVS DPDK configuration #
  ##########################

  # In the future, most parameters will be derived by mistral plan.
  # Currently mistral derive parameters is blocked:
  # https://bugzilla.redhat.com/show_bug.cgi?id=1777841
  # https://bugzilla.redhat.com/show_bug.cgi?id=1777844
  ComputeOvsDpdkSriovParameters:
    KernelArgs: "default_hugepagesz=1GB hugepagesz=1G hugepages=64 iommu=pt intel_iommu=on isolcpus=2-19,22-39"
    TunedProfileName: "cpu-partitioning"
    IsolCpusList: "2-19,22-39"
    NovaComputeCpuDedicatedSet: ['2-10,12-17,19,22-30,32-37,39']
    NovaReservedHostMemory: 4096
    OvsDpdkSocketMemory: "1024,3072"
    OvsDpdkMemoryChannels: "4"
    OvsDpdkCoreList: "0,20,1,21"
    OvsPmdCoreList: "11,18,31,38"
    NovaComputeCpuSharedSet: [0,20,1,21]
    # When using NIC partioning on SR-IOV enabled setups, 'derive_pci_passthrough_whitelist.py'
    # script will be executed which will override NovaPCIPassthrough.
    # No option to disable as of now - https://bugzilla.redhat.com/show_bug.cgi?id=1774403
    NovaPCIPassthrough:
      - devname: "enp6s0f2"
        trusted: "true"
        physical_network: "sriov-1"
      - devname: "enp6s0f3"
        trusted: "true"
        physical_network: "sriov-2"

    # NUMA aware vswitch
    NeutronPhysnetNUMANodesMapping: {dpdk-mgmt: [0]}
    NeutronTunnelNUMANodes: [0]
    NeutronPhysicalDevMappings:
    - sriov1:enp6s0f2
    - sriov2:enp6s0f3

  ############################
  #  Scheduler configuration #
  ############################
  NovaSchedulerDefaultFilters:
    - "RetryFilter"
    - "AvailabilityZoneFilter"
    - "ComputeFilter"
    - "ComputeCapabilitiesFilter"
    - "ImagePropertiesFilter"
    - "ServerGroupAntiAffinityFilter"
    - "ServerGroupAffinityFilter"
    - "PciPassthroughFilter"
    - "NUMATopologyFilter"
    - "AggregateInstanceExtraSpecsFilter"</pre></section><section class="section" id="ap-vxlan-dpdk-sriov-hybrid-controller"><div class="titlepage"><div><div><h3 class="title">A.1.3. <code class="literal">controller.yaml</code></h3></div></div></div><pre class="programlisting language-yaml">heat_template_version: rocky
description: &gt;
  Software Config to drive os-net-config to configure VLANs for the controller role.
parameters:
  ControlPlaneIp:
    default: ''
    description: IP address/subnet on the ctlplane network
    type: string
  ExternalIpSubnet:
    default: ''
    description: IP address/subnet on the external network
    type: string
  ExternalInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the external network traffic. JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}] Unless
      the default is changed, the parameter is automatically resolved from the subnet host_routes attribute.
    type: json
  InternalApiIpSubnet:
    default: ''
    description: IP address/subnet on the internal_api network
    type: string
  InternalApiInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the internal_api network traffic. JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}] Unless
      the default is changed, the parameter is automatically resolved from the subnet host_routes attribute.
    type: json
  StorageIpSubnet:
    default: ''
    description: IP address/subnet on the storage network
    type: string
  StorageInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the storage network traffic. JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}] Unless
      the default is changed, the parameter is automatically resolved from the subnet host_routes attribute.
    type: json
  StorageMgmtIpSubnet:
    default: ''
    description: IP address/subnet on the storage_mgmt network
    type: string
  StorageMgmtInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the storage_mgmt network traffic. JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}] Unless
      the default is changed, the parameter is automatically resolved from the subnet host_routes attribute.
    type: json
  TenantIpSubnet:
    default: ''
    description: IP address/subnet on the tenant network
    type: string
  TenantInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the tenant network traffic. JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}] Unless
      the default is changed, the parameter is automatically resolved from the subnet host_routes attribute.
    type: json
  ManagementIpSubnet: # Only populated when including environments/network-management.yaml
    default: ''
    description: IP address/subnet on the management network
    type: string
  ManagementInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the management network traffic. JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}] Unless
      the default is changed, the parameter is automatically resolved from the subnet host_routes attribute.
    type: json
  BondInterfaceOvsOptions:
    default: bond_mode=active-backup
    description: &gt;-
      The ovs_options string for the bond interface. Set things like lacp=active and/or bond_mode=balance-slb using this option.
    type: string
  ExternalNetworkVlanID:
    default: 10
    description: Vlan ID for the external network traffic.
    type: number
  InternalApiNetworkVlanID:
    default: 20
    description: Vlan ID for the internal_api network traffic.
    type: number
  StorageNetworkVlanID:
    default: 30
    description: Vlan ID for the storage network traffic.
    type: number
  StorageMgmtNetworkVlanID:
    default: 40
    description: Vlan ID for the storage_mgmt network traffic.
    type: number
  TenantNetworkVlanID:
    default: 50
    description: Vlan ID for the tenant network traffic.
    type: number
  ManagementNetworkVlanID:
    default: 60
    description: Vlan ID for the management network traffic.
    type: number
  ExternalInterfaceDefaultRoute:
    default: 10.0.0.1
    description: default route for the external network
    type: string
  ControlPlaneSubnetCidr:
    default: ''
    description: &gt;
      The subnet CIDR of the control plane network. (The parameter is automatically resolved from the ctlplane subnet's cidr
      attribute.)
    type: string
  ControlPlaneDefaultRoute:
    default: ''
    description: &gt;-
      The default route of the control plane network. (The parameter is automatically resolved from the ctlplane subnet's
      gateway_ip attribute.)
    type: string
  DnsServers: # Override this via parameter_defaults
    default: []
    description: &gt;
      DNS servers to use for the Overcloud (2 max for some implementations). If not set the nameservers configured in the
      ctlplane subnet's dns_nameservers attribute will be used.
    type: comma_delimited_list
  EC2MetadataIp:
    default: ''
    description: &gt;-
      The IP address of the EC2 metadata server. (The parameter is automatically resolved from the ctlplane subnet's host_routes
      attribute.)
    type: string
  ControlPlaneStaticRoutes:
    default: []
    description: &gt;
      Routes for the ctlplane network traffic. JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}] Unless
      the default is changed, the parameter is automatically resolved from the subnet host_routes attribute.
    type: json
  ControlPlaneMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the network. (The parameter is automatically resolved from the ctlplane network's mtu attribute.)
    type: number
  StorageMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the Storage network.
    type: number
  StorageMgmtMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the StorageMgmt network.
    type: number
  InternalApiMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the InternalApi network.
    type: number
  TenantMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the Tenant network.
    type: number
  ExternalMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the External network.
    type: number
resources:
  OsNetConfigImpl:
    type: OS::Heat::SoftwareConfig
    properties:
      group: script
      config:
        str_replace:
          template:
            get_file: /usr/share/openstack-tripleo-heat-templates/network/scripts/run-os-net-config.sh
          params:
            $network_config:
              network_config:
              - type: interface
                name: nic1
                use_dhcp: false
                addresses:
                - ip_netmask:
                    list_join:
                    - /
                    - - get_param: ControlPlaneIp
                      - get_param: ControlPlaneSubnetCidr
                routes:
                - ip_netmask: 169.254.169.254/32
                  next_hop:
                    get_param: EC2MetadataIp

              - type: ovs_bridge
                name: br-link0
                use_dhcp: false
                mtu: 9000
                members:
                - type: interface
                  name: nic2
                  mtu: 9000

                - type: vlan
                  vlan_id:
                    get_param: TenantNetworkVlanID
                  mtu: 9000
                  addresses:
                  - ip_netmask:
                      get_param: TenantIpSubnet

                - type: vlan
                  vlan_id:
                    get_param: InternalApiNetworkVlanID
                  addresses:
                  - ip_netmask:
                      get_param: InternalApiIpSubnet

                - type: vlan
                  vlan_id:
                    get_param: StorageNetworkVlanID
                  addresses:
                  - ip_netmask:
                      get_param: StorageIpSubnet

                - type: vlan
                  vlan_id:
                    get_param: StorageMgmtNetworkVlanID
                  addresses:
                  - ip_netmask:
                      get_param: StorageMgmtIpSubnet

              - type: ovs_bridge
                name: br-access
                use_dhcp: false
                mtu: 9000
                members:
                - type: interface
                  name: nic3
                  mtu: 9000
                - type: vlan
                  vlan_id:
                    get_param: ExternalNetworkVlanID
                  mtu: 9000
                  addresses:
                  - ip_netmask:
                      get_param: ExternalIpSubnet
                  routes:
                  - default: true
                    next_hop:
                      get_param: ExternalInterfaceDefaultRoute
outputs:
  OS::stack_id:
    description: The OsNetConfigImpl resource.
    value:
      get_resource: OsNetConfigImpl</pre></section><section class="section" id="ap-vxlan-dpdk-sriov-hybrid-compute"><div class="titlepage"><div><div><h3 class="title">A.1.4. <code class="literal">compute-ovs-dpdk.yaml</code></h3></div></div></div><pre class="programlisting language-yaml">heat_template_version: rocky

description: &gt;
  Software Config to drive os-net-config to configure VLANs for the
  compute role.

parameters:
  ControlPlaneIp:
    default: ''
    description: IP address/subnet on the ctlplane network
    type: string
  ExternalIpSubnet:
    default: ''
    description: IP address/subnet on the external network
    type: string
  ExternalInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the external network traffic.
      JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}]
      Unless the default is changed, the parameter is automatically resolved
      from the subnet host_routes attribute.
    type: json
  InternalApiIpSubnet:
    default: ''
    description: IP address/subnet on the internal_api network
    type: string
  InternalApiInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the internal_api network traffic.
      JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}]
      Unless the default is changed, the parameter is automatically resolved
      from the subnet host_routes attribute.
    type: json
  StorageIpSubnet:
    default: ''
    description: IP address/subnet on the storage network
    type: string
  StorageInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the storage network traffic.
      JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}]
      Unless the default is changed, the parameter is automatically resolved
      from the subnet host_routes attribute.
    type: json
  StorageMgmtIpSubnet:
    default: ''
    description: IP address/subnet on the storage_mgmt network
    type: string
  StorageMgmtInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the storage_mgmt network traffic.
      JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}]
      Unless the default is changed, the parameter is automatically resolved
      from the subnet host_routes attribute.
    type: json
  TenantIpSubnet:
    default: ''
    description: IP address/subnet on the tenant network
    type: string
  TenantInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the tenant network traffic.
      JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}]
      Unless the default is changed, the parameter is automatically resolved
      from the subnet host_routes attribute.
    type: json
  ManagementIpSubnet: # Only populated when including environments/network-management.yaml
    default: ''
    description: IP address/subnet on the management network
    type: string
  ManagementInterfaceRoutes:
    default: []
    description: &gt;
      Routes for the management network traffic.
      JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}]
      Unless the default is changed, the parameter is automatically resolved
      from the subnet host_routes attribute.
    type: json
  BondInterfaceOvsOptions:
    default: 'bond_mode=active-backup'
    description: The ovs_options string for the bond interface. Set things like
                 lacp=active and/or bond_mode=balance-slb using this option.
    type: string
  ExternalNetworkVlanID:
    default: 10
    description: Vlan ID for the external network traffic.
    type: number
  InternalApiNetworkVlanID:
    default: 20
    description: Vlan ID for the internal_api network traffic.
    type: number
  StorageNetworkVlanID:
    default: 30
    description: Vlan ID for the storage network traffic.
    type: number
  StorageMgmtNetworkVlanID:
    default: 40
    description: Vlan ID for the storage_mgmt network traffic.
    type: number
  TenantNetworkVlanID:
    default: 50
    description: Vlan ID for the tenant network traffic.
    type: number
  ManagementNetworkVlanID:
    default: 60
    description: Vlan ID for the management network traffic.
    type: number
  ExternalInterfaceDefaultRoute:
    default: '10.0.0.1'
    description: default route for the external network
    type: string
  ControlPlaneSubnetCidr:
    default: ''
    description: &gt;
      The subnet CIDR of the control plane network. (The parameter is
      automatically resolved from the ctlplane subnet's cidr attribute.)
    type: string
  ControlPlaneDefaultRoute:
    default: ''
    description: The default route of the control plane network. (The parameter
      is automatically resolved from the ctlplane subnet's gateway_ip attribute.)
    type: string
  DnsServers: # Override this via parameter_defaults
    default: []
    description: &gt;
      DNS servers to use for the Overcloud (2 max for some implementations).
      If not set the nameservers configured in the ctlplane subnet's
      dns_nameservers attribute will be used.
    type: comma_delimited_list
  EC2MetadataIp:
    default: ''
    description: The IP address of the EC2 metadata server. (The parameter
      is automatically resolved from the ctlplane subnet's host_routes attribute.)
    type: string
  ControlPlaneStaticRoutes:
    default: []
    description: &gt;
      Routes for the ctlplane network traffic. JSON route e.g. [{'destination':'10.0.0.0/16', 'nexthop':'10.0.0.1'}] Unless
      the default is changed, the parameter is automatically resolved from the subnet host_routes attribute.
    type: json
  ControlPlaneMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the network. (The parameter is automatically resolved from the ctlplane network's mtu attribute.)
    type: number
  StorageMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the Storage network.
    type: number
  InternalApiMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the InternalApi network.
    type: number
  TenantMtu:
    default: 1500
    description: &gt;-
      The maximum transmission unit (MTU) size(in bytes) that is guaranteed to pass through the data path of the segments
      in the Tenant network.
    type: number

resources:
  OsNetConfigImpl:
    type: OS::Heat::SoftwareConfig
    properties:
      group: script
      config:
        str_replace:
          template:
            get_file: /usr/share/openstack-tripleo-heat-templates/network/scripts/run-os-net-config.sh
          params:
            $network_config:
              network_config:
              - type: interface
                name: nic1
                use_dhcp: false
                defroute: false

              - type: interface
                name: nic2
                use_dhcp: false
                addresses:
                - ip_netmask:
                    list_join:
                    - /
                    - - get_param: ControlPlaneIp
                      - get_param: ControlPlaneSubnetCidr
                routes:
                - ip_netmask: 169.254.169.254/32
                  next_hop:
                    get_param: EC2MetadataIp
                - default: true
                  next_hop:
                    get_param: ControlPlaneDefaultRoute

              - type: linux_bond
                name: bond_api
                bonding_options: mode=active-backup
                use_dhcp: false
                dns_servers:
                  get_param: DnsServers
                members:
                - type: interface
                  name: nic3
                  primary: true
                - type: interface
                  name: nic4

              - type: vlan
                vlan_id:
                  get_param: InternalApiNetworkVlanID
                device: bond_api
                addresses:
                - ip_netmask:
                    get_param: InternalApiIpSubnet

              - type: vlan
                vlan_id:
                  get_param: StorageNetworkVlanID
                device: bond_api
                addresses:
                - ip_netmask:
                    get_param: StorageIpSubnet

              - type: ovs_user_bridge
                name: br-link0
                use_dhcp: false
                ovs_extra:
                - str_replace:
                    template: set port br-link0 tag=_VLAN_TAG_
                    params:
                      _VLAN_TAG_:
                        get_param: TenantNetworkVlanID
                addresses:
                - ip_netmask:
                    get_param: TenantIpSubnet
                members:
                - type: ovs_dpdk_bond
                  name: dpdkbond0
                  mtu: 9000
                  rx_queue: 2
                  members:
                  - type: ovs_dpdk_port
                    name: dpdk0
                    members:
                    - type: interface
                      name: nic7
                  - type: ovs_dpdk_port
                    name: dpdk1
                    members:
                    - type: interface
                      name: nic8

              - type: sriov_pf
                name: nic9
                mtu: 9000
                numvfs: 10
                use_dhcp: false
                defroute: false
                nm_controlled: true
                hotplug: true
                promisc: false

              - type: sriov_pf
                name: nic10
                mtu: 9000
                numvfs: 10
                use_dhcp: false
                defroute: false
                nm_controlled: true
                hotplug: true
                promisc: false
outputs:
  OS::stack_id:
    description: The OsNetConfigImpl resource.
    value:
      get_resource: OsNetConfigImpl</pre></section><section class="section" id="ap-vxlan-dpdk-sriov-hybrid-overcloud-deploy"><div class="titlepage"><div><div><h3 class="title">A.1.5. <code class="literal">overcloud_deploy.sh</code></h3></div></div></div><pre class="programlisting language-bash">#!/bin/bash

THT_PATH='/home/stack/ospd-16-vxlan-dpdk-sriov-ctlplane-dataplane-bonding-hybrid'

openstack overcloud deploy \
--templates \
-e /usr/share/openstack-tripleo-heat-templates/environments/network-environment.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/network-isolation.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-ovs.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-ovs-dpdk.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-sriov.yaml \
-e /home/stack/containers-prepare-parameter.yaml \
-r $THT_PATH/roles_data.yaml \
-e $THT_PATH/network-environment-overrides.yaml \
-n $THT_PATH/network-data.yaml</pre></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140654531652848"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="rh-summit-red-a.svg" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>

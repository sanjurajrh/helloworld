<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="b93f4dca-3d7f-4423-94f7-921e6c129d6e" product="7eff92b4-effc-4326-8604-6f852e3e9747" revision="c2973328ba7082bc1ee91cdd08745139619ae7de:en-us" page="9404a576-17fd-4120-b913-a0ee9a176751" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_guide/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_guide/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_guide/index" />
<meta property="og:title" content="Networking Guide Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal" />
<meta property="og:description" content="A cookbook for common OpenStack Networking tasks." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_guide/index" />
<meta name="twitter:title" content="Networking Guide Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal" />
<meta name="twitter:description" content="A cookbook for common OpenStack Networking tasks." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Networking Guide Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs05.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="fc526cb5" />
<meta name="cp-chrome-build-date" content="2020-10-15T21:45:53.836Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "fc526cb5",
        builddate : "2020-10-15T21:45:53.836Z",
        fetchdate : "2020-10-19T10:40:37-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="bootstrap-grid.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=fc526cb5.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=fc526cb5.css" />

<link href="chosen.css%3Fv=fc526cb5.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=fc526cb5" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->

  <!-- TrustArc -->
  <script src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__ZyeOaiFuDejQQbhUV7yg7atYZnj4WLfH77o0scv4068__MZdWWgUEYpsEWLcU0RqkaXMsEyksbpCgnf4XwXRkqz0__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       'b93f4dca-3d7f-4423-94f7-921e6c129d6e');
attributes.set('ResourceTitle',    'Networking Guide');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       'c2973328ba7082bc1ee91cdd08745139619ae7de:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat OpenStack Platform');
attributes.set('ProductVersion',   '16.1');
attributes.set('ProductId',        'Red Hat OpenStack Platform 16.1');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat OpenStack Platform", "/documentation/en-us/red_hat_openstack_platform/"], ["16.1", "/documentation/en-us/red_hat_openstack_platform/16.1/"], ["Networking Guide", "/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_guide/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__8abcou7ybLtGOLy-V9E-NQlDejOMZmdStjlYfyX9W-k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"_Jkkknkux-sDFV8dEv56fdmo_Wx8qVjfOjj0Wi8ql7M","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery-html-prefilter-3.5.0-backport.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs06-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page  kcs_external" >
  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <script>
    chrometwo_require(["wc"], function(wc){    
        wc.include("@cpelements/cp-search-autocomplete/dist/cp-search-autocomplete.umd");
    }); 
</script>

<!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index%3F.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index%3F.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <span class="sr-only">Red Hat Customer Portal</span>
          <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
            <defs>
            <style>
              .rh-logo-type {
                fill:#fff;
              }
              .rh-logo-hat {
                fill:#e00;
              }
            </style>
            </defs>
            <g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
          </svg>
        </span>
            </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index%3F.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index%3F.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index%3F.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index%3F.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom" path="/webassets/avalon/j/data.json"></cp-search-autocomplete>
                            <div class="input-group push-bottom">
                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Or <a href="https://access.redhat.com/support/cases/#/troubleshoot">troubleshoot an issue</a>.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                      <span class="sr-only">Red Hat Customer Portal</span>
                      <span class="logo-crop">
                        <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
                          <defs>
                          <style>
                            .rh-logo-type {
                              fill:#fff;
                            }
                            .rh-logo-hat {
                              fill:#e00;
                            }
                          </style>
                          </defs>
                          <title>Red Hat Customer Portal</title><g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
                        </svg>
                      </span>
                                            </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        
                                        <li><a href="https://catalog.redhat.com/" class="cta-link cta-link-darkbg">Ecosystem Catalog</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="index%3F.html">English</a></li>
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_openstack_platform/16.1/html/networking_guide/">日本語</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_guide/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/pdf/networking_guide/Red_Hat_OpenStack_Platform-16.1-Networking_Guide-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/epub/networking_guide/Red_Hat_OpenStack_Platform-16.1-Networking_Guide-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index%3F.html">Networking Guide</a></li><li class=" leaf"><a href="index%3F.html#idm139893205194944">Preface</a></li><li class=" leaf"><a href="index%3F.html#networking-overview">1. Networking overview</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#how-networking-works">1.1. How networking works</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#vlans">1.1.1. VLANs</a></li></ol></li><li class=" leaf"><a href="index%3F.html#connect-lans">1.2. Connecting two LANs together</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#firewalls">1.2.1. Firewalls</a></li></ol></li><li class=" leaf"><a href="index%3F.html#work-network">1.3. Working with OpenStack Networking (neutron)</a></li><li class=" leaf"><a href="index%3F.html#cidr-format">1.4. Working with CIDR format</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-networking-concepts">2. OpenStack networking concepts</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#install-networking">2.1. Installing OpenStack Networking (neutron)</a></li><li class=" leaf"><a href="index%3F.html#network-diagram">2.2. OpenStack Networking diagram</a></li><li class=" leaf"><a href="index%3F.html#security-groups">2.3. Security groups</a></li><li class=" leaf"><a href="index%3F.html#open-vswitch">2.4. Open vSwitch</a></li><li class=" leaf"><a href="index%3F.html#modular-layer2-network">2.5. Modular layer 2 (ML2) networking</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#reason-behind-ml2">2.5.1. The reasoning behind ML2</a></li><li class=" leaf"><a href="index%3F.html#ml2-network-types">2.5.2. ML2 network types</a></li><li class=" leaf"><a href="index%3F.html#ml2-mech-drivers">2.5.3. ML2 mechanism drivers</a></li></ol></li><li class=" leaf"><a href="index%3F.html#ml2-type-mech-driver-compat">2.6. ML2 type and mechanism driver compatibility</a></li><li class=" leaf"><a href="index%3F.html#limits-ml2ovn-network-driver">2.7. Limits of the ML2/OVN mechanism driver</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#ml2_ovs_features_not_yet_supported_by_ml2_ovn">2.7.1. ML2/OVS features not yet supported by ML2/OVN</a></li></ol></li><li class=" leaf"><a href="index%3F.html#ml2ovs-to-ml2ovn-migration-exceptions">2.8. ML2/OVS to ML2/OVN migration: validated and prohibited scenarios</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#validated_ml2_ovs_to_ml2_ovn_migration_scenarios">2.8.1. Validated ML2/OVS to ML2/OVN migration scenarios</a></li><li class=" leaf"><a href="index%3F.html#ml2_ovs_to_ml2_ovn_migration_scenarios_that_failed_in_tests">2.8.2. ML2/OVS to ML2/OVN migration scenarios that failed in tests</a></li></ol></li><li class=" leaf"><a href="index%3F.html#ml2-ovs-not-ovn">2.9. Using the ML2/OVS mechanism driver instead of the default ML2/OVN driver</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#using_ml2_ovs_in_a_new_rhosp_16_1_deployment">2.9.1. Using ML2/OVS in a new RHOSP 16.1 deployment</a></li><li class=" leaf"><a href="index%3F.html#upgrading_from_ml2_ovs_in_a_previous_rhosp_to_ml2_ovs_in_rhosp_16_1">2.9.2. Upgrading from ML2/OVS in a previous RHOSP to ML2/OVS in RHOSP 16.1</a></li></ol></li><li class=" leaf"><a href="index%3F.html#config-l2pop-driver">2.10. Configuring the L2 population driver</a></li><li class=" leaf"><a href="index%3F.html#enable-sriov-ovn">2.11. Enabling SR-IOV with ML2/OVN and native OVN DHCP</a></li><li class=" leaf"><a href="index%3F.html#network-services">2.12. OpenStack Networking services</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#l3-agent">2.12.1. L3 agent</a></li><li class=" leaf"><a href="index%3F.html#dhcp-agent">2.12.2. DHCP agent</a></li><li class=" leaf"><a href="index%3F.html#open-vswitch-agent">2.12.3. Open vSwitch agent</a></li></ol></li><li class=" leaf"><a href="index%3F.html#tenant-provider-networks">2.13. Tenant and provider networks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#tenant-networks">2.13.1. Tenant networks</a></li><li class=" leaf"><a href="index%3F.html#provider-networks">2.13.2. Provider networks</a></li></ol></li><li class=" leaf"><a href="index%3F.html#l2-l3-network">2.14. Layer 2 and layer 3 networking</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#use-switch-where-possible">2.14.1. Use switching where possible</a></li></ol></li></ol></li><li class=" leaf"><a href="index%3F.html#common_tasks">I. Common Tasks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#sec-admin-tasks">3. Common administrative networking tasks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#create-network">3.1. Creating a network</a></li><li class=" leaf"><a href="index%3F.html#create-adv-network">3.2. Creating an advanced network</a></li><li class=" leaf"><a href="index%3F.html#add-network-routing">3.3. Adding network routing</a></li><li class=" leaf"><a href="index%3F.html#delete-network">3.4. Deleting a network</a></li><li class=" leaf"><a href="index%3F.html#purge-network-tenant">3.5. Purging the networking for a tenant</a></li><li class=" leaf"><a href="index%3F.html#work-subnets">3.6. Working with subnets</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#create-subnet">3.6.1. Creating a subnet</a></li></ol></li><li class=" leaf"><a href="index%3F.html#delete-subnet">3.7. Deleting a subnet</a></li><li class=" leaf"><a href="index%3F.html#add-router">3.8. Adding a router</a></li><li class=" leaf"><a href="index%3F.html#delete-router">3.9. Deleting a router</a></li><li class=" leaf"><a href="index%3F.html#add-interface">3.10. Adding an interface</a></li><li class=" leaf"><a href="index%3F.html#delete-interface">3.11. Deleting an interface</a></li><li class=" leaf"><a href="index%3F.html#Config-ip-address">3.12. Configuring IP addressing</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#create-float-ip-pools">3.12.1. Creating floating IP pools</a></li><li class=" leaf"><a href="index%3F.html#Assign-specific-float-ip">3.12.2. Assigning a specific floating IP</a></li><li class=" leaf"><a href="index%3F.html#Assign-random-float-ip">3.12.3. Assigning a random floating IP</a></li></ol></li><li class=" leaf"><a href="index%3F.html#create-mult-float-ip-pools">3.13. Creating multiple floating IP pools</a></li><li class=" leaf"><a href="index%3F.html#bridge-phys-network">3.14. Bridging the physical network</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-planning-ip">4. Planning IP address usage</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#vlan-planning">4.1. VLAN planning</a></li><li class=" leaf"><a href="index%3F.html#types-of-network-traffic">4.2. Types of network traffic</a></li><li class=" leaf"><a href="index%3F.html#ip-address-consumption">4.3. IP address consumption</a></li><li class=" leaf"><a href="index%3F.html#virtual-networking">4.4. Virtual networking</a></li><li class=" leaf"><a href="index%3F.html#example-network-plan">4.5. Example network plan</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-neutron-ports">5. Reviewing OpenStack Networking router ports</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#view-current-port-status">5.1. Viewing current port status</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-neutron-troubleshooting">6. Troubleshooting provider networks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#basic-ping-testing">6.1. Basic ping testing</a></li><li class=" leaf"><a href="index%3F.html#troubleshoot-vlan-networks">6.2. Troubleshooting VLAN networks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#review-vlan-config-log-files">6.2.1. Reviewing the VLAN configuration and log files</a></li></ol></li><li class=" leaf"><a href="index%3F.html#troubleshoot-tenant-networks">6.3. Troubleshooting from within tenant networks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#perform-advanced-icmp-testing">6.3.1. Performing advanced ICMP testing within the namespace</a></li></ol></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-connect-instance">7. Connecting an instance to the physical network</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#overview-network-topo">7.1. Overview of the OpenStack Networking topology</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#service_placement">7.1.1. Service placement</a></li></ol></li><li class=" leaf"><a href="index%3F.html#phys-network-connect-flat">7.2. Using flat provider networks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#config-controller-nodes-flat">7.2.1. Configuring the Controller nodes</a></li><li class=" leaf"><a href="index%3F.html#config-network-compute-nodes-flat">7.2.2. Configuring the Network node and Compute nodes</a></li><li class=" leaf"><a href="index%3F.html#config-network-node-flat">7.2.3. Configuring the Network node</a></li><li class=" leaf"><a href="index%3F.html#connect-instance-external-flat">7.2.4. Connecting an instance to the external network</a></li><li class=" leaf"><a href="index%3F.html#how-does-flat-packet-flow-work">7.2.5. How does the flat provider network packet flow work?</a></li><li class=" leaf"><a href="index%3F.html#phys-connection-troubleshoot-flat">7.2.6. Troubleshooting instance-physical network connections on flat provider networks</a></li></ol></li><li class=" leaf"><a href="index%3F.html#Using-VLAN-Provider-Networks">7.3. Using VLAN provider networks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#config_controller_nodes_vlan">7.3.1. Configuring the Controller nodes</a></li><li class=" leaf"><a href="index%3F.html#config_network_compute_nodes_vlan">7.3.2. Configuring the Network and Compute nodes</a></li><li class=" leaf"><a href="index%3F.html#config_network_node_vlan">7.3.3. Configuring the Network node</a></li><li class=" leaf"><a href="index%3F.html#how-does-vlan-packet-flow-work">7.3.4. How does the VLAN provider network packet flow work?</a></li><li class=" leaf"><a href="index%3F.html#physical-connection-troubleshoot-vlan">7.3.5. Troubleshooting instance-physical network connections on VLAN provider networks</a></li></ol></li><li class=" leaf"><a href="index%3F.html#enabling-compute-metadata-access">7.4. Enabling Compute metadata access</a></li><li class=" leaf"><a href="index%3F.html#floating-ip-addresses">7.5. Floating IP addresses</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-physical-switch">8. Configuring physical switches for OpenStack Networking</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#plan-physical-network-environ">8.1. Planning your physical network environment</a></li><li class=" leaf"><a href="index%3F.html#phys-cisco-catalyst">8.2. Configuring a Cisco Catalyst switch</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#about-trunk-ports_cisco-catalyst">8.2.1. About trunk ports</a></li><li class=" leaf"><a href="index%3F.html#config-catalyst-trunk-ports">8.2.2. Configuring trunk ports for a Cisco Catalyst switch</a></li><li class=" leaf"><a href="index%3F.html#about-access-ports_cisco-catalyst">8.2.3. About access ports</a></li><li class=" leaf"><a href="index%3F.html#config-catalyst-access-ports">8.2.4. Configuring access ports for a Cisco Catalyst switch</a></li><li class=" leaf"><a href="index%3F.html#about-lacp-port-aggregation_cisco-catalyst">8.2.5. About LACP port aggregation</a></li><li class=" leaf"><a href="index%3F.html#config-lacp-phys-nic_cisco-catalyst">8.2.6. Configuring LACP on the physical NIC</a></li><li class=" leaf"><a href="index%3F.html#config-catalyst-lacp">8.2.7. Configuring LACP for a Cisco Catalyst switch</a></li><li class=" leaf"><a href="index%3F.html#about-mtu-settings_cisco-catalyst">8.2.8. About MTU settings</a></li><li class=" leaf"><a href="index%3F.html#config-catalyst-mtu-settings">8.2.9. Configuring MTU settings for a Cisco Catalyst switch</a></li><li class=" leaf"><a href="index%3F.html#about-lldp-discovery_cisco-catalyst">8.2.10. About LLDP discovery</a></li><li class=" leaf"><a href="index%3F.html#config-catalyst-lldp">8.2.11. Configuring LLDP for a Cisco Catalyst switch</a></li></ol></li><li class=" leaf"><a href="index%3F.html#phys-cisco-nexus">8.3. Configuring a Cisco Nexus switch</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#about-trunk-ports_cisco-nexus">8.3.1. About trunk ports</a></li><li class=" leaf"><a href="index%3F.html#config-nexus-trunk-ports">8.3.2. Configuring trunk ports for a Cisco Nexus switch</a></li><li class=" leaf"><a href="index%3F.html#about-access-ports_cisco-nexus">8.3.3. About access ports</a></li><li class=" leaf"><a href="index%3F.html#config-nexus-access-ports">8.3.4. Configuring access ports for a Cisco Nexus switch</a></li><li class=" leaf"><a href="index%3F.html#about-lacp-port-aggregation_cisco-nexus">8.3.5. About LACP port aggregation</a></li><li class=" leaf"><a href="index%3F.html#config-lacp-phys-nic_cisco-nexus">8.3.6. Configuring LACP on the physical NIC</a></li><li class=" leaf"><a href="index%3F.html#config-nexus-lacp">8.3.7. Configuring LACP for a Cisco Nexus switch</a></li><li class=" leaf"><a href="index%3F.html#about-mtu-settings_cisco-nexus">8.3.8. About MTU settings</a></li><li class=" leaf"><a href="index%3F.html#config-nexus-mtu-settings">8.3.9. Configuring MTU settings for a Cisco Nexus 7000 switch</a></li><li class=" leaf"><a href="index%3F.html#about-lldp-discovery_cisco-nexus">8.3.10. About LLDP discovery</a></li><li class=" leaf"><a href="index%3F.html#config-nexus-lldp">8.3.11. Configuring LLDP for a Cisco Nexus 7000 switch</a></li></ol></li><li class=" leaf"><a href="index%3F.html#phys-cumulus-linux">8.4. Configuring a Cumulus Linux switch</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#about-trunk-ports_cumulus-linux">8.4.1. About trunk ports</a></li><li class=" leaf"><a href="index%3F.html#config-cumulus-trunk-ports">8.4.2. Configuring trunk ports for a Cumulus Linux switch</a></li><li class=" leaf"><a href="index%3F.html#about-access-ports_cumulus-linux">8.4.3. About access ports</a></li><li class=" leaf"><a href="index%3F.html#config-cumulus-access-ports">8.4.4. Configuring access ports for a Cumulus Linux switch</a></li><li class=" leaf"><a href="index%3F.html#about-lacp-port-aggregation_cumulus-linux">8.4.5. About LACP port aggregation</a></li><li class=" leaf"><a href="index%3F.html#about-mtu-settings_cumulus-linux">8.4.6. About MTU settings</a></li><li class=" leaf"><a href="index%3F.html#config-cumulus-mtu-settings">8.4.7. Configuring MTU settings for a Cumulus Linux switch</a></li><li class=" leaf"><a href="index%3F.html#about-lldp-discovery_cumulus-linux">8.4.8. About LLDP discovery</a></li><li class=" leaf"><a href="index%3F.html#config-cumulus-lldp">8.4.9. Configuring LLDP for a Cumulus Linux switch</a></li></ol></li><li class=" leaf"><a href="index%3F.html#phys-extreme-exos">8.5. Configuring a Extreme Exos switch</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#about-trunk-ports_extreme-exos">8.5.1. About trunk ports</a></li><li class=" leaf"><a href="index%3F.html#config-exos-trunk-ports">8.5.2. Configuring trunk ports on an Extreme Networks EXOS switch</a></li><li class=" leaf"><a href="index%3F.html#about-access-ports_extreme-exos">8.5.3. About access ports</a></li><li class=" leaf"><a href="index%3F.html#config-exos-access-ports">8.5.4. Configuring access ports for an Extreme Networks EXOS switch</a></li><li class=" leaf"><a href="index%3F.html#about-lacp-port-aggregation_extreme-exos">8.5.5. About LACP port aggregation</a></li><li class=" leaf"><a href="index%3F.html#config-lacp-phys-nic_extreme-exos">8.5.6. Configuring LACP on the physical NIC</a></li><li class=" leaf"><a href="index%3F.html#config-exos-lacp">8.5.7. Configuring LACP on an Extreme Networks EXOS switch</a></li><li class=" leaf"><a href="index%3F.html#about-mtu-settings_extreme-exos">8.5.8. About MTU settings</a></li><li class=" leaf"><a href="index%3F.html#config-exos-mtu-settings">8.5.9. Configuring MTU settings on an Extreme Networks EXOS switch</a></li><li class=" leaf"><a href="index%3F.html#about-lldp-discovery_extreme-exos">8.5.10. About LLDP discovery</a></li><li class=" leaf"><a href="index%3F.html#config-exos-lldp">8.5.11. Configuring LLDP settings on an Extreme Networks EXOS switch</a></li></ol></li><li class=" leaf"><a href="index%3F.html#phys-juniper-ex-series">8.6. Configuring a Juniper EX Series switch</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#about-trunk-ports_juniperex">8.6.1. About trunk ports</a></li><li class=" leaf"><a href="index%3F.html#config-juniperex-trunk-ports">8.6.2. Configuring trunk ports for a Juniper EX Series switch</a></li><li class=" leaf"><a href="index%3F.html#about-access-ports_juniperex">8.6.3. About access ports</a></li><li class=" leaf"><a href="index%3F.html#config-juniperex-access-ports">8.6.4. Configuring access ports for a Juniper EX Series switch</a></li><li class=" leaf"><a href="index%3F.html#about-lacp-port-aggregation_juniperex">8.6.5. About LACP port aggregation</a></li><li class=" leaf"><a href="index%3F.html#config-lacp-phys-nic_juniperex">8.6.6. Configuring LACP on the physical NIC</a></li><li class=" leaf"><a href="index%3F.html#config-juniperex-lacp">8.6.7. Configuring LACP for a Juniper EX Series switch</a></li><li class=" leaf"><a href="index%3F.html#about-mtu-settings_juniperex">8.6.8. About MTU settings</a></li><li class=" leaf"><a href="index%3F.html#config-juniperex-mtu-settings">8.6.9. Configuring MTU settings for a Juniper EX Series switch</a></li><li class=" leaf"><a href="index%3F.html#about-lldp-discovery_juniperex">8.6.10. About LLDP discovery</a></li><li class=" leaf"><a href="index%3F.html#config-juniperex-lldp">8.6.11. Configuring LLDP for a Juniper EX Series switch</a></li></ol></li></ol></li></ol></li><li class=" leaf"><a href="index%3F.html#advanced_configuration">II. Advanced Configuration</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#sec-mtu">9. Configure maximum transmission unit (MTU) settings</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#mtu-overview">9.1. MTU overview</a></li><li class=" leaf"><a href="index%3F.html#config-mtu-settings-director">9.2. Configuring MTU Settings in Director</a></li><li class=" leaf"><a href="index%3F.html#review-mtu-calculation">9.3. Reviewing the resulting MTU calculation</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-qos">10. Configuring Quality of Service (QoS) policies</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#qos-rules">10.1. QoS rules</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#related_procedures">10.1.1. Related procedures</a></li></ol></li><li class=" leaf"><a href="index%3F.html#qos-policy-management">10.2. Creating and applying a QoS policy and rule</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#bandwidth-limit">10.2.1. Creating and applying a bandwidth limit QoS policy and rule</a></li><li class=" leaf"><a href="index%3F.html#guaranteed-min-bw">10.2.2. Creating and applying a guaranteed minimum bandwidth QoS policy and rule</a></li><li class=" leaf"><a href="index%3F.html#dcsp-marking-egress-traffic">10.2.3. DSCP marking for egress traffic</a></li><li class=" leaf"><a href="index%3F.html#verify-qos-policy-rules">10.2.4. How to verify the application of your QoS policy and rules</a></li></ol></li><li class=" leaf"><a href="index%3F.html#rbac-qos-policies">10.3. RBAC for QoS Policies</a></li></ol></li><li class=" leaf"><a href="index%3F.html#bridge-mappings">11. Configuring bridge mappings</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#bridge-mappings-usage">11.1. Overview of bridge mappings</a></li><li class=" leaf"><a href="index%3F.html#traffic-flow">11.2. Traffic flow</a></li><li class=" leaf"><a href="index%3F.html#config-bridge-mappings">11.3. Configuring bridge mappings</a></li><li class=" leaf"><a href="index%3F.html#maintain-bridge-mappings">11.4. Maintaining bridge mappings for OVS</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#clean-ports-manually">11.4.1. Cleaning up OVS patch ports manually</a></li><li class=" leaf"><a href="index%3F.html#clean-ports-automatically">11.4.2. Cleaning up OVS patch ports automatically</a></li></ol></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-trunk-vlan">12. VLAN-aware instances</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#overview-vlan-aware-instances">12.1. Overview of VLAN-aware instances</a></li><li class=" leaf"><a href="index%3F.html#review_trunk_plugin">12.2. Reviewing the trunk plug-in</a></li><li class=" leaf"><a href="index%3F.html#create-trunk-connection">12.3. Creating a trunk connection</a></li><li class=" leaf"><a href="index%3F.html#add-subports-trunk">12.4. Adding subports to the trunk</a></li><li class=" leaf"><a href="index%3F.html#config-instance-use-trunk">12.5. Configuring an instance to use a trunk</a></li><li class=" leaf"><a href="index%3F.html#understand-trunk-states">12.6. Understanding trunk states</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-rbac">13. Configuring RBAC policies</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#con_overview-rbac-policies">13.1. Overview of RBAC policies</a></li><li class=" leaf"><a href="index%3F.html#proc_create-rbac-policies">13.2. Creating RBAC policies</a></li><li class=" leaf"><a href="index%3F.html#proc_review-rbac-polices">13.3. Reviewing RBAC policies</a></li><li class=" leaf"><a href="index%3F.html#proc_delete-rbac-polices">13.4. Deleting RBAC policies</a></li><li class=" leaf"><a href="index%3F.html#proc_rbac-grant-access-ext-networks">13.5. Granting RBAC policy access for external networks</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-dvr">14. Configuring distributed virtual routing (DVR)</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#understand-dvr">14.1. Understanding distributed virtual routing (DVR)</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#overview-l3-routing">14.1.1. Overview of Layer 3 routing</a></li><li class=" leaf"><a href="index%3F.html#routing-flows">14.1.2. Routing flows</a></li><li class=" leaf"><a href="index%3F.html#central-routing">14.1.3. Centralized routing</a></li></ol></li><li class=" leaf"><a href="index%3F.html#overview-dvr">14.2. DVR overview</a></li><li class=" leaf"><a href="index%3F.html#dvr-known-issues">14.3. DVR known issues and caveats</a></li><li class=" leaf"><a href="index%3F.html#support-routing-archit">14.4. Supported routing architectures</a></li><li class=" leaf"><a href="index%3F.html#deploying-dvr">14.5. Deploying DVR with ML2 OVS</a></li><li class=" leaf"><a href="index%3F.html#migrate-central-routers-distrib-routers">14.6. Migrating centralized routers to distributed routing</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-octavia">15. Load Balancing-as-a-Service (LBaaS) with Octavia</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#overview_of_octavia">15.1. Overview of Octavia</a></li><li class=" leaf"><a href="index%3F.html#octavia-software-reqs">15.2. Octavia software requirements</a></li><li class=" leaf"><a href="index%3F.html#octavia-prereqs-undercloud">15.3. Prerequisites for the undercloud</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#octavia-feature-support-matrix">15.3.1. Octavia feature support matrix</a></li></ol></li><li class=" leaf"><a href="index%3F.html#plan-octavia-deploy">15.4. Planning your Octavia deployment</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#config-octavia-certs-keys">15.4.1. Configuring Octavia certificates and keys</a></li></ol></li><li class=" leaf"><a href="index%3F.html#enable-amphora-active-standby-topo">15.5. Enabling Amphora active-standby topology</a></li><li class=" leaf"><a href="index%3F.html#deploy-octavia">15.6. Deploying Octavia</a></li><li class=" leaf"><a href="index%3F.html#change-octavia-default-settings">15.7. Changing Octavia default settings</a></li><li class=" leaf"><a href="index%3F.html#secure_a_load_balancer_with_an_access_control_list">15.8. Secure a load balancer with an access control list</a></li><li class=" leaf"><a href="index%3F.html#config-http-load-balancer">15.9. Configuring an HTTP load balancer</a></li><li class=" leaf"><a href="index%3F.html#verify-load-balancer">15.10. Verifying the load balancer</a></li><li class=" leaf"><a href="index%3F.html#overview-tls-term-https-lb">15.11. Overview of TLS-terminated HTTPS load balancer</a></li><li class=" leaf"><a href="index%3F.html#create-tls-term-https-lb">15.12. Creating a TLS-terminated HTTPS load balancer</a></li><li class=" leaf"><a href="index%3F.html#create-tls-term-https-lb-sni">15.13. Creating a TLS-terminated HTTPS load balancer with SNI</a></li><li class=" leaf"><a href="index%3F.html#create-tls-term-https-lb-same-backend">15.14. Creating HTTP and TLS-terminated HTTPS load balancers on the same back end</a></li><li class=" leaf"><a href="index%3F.html#create-udp-load-balancer">15.15. Creating a UDP load balancer with a health monitor</a></li><li class=" leaf"><a href="index%3F.html#access-amphora-logs">15.16. Accessing Amphora logs</a></li><li class=" leaf"><a href="index%3F.html#update-running-amphora-instances">15.17. Updating running amphora instances</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#overview">15.17.1. Overview</a></li><li class=" leaf"><a href="index%3F.html#prerequisites">15.17.2. Prerequisites</a></li><li class=" leaf"><a href="index%3F.html#update_amphora_instances_with_new_images">15.17.3. Update amphora instances with new images</a></li></ol></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-ipv6">16. Tenant networking with IPv6</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#overview-tenant-network">16.1. Overview of tenant networking</a></li><li class=" leaf"><a href="index%3F.html#ipv6-subnet-options">16.2. IPv6 subnet options</a></li><li class=" leaf"><a href="index%3F.html#create-ipv6-subnet-state-dchpv6">16.3. Create an IPv6 subnet using Stateful DHCPv6</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-quotas">17. Managing tenant quotas</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#config-tenant-quotas">17.1. Configuring tenant quotas</a></li><li class=" leaf"><a href="index%3F.html#l3-quota-options">17.2. L3 quota options</a></li><li class=" leaf"><a href="index%3F.html#firewall-quota-options">17.3. Firewall quota options</a></li><li class=" leaf"><a href="index%3F.html#security-group-quota-options">17.4. Security group quota options</a></li><li class=" leaf"><a href="index%3F.html#management-quota-options">17.5. Management quota options</a></li></ol></li><li class=" leaf"><a href="index%3F.html#deploy-routed-prov-networks">18. Deploying routed provider networks</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#advantages-routed-prov-networks">18.1. Advantages of routed provider networks</a></li><li class=" leaf"><a href="index%3F.html#fundamentals-prov-networks">18.2. Fundamentals of routed provider networks</a></li><li class=" leaf"><a href="index%3F.html#ref_limitations_routed_prov_networks">18.3. Limitations of routed provider networks</a></li><li class=" leaf"><a href="index%3F.html#prepare-routed-prov-network">18.4. Preparing for a routed provider network</a></li><li class=" leaf"><a href="index%3F.html#create-routed-prov-network">18.5. Creating a routed provider network</a></li><li class=" leaf"><a href="index%3F.html#migrate-nonrouted-routed-prov-network">18.6. Migrating a non-routed network to a routed provider network</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-allowed-address-pairs">19. Configuring allowed address pairs</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#overview-allow-addr-pairs">19.1. Overview of allowed address pairs</a></li><li class=" leaf"><a href="index%3F.html#create-port-allow-addr-pairs">19.2. Creating a port and allowing one address pair</a></li><li class=" leaf"><a href="index%3F.html#add-allow-addr-pairs">19.3. Adding allowed address pairs</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-l3-ha">20. Configuring Layer 3 high availability (HA)</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#network-without-ha">20.1. OpenStack Networking without high availability (HA)</a></li><li class=" leaf"><a href="index%3F.html#overview-l3-ha">20.2. Overview of Layer 3 high availability (HA)</a></li><li class=" leaf"><a href="index%3F.html#l3-ha-failover-conditions">20.3. Layer 3 high availability (HA) failover conditions</a></li><li class=" leaf"><a href="index%3F.html#tenant-consider-l3-ha">20.4. Tenant considerations for Layer 3 high availability (HA)</a></li><li class=" leaf"><a href="index%3F.html#ha-changes-neutron">20.5. High availability (HA) changes to OpenStack Networking</a></li><li class=" leaf"><a href="index%3F.html#enable-l3-ha-network-nodes">20.6. Enabling Layer 3 high availability (HA) on OpenStack Networking nodes</a></li><li class=" leaf"><a href="index%3F.html#review-ha-node-config">20.7. Reviewing high availability (HA) node configurations</a></li></ol></li><li class=" leaf"><a href="index%3F.html#sec-tag-vnic">21. Identifying virtual devices with tags</a><ol class="menu"><li class=" leaf"><a href="index%3F.html#overview-virt-device-tag">21.1. Overview of virtual device tagging</a></li><li class=" leaf"><a href="index%3F.html#tag-virt-devices">21.2. Tagging virtual devices</a></li></ol></li></ol></li><li class=" leaf"><a href="index%3F.html#idm139893205250016">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Networking Guide</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm139893204921360"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat OpenStack Platform</span> <span class="productnumber">16.1</span></div><div><h2 class="subtitle">An advanced guide to Red Hat OpenStack Platform Networking</h2></div><div><div xml:lang="en-US" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">OpenStack</span> <span class="othername">Documentation</span> <span class="surname">Team</span></h3><code class="email"><a class="email" href="mailto:rhos-docs@redhat.com">rhos-docs@redhat.com</a></code></div></div></div><div><a href="index%3F.html#idm139893205250016">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				A cookbook for common OpenStack Networking tasks.
			</div></div></div></div><hr/></div><section class="preface" id="idm139893205194944"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p id="preface">
			The OpenStack Networking service (codename <span class="emphasis"><em>neutron</em></span>) is the software-defined networking component of Red Hat OpenStack Platform 16.1.
		</p><div class="formalpara"><p class="title"><strong>Software-defined networking (SDN)</strong></p><p>
				Network administrators can use software-defined networking (SDN) to manage network services through abstraction of lower-level functionality. While server workloads have been migrated into virtual environments, they are still just servers that look for a network connection to send and receive data. SDN meets this need by moving networking equipment (such as routers and switches) into the same virtualized space. If you are already familiar with basic networking concepts, then it is easy to consider that these physical networking concepts have now been virtualized, just like the servers that they connect.
			</p></div><div class="itemizedlist"><p class="title"><strong>Topics covered in this book</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<span class="strong strong"><strong>Preface</strong></span> - Offers a brief definition of software-defined networking (SDN).
				</li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>Part 1</strong></span> - Covers common administrative tasks and basic troubleshooting steps:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							Adding and removing network resources
						</li><li class="listitem">
							Troubleshooting basic networks
						</li><li class="listitem">
							Troubleshooting tenant networks
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>Part 2</strong></span> - Contains cookbook-style scenarios for advanced Red Hat OpenStack Platform Networking features, including:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							Configuring Layer 3 High Availability for virtual routers
						</li><li class="listitem">
							Configuring DVR and other networking features
						</li></ul></div></li></ul></div></section><section class="chapter" id="networking-overview"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Networking overview</h1></div></div></div><section class="section" id="how-networking-works"><div class="titlepage"><div><div><h2 class="title">1.1. How networking works</h2></div></div></div><p>
				The term networking refers to the act of moving information from one computer to another. At the most basic level, this is performed by running a cable between two machines, each with network interface cards (NICs) installed. In the OSI networking model, the cable represents layer 1.
			</p><p>
				Now, if you want more than two computers to get involved in the conversation, you would need to scale out this configuration by adding a device called a switch. Enterprise switches have multiple Ethernet ports where you can connect additional machines. A network of multiple machines is called a Local Area Network (LAN).
			</p><p>
				Because they increase complexity, switches represent another layer of the OSI model, layer two. Each NIC has a unique MAC address number assigned to the hardware, and this number enables machines connected to the same switch to find each other. The switch maintains a list of which MAC addresses are plugged into which ports, so that when one computer attempts to send data to another, the switch knows where they are both situated, and adjusts entries in the CAM (Content Addressable Memory), which monitors of MAC-address-to-port mappings.
			</p><section class="section" id="vlans"><div class="titlepage"><div><div><h3 class="title">1.1.1. VLANs</h3></div></div></div><p>
					You can use VLANs to segment network traffic for computers running on the same switch. This means that you can logically divide your switch by configuring the ports to be members of different networks — they are basically mini-LANs that you can use to separate traffic for security reasons.
				</p><p>
					For example, if your switch has 24 ports in total, you can assign ports 1-6 to VLAN200, and ports 7-18 to VLAN201. As a result, computers connected to VLAN200 are completely separate from those on VLAN201; they cannot communicate directly, and if they wanted to, the traffic must pass through a router as if they were two separate physical switches. Firewalls can also be useful for governing which VLANs can communicate with each other.
				</p></section></section><section class="section" id="connect-lans"><div class="titlepage"><div><div><h2 class="title">1.2. Connecting two LANs together</h2></div></div></div><p>
				If you have two LANs running on two separate switches, and you want them to share information with each other. You have two options for configuring this communication:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong> Use 802.1Q VLAN tagging to configure a single VLAN that spans across both physical switches:</strong></span>
					</p><p class="simpara">
						You must connect one end of a network cable to a port on one switch, connect the other end to a port on the other switch, and then configure these ports as 802.1Q tagged ports (sometimes known as trunk ports). These two switches act as one big logical switch, and the connected computers can find each other.
					</p><p class="simpara">
						The downside to this option is scalability. You can only daisy-chain a limited number of switches until overhead becomes an issue.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Obtain a router and use cables to connect it to each switch:</strong></span>
					</p><p class="simpara">
						The router is aware of the networks configured on both switches. Each end of the cable plugged into the switch receives an IP address, known as the default gateway for that network. A default gateway defines the destination where traffic is sent when it is clear that the destination machine is not on the same LAN as the source machine. By establishing a default gateway, each computer can send traffic to other computers without knowing specific information about the destination. Each computer sends traffic to the default gateway, and the router determines which destination computer receives the traffic. Routing works on layer 3 of the OSI model, and is where the familiar concepts like IP addresses and subnets operate.
					</p></li></ul></div><section class="section" id="firewalls"><div class="titlepage"><div><div><h3 class="title">1.2.1. Firewalls</h3></div></div></div><p>
					Firewalls can filter traffic across multiple OSI layers, including layer 7 (for inspecting actual content). Firewalls are often situated in the same network segments as routers, where they govern the traffic moving between all the networks. Firewalls refer to a predefined set of rules that prescribe which traffic can enter a network. These rules can become very granular, for example:
				</p><p>
					"Servers on <code class="literal">VLAN200</code> may only communicate with computers on <code class="literal">VLAN201</code>, and only on a Thursday afternoon, and only if they are sending encrypted web traffic (HTTPS) in one direction".
				</p><p>
					To help enforce these rules, some firewalls also perform Deep Packet Inspection (DPI) at layers 5-7, whereby they examine the contents of packets to ensure that the packets are legitimate. Hackers can exfiltrate data by having the traffic masquerade as something it is not. DPI is one of the means that you can use to mitigate that threat.
				</p></section></section><section class="section" id="work-network"><div class="titlepage"><div><div><h2 class="title">1.3. Working with OpenStack Networking (neutron)</h2></div></div></div><p>
				These same networking concepts apply in OpenStack, where they are known as Software-defined networking (SDN). The OpenStack Networking (neutron) component provides the API for virtual networking capabilities, and includes switches, routers, and firewalls. The virtual network infrastructure allows your instances to communicate with each other and also externally using the physical network. The Open vSwitch bridge allocates virtual ports to instances, and can span across the network infrastructure to the physical network for incoming and outgoing traffic.
			</p></section><section class="section" id="cidr-format"><div class="titlepage"><div><div><h2 class="title">1.4. Working with CIDR format</h2></div></div></div><p>
				IP addresses are generally first allocated in blocks of subnets. For example, the IP address range <code class="literal">192.168.100.0 - 192.168.100.255</code> with a subnet mask of <code class="literal">255.555.255.0</code> allows for <code class="literal">254</code> IP addresses (the first and last addresses are reserved).
			</p><p>
				These subnets can be represented in a number of ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Common usage:</strong></span>
					</p><p class="simpara">
						Subnet addresses are traditionally displayed using the network address accompanied by the subnet mask:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Network Address: <span class="emphasis"><em>192.168.100.0</em></span>
							</li><li class="listitem">
								Subnet mask: <span class="emphasis"><em>255.255.255.0</em></span>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>CIDR format:</strong></span>
					</p><p class="simpara">
						The subnet mask is shortened into its total number of active bits.
					</p><p class="simpara">
						For example, in <code class="literal">192.168.100.0/24</code>, <code class="literal">/24</code> is a shortened representation of <code class="literal">255.255.255.0</code>, and is a total of the number of flipped bits when converted to binary.
					</p><p class="simpara">
						Also, CIDR format can be used in <code class="literal">ifcfg-xxx</code> scripts instead of the <code class="literal">NETMASK</code> value:
					</p><pre class="screen">#NETMASK=255.255.255.0
PREFIX=24</pre></li></ul></div></section></section><section class="chapter" id="sec-networking-concepts"><div class="titlepage"><div><div><h1 class="title">Chapter 2. OpenStack networking concepts</h1></div></div></div><p>
			OpenStack Networking has system services to manage core services such as routing, DHCP, and metadata. Together, these services are included in the concept of the Controller node, which is a conceptual role assigned to a physical server. A physical server is typically assigned the role of <span class="emphasis"><em>Network node</em></span> and dedicated to the task of managing Layer 3 routing for network traffic to and from instances. In OpenStack Networking, you can have multiple physical hosts performing this role, allowing for redundant service in the event of hardware failure. For more information, see the chapter on <span class="emphasis"><em>Layer 3 High Availability</em></span>.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				Red Hat OpenStack Platform 11 added support for composable roles, allowing you to separate network services into a custom role. However, for simplicity, this guide assumes that a deployment uses the default controller role.
			</p></div></div><section class="section" id="install-networking"><div class="titlepage"><div><div><h2 class="title">2.1. Installing OpenStack Networking (neutron)</h2></div></div></div><p>
				The OpenStack Networking component is installed as part of a Red Hat OpenStack Platform director deployment. For more information about director deployment, see <a class="link" href="https://access.redhat.com/documentation/en/red-hat-openstack-platform/">Director Installation and Usage</a>.
			</p></section><section class="section" id="network-diagram"><div class="titlepage"><div><div><h2 class="title">2.2. OpenStack Networking diagram</h2></div></div></div><p>
				This diagram depicts a sample OpenStack Networking deployment, with a dedicated OpenStack Networking node performing layer 3 routing and DHCP, and running the advanced service load balancing as a Service (LBaaS). Two Compute nodes run the Open vSwitch (openvswitch-agent) and have two physical network cards each, one for tenant traffic, and another for management connectivity. The OpenStack Networking node has a third network card specifically for provider traffic:
			</p><div class="informalfigure"><div class="mediaobject"><img src="example-network.png" alt="example network"/></div></div></section><section class="section" id="security-groups"><div class="titlepage"><div><div><h2 class="title">2.3. Security groups</h2></div></div></div><p>
				Security groups and rules filter the type and direction of network traffic that neutron ports send and receive. This provides an additional layer of security to complement any firewall rules present on the compute instance. The security group is a container object with one or more security rules. A single security group can manage traffic to multiple compute instances.
			</p><p>
				Ports created for floating IP addresses, OpenStack Networking LBaaS VIPs, and instances are associated with a security group. If you do not specify a security group, then the port is associated with the default security group. By default, this group drops all inbound traffic and allows all outbound traffic. However, traffic flows between instances that are members of the default security group, because the group has a remote group ID that points to itself.
			</p><p>
				To change the filtering behavior of the default security group, you can add security rules to the group, or create entirely new security groups.
			</p></section><section class="section" id="open-vswitch"><div class="titlepage"><div><div><h2 class="title">2.4. Open vSwitch</h2></div></div></div><p>
				Open vSwitch (OVS) is a software-defined networking (SDN) virtual switch similar to the Linux software bridge. OVS provides switching services to virtualized networks with support for industry standard , OpenFlow, and sFlow. OVS can also integrate with physical switches using layer 2 features, such as STP, LACP, and 802.1Q VLAN tagging. Open vSwitch version 1.11.0-1.el6 or later also supports tunneling with VXLAN and GRE.
			</p><p>
				For more information about network interface bonds, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/#overcloud-network-interface-bonding">Network Interface Bonding chapter of the Advanced Overcloud Customization</a> guide.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To mitigate the risk of network loops in OVS, only a single interface or a single bond can be a member of a given bridge. If you require multiple bonds or interfaces, you can configure multiple bridges.
				</p></div></div></section><section class="section" id="modular-layer2-network"><div class="titlepage"><div><div><h2 class="title">2.5. Modular layer 2 (ML2) networking</h2></div></div></div><p>
				ML2 is the OpenStack Networking core plug-in introduced in the OpenStack Havana release. Superseding the previous model of monolithic plug-ins, the ML2 modular design enables the concurrent operation of mixed network technologies. The monolithic Open vSwitch and Linux Bridge plug-ins have been deprecated and removed; their functionality is now implemented by ML2 mechanism drivers.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					ML2 is the default OpenStack Networking plug-in, with OVN configured as the default mechanism driver.
				</p></div></div><section class="section" id="reason-behind-ml2"><div class="titlepage"><div><div><h3 class="title">2.5.1. The reasoning behind ML2</h3></div></div></div><p>
					Previously, OpenStack Networking deployments could use only the plug-in selected at implementation time. For example, a deployment running the Open vSwitch (OVS) plug-in was required to use the OVS plug-in exclusively. The monolithic plug-in did not support the simultaneously use of another plug-in such as linuxbridge. This limitation made it difficult to meet the needs of environments with heterogeneous requirements.
				</p></section><section class="section" id="ml2-network-types"><div class="titlepage"><div><div><h3 class="title">2.5.2. ML2 network types</h3></div></div></div><p>
					Multiple network segment types can be operated concurrently. In addition, these network segments can interconnect using ML2 support for multi-segmented networks. Ports are automatically bound to the segment with connectivity; it is not necessary to bind ports to a specific segment. Depending on the mechanism driver, ML2 supports the following network segment types:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							flat
						</li><li class="listitem">
							GRE
						</li><li class="listitem">
							local
						</li><li class="listitem">
							VLAN
						</li><li class="listitem">
							VXLAN
						</li><li class="listitem">
							Geneve
						</li></ul></div><p>
					Enable Type drivers in the ML2 section of the <span class="strong strong"><strong>ml2_conf.ini</strong></span> file. For example:
				</p><pre class="screen">[ml2]
type_drivers = local,flat,vlan,gre,vxlan,geneve</pre></section><section class="section" id="ml2-mech-drivers"><div class="titlepage"><div><div><h3 class="title">2.5.3. ML2 mechanism drivers</h3></div></div></div><p>
					Plug-ins are now implemented as mechanisms with a common code base. This approach enables code reuse and eliminates much of the complexity around code maintenance and testing.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For the list of supported mechanism drivers, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/release_notes/#certified_drivers">Release Notes</a>.
					</p></div></div><p>
					The default mechanism driver is OVN. Mechanism drivers are enabled in the ML2 section of the <span class="strong strong"><strong>ml2_conf.ini</strong></span> file. For example:
				</p><pre class="screen">[ml2]
mechanism_drivers = ovn</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Red Hat OpenStack Platform director manages these settings. Do not change them manually.
					</p></div></div></section></section><section class="section" id="ml2-type-mech-driver-compat"><div class="titlepage"><div><div><h2 class="title">2.6. ML2 type and mechanism driver compatibility</h2></div></div></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893205356176" scope="col">Mechanism Driver</th><th colspan="5" align="left" valign="top" id="idm139893205355088" scope="col">Type Driver</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893205356176"> </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								flat
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								gre
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								vlan
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								vxlan
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								geneve
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139893205356176"> <p>
								ovn
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139893205356176"> <p>
								openvswitch
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm139893205355088"> <p>
								no
							</p>
							 </td></tr></tbody></table></div></section><section class="section" id="limits-ml2ovn-network-driver"><div class="titlepage"><div><div><h2 class="title">2.7. Limits of the ML2/OVN mechanism driver</h2></div></div></div><p>
				Some features available with the ML2/OVS mechanism driver are not yet supported with the ML2/OVN mechanism driver.
			</p><section class="section" id="ml2_ovs_features_not_yet_supported_by_ml2_ovn"><div class="titlepage"><div><div><h3 class="title">2.7.1. ML2/OVS features not yet supported by ML2/OVN</h3></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 21%; " class="col_1"><!--Empty--></col><col style="width: 45%; " class="col_2"><!--Empty--></col><col style="width: 34%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893210202016" scope="col">Feature</th><th align="left" valign="top" id="idm139893210200928" scope="col">Notes</th><th align="left" valign="top" id="idm139893210199840" scope="col">Track this Feature</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893210202016"> <p>
									Fragmentation needed packets — ICMP/UDP Jumbo Frames
								</p>
								 </td><td align="left" valign="top" headers="idm139893210200928"> <p>
									OVN does not yet support sending ICMP "fragmentation needed" packets. Larger ICMP/UDP packets that require fragmentation do not work with ML2/OVN as they would with the ML2/OVS driver implementation. TCP traffic is handled by maximum segment sized (MSS) clamping.
								</p>
								 </td><td align="left" valign="top" headers="idm139893210199840"> <p>
									<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1547074">https://bugzilla.redhat.com/show_bug.cgi?id=1547074</a> (ovn-network)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893210202016"> <p>
									Port Forwarding
								</p>
								 </td><td align="left" valign="top" headers="idm139893210200928"> <p>
									OVN does not support port forwarding.
								</p>
								 </td><td align="left" valign="top" headers="idm139893210199840"> <p>
									<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1654608">https://bugzilla.redhat.com/show_bug.cgi?id=1654608</a>
								</p>
								 <p>
									<a class="link" href="https://blueprints.launchpad.net/neutron/+spec/port-forwarding">https://blueprints.launchpad.net/neutron/+spec/port-forwarding</a>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893210202016"> <p>
									Security Groups Logging API
								</p>
								 </td><td align="left" valign="top" headers="idm139893210200928"> <p>
									ML2/OVN does not provide a log file that logs security group events such as an instance trying to execute restricted operations or access restricted ports in remote servers.
								</p>
								 </td><td align="left" valign="top" headers="idm139893210199840"> <p>
									<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1619266">https://bugzilla.redhat.com/show_bug.cgi?id=1619266</a>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893210202016"> <p>
									Multicast
								</p>
								 </td><td align="left" valign="top" headers="idm139893210200928"> <p>
									When using ML2/OVN as the integration bridge, multicast traffic is treated as broadcast traffic.
								</p>
								 <p>
									The integration bridge operates in FLOW mode, so IGMP snooping is not available. To support this, core OVN must support IGMP snooping.
								</p>
								 </td><td align="left" valign="top" headers="idm139893210199840"> <p>
									<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1575512">https://bugzilla.redhat.com/show_bug.cgi?id=1575512</a>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893210202016"> <p>
									Provisioning Baremetal Machines with OVN DHCP
								</p>
								 </td><td align="left" valign="top" headers="idm139893210200928"> <p>
									The built-in DHCP server on OVN presently can not provision baremetal nodes. It cannot serve DHCP for the provisioning networks. Chainbooting iPXE requires tagging (<code class="literal">--dhcp-match</code> in dnsmasq), which is not supported in the OVN DHCP server.
								</p>
								 </td><td align="left" valign="top" headers="idm139893210199840"> <p>
									<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1622154">https://bugzilla.redhat.com/show_bug.cgi?id=1622154</a>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893210202016"> <p>
									OVS_DPDK
								</p>
								 </td><td align="left" valign="top" headers="idm139893210200928"> <p>
									OVS_DPDK is presently not supported with OVN.
								</p>
								 </td><td align="left" valign="top" headers="idm139893210199840"> <p>
									<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1844615">https://bugzilla.redhat.com/show_bug.cgi?id=1844615</a>
								</p>
								 </td></tr></tbody></table></div></section></section><section class="section" id="ml2ovs-to-ml2ovn-migration-exceptions"><div class="titlepage"><div><div><h2 class="title">2.8. ML2/OVS to ML2/OVN migration: validated and prohibited scenarios</h2></div></div></div><p>
				Migration of the ML2 mechanism driver is a substantial change with broad consequences in a deployment. Red Hat continues to test and refine migration scenarios. Make sure that your scenario is validated before attempting a migration.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					An ML2/OVS to ML2/OVN migration alters the environment in ways that can not be reversed without a backup and restore. A failed or interrupted migration can leave the OpenStack environment inoperable. Before migrating in a production environment, test the migration in a stage environment that closely resembles your production environment, and create a reliable backup of your deployment.
				</p></div></div><section class="section" id="validated_ml2_ovs_to_ml2_ovn_migration_scenarios"><div class="titlepage"><div><div><h3 class="title">2.8.1. Validated ML2/OVS to ML2/OVN migration scenarios</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">DVR to DVR</span></dt><dd><p class="simpara">
								Start: RHOSP 16.1.1 with OVS with DVR. Geneve project (tenant) networks.
							</p><p class="simpara">
								End: RHOSP 16.1.1 with OVN with DVR. Geneve project (tenant) networks.
							</p><p class="simpara">
								SR-IOV and TLS-everywhere were not present in the starting environment or added during or after the migration.
							</p></dd><dt><span class="term">Centralized routing + SR-IOV with virtual function (VF) ports only</span></dt><dd><p class="simpara">
								Start: RHOSP 16.1.1 with OVS (no DVR)and SR-IOV.
							</p><p class="simpara">
								End: RHOSP 16.1.1 with OVN (no DVR) and SR-IOV.
							</p><p class="simpara">
								Workloads used only SR-IOV virtual function (VF) ports. SR-IOV phyical function (PF) ports caused migration failure.
							</p></dd></dl></div></section><section class="section" id="ml2_ovs_to_ml2_ovn_migration_scenarios_that_failed_in_tests"><div class="titlepage"><div><div><h3 class="title">2.8.2. ML2/OVS to ML2/OVN migration scenarios that failed in tests</h3></div></div></div><p>
					Do not perform the ML2/OVS to ML2/OVN migration in the following scenarios until Red Hat announces that the underlying issues are resolved.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Fast forward upgrade (FFU) from OSP13 to OSP16.1</span></dt><dd>
								Do not perform an ML2/OVS to ML2/OVN migration after an FFU from RHOPS13 to RHOSP16. To track progress on this issue, see <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1879923">https://bugzilla.redhat.com/show_bug.cgi?id=1879923</a>.
							</dd><dt><span class="term">SR-IOV with physical function (PF) ports</span></dt><dd>
								Migration tests failed when any workload uses an SR-IOV PF port. To track progress on this issue, see <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1879546">https://bugzilla.redhat.com/show_bug.cgi?id=1879546</a>.
							</dd><dt><span class="term">Transport layer security everywhere (TLS-e)</span></dt><dd>
								Migration tests failed when the OVS deployment had TLS-e enabled. If your OVS deployment has TLE-e enabled, do not perform an ML2/OVS to ML2/OVN migration. To track progress on this issue, see <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1879097">https://bugzilla.redhat.com/show_bug.cgi?id=1879097</a>, <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1877756">https://bugzilla.redhat.com/show_bug.cgi?id=1877756</a>, and <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1872268">https://bugzilla.redhat.com/show_bug.cgi?id=1872268</a>.
							</dd><dt><span class="term">OVS uses trunk ports</span></dt><dd>
								If you have an ML2/OVS deployment that uses trunk ports, do not perform an ML2/OVS to ML2/OVN migration. The migration does not properly set up the trunked ports in the OVN environment. To track progress on this issue, see <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1857652">https://bugzilla.redhat.com/show_bug.cgi?id=1857652</a>.
							</dd><dt><span class="term">Centralized routing and VLAN project (tenant) networks</span></dt><dd>
								If your ML2/OVS deployment uses centralized routing and VLAN project (tenant) networks, do not migrate to ML2/OVN with DVR. You can migrate to ML2/OVN with centralized routing. To track progress on this issue, see <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1704596">https://bugzilla.redhat.com/show_bug.cgi?id=1704596</a>.
							</dd></dl></div></section></section><section class="section" id="ml2-ovs-not-ovn"><div class="titlepage"><div><div><h2 class="title">2.9. Using the ML2/OVS mechanism driver instead of the default ML2/OVN driver</h2></div></div></div><p>
				If your application requires the ML2/OVS mechanism driver, you can deploy the overcloud with the environment file <code class="literal">neutron-ovs.yaml</code>, which disables the default ML2/OVN mechanism driver and enables ML2/OVS.
			</p><section class="section" id="using_ml2_ovs_in_a_new_rhosp_16_1_deployment"><div class="titlepage"><div><div><h3 class="title">2.9.1. Using ML2/OVS in a new RHOSP 16.1 deployment</h3></div></div></div><p>
					In the overcloud deployment command, include the environment file <code class="literal">neutron-ovs.yaml</code> as shown in the following example.
				</p><pre class="screen">-e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-ovs.yaml</pre><p>
					For more information about using environment files, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/index#sect-Including_Environment_Files_in_Overcloud_Creation">Including Environment Files in Overcloud Creation</a> in the <span class="emphasis"><em>Advanced Overcloud Customization</em></span> guide.
				</p></section><section class="section" id="upgrading_from_ml2_ovs_in_a_previous_rhosp_to_ml2_ovs_in_rhosp_16_1"><div class="titlepage"><div><div><h3 class="title">2.9.2. Upgrading from ML2/OVS in a previous RHOSP to ML2/OVS in RHOSP 16.1</h3></div></div></div><p>
					To keep using ML2/OVS after an upgrade from a previous version of RHOSP that uses ML2/OVS, follow Red Hat’s upgrade procedure as documented, and do not perform the ML2/OVS-to-ML2/OVN migration.
				</p><p>
					The upgrade procedure includes adding <code class="literal">-e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-ovs.yaml</code> to the overcloud deployment command.
				</p></section></section><section class="section" id="config-l2pop-driver"><div class="titlepage"><div><div><h2 class="title">2.10. Configuring the L2 population driver</h2></div></div></div><p>
				The L2 Population driver enables broadcast, multicast, and unicast traffic to scale out on large overlay networks. By default, Open vSwitch GRE and VXLAN replicate broadcasts to every agent, including those that do not host the destination network. This design requires the acceptance of significant network and processing overhead. The alternative design introduced by the L2 Population driver implements a partial mesh for ARP resolution and MAC learning traffic; it also creates tunnels for a particular network only between the nodes that host the network. This traffic is sent only to the necessary agent by encapsulating it as a targeted unicast.
			</p><p>
				To enable the L2 Population driver, complete the following steps:
			</p><p>
				<span class="strong strong"><strong>1.</strong></span> Enable the L2 population driver by adding it to the list of mechanism drivers. You also must enable at least one tunneling driver: either GRE, VXLAN, or both. Add the appropriate configuration options to the ml2_conf.ini file:
			</p><pre class="screen">[ml2]
type_drivers = local,flat,vlan,gre,vxlan,geneve
mechanism_drivers = l2population</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Neutron’s Linux Bridge ML2 driver and agent were deprecated in Red Hat OpenStack Platform 11. The Open vSwitch (OVS) plugin OpenStack Platform director default, and is recommended by Red Hat for general usage.
				</p></div></div><p>
				<span class="strong strong"><strong>2.</strong></span> Enable L2 population in the openvswitch_agent.ini file. Enable it on each node that contains the L2 agent:
			</p><pre class="screen">[agent]
l2_population = True</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To install ARP reply flows, configure the <code class="literal">arp_responder</code> flag:
				</p><pre class="screen">[agent]
l2_population = True
arp_responder = True</pre></div></div></section><section class="section" id="enable-sriov-ovn"><div class="titlepage"><div><div><h2 class="title">2.11. Enabling SR-IOV with ML2/OVN and native OVN DHCP</h2></div></div></div><p>
				You can use SR-IOV in an ML2/OVN deployment with native OVN DHCP.
			</p><div class="formalpara"><p class="title"><strong>Limitations</strong></p><p>
					The following limitations apply to the use of SR-IOV with ML2/OVN and native OVN DHCP in this release.
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						All external ports are scheduled on a single gateway node because there is only one HA Chassis Group for all of the ports.
					</li><li class="listitem">
						Routing on VLAN tenant network does not work with SR-IOV because the external ports are not co-located with the logical router’s gateway ports. See <a class="link" href="https://bugs.launchpad.net/neutron/+bug/1875852">https://bugs.launchpad.net/neutron/+bug/1875852</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You know how to deploy custom roles. For more information see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html/advanced_overcloud_customization/chap-roles">Composable Services and Custom Roles</a> in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html-single/advanced_overcloud_customization/index">Advanced Overcloud Customization</a> guide.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that the neutron DHCP agent is disabled in your deployment. For example, in the file <code class="literal">neutron-ovn-drv-ha.yaml</code> include the following line.
					</p><pre class="literallayout">OS::TripleO::Services::NeutronDhcpAgent: OS::Heat::None</pre></li><li class="listitem"><p class="simpara">
						Deploy the custom role that matches your node configuration.
					</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893204091184" scope="col">Node Configuration</th><th align="left" valign="top" id="idm139893204090096" scope="col">Custom role</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893204091184"> <p>
										Standalone networker and controller nodes
									</p>
									 </td><td align="left" valign="top" headers="idm139893204090096"> <p>
										NetworkerSriov
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893204091184"> <p>
										Co-located networker and controller nodes
									</p>
									 </td><td align="left" valign="top" headers="idm139893204090096"> <p>
										ControllerSriov
									</p>
									 </td></tr></tbody></table></div></li><li class="listitem"><p class="simpara">
						If you deployed NetworkerSriov in a configuration with standalone networker and controller nodes, perform the following parameter modifications in an environment file such as neutron-ovn-dvr-ha.yaml:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Clear OVNCMSOptions on controller nodes.
							</p><pre class="literallayout">ControllerParameters:
    OVNCMSOptions: ""</pre></li><li class="listitem"><p class="simpara">
								Set NetworkerSriovParameters on networker nodes.
							</p><pre class="literallayout">NetworkerSriovParameters:
    OVNCMSOptions: "enable-chassis-as-gw"</pre></li><li class="listitem"><p class="simpara">
								Remove NetworkerParameters from networker nodes if present.
							</p><pre class="literallayout">NetworkerParameters:
    OVNCMSOptions: ""</pre></li></ol></div></li><li class="listitem">
						Deploy the custom role ComputeSriov.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that ovn_metatdata_agent is running on controller and networker nodes.
					</p><pre class="literallayout">[heat-admin@controller-0 ~]$ sudo podman ps | grep ovn_metadata</pre><p class="simpara">
						Expect output similar to the following example.
					</p><pre class="literallayout">a65125d9588d  undercloud-0.ctlplane.localdomain:8787/rh-osbs/rhosp16-openstack-neutron-metadata-agent-ovn:16.1_20200813.1  kolla_start           23 hours ago  Up 21 hours ago         ovn_metadata_agent</pre></li><li class="listitem"><p class="simpara">
						Ensure that controller/networker nodes have been configured as gateways for OVS.
					</p><pre class="literallayout">[heat-admin@controller-0 ~]$ sudo ovs-vsctl get Open_Vswitch .</pre><p class="simpara">
						Expect output similar to the following example.
					</p><pre class="literallayout">external_ids:ovn-cms-options
    enable-chassis-as-gw</pre></li><li class="listitem"><p class="simpara">
						Ensure that neutron_sriov_agent is running on compute nodes.
					</p><pre class="literallayout">[heat-admin@controller-0 ~]sudo podman ps | grep neutron_sriov_agent</pre><p class="simpara">
						Expect output similar to the following example.
					</p><pre class="literallayout">f54cbbf4523a  undercloud-0.ctlplane.localdomain:8787/rh-osbs/rhosp16-openstack-neutron-sriov-agent:16.1_20200813.1
kolla_start  23 hours ago  Up 21 hours ago         neutron_sriov_agent</pre></li><li class="listitem"><p class="simpara">
						Ensure that network-available SR-IOV NICs have been successfully detected.
					</p><pre class="literallayout">[heat-admin@controller-0 ~]$ sudo podman exec -uroot galera-bundle-podman-0 mysql nova -e 'select hypervisor_hostname,pci_stats from compute_nodes;'</pre><p class="simpara">
						Expect output similar to the following example.
					</p><pre class="literallayout">computesriov-1.localdomain	{... {"dev_type": "type-PF", "physical_network": "datacentre", "trusted": "true"}, "count": 1}, ... {"dev_type": "type-VF", "physical_network": "datacentre", "trusted": "true", "parent_ifname": "enp7s0f3"}, "count": 5}, ...}
computesriov-0.localdomain	{... {"dev_type": "type-PF", "physical_network": "datacentre", "trusted": "true"}, "count": 1}, ... {"dev_type": "type-VF", "physical_network": "datacentre", "trusted": "true", "parent_ifname": "enp7s0f3"}, "count": 5}, ...}</pre></li></ol></div></section><section class="section" id="network-services"><div class="titlepage"><div><div><h2 class="title">2.12. OpenStack Networking services</h2></div></div></div><p>
				By default, Red Hat OpenStack Platform includes components that integrate with the ML2 and Open vSwitch plugin to provide networking functionality in your deployment:
			</p><section class="section" id="l3-agent"><div class="titlepage"><div><div><h3 class="title">2.12.1. L3 agent</h3></div></div></div><p>
					The L3 agent is part of the <code class="literal">openstack-neutron</code> package. Use network namespaces to provide each project with its own isolated layer 3 routers, which direct traffic and provide gateway services for the layer 2 networks. The L3 agent assists with managing these routers. The nodes that host the L3 agent must not have a manually-configured IP address on a network interface that is connected to an external network. Instead there must be a range of IP addresses from the external network that are available for use by OpenStack Networking. Neutron assigns these IP addresses to the routers that provide the link between the internal and external networks. The IP range that you select must be large enough to provide a unique IP address for each router in the deployment as well as each floating IP.
				</p></section><section class="section" id="dhcp-agent"><div class="titlepage"><div><div><h3 class="title">2.12.2. DHCP agent</h3></div></div></div><p>
					The OpenStack Networking DHCP agent manages the network namespaces that are spawned for each project subnet to act as DHCP server. Each namespace runs a dnsmasq process that can allocate IP addresses to virtual machines on the network. If the agent is enabled and running when a subnet is created then by default that subnet has DHCP enabled.
				</p></section><section class="section" id="open-vswitch-agent"><div class="titlepage"><div><div><h3 class="title">2.12.3. Open vSwitch agent</h3></div></div></div><p>
					The Open vSwitch (OVS) neutron plug-in uses its own agent, which runs on each node and manages the OVS bridges. The ML2 plugin integrates with a dedicated agent to manage L2 networks. By default, Red Hat OpenStack Platform uses <code class="literal">ovs-agent</code>, which builds overlay networks using OVS bridges.
				</p></section></section><section class="section" id="tenant-provider-networks"><div class="titlepage"><div><div><h2 class="title">2.13. Tenant and provider networks</h2></div></div></div><p>
				The following diagram presents an overview of the tenant and provider network types, and illustrates how they interact within the overall OpenStack Networking topology:
			</p><div class="informalfigure"><div class="mediaobject"><img src="network-types.png" alt="network types"/></div></div><section class="section" id="tenant-networks"><div class="titlepage"><div><div><h3 class="title">2.13.1. Tenant networks</h3></div></div></div><p>
					Users create tenant networks for connectivity within projects. Tenant networks are fully isolated by default and are not shared with other projects. OpenStack Networking supports a range of tenant network types:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Flat</strong></span> - All instances reside on the same network, which can also be shared with the hosts. No VLAN tagging or other network segregation occurs.
						</li><li class="listitem">
							<span class="strong strong"><strong>VLAN</strong></span> - OpenStack Networking allows users to create multiple provider or tenant networks using VLAN IDs (802.1Q tagged) that correspond to VLANs present in the physical network. This allows instances to communicate with each other across the environment. They can also communicate with dedicated servers, firewalls, load balancers and other network infrastructure on the same layer 2 VLAN.
						</li><li class="listitem">
							<span class="strong strong"><strong>VXLAN and GRE tunnels</strong></span> - VXLAN and GRE use network overlays to support private communication between instances. An OpenStack Networking router is required to enable traffic to traverse outside of the GRE or VXLAN tenant network. A router is also required to connect directly-connected tenant networks with external networks, including the Internet; the router provides the ability to connect to instances directly from an external network using floating IP addresses. VXLAN and GRE type drivers are compatible with the ML2/OVS mechanism driver.
						</li><li class="listitem">
							<span class="strong strong"><strong>GENEVE tunnels</strong></span> - GENEVE recognizes and accommodates changing capabilities and needs of different devices in network virtualization. It provides a framework for tunneling rather than being prescriptive about the entire system. Geneve defines the content of the metadata flexibly that is added during encapsulation and tries to adapt to various virtualization scenarios. It uses UDP as its transport protocol and is dynamic in size using extensible option headers. Geneve supports unicast, multicast, and broadcast. The GENEVE type driver is compatible with the ML2/OVN mechanism driver.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can configure QoS policies for tenant networks. For more information, see <a class="xref" href="index%3F.html#sec-qos" title="Chapter 10. Configuring Quality of Service (QoS) policies">Chapter 10, <em>Configuring Quality of Service (QoS) policies</em></a>.
					</p></div></div></section><section class="section" id="provider-networks"><div class="titlepage"><div><div><h3 class="title">2.13.2. Provider networks</h3></div></div></div><p>
					The OpenStack administrator creates provider networks. Provider networks map directly to an existing physical network in the data center. Useful network types in this category include flat (untagged) and VLAN (802.1Q tagged). You can also share provider networks among tenants as part of the network creation process.
				</p><section class="section" id="flat-provider-networks"><div class="titlepage"><div><div><h4 class="title">2.13.2.1. Flat provider networks</h4></div></div></div><p>
						You can use flat provider networks to connect instances directly to the external network. This is useful if you have multiple physical networks (for example, <span class="emphasis"><em>physnet1</em></span> and <span class="emphasis"><em>physnet2</em></span>) and separate physical interfaces (<span class="emphasis"><em>eth0 → physnet1</em></span> and <span class="emphasis"><em>eth1 → physnet2</em></span>), and intend to connect each Compute and Network node to those external networks. To use multiple vlan-tagged interfaces on a single interface to connect to multiple provider networks, see <a class="xref" href="index%3F.html#Using-VLAN-Provider-Networks" title="7.3. Using VLAN provider networks">Section 7.3, “Using VLAN provider networks”</a>.
					</p></section><section class="section" id="config-network-controller-nodes"><div class="titlepage"><div><div><h4 class="title">2.13.2.2. Configuring networking for Controller nodes</h4></div></div></div><p>
						<span class="strong strong"><strong>1.</strong></span> Edit <span class="emphasis"><em>/etc/neutron/plugin.ini</em></span> (symbolic link to <span class="emphasis"><em>/etc/neutron/plugins/ml2/ml2_conf.ini</em></span>) to add <code class="literal">flat</code> to the existing list of values and set <code class="literal">flat_networks</code> to <code class="literal">*</code>. For example:
					</p><pre class="screen">type_drivers = vxlan,flat
flat_networks =*</pre><p>
						<span class="strong strong"><strong>2.</strong></span> Create an external network as a flat network and associate it with the configured <span class="emphasis"><em>physical_network</em></span>. Configure it as a shared network (using <code class="literal">--share</code>) to let other users create instances that connect to the external network directly.
					</p><pre class="screen"># openstack network create --share --provider-network-type flat --provider-physical-network physnet1 --external public01</pre><p>
						<span class="strong strong"><strong>3.</strong></span> Create a subnet using the <code class="literal">openstack subnet create</code> command, or the dashboard. For example:
					</p><pre class="screen"># openstack subnet create --no-dhcp --allocation-pool start=192.168.100.20,end=192.168.100.100 --gateway 192.168.100.1 --network public01 public_subnet</pre><p>
						<span class="strong strong"><strong>4.</strong></span> Restart the <code class="literal">neutron-server</code> service to apply the change:
					</p><pre class="screen">systemctl restart tripleo_neutron_api</pre></section><section class="section" id="config-network-compute-nodes"><div class="titlepage"><div><div><h4 class="title">2.13.2.3. Configuring networking for the Network and Compute nodes</h4></div></div></div><p>
						Complete the following steps on the Network node and Compute nodes to connect the nodes to the external network, and allow instances to communicate directly with the external network.
					</p><p>
						<span class="strong strong"><strong>1.</strong></span> Create an external network bridge (br-ex) and add an associated port (eth1) to it:
					</p><p>
						Create the external bridge in <span class="emphasis"><em>/etc/sysconfig/network-scripts/ifcfg-br-ex</em></span>:
					</p><pre class="screen">DEVICE=br-ex
TYPE=OVSBridge
DEVICETYPE=ovs
ONBOOT=yes
NM_CONTROLLED=no
BOOTPROTO=none</pre><p>
						In <span class="emphasis"><em>/etc/sysconfig/network-scripts/ifcfg-eth1</em></span>, configure <code class="literal">eth1</code> to connect to <code class="literal">br-ex</code>:
					</p><pre class="screen">DEVICE=eth1
TYPE=OVSPort
DEVICETYPE=ovs
OVS_BRIDGE=br-ex
ONBOOT=yes
NM_CONTROLLED=no
BOOTPROTO=none</pre><p>
						Reboot the node or restart the network service for the changes to take effect.
					</p><p>
						<span class="strong strong"><strong>2.</strong></span> Configure physical networks in <span class="emphasis"><em>/etc/neutron/plugins/ml2/openvswitch_agent.ini</em></span> and map bridges to the physical network:
					</p><pre class="screen">bridge_mappings = physnet1:br-ex</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For more information on bridge mappings, see <a class="xref" href="index%3F.html#bridge-mappings" title="Chapter 11. Configuring bridge mappings">Chapter 11, <em>Configuring bridge mappings</em></a>.
						</p></div></div><p>
						<span class="strong strong"><strong>3.</strong></span> Restart the <span class="emphasis"><em>neutron-openvswitch-agent</em></span> service on both the network and compute nodes to apply the changes:
					</p><pre class="screen">systemctl restart neutron-openvswitch-agent</pre></section><section class="section" id="config-network-node"><div class="titlepage"><div><div><h4 class="title">2.13.2.4. Configuring the Network node</h4></div></div></div><p>
						<span class="strong strong"><strong>1.</strong></span> Set <code class="literal">external_network_bridge =</code> to an empty value in <span class="emphasis"><em>/etc/neutron/l3_agent.ini</em></span>:
					</p><p>
						Setting <code class="literal">external_network_bridge =</code> to an empty value allows multiple external network bridges. OpenStack Networking creates a patch from each bridge to <code class="literal">br-int</code>.
					</p><pre class="screen">external_network_bridge =</pre><p>
						<span class="strong strong"><strong>2.</strong></span> Restart <code class="literal">neutron-l3-agent</code> for the changes to take effect.
					</p><pre class="screen">systemctl restart neutron-l3-agent</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If there are multiple flat provider networks, then each of them must have a separate physical interface and bridge to connect them to the external network. Configure the <code class="literal">ifcfg-*</code> scripts appropriately and use a comma-separated list for each network when specifying the mappings in the <code class="literal">bridge_mappings</code> option. For more information on bridge mappings, see <a class="xref" href="index%3F.html#bridge-mappings" title="Chapter 11. Configuring bridge mappings">Chapter 11, <em>Configuring bridge mappings</em></a>.
						</p></div></div></section></section></section><section class="section" id="l2-l3-network"><div class="titlepage"><div><div><h2 class="title">2.14. Layer 2 and layer 3 networking</h2></div></div></div><p>
				When designing your virtual network, anticipate where the majority of traffic is going to be sent. Network traffic moves faster within the same logical network, rather than between multiple logical networks. This is because traffic between logical networks (using different subnets) must pass through a router, resulting in additional latency.
			</p><p>
				Consider the diagram below which has network traffic flowing between instances on separate VLANs:
			</p><p>
				<span class="inlinemediaobject"><img src="layers.png" alt="layers"/></span>

			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Even a high performance hardware router adds latency to this configuration.
				</p></div></div><section class="section" id="use-switch-where-possible"><div class="titlepage"><div><div><h3 class="title">2.14.1. Use switching where possible</h3></div></div></div><p>
					Because switching occurs at a lower level of the network (layer 2) it can function faster than the routing that occurs at layer 3. Design as few hops as possible between systems that communicate frequently. For example, the following diagram depicts a switched network that spans two physical nodes, allowing the two instances to communicate directly without using a router for navigation first. Note that the instances now share the same subnet, to indicate that they are on the same logical network:
				</p><p>
					<span class="inlinemediaobject"><img src="switching.png" alt="switching"/></span>

				</p><p>
					To allow instances on separate nodes to communicate as if they are on the same logical network, use an encapsulation tunnel such as VXLAN or GRE. Red Hat recommends adjusting the MTU size from end-to-end to accommodate the additional bits required for the tunnel header, otherwise network performance can be negatively impacted as a result of fragmentation. For more information, see <span class="emphasis"><em>Configure MTU Settings</em></span>.
				</p><p>
					You can further improve the performance of VXLAN tunneling by using supported hardware that features VXLAN offload capabilities. The full list is available here: <a class="link" href="https://access.redhat.com/articles/1390483">https://access.redhat.com/articles/1390483</a>
				</p></section></section></section><div class="part" id="common_tasks"><div class="titlepage"><div><div><h1 class="title">Part I. Common Tasks</h1></div></div></div><div class="partintro" id="idm139893205570720"><div><!--Empty--></div><p>
				Covers common administrative tasks and basic troubleshooting steps.
			</p></div><section class="chapter" id="sec-admin-tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Common administrative networking tasks</h2></div></div></div><p>
				OpenStack Networking (neutron) is the software-defined networking component of Red Hat OpenStack Platform. The virtual network infrastructure enables connectivity between instances and the physical external network.
			</p><p>
				This section contains information about common administration tasks, such as adding and removing subnets and routers to suit your Red Hat OpenStack Platform deployment.
			</p><section class="section" id="create-network"><div class="titlepage"><div><div><h2 class="title">3.1. Creating a network</h2></div></div></div><p>
					Create a network so that your instances can communicate with each other and receive IP addresses using DHCP. For more information about external network connections, see <span class="emphasis"><em>Bridging the physical network</em></span>.
				</p><p>
					When creating networks, it is important to know that networks can host multiple subnets. This is useful if you intend to host distinctly different systems in the same network, and prefer a measure of isolation between them. For example, you can designate that only webserver traffic is present on one subnet, while database traffic traverses another. Subnets are isolated from each other, and any instance that wants to communicate with another subnet must have their traffic directed by a router. Consider placing systems that require a high volume of traffic amongst themselves in the same subnet, so that they do not require routing, and can avoid the subsequent latency and load.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Networks</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>+Create Network</strong></span> and specify the following values:
						</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893208737728" scope="col">Field</th><th align="left" valign="top" id="idm139893207535632" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893208737728"> <p>
											Network Name
										</p>
										 </td><td align="left" valign="top" headers="idm139893207535632"> <p>
											Descriptive name, based on the role that the network will perform. If you are integrating the network with an external VLAN, consider appending the VLAN ID number to the name. For example, <code class="literal">webservers_122</code>, if you are hosting HTTP web servers in this subnet, and your VLAN tag is <code class="literal">122</code>. Or you might use <code class="literal">internal-only</code> if you intend to keep the network traffic private, and not integrate the network with an external network.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893208737728"> <p>
											Admin State
										</p>
										 </td><td align="left" valign="top" headers="idm139893207535632"> <p>
											Controls whether the network is immediately available. Use this field to create the network in a Down state, where it is logically present but inactive. This is useful if you do not intend to enter the network into production immediately.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893208737728"> <p>
											Create Subnet
										</p>
										 </td><td align="left" valign="top" headers="idm139893207535632"> <p>
											Determines whether to create a subnet. For example, you might not want to create a subnet if you intend to keep this network as a placeholder without network connectivity.
										</p>
										 </td></tr></tbody></table></div></li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Next</strong></span> button, and specify the following values in the <span class="strong strong"><strong>Subnet</strong></span> tab:
						</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893209608992" scope="col">Field</th><th align="left" valign="top" id="idm139893202083504" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893209608992"> <p>
											Subnet Name
										</p>
										 </td><td align="left" valign="top" headers="idm139893202083504"> <p>
											Enter a descriptive name for the subnet.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893209608992"> <p>
											Network Address
										</p>
										 </td><td align="left" valign="top" headers="idm139893202083504"> <p>
											Enter the address in CIDR format, which contains the IP address range and subnet mask in one value. To determine the address, calculate the number of bits masked in the subnet mask and append that value to the IP address range. For example, the subnet mask 255.255.255.0 has 24 masked bits. To use this mask with the IPv4 address range 192.168.122.0, specify the address 192.168.122.0/24.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893209608992"> <p>
											IP Version
										</p>
										 </td><td align="left" valign="top" headers="idm139893202083504"> <p>
											Specifies the internet protocol version, where valid types are IPv4 or IPv6. The IP address range in the Network Address field must match whichever version you select.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893209608992"> <p>
											Gateway IP
										</p>
										 </td><td align="left" valign="top" headers="idm139893202083504"> <p>
											IP address of the router interface for your default gateway. This address is the next hop for routing any traffic destined for an external location, and must be within the range that you specify in the Network Address field. For example, if your CIDR network address is 192.168.122.0/24, then your default gateway is likely to be 192.168.122.1.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893209608992"> <p>
											Disable Gateway
										</p>
										 </td><td align="left" valign="top" headers="idm139893202083504"> <p>
											Disables forwarding and isolates the subnet.
										</p>
										 </td></tr></tbody></table></div></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Next</strong></span> to specify <span class="strong strong"><strong>DHCP</strong></span> options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Enable DHCP</strong></span> - Enables DHCP services for this subnet. You can use DHCP to automate the distribution of IP settings to your instances.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>IPv6 Address</strong></span> - Configuration Modes. If you create an IPv6 network, you must specify how to allocate IPv6 addresses and additional information:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<span class="strong strong"><strong>No Options Specified</strong></span> - Select this option if you want to set IP addresses manually, or if you use a non OpenStack-aware method for address allocation.
										</li><li class="listitem">
											<span class="strong strong"><strong>SLAAC (Stateless Address Autoconfiguration)</strong></span> - Instances generate IPv6 addresses based on Router Advertisement (RA) messages sent from the OpenStack Networking router. Use this configuration to create an OpenStack Networking subnet with ra_mode set to slaac and address_mode set to slaac.
										</li><li class="listitem">
											<span class="strong strong"><strong>DHCPv6 stateful</strong></span> - Instances receive IPv6 addresses as well as additional options (for example, DNS) from the OpenStack Networking DHCPv6 service. Use this configuration to create a subnet with ra_mode set to dhcpv6-stateful and address_mode set to dhcpv6-stateful.
										</li><li class="listitem">
											<span class="strong strong"><strong>DHCPv6 stateless</strong></span> - Instances generate IPv6 addresses based on Router Advertisement (RA) messages sent from the OpenStack Networking router. Additional options (for example, DNS) are allocated from the OpenStack Networking DHCPv6 service. Use this configuration to create a subnet with ra_mode set to dhcpv6-stateless and address_mode set to dhcpv6-stateless.
										</li></ul></div></li><li class="listitem">
									<span class="strong strong"><strong>Allocation Pools</strong></span> - Range of IP addresses that you want DHCP to assign. For example, the value 192.168.22.100,192.168.22.100 considers all up addresses in that range as available for allocation.
								</li><li class="listitem">
									<span class="strong strong"><strong>DNS Name Servers</strong></span> - IP addresses of the DNS servers available on the network. DHCP distributes these addresses to the instances for name resolution.
								</li><li class="listitem">
									<span class="strong strong"><strong>Host Routes</strong></span> - Static host routes. First, specify the destination network in CIDR format, followed by the next hop that you want to use for routing (for example, 192.168.23.0/24, 10.1.31.1). Provide this value if you need to distribute static routes to instances.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Create</strong></span>.
						</p><p class="simpara">
							You can view the complete network in the <span class="strong strong"><strong>Networks</strong></span> tab. You can also click <span class="strong strong"><strong>Edit</strong></span> to change any options as needed. When you create instances, you can configure them now to use its subnet, and they receive any specified DHCP options.
						</p></li></ol></div></section><section class="section" id="create-adv-network"><div class="titlepage"><div><div><h2 class="title">3.2. Creating an advanced network</h2></div></div></div><p>
					Advanced network options are available for administrators, when creating a network from the <span class="strong strong"><strong>Admin</strong></span> view. Use these options to specify tenants and to define the network type that you want to use.
				</p><p>
					To create an advanced network, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard, select <span class="strong strong"><strong>Admin &gt; Networks &gt; Create Network &gt; Project</strong></span>.
						</li><li class="listitem">
							Select the project that you want to host the new network with the <span class="strong strong"><strong>Project</strong></span> drop-down list.
						</li><li class="listitem"><p class="simpara">
							Review the options in <span class="strong strong"><strong>Provider Network Type</strong></span>:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Local</strong></span> - Traffic remains on the local Compute host and is effectively isolated from any external networks.
								</li><li class="listitem">
									<span class="strong strong"><strong>Flat</strong></span> - Traffic remains on a single network and can also be shared with the host. No VLAN tagging or other network segregation takes place.
								</li><li class="listitem">
									<span class="strong strong"><strong>VLAN</strong></span> - Create a network using a VLAN ID that corresponds to a VLAN present in the physical network. This option allows instances to communicate with systems on the same layer 2 VLAN.
								</li><li class="listitem">
									<span class="strong strong"><strong>GRE</strong></span> - Use a network overlay that spans multiple nodes for private communication between instances. Traffic egressing the overlay must be routed.
								</li><li class="listitem">
									<span class="strong strong"><strong>VXLAN</strong></span> - Similar to GRE, and uses a network overlay to span multiple nodes for private communication between instances. Traffic egressing the overlay must be routed.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Create Network</strong></span>.
						</p><p class="simpara">
							Review the Project Network Topology to validate that the network has been successfully created.
						</p></li></ol></div></section><section class="section" id="add-network-routing"><div class="titlepage"><div><div><h2 class="title">3.3. Adding network routing</h2></div></div></div><p>
					To allow traffic to be routed to and from your new network, you must add its subnet as an interface to an existing virtual router:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Routers</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Select your virtual router name in the <span class="strong strong"><strong>Routers</strong></span> list, and click <span class="strong strong"><strong>Add Interface</strong></span>.
						</p><p class="simpara">
							In the Subnet list, select the name of your new subnet. You can optionally specify an IP address for the interface in this field.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Add Interface</strong></span>.
						</p><p class="simpara">
							Instances on your network can now communicate with systems outside the subnet.
						</p></li></ol></div></section><section class="section" id="delete-network"><div class="titlepage"><div><div><h2 class="title">3.4. Deleting a network</h2></div></div></div><p>
					There are occasions where it becomes necessary to delete a network that was previously created, perhaps as housekeeping or as part of a decommissioning process. You must first remove or detach any interfaces where the network is still in use, before you can successfully delete a network.
				</p><p>
					To delete a network in your project, together with any dependent interfaces, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Networks</strong></span>.
						</p><p class="simpara">
							Remove all router interfaces associated with the target network subnets.
						</p><p class="simpara">
							To remove an interface, find the ID number of the network that you want to delete by clicking on your target network in the <span class="strong strong"><strong>Networks</strong></span> list, and looking at the ID field. All the subnets associated with the network share this value in the <span class="strong strong"><strong>Network ID</strong></span> field.
						</p></li><li class="listitem"><p class="simpara">
							Navigate to <span class="strong strong"><strong>Project &gt; Network &gt; Routers</strong></span>, click the name of your virtual router in the <span class="strong strong"><strong>Routers</strong></span> list, and locate the interface attached to the subnet that you want to delete.
						</p><p class="simpara">
							You can distinguish this subnet from the other subnets by the IP address that served as the gateway IP. You can further validate the distinction by ensuring that the network ID of the interface matches the ID that you noted in the previous step.
						</p></li><li class="listitem">
							Click the <span class="strong strong"><strong>Delete Interface</strong></span> button for the interface that you want to delete.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>Project &gt; Network &gt; Networks</strong></span>, and click the name of your network.
						</li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Delete Subnet</strong></span> button for the subnet that you want to delete.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If you are still unable to remove the subnet at this point, ensure it is not already being used by any instances.
							</p></div></div></li><li class="listitem">
							Select <span class="strong strong"><strong>Project &gt; Network &gt; Networks</strong></span>, and select the network you would like to delete.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Delete Networks</strong></span>.
						</li></ol></div></section><section class="section" id="purge-network-tenant"><div class="titlepage"><div><div><h2 class="title">3.5. Purging the networking for a tenant</h2></div></div></div><p>
					Use the neutron purge command to delete all neutron resources that belong to a particular project.
				</p><p>
					For example, to purge the neutron resources of the <code class="literal">test-project</code> project prior to deletion, run the following commands:
				</p><pre class="screen"># openstack project list
+----------------------------------+--------------+
| ID                               | Name         |
+----------------------------------+--------------+
| 02e501908c5b438dbc73536c10c9aac0 | test-project |
| 519e6344f82e4c079c8e2eabb690023b | services     |
| 80bf5732752a41128e612fe615c886c6 | demo         |
| 98a2f53c20ce4d50a40dac4a38016c69 | admin        |
+----------------------------------+--------------+

# neutron purge 02e501908c5b438dbc73536c10c9aac0
Purging resources: 100% complete.
Deleted 1 security_group, 1 router, 1 port, 1 network.

# openstack project delete 02e501908c5b438dbc73536c10c9aac0</pre></section><section class="section" id="work-subnets"><div class="titlepage"><div><div><h2 class="title">3.6. Working with subnets</h2></div></div></div><p>
					Use subnets to grant network connectivity to instances. Each instance is assigned to a subnet as part of the instance creation process, therefore it’s important to consider proper placement of instances to best accommodate their connectivity requirements.
				</p><p>
					You can create subnets only in pre-existing networks. Remember that tenant networks in OpenStack Networking can host multiple subnets. This is useful if you intend to host distinctly different systems in the same network, and prefer a measure of isolation between them.
				</p><p>
					For example, you can designate that only webserver traffic is present on one subnet, while database traffic traverse another.
				</p><p>
					Subnets are isolated from each other, and any instance that wants to communicate with another subnet must have their traffic directed by a router. Therefore, you can lessen network latency and load by grouping systems in the same subnet that require a high volume of traffic between each other.
				</p><section class="section" id="create-subnet"><div class="titlepage"><div><div><h3 class="title">3.6.1. Creating a subnet</h3></div></div></div><p>
						To create a subnet, follow these steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Networks</strong></span>, and click the name of your network in the <span class="strong strong"><strong>Networks</strong></span> view.
							</li><li class="listitem"><p class="simpara">
								Click <span class="strong strong"><strong>Create Subnet</strong></span>, and specify the following values:
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893205148592" scope="col">Field</th><th align="left" valign="top" id="idm139893205147504" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893205148592"> <p>
												Subnet Name
											</p>
											 </td><td align="left" valign="top" headers="idm139893205147504"> <p>
												Descriptive subnet name.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893205148592"> <p>
												Network Address
											</p>
											 </td><td align="left" valign="top" headers="idm139893205147504"> <p>
												Address in CIDR format, which contains the IP address range and subnet mask in one value. To determine the CIDR address, calculate the number of bits masked in the subnet mask and append that value to the IP address range. For example, the subnet mask 255.255.255.0 has 24 masked bits. To use this mask with the IPv4 address range 192.168.122.0, specify the address 192.168.122.0/24.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893205148592"> <p>
												IP Version
											</p>
											 </td><td align="left" valign="top" headers="idm139893205147504"> <p>
												Internet protocol version, where valid types are IPv4 or IPv6. The IP address range in the Network Address field must match whichever protocol version you select.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893205148592"> <p>
												Gateway IP
											</p>
											 </td><td align="left" valign="top" headers="idm139893205147504"> <p>
												IP address of the router interface for your default gateway. This address is the next hop for routing any traffic destined for an external location, and must be within the range that you specify in the Network Address field. For example, if your CIDR network address is 192.168.122.0/24, then your default gateway is likely to be 192.168.122.1.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893205148592"> <p>
												Disable Gateway
											</p>
											 </td><td align="left" valign="top" headers="idm139893205147504"> <p>
												Disables forwarding and isolates the subnet.
											</p>
											 </td></tr></tbody></table></div></li><li class="listitem"><p class="simpara">
								Click <span class="strong strong"><strong>Next</strong></span> to specify <span class="strong strong"><strong>DHCP</strong></span> options:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Enable DHCP</strong></span> - Enables DHCP services for this subnet. You can use DHCP to automate the distribution of IP settings to your instances.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>IPv6 Address</strong></span> - Configuration Modes. If you create an IPv6 network, you must specify how to allocate IPv6 addresses and additional information:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												<span class="strong strong"><strong>No Options Specified</strong></span> - Select this option if you want to set IP addresses manually, or if you use a non OpenStack-aware method for address allocation.
											</li><li class="listitem">
												<span class="strong strong"><strong>SLAAC (Stateless Address Autoconfiguration)</strong></span> - Instances generate IPv6 addresses based on Router Advertisement (RA) messages sent from the OpenStack Networking router. Use this configuration to create an OpenStack Networking subnet with ra_mode set to slaac and address_mode set to slaac.
											</li><li class="listitem">
												<span class="strong strong"><strong>DHCPv6 stateful</strong></span> - Instances receive IPv6 addresses as well as additional options (for example, DNS) from the OpenStack Networking DHCPv6 service. Use this configuration to create a subnet with ra_mode set to dhcpv6-stateful and address_mode set to dhcpv6-stateful.
											</li><li class="listitem">
												<span class="strong strong"><strong>DHCPv6 stateless</strong></span> - Instances generate IPv6 addresses based on Router Advertisement (RA) messages sent from the OpenStack Networking router. Additional options (for example, DNS) are allocated from the OpenStack Networking DHCPv6 service. Use this configuration to create a subnet with ra_mode set to dhcpv6-stateless and address_mode set to dhcpv6-stateless.
											</li></ul></div></li><li class="listitem">
										<span class="strong strong"><strong>Allocation Pools</strong></span> - Range of IP addresses that you want DHCP to assign. For example, the value 192.168.22.100,192.168.22.100 considers all up addresses in that range as available for allocation.
									</li><li class="listitem">
										<span class="strong strong"><strong>DNS Name Servers</strong></span> - IP addresses of the DNS servers available on the network. DHCP distributes these addresses to the instances for name resolution.
									</li><li class="listitem">
										<span class="strong strong"><strong>Host Routes</strong></span> - Static host routes. First, specify the destination network in CIDR format, followed by the next hop that you want to use for routing (for example, 192.168.23.0/24, 10.1.31.1). Provide this value if you need to distribute static routes to instances.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Click <span class="strong strong"><strong>Create</strong></span>.
							</p><p class="simpara">
								You can view the subnet in the <span class="strong strong"><strong>Subnets</strong></span> list. You can also click <span class="strong strong"><strong>Edit</strong></span> to change any options as needed. When you create instances, you can configure them now to use its subnet, and they receive any specified DHCP options.
							</p></li></ol></div></section></section><section class="section" id="delete-subnet"><div class="titlepage"><div><div><h2 class="title">3.7. Deleting a subnet</h2></div></div></div><p>
					You can delete a subnet if it is no longer in use. However, if any instances are still configured to use the subnet, the deletion attempt fails and the dashboard displays an error message.
				</p><p>
					Complete the following steps to delete a specific subnet in a network:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Networks</strong></span>.
						</li><li class="listitem">
							Click the name of your network.
						</li><li class="listitem">
							Select the target subnet, and click <span class="strong strong"><strong>Delete Subnets</strong></span>.
						</li></ol></div></section><section class="section" id="add-router"><div class="titlepage"><div><div><h2 class="title">3.8. Adding a router</h2></div></div></div><p>
					OpenStack Networking provides routing services using an SDN-based virtual router. Routers are a requirement for your instances to communicate with external subnets, including those in the physical network. Routers and subnets connect using interfaces, with each subnet requiring its own interface to the router.
				</p><p>
					The default gateway of a router defines the next hop for any traffic received by the router. Its network is typically configured to route traffic to the external physical network using a virtual bridge.
				</p><p>
					To create a router, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Routers</strong></span>, and click <span class="strong strong"><strong>Create Router</strong></span>.
						</li><li class="listitem">
							Enter a descriptive name for the new router, and click <span class="strong strong"><strong>Create router</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Set Gateway</strong></span> next to the entry for the new router in the <span class="strong strong"><strong>Routers</strong></span> list.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>External Network</strong></span> list, specify the network that you want to receive traffic destined for an external location.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Set Gateway</strong></span>.
						</p><p class="simpara">
							After you add a router, you must configure any subnets you have created to send traffic using this router. You do this by creating interfaces between the subnet and the router.
						</p></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The default routes for subnets must not be overwritten. When the default route for a subnet is removed, the L3 agent automatically removes the corresponding route in the router namespace too, and network traffic cannot flow to and from the associated subnet. If the existing router namespace route has been removed, to fix this problem, perform these steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Disassociate all floating IPs on the subnet.
							</li><li class="listitem">
								Detach the router from the subnet.
							</li><li class="listitem">
								Re-attach the router to the subnet.
							</li><li class="listitem">
								Re-attach all floating IPs.
							</li></ol></div></div></div></section><section class="section" id="delete-router"><div class="titlepage"><div><div><h2 class="title">3.9. Deleting a router</h2></div></div></div><p>
					You can delete a router if it has no connected interfaces.
				</p><p>
					To remove its interfaces and delete a router, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Routers</strong></span>, and click the name of the router that you want to delete.
						</li><li class="listitem">
							Select the interfaces of type <span class="strong strong"><strong>Internal Interface</strong></span>, and click <span class="strong strong"><strong>Delete Interfaces</strong></span>.
						</li><li class="listitem">
							From the Routers list, select the target router and click <span class="strong strong"><strong>Delete Routers</strong></span>.
						</li></ol></div></section><section class="section" id="add-interface"><div class="titlepage"><div><div><h2 class="title">3.10. Adding an interface</h2></div></div></div><p>
					You can use interfaces to interconnect routers with subnets so that routers can direct any traffic that instances send to destinations outside of their intermediate subnet.
				</p><p>
					To add a router interface and connect the new interface to a subnet, complete these steps:
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This procedure uses the Network Topology feature. Using this feature, you can see a graphical representation of all your virtual routers and networks while you to perform network management tasks.
					</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Network Topology</strong></span>.
						</li><li class="listitem">
							Locate the router that you want to manage, hover your mouse over it, and click <span class="strong strong"><strong>Add Interface</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Specify the Subnet that you want to connect to the router.
						</p><p class="simpara">
							You can also specify an IP address. The address is useful for testing and troubleshooting purposes, since a successful ping to this interface indicates that the traffic is routing as expected.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Add interface</strong></span>.
						</p><p class="simpara">
							The Network Topology diagram automatically updates to reflect the new interface connection between the router and subnet.
						</p></li></ol></div></section><section class="section" id="delete-interface"><div class="titlepage"><div><div><h2 class="title">3.11. Deleting an interface</h2></div></div></div><p>
					You can remove an interface to a subnet if you no longer require the router to direct traffic for the subnet.
				</p><p>
					To delete an interface, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard, select <span class="strong strong"><strong>Project &gt; Network &gt; Routers</strong></span>.
						</li><li class="listitem">
							Click the name of the router that hosts the interface that you want to delete.
						</li><li class="listitem">
							Select the interface type (<span class="strong strong"><strong>Internal Interface</strong></span>), and click <span class="strong strong"><strong>Delete Interfaces</strong></span>.
						</li></ol></div></section><section class="section" id="Config-ip-address"><div class="titlepage"><div><div><h2 class="title">3.12. Configuring IP addressing</h2></div></div></div><p>
					Follow the procedures in this section to manage your IP address allocation in OpenStack Networking.
				</p><section class="section" id="create-float-ip-pools"><div class="titlepage"><div><div><h3 class="title">3.12.1. Creating floating IP pools</h3></div></div></div><p>
						You can use floating IP addresses to direct ingress network traffic to your OpenStack instances. First, you must define a pool of validly routable external IP addresses, which you can then assign to instances dynamically. OpenStack Networking routes all incoming traffic destined for that floating IP to the instance that you associate with the floating IP.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							OpenStack Networking allocates floating IP addresses to all projects (tenants) from the same IP ranges/CIDRs. As a result, all projects can consume floating IPs from every floating IP subnet. You can manage this behavior using quotas for specific projects. For example, you can set the default to <span class="emphasis"><em>10</em></span> for <span class="emphasis"><em>ProjectA</em></span> and <span class="emphasis"><em>ProjectB</em></span>, while setting the quota for <span class="emphasis"><em>ProjectC</em></span> to <span class="emphasis"><em>0</em></span>.
						</p></div></div><p>
						When you create an external subnet, you can also define the floating IP allocation pool. If the subnet hosts only floating IP addresses, consider disabling DHCP allocation with the <code class="literal">--no-dhcp</code> option in the <code class="literal">openstack subnet create</code> command:
					</p><pre class="screen"># openstack subnet create --no-dhcp --allocation-pool start=IP_ADDRESS,end=IP_ADDRESS --gateway IP_ADDRESS --network SUBNET_RANGE NETWORK_NAME</pre><p>
						For example:
					</p><pre class="screen"># openstack subnet create --no-dhcp --allocation_pool start=192.168.100.20,end=192.168.100.100 --gateway 192.168.100.1 --network 192.168.100.0/24 public</pre></section><section class="section" id="Assign-specific-float-ip"><div class="titlepage"><div><div><h3 class="title">3.12.2. Assigning a specific floating IP</h3></div></div></div><p>
						You can assign a specific floating IP address to an instance using the <code class="literal">nova</code> command.
					</p><pre class="screen"># nova floating-ip-associate INSTANCE_NAME IP_ADDRESS</pre><p>
						In this example, a floating IP address is allocated to an instance named <code class="literal">corp-vm-01</code>:
					</p><pre class="screen"># nova floating-ip-associate corp-vm-01 192.168.100.20</pre></section><section class="section" id="Assign-random-float-ip"><div class="titlepage"><div><div><h3 class="title">3.12.3. Assigning a random floating IP</h3></div></div></div><p>
						To dynamically allocate floating IP addresses to instances, complete these steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Enter the following <code class="literal">openstack</code> command:
							</p><pre class="screen"># openstack floating ip create</pre><p class="simpara">
								In this example, you do not select a particular IP address, but instead request that OpenStack Networking allocate a floating IP address from the pool:
							</p><pre class="screen"># openstack floating ip create public
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| fixed_ip_address    |                                      |
| floating_ip_address | 192.168.100.20                       |
| floating_network_id | 7a03e6bc-234d-402b-9fb2-0af06c85a8a3 |
| id                  | 9d7e2603482d                         |
| port_id             |                                      |
| router_id           |                                      |
| status              | ACTIVE                               |
| tenant_id           | 9e67d44eab334f07bf82fa1b17d824b6     |
+---------------------+--------------------------------------+</pre><p class="simpara">
								After you allocate the IP address, you can assign it to a particular instance.
							</p></li><li class="listitem"><p class="simpara">
								Enter the following command to locate the port ID associated with your instance:
							</p><pre class="screen"># openstack port list</pre><p class="simpara">
								(The port ID maps to the fixed IP address allocated to the instance.)
							</p><pre class="screen"># openstack port list
+--------+------+-------------+--------------------------------------------------------+
| id     | name | mac_address | fixed_ips                                              |
+--------+------+-------------+--------------------------------------------------------+
| ce8320 |      | 3e:37:09:4b | {"subnet_id": "361f27", "ip_address": "192.168.100.2"} |
| d88926 |      | 3e:1d:ea:31 | {"subnet_id": "361f27", "ip_address": "192.168.100.5"} |
| 8190ab |      | 3e:a3:3d:2f | {"subnet_id": "b74dbb", "ip_address": "10.10.1.25"}    |
+--------+------+-------------+--------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
								Associate the instance ID with the port ID of the instance:
							</p><p class="simpara">
								<code class="literal">openstack server add floating ip</code> <span class="emphasis"><em>INSTANCE_NAME_OR_ID FLOATING_IP_ADDRESS</em></span>
							</p><p class="simpara">
								For example:
							</p><pre class="screen"># openstack server add floating ip VM1 172.24.4.225</pre></li><li class="listitem"><p class="simpara">
								Validate that you used the correct port ID for the instance by making sure that the MAC address (third column) matches the port on the instance.
							</p><pre class="screen"># openstack port list
+--------+------+-------------+--------------------------------------------------------+
| id     | name | mac_address | fixed_ips                                              |
+--------+------+-------------+--------------------------------------------------------+
| ce8320 |      | 3e:37:09:4b | {"subnet_id": "361f27", "ip_address": "192.168.100.2"} |
| d88926 |      | 3e:1d:ea:31 | {"subnet_id": "361f27", "ip_address": "192.168.100.5"} |
| 8190ab |      | 3e:a3:3d:2f | {"subnet_id": "b74dbb", "ip_address": "10.10.1.25"}|
+--------+------+-------------+--------------------------------------------------------+</pre></li></ol></div></section></section><section class="section" id="create-mult-float-ip-pools"><div class="titlepage"><div><div><h2 class="title">3.13. Creating multiple floating IP pools</h2></div></div></div><p>
					OpenStack Networking supports one floating IP pool for each L3 agent. Therefore, you must scale your L3 agents to create additional floating IP pools.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Make sure that in <code class="literal">/var/lib/config-data/neutron/etc/neutron/neutron.conf</code> the property <code class="literal">handle_internal_only_routers</code> is set to True for only one L3 agent in your environment. This option configures the L3 agent to manage only non-external routers.
					</p></div></div></section><section class="section" id="bridge-phys-network"><div class="titlepage"><div><div><h2 class="title">3.14. Bridging the physical network</h2></div></div></div><p>
					Bridge your virtual network to the physical network to enable connectivity to and from virtual instances.
				</p><p>
					In this procedure, the example physical interface, <code class="literal">eth0</code>, is mapped to the bridge, <code class="literal">br-ex</code>; the virtual bridge acts as the intermediary between the physical network and any virtual networks.
				</p><p>
					As a result, all traffic traversing <code class="literal">eth0</code> uses the configured Open vSwitch to reach instances.
				</p><p>
					For more information, see <a class="xref" href="index%3F.html#bridge-mappings" title="Chapter 11. Configuring bridge mappings">Chapter 11, <em>Configuring bridge mappings</em></a>.
				</p><p>
					To map a physical NIC to the virtual Open vSwitch bridge, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Open <code class="literal">/etc/sysconfig/network-scripts/ifcfg-eth0</code> in a text editor, and update the following parameters with values appropriate for the network at your site:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									IPADDR
								</li><li class="listitem">
									NETMASK GATEWAY
								</li><li class="listitem"><p class="simpara">
									DNS1 (name server)
								</p><p class="simpara">
									Here is an example:
								</p><pre class="screen"># vi /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=eth0
TYPE=OVSPort
DEVICETYPE=ovs
OVS_BRIDGE=br-ex
ONBOOT=yes</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Open <code class="literal">/etc/sysconfig/network-scripts/ifcfg-br-ex</code> in a text editor and update the virtual bridge parameters with the IP address values that were previously allocated to eth0:
						</p><pre class="screen"># vi /etc/sysconfig/network-scripts/ifcfg-br-ex
DEVICE=br-ex
DEVICETYPE=ovs
TYPE=OVSBridge
BOOTPROTO=static
IPADDR=192.168.120.10
NETMASK=255.255.255.0
GATEWAY=192.168.120.1
DNS1=192.168.120.1
ONBOOT=yes</pre><p class="simpara">
							You can now assign floating IP addresses to instances and make them available to the physical network.
						</p></li></ol></div></section></section><section class="chapter" id="sec-planning-ip"><div class="titlepage"><div><div><h2 class="title">Chapter 4. Planning IP address usage</h2></div></div></div><p>
				An OpenStack deployment can consume a larger number of IP addresses than might be expected. This section contains information about correctly anticipating the quantity of addresses that you require, and where the addresses are used in your environment.
			</p><section class="section" id="vlan-planning"><div class="titlepage"><div><div><h2 class="title">4.1. VLAN planning</h2></div></div></div><p>
					When you plan your Red Hat OpenStack Platform deployment, you start with a number of subnets, from which you allocate individual IP addresses. When you use multiple subnets you can segregate traffic between systems into VLANs.
				</p><p>
					For example, it is ideal that your management or API traffic is not on the same network as systems that serve web traffic. Traffic between VLANs travels through a router where you can implement firewalls to govern traffic flow.
				</p><p>
					You must plan your VLANs as part of your overall plan that includes traffic isolation, high availability, and IP address utilization for the various types of virtual networking resources in your deployment.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The maximum number of VLANs in a single network, or in one OVS agent for a network node, is 4094. In situations where you require more than the maximum number of VLANs, you can create several provider networks (VXLAN networks) and several network nodes, one per network. Each node can contain up to 4094 private networks.
					</p></div></div></section><section class="section" id="types-of-network-traffic"><div class="titlepage"><div><div><h2 class="title">4.2. Types of network traffic</h2></div></div></div><p>
					You can allocate separate VLANs for the different types of network traffic that you want to host. For example, you can have separate VLANs for each of these types of networks. Only the External network must be routable to the external physical network. In this release, director provides DHCP services.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You do not require all of the isolated VLANs in this section for every OpenStack deployment.. For example, if your cloud users do not create ad hoc virtual networks on demand, then you may not require a tenant network. If you want each VM to connect directly to the same switch as any other physical system, connect your Compute nodes directly to a provider network and configure your instances to use that provider network directly.
					</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Provisioning network</strong></span> - This VLAN is dedicated to deploying new nodes using director over PXE boot. OpenStack Orchestration (heat) installs OpenStack onto the overcloud bare metal servers. These servers attach to the physical network to receive the platform installation image from the undercloud infrastructure.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Internal API network</strong></span> - The OpenStack services use the Internal API networkfor communication, including API communication, RPC messages, and database communication. In addition, this network is used for operational messages between controller nodes. When planning your IP address allocation, note that each API service requires its own IP address. Specifically, you must plan IP addresses for each of the following services:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									vip-msg (ampq)
								</li><li class="listitem">
									vip-keystone-int
								</li><li class="listitem">
									vip-glance-int
								</li><li class="listitem">
									vip-cinder-int
								</li><li class="listitem">
									vip-nova-int
								</li><li class="listitem">
									vip-neutron-int
								</li><li class="listitem">
									vip-horizon-int
								</li><li class="listitem">
									vip-heat-int
								</li><li class="listitem">
									vip-ceilometer-int
								</li><li class="listitem">
									vip-swift-int
								</li><li class="listitem">
									vip-keystone-pub
								</li><li class="listitem">
									vip-glance-pub
								</li><li class="listitem">
									vip-cinder-pub
								</li><li class="listitem">
									vip-nova-pub
								</li><li class="listitem">
									vip-neutron-pub
								</li><li class="listitem">
									vip-horizon-pub
								</li><li class="listitem">
									vip-heat-pub
								</li><li class="listitem">
									vip-ceilometer-pub
								</li><li class="listitem">
									vip-swift-pub
								</li></ul></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When using High Availability, Pacemaker moves VIP addresses between the physical nodes.
					</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Storage</strong></span> - Block Storage, NFS, iSCSI, and other storage services. Isolate this network to separate physical Ethernet links for performance reasons.
						</li><li class="listitem">
							<span class="strong strong"><strong>Storage Management</strong></span> - OpenStack Object Storage (swift) uses this network to synchronise data objects between participating replica nodes. The proxy service acts as the intermediary interface between user requests and the underlying storage layer. The proxy receives incoming requests and locates the necessary replica to retrieve the requested data. Services that use a Ceph back end connect over the Storage Management network, since they do not interact with Ceph directly but rather use the front end service. Note that the RBD driver is an exception; this traffic connects directly to Ceph.
						</li><li class="listitem">
							<span class="strong strong"><strong>Tenant networks</strong></span> - Neutron provides each tenant with their own networks using either VLAN segregation (where each tenant network is a network VLAN), or tunneling using VXLAN or GRE. Network traffic is isolated within each tenant network. Each tenant network has an IP subnet associated with it, and multiple tenant networks may use the same addresses.
						</li><li class="listitem">
							<span class="strong strong"><strong>External</strong></span> - The External network hosts the public API endpoints and connections to the Dashboard (horizon). You can also use this network for SNAT. In a production deployment, it is common to use a separate network for floating IP addresses and NAT.
						</li><li class="listitem">
							<span class="strong strong"><strong>Provider networks</strong></span> - Use provider networks to attach instances to existing network infrastructure. You can use provider networks to map directly to an existing physical network in the data center, using flat networking or VLAN tags. This allows an instance to share the same layer-2 network as a system external to the OpenStack Networking infrastructure.
						</li></ul></div></section><section class="section" id="ip-address-consumption"><div class="titlepage"><div><div><h2 class="title">4.3. IP address consumption</h2></div></div></div><p>
					The following systems consume IP addresses from your allocated range:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Physical nodes</strong></span> - Each physical NIC requires one IP address. It is common practice to dedicate physical NICs to specific functions. For example, allocate management and NFS traffic to distinct physical NICs, sometimes with multiple NICs connecting across to different switches for redundancy purposes.
						</li><li class="listitem">
							<span class="strong strong"><strong>Virtual IPs (VIPs) for High Availability</strong></span> - Plan to allocate between one and three VIPs for each network that controller nodes share.
						</li></ul></div></section><section class="section" id="virtual-networking"><div class="titlepage"><div><div><h2 class="title">4.4. Virtual networking</h2></div></div></div><p>
					The following virtual resources consume IP addresses in OpenStack Networking. These resources are considered local to the cloud infrastructure, and do not need to be reachable by systems in the external physical network:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Tenant networks</strong></span> - Each tenant network requires a subnet that it can use to allocate IP addresses to instances.
						</li><li class="listitem">
							<span class="strong strong"><strong>Virtual routers</strong></span> - Each router interface plugging into a subnet requires one IP address. If you want to use DHCP, each router interface requires two IP addresses.
						</li><li class="listitem">
							<span class="strong strong"><strong>Instances</strong></span> - Each instance requires an address from the tenant subnet that hosts the instance. If you require ingress traffic, you must allocate a floating IP address to the instance from the designated external network.
						</li><li class="listitem">
							<span class="strong strong"><strong>Management traffic</strong></span> - Includes OpenStack Services and API traffic. All services share a small number of VIPs. API, RPC and database services communicate on the internal API VIP.
						</li></ul></div></section><section class="section" id="example-network-plan"><div class="titlepage"><div><div><h2 class="title">4.5. Example network plan</h2></div></div></div><p>
					This example shows a number of networks that accommodate multiple subnets, with each subnet being assigned a range of IP addresses:
				</p><div class="table" id="idm139893205242208"><p class="title"><strong>Table 4.1. Example subnet plan</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893204660960" scope="col">Subnet name</th><th align="left" valign="top" id="idm139893204659872" scope="col">Address range</th><th align="left" valign="top" id="idm139893204658784" scope="col">Number of addresses</th><th align="left" valign="top" id="idm139893204657696" scope="col">Subnet Mask</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893204660960"> <p>
									Provisioning network
								</p>
								 </td><td align="center" valign="top" headers="idm139893204659872"> <p>
									192.168.100.1 - 192.168.100.250
								</p>
								 </td><td align="center" valign="top" headers="idm139893204658784"> <p>
									250
								</p>
								 </td><td align="left" valign="top" headers="idm139893204657696"> <p>
									255.255.255.0
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893204660960"> <p>
									Internal API network
								</p>
								 </td><td align="center" valign="top" headers="idm139893204659872"> <p>
									172.16.1.10 - 172.16.1.250
								</p>
								 </td><td align="center" valign="top" headers="idm139893204658784"> <p>
									241
								</p>
								 </td><td align="left" valign="top" headers="idm139893204657696"> <p>
									255.255.255.0
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893204660960"> <p>
									Storage
								</p>
								 </td><td align="center" valign="top" headers="idm139893204659872"> <p>
									172.16.2.10 - 172.16.2.250
								</p>
								 </td><td align="center" valign="top" headers="idm139893204658784"> <p>
									241
								</p>
								 </td><td align="left" valign="top" headers="idm139893204657696"> <p>
									255.255.255.0
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893204660960"> <p>
									Storage Management
								</p>
								 </td><td align="center" valign="top" headers="idm139893204659872"> <p>
									172.16.3.10 - 172.16.3.250
								</p>
								 </td><td align="center" valign="top" headers="idm139893204658784"> <p>
									241
								</p>
								 </td><td align="left" valign="top" headers="idm139893204657696"> <p>
									255.255.255.0
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893204660960"> <p>
									Tenant network (GRE/VXLAN)
								</p>
								 </td><td align="center" valign="top" headers="idm139893204659872"> <p>
									172.16.4.10 - 172.16.4.250
								</p>
								 </td><td align="center" valign="top" headers="idm139893204658784"> <p>
									241
								</p>
								 </td><td align="left" valign="top" headers="idm139893204657696"> <p>
									255.255.255.0
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893204660960"> <p>
									External network (incl. floating IPs)
								</p>
								 </td><td align="center" valign="top" headers="idm139893204659872"> <p>
									10.1.2.10 - 10.1.3.222
								</p>
								 </td><td align="center" valign="top" headers="idm139893204658784"> <p>
									469
								</p>
								 </td><td align="left" valign="top" headers="idm139893204657696"> <p>
									255.255.254.0
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893204660960"> <p>
									Provider network (infrastructure)
								</p>
								 </td><td align="center" valign="top" headers="idm139893204659872"> <p>
									10.10.3.10 - 10.10.3.250
								</p>
								 </td><td align="center" valign="top" headers="idm139893204658784"> <p>
									241
								</p>
								 </td><td align="left" valign="top" headers="idm139893204657696"> <p>
									255.255.252.0
								</p>
								 </td></tr></tbody></table></div></div></section></section><section class="chapter" id="sec-neutron-ports"><div class="titlepage"><div><div><h2 class="title">Chapter 5. Reviewing OpenStack Networking router ports</h2></div></div></div><p>
				Virtual routers in OpenStack Networking use ports to interconnect with subnets. You can review the state of these ports to determine whether they connect as expected.
			</p><section class="section" id="view-current-port-status"><div class="titlepage"><div><div><h2 class="title">5.1. Viewing current port status</h2></div></div></div><p>
					Complete the following steps to lists all of the ports that attach to a particular router and to retrieve the current state of a port (DOWN or ACTIVE):
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To view all the ports that attach to the router named <span class="strong strong"><strong>r1</strong></span>, run the following command:
						</p><pre class="screen">#  neutron router-port-list r1</pre><p class="simpara">
							Example result:
						</p><pre class="screen">+--------------------------------------+------+-------------------+--------------------------------------------------------------------------------------+
| id                                   | name | mac_address       | fixed_ips                                                                            |
+--------------------------------------+------+-------------------+--------------------------------------------------------------------------------------+
| b58d26f0-cc03-43c1-ab23-ccdb1018252a |      | fa:16:3e:94:a7:df | {"subnet_id": "a592fdba-babd-48e0-96e8-2dd9117614d3", "ip_address": "192.168.200.1"} |
| c45e998d-98a1-4b23-bb41-5d24797a12a4 |      | fa:16:3e:ee:6a:f7 | {"subnet_id": "43f8f625-c773-4f18-a691-fd4ebfb3be54", "ip_address": "172.24.4.225"}  |
+--------------------------------------+------+-------------------+--------------------------------------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							To view the details of each port, run the following command. Include the port ID of the port that you want to view. The result includes the port status, indicated in the following example as having an <code class="literal">ACTIVE</code> state:
						</p><pre class="screen"># openstack port show b58d26f0-cc03-43c1-ab23-ccdb1018252a</pre><p class="simpara">
							Example result:
						</p><pre class="screen">+-----------------------+--------------------------------------------------------------------------------------+
| Field                 | Value                                                                                |
+-----------------------+--------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                 |
| allowed_address_pairs |                                                                                      |
| binding:host_id       | node.example.com                                                      |
| binding:profile       | {}                                                                                   |
| binding:vif_details   | {"port_filter": true, "ovs_hybrid_plug": true}                                       |
| binding:vif_type      | ovs                                                                                  |
| binding:vnic_type     | normal                                                                               |
| device_id             | 49c6ebdc-0e62-49ad-a9ca-58cea464472f                                                 |
| device_owner          | network:router_interface                                                             |
| extra_dhcp_opts       |                                                                                      |
| fixed_ips             | {"subnet_id": "a592fdba-babd-48e0-96e8-2dd9117614d3", "ip_address": "192.168.200.1"} |
| id                    | b58d26f0-cc03-43c1-ab23-ccdb1018252a                                                 |
| mac_address           | fa:16:3e:94:a7:df                                                                    |
| name                  |                                                                                      |
| network_id            | 63c24160-47ac-4140-903d-8f9a670b0ca4                                                 |
| security_groups       |                                                                                      |
| status                | ACTIVE                                                                               |
| tenant_id             | d588d1112e0f496fb6cac22f9be45d49                                                     |
+-----------------------+--------------------------------------------------------------------------------------+</pre></li><li class="listitem">
							Perform step 2 for each port to retrieve its status.
						</li></ol></div></section></section><section class="chapter" id="sec-neutron-troubleshooting"><div class="titlepage"><div><div><h2 class="title">Chapter 6. Troubleshooting provider networks</h2></div></div></div><p>
				A deployment of virtual routers and switches, also known as software-defined networking (SDN), may seem to introduce complexity. However, the diagnostic process of troubleshooting network connectivity in OpenStack Networking is similar to the diagnostic process for physical networks. If you use VLANs, you can consider the virtual infrastructure as a trunked extension of the physical network, rather than a wholly separate environment.
			</p><section class="section" id="basic-ping-testing"><div class="titlepage"><div><div><h2 class="title">6.1. Basic ping testing</h2></div></div></div><p>
					The <code class="literal">ping</code> command is a useful tool for analyzing network connectivity problems. The results serve as a basic indicator of network connectivity, but might not entirely exclude all connectivity issues, such as a firewall blocking the actual application traffic. The ping command sends traffic to specific destinations, and then reports back whether the attempts were successful.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The ping command is an ICMP operation. To use <code class="literal">ping</code>, you must allow ICMP traffic to traverse any intermediary firewalls.
					</p></div></div><p>
					Ping tests are most useful when run from the machine experiencing network issues, so it may be necessary to connect to the command line via the VNC management console if the machine seems to be completely offline.
				</p><p>
					For example, the following ping test command validates multiple layers of network infrastructure in order to succeed; name resolution, IP routing, and network switching must all function correctly:
				</p><pre class="screen">$ ping www.redhat.com

PING e1890.b.akamaiedge.net (125.56.247.214) 56(84) bytes of data.
64 bytes from a125-56.247-214.deploy.akamaitechnologies.com (125.56.247.214): icmp_seq=1 ttl=54 time=13.4 ms
64 bytes from a125-56.247-214.deploy.akamaitechnologies.com (125.56.247.214): icmp_seq=2 ttl=54 time=13.5 ms
64 bytes from a125-56.247-214.deploy.akamaitechnologies.com (125.56.247.214): icmp_seq=3 ttl=54 time=13.4 ms
^C</pre><p>
					You can terminate the ping command with Ctrl-c, after which a summary of the results is presented. Zero percent packet loss indicates that the connection was stable and did not time out.
				</p><pre class="screen">--- e1890.b.akamaiedge.net ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 13.461/13.498/13.541/0.100 ms</pre><p>
					The results of a ping test can be very revealing, depending on which destination you test. For example, in the following diagram VM1 is experiencing some form of connectivity issue. The possible destinations are numbered in blue, and the conclusions drawn from a successful or failed result are presented: 
					<span class="inlinemediaobject"><img src="path-troubleshooting.png" alt="path troubleshooting"/></span>

				</p><p>
					<span class="strong strong"><strong>1.</strong></span> <span class="strong strong"><strong>The internet</strong></span> - a common first step is to send a ping test to an internet location, such as www.redhat.com.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>Success</em></span>: This test indicates that all the various network points in between the machine and the Internet are functioning correctly. This includes the virtual and physical network infrastructure.
						</li><li class="listitem">
							<span class="emphasis"><em>Failure</em></span>: There are various ways in which a ping test to a distant internet location can fail. If other machines on your network are able to successfully ping the internet, that proves the internet connection is working, and the issue is likely within the configuration of the local machine.
						</li></ul></div><p>
					<span class="strong strong"><strong>2.</strong></span> <span class="strong strong"><strong>Physical router</strong></span> - This is the router interface that the network administrator designates to direct traffic onward to external destinations.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>Success</em></span>: Ping tests to the physical router can determine whether the local network and underlying switches are functioning. These packets do not traverse the router, so they do not prove whether there is a routing issue present on the default gateway.
						</li><li class="listitem">
							<span class="emphasis"><em>Failure</em></span>: This indicates that the problem lies between VM1 and the default gateway. The router/switches might be down, or you may be using an incorrect default gateway. Compare the configuration with that on another server that you know is functioning correctly. Try pinging another server on the local network.
						</li></ul></div><p>
					<span class="strong strong"><strong>3.</strong></span> <span class="strong strong"><strong>Neutron router</strong></span> - This is the virtual SDN (Software-defined Networking) router that Red Hat OpenStack Platform uses to direct the traffic of virtual machines.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>Success</em></span>: Firewall is allowing ICMP traffic, the Networking node is online.
						</li><li class="listitem">
							<span class="emphasis"><em>Failure</em></span>: Confirm whether ICMP traffic is permitted in the security group of the instance. Check that the Networking node is online, confirm that all the required services are running, and review the L3 agent log (<span class="emphasis"><em>/var/log/neutron/l3-agent.log</em></span>).
						</li></ul></div><p>
					<span class="strong strong"><strong>4.</strong></span> <span class="strong strong"><strong>Physical switch</strong></span> - The physical switch manages traffic between nodes on the same physical network.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>Success</em></span>: Traffic sent by a VM to the physical switch must pass through the virtual network infrastructure, indicating that this segment is functioning correctly.
						</li><li class="listitem">
							<span class="emphasis"><em>Failure</em></span>: Check that the physical switch port is configured to trunk the required VLANs.
						</li></ul></div><p>
					<span class="strong strong"><strong>5.</strong></span> <span class="strong strong"><strong>VM2</strong></span> - Attempt to ping a VM on the same subnet, on the same Compute node.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>Success</em></span>: The NIC driver and basic IP configuration on VM1 are functional.
						</li><li class="listitem">
							<span class="emphasis"><em>Failure</em></span>: Validate the network configuration on VM1. Or, firewall on VM2 might simply be blocking ping traffic. In addition, verify the virtual switching configuration and review the Open vSwitch (or Linux Bridge) log files.
						</li></ul></div></section><section class="section" id="troubleshoot-vlan-networks"><div class="titlepage"><div><div><h2 class="title">6.2. Troubleshooting VLAN networks</h2></div></div></div><p>
					OpenStack Networking can trunk VLAN networks through to the SDN switches. Support for VLAN-tagged provider networks means that virtual instances can integrate with server subnets in the physical network.
				</p><p>
					To troubleshoot connectivity to a VLAN Provider network, complete these steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Ping the gateway with <code class="literal">ping &lt;gateway-IP-address&gt;</code>.
						</p><p class="simpara">
							Consider this example, in which a network is created with these commands:
						</p><pre class="screen"># openstack network create --provider-network-type vlan --provider-physical-network phy-eno1 --provider-segment 120 provider
# openstack subnet create --no-dhcp --allocation-pool start=192.168.120.1,end=192.168.120.153 --gateway 192.168.120.254 --network  provider public_subnet</pre><p class="simpara">
							In this example, the gateway IP address is <span class="strong strong"><strong>192.168.120.254</strong></span>.
						</p><pre class="screen">$ ping 192.168.120.254</pre></li><li class="listitem"><p class="simpara">
							If the ping fails, do the following:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Confirm that you have network flow for the associated VLAN.
								</p><p class="simpara">
									It is possible that the VLAN ID has not been set. In this example, OpenStack Networking is configured to trunk VLAN 120 to the provider network. (See <span class="strong strong"><strong>--provider:segmentation_id=120</strong></span> in the example in step 1.)
								</p></li><li class="listitem"><p class="simpara">
									Confirm the VLAN flow on the bridge interface using the command, <code class="literal">ovs-ofctl dump-flows &lt;bridge-name&gt;</code>.
								</p><p class="simpara">
									In this example the bridge is named <span class="strong strong"><strong>br-ex</strong></span>:
								</p><pre class="screen"># ovs-ofctl dump-flows br-ex

 NXST_FLOW reply (xid=0x4):
  cookie=0x0, duration=987.521s, table=0, n_packets=67897, n_bytes=14065247, idle_age=0, priority=1 actions=NORMAL
  cookie=0x0, duration=986.979s, table=0, n_packets=8, n_bytes=648, idle_age=977, priority=2,in_port=12 actions=drop</pre></li></ol></div></li></ol></div><section class="section" id="review-vlan-config-log-files"><div class="titlepage"><div><div><h3 class="title">6.2.1. Reviewing the VLAN configuration and log files</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>OpenStack Networking (neutron) agents</strong></span> - Use the <code class="literal">openstack network agent list</code> command to verify that all agents are up and registered with the correct names:
							</p><pre class="screen">(overcloud)[stack@undercloud~]$ openstack network agent list
+--------------------------------------+--------------------+-----------------------+-------+----------------+
| id                                   | agent_type         | host                  | alive | admin_state_up |
+--------------------------------------+--------------------+-----------------------+-------+----------------+
| a08397a8-6600-437d-9013-b2c5b3730c0c | Metadata agent     | rhelosp.example.com   | :-)   | True           |
| a5153cd2-5881-4fc8-b0ad-be0c97734e6a | L3 agent           | rhelosp.example.com   | :-)   | True           |
| b54f0be7-c555-43da-ad19-5593a075ddf0 | DHCP agent         | rhelosp.example.com   | :-)   | True           |
| d2be3cb0-4010-4458-b459-c5eb0d4d354b | Open vSwitch agent | rhelosp.example.com   | :-)   | True           |
+--------------------------------------+--------------------+-----------------------+-------+----------------+</pre></li><li class="listitem">
								Review <span class="strong strong"><strong>/var/log/containers/neutron/openvswitch-agent.log</strong></span> - this log should provide confirmation that the creation process used the <span class="strong strong"><strong>ovs-ofctl</strong></span> command to configure VLAN trunking.
							</li><li class="listitem">
								Validate <span class="strong strong"><strong>external_network_bridge</strong></span> in the <span class="strong strong"><strong>/etc/neutron/l3_agent.ini</strong></span> file. If there is a hardcoded value in the <code class="literal">external_network_bridge</code> parameter, you cannot use a provider network with the L3-agent, and you cannot create the necessary flows. The <code class="literal">external_network_bridge</code> value must be in the format `external_network_bridge = "" `.
							</li><li class="listitem">
								Check the <span class="strong strong"><strong>network_vlan_ranges</strong></span> value in the <span class="strong strong"><strong>/etc/neutron/plugin.ini</strong></span> file. For provider networks, do not specify the numeric VLAN ID. Specify IDs only when using VLAN isolated tenant networks.
							</li><li class="listitem">
								Validate the OVS agent configuration file bridge mappings, confirm that the bridge mapped to <code class="literal">phy-eno1</code> exists and is properly connected to <code class="literal">eno1</code>.
							</li></ul></div></section></section><section class="section" id="troubleshoot-tenant-networks"><div class="titlepage"><div><div><h2 class="title">6.3. Troubleshooting from within tenant networks</h2></div></div></div><p>
					In OpenStack Networking, all tenant traffic is contained within network namespaces so that tenants can configure networks without interfering with each other. For example, network namespaces allow different tenants to have the same subnet range of 192.168.1.1/24 without interference between them.
				</p><p>
					To begin troubleshooting a tenant network, first determine which network namespace contains the network:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List all the tenant networks using the <code class="literal">openstack network list</code> command:
						</p><pre class="screen"># (overcloud)[stack@osp13-undercloud ~]$ openstack network list
+--------------------------------------+-------------+-------------------------------------------------------+
| id                                   | name        | subnets                                               |
+--------------------------------------+-------------+-------------------------------------------------------+
| 9cb32fe0-d7fb-432c-b116-f483c6497b08 | web-servers | 453d6769-fcde-4796-a205-66ee01680bba 192.168.212.0/24 |
| a0cc8cdd-575f-4788-a3e3-5df8c6d0dd81 | private     | c1e58160-707f-44a7-bf94-8694f29e74d3 10.0.0.0/24      |
| baadd774-87e9-4e97-a055-326bb422b29b | private     | 340c58e1-7fe7-4cf2-96a7-96a0a4ff3231 192.168.200.0/24 |
| 24ba3a36-5645-4f46-be47-f6af2a7d8af2 | public      | 35f3d2cb-6e4b-4527-a932-952a395c4bb3 172.24.4.224/28  |
+--------------------------------------+-------------+-------------------------------------------------------+</pre><p class="simpara">
							In this example,examine the <span class="strong strong"><strong>web-servers</strong></span> network. Make a note of the id value in the web-server row (<span class="strong strong"><strong>9cb32fe0-d7fb-432c-b116-f483c6497b08</strong></span>). This value is appended to the network namespace, which helps you identify the namespace in the next step.
						</p></li><li class="listitem"><p class="simpara">
							List all the network namespaces using the <code class="literal">ip netns list</code> command:
						</p><pre class="screen"># ip netns list
qdhcp-9cb32fe0-d7fb-432c-b116-f483c6497b08
qrouter-31680a1c-9b3e-4906-bd69-cb39ed5faa01
qrouter-62ed467e-abae-4ab4-87f4-13a9937fbd6b
qdhcp-a0cc8cdd-575f-4788-a3e3-5df8c6d0dd81
qrouter-e9281608-52a6-4576-86a6-92955df46f56</pre><p class="simpara">
							The output contains a namespace that matches the <span class="strong strong"><strong>web-servers</strong></span> network id. In this example the namespace is <span class="strong strong"><strong>qdhcp-9cb32fe0-d7fb-432c-b116-f483c6497b08</strong></span>.
						</p></li><li class="listitem"><p class="simpara">
							Examine the configuration of the <span class="strong strong"><strong>web-servers</strong></span> network by running commands within the namespace, prefixing the troubleshooting commands with <code class="literal">ip netns exec &lt;namespace&gt;</code>:
						</p><pre class="screen"># ip netns exec qrouter-62ed467e-abae-4ab4-87f4-13a9937fbd6b route -n

Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         172.24.4.225    0.0.0.0         UG    0      0        0 qg-8d128f89-87
172.24.4.224    0.0.0.0         255.255.255.240 U     0      0        0 qg-8d128f89-87
192.168.200.0   0.0.0.0         255.255.255.0   U     0      0        0 qr-8efd6357-96</pre></li></ol></div><section class="section" id="perform-advanced-icmp-testing"><div class="titlepage"><div><div><h3 class="title">6.3.1. Performing advanced ICMP testing within the namespace</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Capture ICMP traffic using the <code class="literal">tcpdump</code> command:
							</p><pre class="screen"># ip netns exec qrouter-62ed467e-abae-4ab4-87f4-13a9937fbd6b tcpdump -qnntpi any icmp</pre></li><li class="listitem"><p class="simpara">
								In a separate command line window, perform a ping test to an external network:
							</p><pre class="screen"># ip netns exec qrouter-62ed467e-abae-4ab4-87f4-13a9937fbd6b ping www.redhat.com</pre></li><li class="listitem"><p class="simpara">
								In the terminal running the <span class="strong strong"><strong>tcpdump</strong></span> session, observe detailed results of the ping test.
							</p><pre class="screen">tcpdump: listening on any, link-type LINUX_SLL (Linux cooked), capture size 65535 bytes
IP (tos 0xc0, ttl 64, id 55447, offset 0, flags [none], proto ICMP (1), length 88)
    172.24.4.228 &gt; 172.24.4.228: ICMP host 192.168.200.20 unreachable, length 68
	IP (tos 0x0, ttl 64, id 22976, offset 0, flags [DF], proto UDP (17), length 60)
    172.24.4.228.40278 &gt; 192.168.200.21: [bad udp cksum 0xfa7b -&gt; 0xe235!] UDP, length 32</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When you perform a tcpdump analysis of traffic, you might observe the responding packets heading to the router interface rather than the instance. This is expected behavior, as the qrouter performs DNAT on the return packets.
						</p></div></div></section></section></section><section class="chapter" id="sec-connect-instance"><div class="titlepage"><div><div><h2 class="title">Chapter 7. Connecting an instance to the physical network</h2></div></div></div><p>
				This chapter contains information about using provider networks to connect instances directly to an external network.
			</p><section class="section" id="overview-network-topo"><div class="titlepage"><div><div><h2 class="title">7.1. Overview of the OpenStack Networking topology</h2></div></div></div><p>
					OpenStack Networking (neutron) has two categories of services distributed across a number of node types.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Neutron server</strong></span> - This service runs the OpenStack Networking API server, which provides the API for end-users and services to interact with OpenStack Networking. This server also integrates with the underlying database to store and retrieve tenant network, router, and loadbalancer details, among others.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Neutron agents</strong></span> - These are the services that perform the network functions for OpenStack Networking:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">neutron-dhcp-agent</code> - manages DHCP IP addressing for tenant private networks.
								</li><li class="listitem">
									<code class="literal">neutron-l3-agent</code> - performs layer 3 routing between tenant private networks, the external network, and others.
								</li></ul></div></li><li class="listitem">
							<span class="strong strong"><strong>Compute node</strong></span> - This node hosts the hypervisor that runs the virtual machines, also known as instances. A Compute node must be wired directly to the network in order to provide external connectivity for instances. This node is typically where the l2 agents run, such as <code class="literal">neutron-openvswitch-agent</code>.
						</li></ul></div><section class="section" id="service_placement"><div class="titlepage"><div><div><h3 class="title">7.1.1. Service placement</h3></div></div></div><p>
						The OpenStack Networking services can either run together on the same physical server, or on separate dedicated servers, which are named according to their roles:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em>Controller node</em></span> - The server that runs API service.
							</li><li class="listitem">
								<span class="emphasis"><em>Network node</em></span> - The server that runs the OpenStack Networking agents.
							</li><li class="listitem">
								<span class="emphasis"><em>Compute node</em></span> - The hypervisor server that hosts the instances.
							</li></ul></div><p>
						The steps in this chapter apply to an environment that contains these three node types. If your deployment has both the Controller and Network node roles on the same physical node, then you must perform the steps from both sections on that server. This also applies for a High Availability (HA) environment, where all three nodes might be running the Controller node and Network node services with HA. As a result, you must complete the steps in sections applicable to Controller and Network nodes on all three nodes.
					</p></section></section><section class="section" id="phys-network-connect-flat"><div class="titlepage"><div><div><h2 class="title">7.2. Using flat provider networks</h2></div></div></div><p>
					The procedures in this section create flat provider networks that can connect instances directly to external networks. You would do this if you have multiple physical networks (for example, <code class="literal">physnet1</code>, <code class="literal">physnet2</code>) and separate physical interfaces (<code class="literal">eth0 -&gt; physnet1</code>, and <code class="literal">eth1 -&gt; physnet2</code>), and you need to connect each Compute node and Network node to those external networks.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you want to connect multiple VLAN-tagged interfaces (on a single NIC) to multiple provider networks, see <a class="xref" href="index%3F.html#Using-VLAN-Provider-Networks" title="7.3. Using VLAN provider networks">Section 7.3, “Using VLAN provider networks”</a>.
					</p></div></div><section class="section" id="config-controller-nodes-flat"><div class="titlepage"><div><div><h3 class="title">7.2.1. Configuring the Controller nodes</h3></div></div></div><p>
						<span class="strong strong"><strong>1.</strong></span> Edit <code class="literal">/etc/neutron/plugin.ini</code> (which is symlinked to <code class="literal">/etc/neutron/plugins/ml2/ml2_conf.ini</code>), add <code class="literal">flat</code> to the existing list of values, and set <code class="literal">flat_networks</code> to <code class="literal">*</code>:
					</p><pre class="screen">type_drivers = vxlan,flat
flat_networks =*</pre><p>
						<span class="strong strong"><strong>2</strong></span>. Create a flat external network and associate it with the configured physical_network. Create this network as a shared network so that other users can connect their instances directly to it:
					</p><pre class="screen"># openstack network create --provider-network-type flat --provider-physical-network physnet1 --external public01</pre><p>
						<span class="strong strong"><strong>3.</strong></span> Create a subnet within this external network using the <code class="literal">openstack subnet create</code> command, or the OpenStack Dashboard:
					</p><pre class="screen"># openstack subnet create --dhcp --allocation-pool start=192.168.100.20,end=192.168.100.100 --gateway 192.168.100.1 --network public01 public_subnet</pre><p>
						<span class="strong strong"><strong>4.</strong></span> Restart the <code class="literal">neutron-server</code> service to apply this change:
					</p><pre class="screen"> # systemctl restart neutron-server.service</pre></section><section class="section" id="config-network-compute-nodes-flat"><div class="titlepage"><div><div><h3 class="title">7.2.2. Configuring the Network node and Compute nodes</h3></div></div></div><p>
						Complete the following steps on the Network node and the Compute nodes so that these nodes can connect to the external network, and can allow instances to communicate directly with the external network
					</p><p>
						<span class="strong strong"><strong>1.</strong></span> Create the Open vSwitch bridge and port. Run the following command to create the external network bridge (br-ex) and add a corresponding port (eth1)
					</p><p>
						<span class="strong strong"><strong>i.</strong></span> Edit <code class="literal">/etc/sysconfig/network-scripts/ifcfg-eth1</code>:
					</p><pre class="screen">DEVICE=eth1
TYPE=OVSPort
DEVICETYPE=ovs
OVS_BRIDGE=br-ex
ONBOOT=yes
NM_CONTROLLED=no
BOOTPROTO=none</pre><p>
						<span class="strong strong"><strong>ii.</strong></span> Edit <code class="literal">/etc/sysconfig/network-scripts/ifcfg-br-ex</code>:
					</p><pre class="screen">DEVICE=br-ex
TYPE=OVSBridge
DEVICETYPE=ovs
ONBOOT=yes
NM_CONTROLLED=no
BOOTPROTO=none</pre><p>
						<span class="strong strong"><strong>2.</strong></span> Restart the <code class="literal">network</code> service to apply these changes:
					</p><pre class="screen"> # systemctl restart network.service</pre><p>
						<span class="strong strong"><strong>3.</strong></span> Configure the physical networks in <code class="literal">/etc/neutron/plugins/ml2/openvswitch_agent.ini</code> and map the bridge to the physical network:
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For more information on configuring <code class="literal">bridge_mappings</code>, see <a class="xref" href="index%3F.html#bridge-mappings" title="Chapter 11. Configuring bridge mappings">Chapter 11, <em>Configuring bridge mappings</em></a>.
						</p></div></div><pre class="screen">bridge_mappings = physnet1:br-ex</pre><p>
						<span class="strong strong"><strong>4.</strong></span> Restart the <code class="literal">neutron-openvswitch-agent</code> service on the Network and Compute nodes to apply these changes:
					</p><pre class="screen"> # systemctl restart neutron-openvswitch-agent</pre></section><section class="section" id="config-network-node-flat"><div class="titlepage"><div><div><h3 class="title">7.2.3. Configuring the Network node</h3></div></div></div><p>
						<span class="strong strong"><strong>1.</strong></span> Set the <code class="literal">external_network_bridge =</code> parameter to an empty value in <code class="literal">/etc/neutron/l3_agent.ini</code> to enable the use of external provider networks.
					</p><pre class="screen"># Name of bridge used for external network traffic. This should be set to
# empty value for the linux bridge
external_network_bridge =</pre><p>
						<span class="strong strong"><strong>2.</strong></span> Restart <code class="literal">neutron-l3-agent</code> to apply these changes:
					</p><pre class="screen"> # systemctl restart neutron-l3-agent.service</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you have multiple flat provider networks, ensure that each of them has a separate physical interface and bridge to connect them to the external network. Configure the <span class="emphasis"><em>ifcfg-*</em></span> scripts appropriately and use a comma-separated list for each network when specifying them in <code class="literal">bridge_mappings</code>. For more information on configuring <code class="literal">bridge_mappings</code>, see <a class="xref" href="index%3F.html#bridge-mappings" title="Chapter 11. Configuring bridge mappings">Chapter 11, <em>Configuring bridge mappings</em></a>.
						</p></div></div></section><section class="section" id="connect-instance-external-flat"><div class="titlepage"><div><div><h3 class="title">7.2.4. Connecting an instance to the external network</h3></div></div></div><p>
						After you create the external network, you can connect an instance to it and test connectivity:
					</p><p>
						<span class="strong strong"><strong>1.</strong></span> Create a new instance.
					</p><p>
						<span class="strong strong"><strong>2.</strong></span> Use the <code class="literal">Networking</code> tab in the dashboard to add the new instance directly to the newly-created external network.
					</p></section><section class="section" id="how-does-flat-packet-flow-work"><div class="titlepage"><div><div><h3 class="title">7.2.5. How does the flat provider network packet flow work?</h3></div></div></div><p>
						This section describes in detail how traffic flows to and from an instance with flat provider network configuration.
					</p><div class="formalpara"><p class="title"><strong>The flow of outgoing traffic in a flat provider network</strong></p><p>
							The following diagram describes the packet flow for traffic leaving an instance and arriving directly at an external network. After you configure the <code class="literal">br-ex</code> external bridge, add the physical interface to the bridge, and spawn an instance to a Compute node, the resulting configuration of interfaces and bridges resembles the configuration in the following diagram (if using the <code class="literal">iptables_hybrid</code> firewall driver):
						</p></div><p>
						<span class="inlinemediaobject"><img src="flat-provider-out.jpg" alt="flat provider out"/></span>

					</p><p>
						<span class="strong strong"><strong>1.</strong></span> Packets leave the <code class="literal">eth0</code> interface of the instance and arrive at the linux bridge <code class="literal">qbr-xx</code>.
					</p><p>
						<span class="strong strong"><strong>2.</strong></span> Bridge <code class="literal">qbr-xx</code> is connected to <code class="literal">br-int</code> using veth pair <code class="literal">qvb-xx &lt;-&gt; qvo-xxx</code>. This is because the bridge is used to apply the inbound/outbound firewall rules defined by the security group.
					</p><p>
						<span class="strong strong"><strong>3.</strong></span> Interface <code class="literal">qvb-xx</code> is connected to the <code class="literal">qbr-xx</code> linux bridge, and <code class="literal">qvoxx</code> is connected to the <code class="literal">br-int</code> Open vSwitch (OVS) bridge.
					</p><div class="formalpara"><p class="title"><strong>An example configuration of `qbr-xx`Linux bridge:</strong></p><p>
							
<pre class="screen"> # brctl show
qbr269d4d73-e7		8000.061943266ebb	no		qvb269d4d73-e7
							tap269d4d73-e7</pre>

						</p></div><div class="formalpara"><p class="title"><strong>The configuration of <code class="literal">qvo-xx</code> on <code class="literal">br-int</code>:</strong></p><p>
							
<pre class="screen"> # ovs-vsctl show
  Bridge br-int
        fail_mode: secure
            Interface "qvof63599ba-8f"
        Port "qvo269d4d73-e7"
            tag: 5
            Interface "qvo269d4d73-e7"</pre>

						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Port <code class="literal">qvo-xx</code> is tagged with the internal VLAN tag associated with the flat provider network. In this example, the VLAN tag is <code class="literal">5</code>. When the packet reaches <code class="literal">qvo-xx</code>, the VLAN tag is appended to the packet header.
						</p></div></div><p>
						The packet is then moved to the <code class="literal">br-ex</code> OVS bridge using the patch-peer <code class="literal">int-br-ex &lt;-&gt; phy-br-ex</code>.
					</p><p>
						Example configuration of the patch-peer on <code class="literal">br-int</code>:
					</p><pre class="screen"> # ovs-vsctl show
    Bridge br-int
        fail_mode: secure
       Port int-br-ex
            Interface int-br-ex
                type: patch
                options: {peer=phy-br-ex}</pre><p>
						Example configuration of the patch-peer on <code class="literal">br-ex</code>:
					</p><pre class="screen">    Bridge br-ex
        Port phy-br-ex
            Interface phy-br-ex
                type: patch
                options: {peer=int-br-ex}
        Port br-ex
            Interface br-ex
                type: internal</pre><p>
						When this packet reaches <code class="literal">phy-br-ex</code> on <code class="literal">br-ex</code>, an OVS flow inside <code class="literal">br-ex</code> strips the VLAN tag (5) and forwards it to the physical interface.
					</p><p>
						In the following example, the output shows the port number of <code class="literal">phy-br-ex</code> as <code class="literal">2</code>.
					</p><pre class="screen"> # ovs-ofctl show br-ex
OFPT_FEATURES_REPLY (xid=0x2): dpid:00003440b5c90dc6
n_tables:254, n_buffers:256
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: OUTPUT SET_VLAN_VID SET_VLAN_PCP STRIP_VLAN SET_DL_SRC SET_DL_DST SET_NW_SRC SET_NW_DST SET_NW_TOS SET_TP_SRC SET_TP_DST ENQUEUE

 2(phy-br-ex): addr:ba:b5:7b:ae:5c:a2
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max</pre><p>
						The following output shows any packet that arrives on <code class="literal">phy-br-ex</code> (<code class="literal">in_port=2</code>) with a VLAN tag of <code class="literal">5</code> (<code class="literal">dl_vlan=5</code>). In addition, an OVS flow in br-ex strips the VLAN tag and forwards the packet to the physical interface.
					</p><pre class="screen"># ovs-ofctl dump-flows br-ex
NXST_FLOW reply (xid=0x4):
 cookie=0x0, duration=4703.491s, table=0, n_packets=3620, n_bytes=333744, idle_age=0, priority=1 actions=NORMAL
 cookie=0x0, duration=3890.038s, table=0, n_packets=13, n_bytes=1714, idle_age=3764, priority=4,in_port=2,dl_vlan=5 actions=strip_vlan,NORMAL
 cookie=0x0, duration=4702.644s, table=0, n_packets=10650, n_bytes=447632, idle_age=0, priority=2,in_port=2 actions=drop</pre><p>
						If the physical interface is another VLAN-tagged interface, then the physical interface adds the tag to the packet.
					</p><div class="formalpara"><p class="title"><strong>The flow of incoming traffic in a flat provider network</strong></p><p>
							This section contains information about the flow of incoming traffic from the external network until it arrives at the interface of the instance.
						</p></div><p>
						<span class="inlinemediaobject"><img src="flat-provider-in.jpg" alt="flat provider in"/></span>

					</p><p>
						<span class="strong strong"><strong>1.</strong></span> Incoming traffic arrives at <code class="literal">eth1</code> on the physical node.
					</p><p>
						<span class="strong strong"><strong>2.</strong></span> The packet passes to the <code class="literal">br-ex</code> bridge.
					</p><p>
						<span class="strong strong"><strong>3.</strong></span> The packet moves to <code class="literal">br-int</code> via the patch-peer <code class="literal">phy-br-ex &lt;--&gt; int-br-ex</code>.
					</p><p>
						In the following example, <code class="literal">int-br-ex</code> uses port number <code class="literal">15</code>. See the entry containing <code class="literal">15(int-br-ex)</code>:
					</p><pre class="screen"> # ovs-ofctl show br-int
OFPT_FEATURES_REPLY (xid=0x2): dpid:00004e67212f644d
n_tables:254, n_buffers:256
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: OUTPUT SET_VLAN_VID SET_VLAN_PCP STRIP_VLAN SET_DL_SRC SET_DL_DST SET_NW_SRC SET_NW_DST SET_NW_TOS SET_TP_SRC SET_TP_DST ENQUEUE
 15(int-br-ex): addr:12:4e:44:a9:50:f4
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max</pre><div class="formalpara"><p class="title"><strong>Observing the traffic flow on br-int</strong></p><p>
							<span class="strong strong"><strong>1.</strong></span> When the packet arrives at <code class="literal">int-br-ex</code>, an OVS flow rule within the <code class="literal">br-int</code> bridge amends the packet to add the internal VLAN tag <code class="literal">5</code>. See the entry for <code class="literal">actions=mod_vlan_vid:5</code>:
						</p></div><pre class="screen"> # ovs-ofctl dump-flows br-int
NXST_FLOW reply (xid=0x4):
 cookie=0x0, duration=5351.536s, table=0, n_packets=12118, n_bytes=510456, idle_age=0, priority=1 actions=NORMAL
 cookie=0x0, duration=4537.553s, table=0, n_packets=3489, n_bytes=321696, idle_age=0, priority=3,in_port=15,vlan_tci=0x0000 actions=mod_vlan_vid:5,NORMAL
 cookie=0x0, duration=5350.365s, table=0, n_packets=628, n_bytes=57892, idle_age=4538, priority=2,in_port=15 actions=drop
 cookie=0x0, duration=5351.432s, table=23, n_packets=0, n_bytes=0, idle_age=5351, priority=0 actions=drop</pre><p>
						<span class="strong strong"><strong>2.</strong></span> The second rule manages packets that arrive on int-br-ex (in_port=15) with no VLAN tag (vlan_tci=0x0000): This rule adds VLAN tag 5 to the packet (<code class="literal">actions=mod_vlan_vid:5,NORMAL</code>) and forwards it to <code class="literal">qvoxxx</code>.
					</p><p>
						<span class="strong strong"><strong>3.</strong></span> <code class="literal">qvoxxx</code> accepts the packet and forwards it to <code class="literal">qvbxx</code>, after stripping away the VLAN tag.
					</p><p>
						<span class="strong strong"><strong>4.</strong></span> The packet then reaches the instance.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							VLAN tag 5 is an example VLAN that was used on a test Compute node with a flat provider network; this value was assigned automatically by <code class="literal">neutron-openvswitch-agent</code>. This value may be different for your own flat provider network, and can differ for the same network on two separate Compute nodes.
						</p></div></div></section><section class="section" id="phys-connection-troubleshoot-flat"><div class="titlepage"><div><div><h3 class="title">7.2.6. Troubleshooting instance-physical network connections on flat provider networks</h3></div></div></div><p>
						The output provided in <a class="xref" href="index%3F.html#how-does-flat-packet-flow-work" title="7.2.5. How does the flat provider network packet flow work?">Section 7.2.5, “How does the flat provider network packet flow work?”</a> - provides sufficient debugging information for troubleshooting a flat provider network, should anything go wrong. The following steps contain further information about the troubleshooting process.
					</p><p>
						<span class="strong strong"><strong>1.</strong></span> <span class="strong strong"><strong>Review the bridge_mappings</strong></span>:
					</p><p>
						Verify that the physical network name you use (for example, <code class="literal">physnet1</code>) is consistent with the contents of the <code class="literal">bridge_mapping</code> configuration as shown in this example:
					</p><pre class="screen"> # grep bridge_mapping /etc/neutron/plugins/ml2/openvswitch_agent.ini
bridge_mappings = physnet1:br-ex

 # openstack network show provider-flat
...
| provider:physical_network | physnet1
...</pre><p>
						<span class="strong strong"><strong>2.</strong></span> <span class="strong strong"><strong>Review the network configuration:</strong></span>
					</p><p>
						Confirm that the network is created as <code class="literal">external</code>, and uses the <code class="literal">flat</code> type:
					</p><pre class="screen"> # openstack network show provider-flat
...
| provider:network_type     | flat                                 |
| router:external           | True                                 |
...</pre><p>
						<span class="strong strong"><strong>3.</strong></span> <span class="strong strong"><strong>Review the patch-peer:</strong></span>
					</p><p>
						Run the <code class="literal">ovs-vsctl show</code> command, and verify that <code class="literal">br-int</code> and <code class="literal">br-ex</code> are connected using a patch-peer <code class="literal">int-br-ex &lt;--&gt; phy-br-ex</code>.
					</p><pre class="screen"> # ovs-vsctl show
    Bridge br-int
        fail_mode: secure
       Port int-br-ex
            Interface int-br-ex
                type: patch
                options: {peer=phy-br-ex}</pre><p>
						Example configuration of the patch-peer on <code class="literal">br-ex</code>:
					</p><pre class="screen">    Bridge br-ex
        Port phy-br-ex
            Interface phy-br-ex
                type: patch
                options: {peer=int-br-ex}
        Port br-ex
            Interface br-ex
                type: internal</pre><p>
						This connection is created when you restart the <code class="literal">neutron-openvswitch-agent</code> service, if <code class="literal">bridge_mapping</code> is correctly configured in <code class="literal">/etc/neutron/plugins/ml2/openvswitch_agent.ini</code>. Re-check the <code class="literal">bridge_mapping</code> setting if the connection is not created after you restart the service.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For more information on configuring <code class="literal">bridge_mappings</code>, see <a class="xref" href="index%3F.html#bridge-mappings" title="Chapter 11. Configuring bridge mappings">Chapter 11, <em>Configuring bridge mappings</em></a>.
						</p></div></div><p>
						<span class="strong strong"><strong>4.</strong></span> <span class="strong strong"><strong>Review the network flows:</strong></span>
					</p><p>
						Run <code class="literal">ovs-ofctl dump-flows br-ex</code> and <code class="literal">ovs-ofctl dump-flows br-int</code> and review whether the flows strip the internal VLAN IDs for outgoing packets, and add VLAN IDs for incoming packets. This flow is first added when you spawn an instance to this network on a specific Compute node.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If this flow is not created after spawning the instance, verify that the network is created as <code class="literal">flat</code>, is <code class="literal">external</code>, and that the <code class="literal">physical_network</code> name is correct. In addition, review the <code class="literal">bridge_mapping</code> settings.
							</li><li class="listitem">
								Finally, review the <code class="literal">ifcfg-br-ex</code> and <code class="literal">ifcfg-ethx</code> configuration. Ensure that <code class="literal">ethX</code> is added as a port within <code class="literal">br-ex</code>, and that <code class="literal">ifcfg-br-ex</code> and <code class="literal">ifcfg-ethx</code> have an <code class="literal">UP</code> flag in the output of <code class="literal">ip a</code>.
							</li></ul></div><p>
						The following output shows <code class="literal">eth1</code> is a port in <code class="literal">br-ex</code>:
					</p><pre class="screen">    Bridge br-ex
        Port phy-br-ex
            Interface phy-br-ex
                type: patch
                options: {peer=int-br-ex}
        Port "eth1"
            Interface "eth1"</pre><p>
						The following example demonstrates that <code class="literal">eth1</code> is configured as an OVS port, and that the kernel knows to transfer all packets from the interface, and send them to the OVS bridge <code class="literal">br-ex</code>. This can be observed in the entry: <code class="literal">master ovs-system</code>.
					</p><pre class="screen"> # ip a
5: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq master ovs-system state UP qlen 1000</pre></section></section><section class="section" id="Using-VLAN-Provider-Networks"><div class="titlepage"><div><div><h2 class="title">7.3. Using VLAN provider networks</h2></div></div></div><p>
					To connect multiple VLAN-tagged interfaces on a single NIC to multiple provider networks, complete the steps in this section to create VLAN provider networks that can connect instances directly to external networks.This example uses a physical network called <code class="literal">physnet1</code>, with a range of VLANs (<code class="literal">171-172</code>). The network nodes and compute nodes are connected to the physical network using physical interface <code class="literal">eth1</code>. The switch ports that these interfaces connect to must be configured to trunk the required VLAN ranges. Complete the following procedures to configure the VLAN provider networks using the example VLAN IDs and names.
				</p><section class="section" id="config_controller_nodes_vlan"><div class="titlepage"><div><div><h3 class="title">7.3.1. Configuring the Controller nodes</h3></div></div></div><p>
						<span class="strong strong"><strong>1.</strong></span> Enable the <span class="emphasis"><em>vlan</em></span> mechanism driver by editing <code class="literal">/etc/neutron/plugin.ini</code> (symlinked to <code class="literal">/etc/neutron/plugins/ml2/ml2_conf.ini</code>), and add <span class="emphasis"><em>vlan</em></span> to the existing list of values:
					</p><pre class="screen">[ml2]
type_drivers = vxlan,flat,vlan</pre><p>
						<span class="strong strong"><strong>2.</strong></span> Configure the <code class="literal">network_vlan_ranges</code> setting to reflect the physical network and VLAN ranges in use:
					</p><pre class="screen">[ml2_type_vlan]
network_vlan_ranges=physnet1:171:172</pre><p>
						<span class="strong strong"><strong>3.</strong></span> Restart the <span class="emphasis"><em>neutron-server</em></span> service to apply the changes:
					</p><pre class="screen">systemctl restart neutron-server</pre><p>
						<span class="strong strong"><strong>4.</strong></span> Create the external networks as type <span class="emphasis"><em>vlan</em></span>, and associate them with the configured <code class="literal">physical_network</code>. Used the <span class="emphasis"><em>--shared</em></span> when you create the external networks so that other users can connect instances directly. Run the following example command to create two networks: one for VLAN 171, and another for VLAN 172:
					</p><pre class="screen">openstack network create
			--provider-network-type vlan
			--external
			--provider-physical-network physnet1
			--segment 171
			--share

openstack network create
			--provider-network-type vlan
			--external
			--provider-physical-network physnet1
			--segment 172
			--share</pre><p>
						<span class="strong strong"><strong>5.</strong></span> Create a number of subnets and configure them to use the external network. You can use either <code class="literal">openstack subnet create</code> or the dashboard to create these subnets. Ensure that the external subnet details you have received from your network administrator are correctly associated with each VLAN. In this example, VLAN 171 uses subnet <span class="emphasis"><em>10.65.217.0/24</em></span> and VLAN 172 uses <span class="emphasis"><em>10.65.218.0/24</em></span>:
					</p><pre class="screen">openstack subnet create
			--network provider-171
			--subnet-range 10.65.217.0/24
			--dhcp
			--gateway 10.65.217.254
			--subnet-provider-171

openstack subnet create
			--network provider-172
			--subnet-range 10.65.218.0/24
			--dhcp
			--gateway 10.65.218.254
			--subnet-provider-172</pre></section><section class="section" id="config_network_compute_nodes_vlan"><div class="titlepage"><div><div><h3 class="title">7.3.2. Configuring the Network and Compute nodes</h3></div></div></div><p>
						Complete the following steps on the Network node and Compute nodes to connect the nodes to the external network, and permit instances to communicate directly with the external network.
					</p><p>
						<span class="strong strong"><strong>1.</strong></span> Create an external network bridge (<span class="emphasis"><em>br-ex</em></span>), and associate a port (<span class="emphasis"><em>eth1</em></span>) with it:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								This example configures <span class="emphasis"><em>eth1</em></span> to use <span class="emphasis"><em>br-ex</em></span>:
							</li></ul></div><pre class="screen">/etc/sysconfig/network-scripts/ifcfg-eth1

DEVICE=eth1
TYPE=OVSPort
DEVICETYPE=ovs
OVS_BRIDGE=br-ex
ONBOOT=yes
NM_CONTROLLED=no
BOOTPROTO=none</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								This example configures the <span class="emphasis"><em>br-ex</em></span> bridge:
							</li></ul></div><pre class="screen">/etc/sysconfig/network-scripts/ifcfg-br-ex:

DEVICE=br-ex
TYPE=OVSBridge
DEVICETYPE=ovs
ONBOOT=yes
NM_CONTROLLED=no
BOOTPROTO=none</pre><p>
						<span class="strong strong"><strong>2.</strong></span> Reboot the node, or restart the <span class="emphasis"><em>network</em></span> service to apply the networking changes:
					</p><pre class="screen"># systemctl restart network</pre><p>
						<span class="strong strong"><strong>3.</strong></span> Configure the physical networks in <code class="literal">/etc/neutron/plugins/ml2/openvswitch_agent.ini</code> and map bridges according to the physical network:
					</p><pre class="screen">bridge_mappings = physnet1:br-ex</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For more information on configuring <code class="literal">bridge_mappings</code>, see <a class="xref" href="index%3F.html#bridge-mappings" title="Chapter 11. Configuring bridge mappings">Chapter 11, <em>Configuring bridge mappings</em></a>.
						</p></div></div><p>
						<span class="strong strong"><strong>4.</strong></span> Restart the <code class="literal">neutron-openvswitch-agent</code> service on the network nodes and compute nodes to apply the changes:
					</p><pre class="screen">systemctl restart neutron-openvswitch-agent</pre></section><section class="section" id="config_network_node_vlan"><div class="titlepage"><div><div><h3 class="title">7.3.3. Configuring the Network node</h3></div></div></div><p>
						<span class="strong strong"><strong>1.</strong></span> Set the <code class="literal">external_network_bridge =</code> parameter to an empty value in <code class="literal">/etc/neutron/l3_agent.ini</code> so that you can use provider external networks (not bridge based external networks) where you add <code class="literal">external_network_bridge = br-ex</code>:
					</p><pre class="screen"># Name of bridge used for external network traffic. This should be set to
# empty value for the linux bridge
external_network_bridge =</pre><p>
						<span class="strong strong"><strong>2.</strong></span> Restart <code class="literal">neutron-l3-agent</code> to apply the changes.
					</p><pre class="screen">systemctl restart neutron-l3-agent</pre><p>
						<span class="strong strong"><strong>3.</strong></span> Create a new instance and use the <code class="literal">Networking</code> tab in the dashboard to add the new instance directly to the new external network.
					</p></section><section class="section" id="how-does-vlan-packet-flow-work"><div class="titlepage"><div><div><h3 class="title">7.3.4. How does the VLAN provider network packet flow work?</h3></div></div></div><p>
						This section describes in detail how traffic flows to and from an instance with VLAN provider network configuration.
					</p><div class="formalpara"><p class="title"><strong>The flow of outgoing traffic in a VLAN provider network</strong></p><p>
							The following diagram describes the packet flow for traffic leaving an instance and arriving directly to a VLAN provider external network. This example uses two instances attached to the two VLAN networks (171 and 172). After you configure <span class="emphasis"><em>br-ex</em></span>, add a physical interface to it, and spawn an instance to a Compute node, the resulting configuration of interfaces and bridges resembles the configuration in the following diagram:
						</p></div><p>
						<span class="inlinemediaobject"><img src="vlan-provider.jpg" alt="vlan provider"/></span>

					</p><p>
						<span class="strong strong"><strong>1.</strong></span> Packets leaving the <span class="emphasis"><em>eth0</em></span> interface of the instance arrive at the linux bridge <span class="emphasis"><em>qbr-xx</em></span> connected to the instance.
					</p><p>
						<span class="strong strong"><strong>2.</strong></span> <span class="emphasis"><em>qbr-xx</em></span> is connected to <span class="emphasis"><em>br-int</em></span> using veth pair <span class="emphasis"><em>qvbxx &lt;→ qvoxxx</em></span>.
					</p><p>
						<span class="strong strong"><strong>3.</strong></span> <span class="emphasis"><em>qvbxx</em></span> is connected to the linux bridge <span class="emphasis"><em>qbr-xx</em></span> and <span class="emphasis"><em>qvoxx</em></span> is connected to the Open vSwitch bridge <span class="emphasis"><em>br-int</em></span>.
					</p><div class="formalpara"><p class="title"><strong>Example configuration of <span class="emphasis"><em>qbr-xx</em></span> on the Linux bridge.<br/></strong></p><p>
							This example features two instances and two corresponding linux bridges:
						</p></div><pre class="screen"># brctl show
bridge name	bridge id		STP enabled	interfaces
qbr84878b78-63		8000.e6b3df9451e0	no		qvb84878b78-63
							tap84878b78-63

qbr86257b61-5d		8000.3a3c888eeae6	no		qvb86257b61-5d
							tap86257b61-5d</pre><div class="formalpara"><p class="title"><strong>The configuration of <span class="emphasis"><em>qvoxx</em></span> on <span class="emphasis"><em>br-int</em></span>:</strong></p><p>
							
<pre class="screen">                options: {peer=phy-br-ex}
        Port "qvo86257b61-5d"
            tag: 3

            Interface "qvo86257b61-5d"
        Port "qvo84878b78-63"
            tag: 2
            Interface "qvo84878b78-63"</pre>

						</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">qvoxx</code> is tagged with the internal VLAN tag associated with the VLAN provider network. In this example, the internal VLAN tag 2 is associated with the VLAN provider network <code class="literal">provider-171</code> and VLAN tag 3 is associated with VLAN provider network <code class="literal">provider-172</code>. When the packet reaches <span class="emphasis"><em>qvoxx</em></span>, the this VLAN tag is added to the packet header.
							</li><li class="listitem">
								The packet is then moved to the <span class="emphasis"><em>br-ex</em></span> OVS bridge using patch-peer <code class="literal">int-br-ex</code> &lt;→ <code class="literal">phy-br-ex</code>. Example patch-peer on <span class="emphasis"><em>br-int</em></span>:
							</li></ul></div><pre class="screen">    Bridge br-int
        fail_mode: secure
       Port int-br-ex
            Interface int-br-ex
                type: patch
                options: {peer=phy-br-ex}</pre><p>
						Example configuration of the patch peer on <span class="emphasis"><em>br-ex</em></span>:
					</p><pre class="screen">    Bridge br-ex
        Port phy-br-ex
            Interface phy-br-ex
                type: patch
                options: {peer=int-br-ex}
        Port br-ex
            Interface br-ex
                type: internal</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								When this packet reaches <span class="emphasis"><em>phy-br-ex</em></span> on <span class="emphasis"><em>br-ex</em></span>, an OVS flow inside <span class="emphasis"><em>br-ex</em></span> replaces the internal VLAN tag with the actual VLAN tag associated with the VLAN provider network.
							</li></ul></div><p>
						The output of the following command shows that the port number of <span class="emphasis"><em>phy-br-ex</em></span> is <code class="literal">4</code>:
					</p><pre class="screen"># ovs-ofctl show br-ex
 4(phy-br-ex): addr:32:e7:a1:6b:90:3e
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max</pre><p>
						The following command shows any packet that arrives on phy-br-ex (<code class="literal">in_port=4</code>) which has VLAN tag 2 (<code class="literal">dl_vlan=2</code>). Open vSwitch replaces the VLAN tag with 171 (<code class="literal">actions=mod_vlan_vid:171,NORMAL</code>) and forwards the packet to the physical interface. The command also shows any packet that arrives on phy-br-ex (<code class="literal">in_port=4</code>) which has VLAN tag 3 (<code class="literal">dl_vlan=3</code>). Open vSwitch replaces the VLAN tag with 172 (<code class="literal">actions=mod_vlan_vid:172,NORMAL</code>) and forwards the packet to the physical interface. The neutron-openvswitch-agent adds these rules.
					</p><pre class="screen"># ovs-ofctl dump-flows br-ex
NXST_FLOW reply (xid=0x4):
NXST_FLOW reply (xid=0x4):
 cookie=0x0, duration=6527.527s, table=0, n_packets=29211, n_bytes=2725576, idle_age=0, priority=1 actions=NORMAL
 cookie=0x0, duration=2939.172s, table=0, n_packets=117, n_bytes=8296, idle_age=58, priority=4,in_port=4,dl_vlan=3 actions=mod_vlan_vid:172,NORMAL
 cookie=0x0, duration=6111.389s, table=0, n_packets=145, n_bytes=9368, idle_age=98, priority=4,in_port=4,dl_vlan=2 actions=mod_vlan_vid:171,NORMAL
 cookie=0x0, duration=6526.675s, table=0, n_packets=82, n_bytes=6700, idle_age=2462, priority=2,in_port=4 actions=drop</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								This packet is then forwarded to physical interface <span class="emphasis"><em>eth1</em></span>.
							</li></ul></div><div class="formalpara"><p class="title"><strong>The flow of incoming traffic in a VLAN provider network</strong></p><p>
							The following example flow was tested on a Compute node using VLAN tag 2 for provider network provider-171 and VLAN tag 3 for provider network provider-172. The flow uses port 18 on the integration bridge br-int.
						</p></div><p>
						Your VLAN provider network may require a different configuration. Also, the configuration requirement for a network may differ between two different Compute nodes.
					</p><p>
						The output of the following command shows <span class="emphasis"><em>int-br-ex</em></span> with port number 18:
					</p><pre class="screen"># ovs-ofctl show br-int
 18(int-br-ex): addr:fe:b7:cb:03:c5:c1
     config:     0
     state:      0
     speed: 0 Mbps now, 0 Mbps max</pre><p>
						The output of the following command shows the flow rules on br-int.
					</p><pre class="screen"># ovs-ofctl dump-flows br-int
NXST_FLOW reply (xid=0x4):
 cookie=0x0, duration=6770.572s, table=0, n_packets=1239, n_bytes=127795, idle_age=106, priority=1 actions=NORMAL

 cookie=0x0, duration=3181.679s, table=0, n_packets=2605, n_bytes=246456, idle_age=0,
 priority=3,in_port=18,dl_vlan=172 actions=mod_vlan_vid:3,NORMAL

 cookie=0x0, duration=6353.898s, table=0, n_packets=5077, n_bytes=482582, idle_age=0,
 priority=3,in_port=18,dl_vlan=171 actions=mod_vlan_vid:2,NORMAL

 cookie=0x0, duration=6769.391s, table=0, n_packets=22301, n_bytes=2013101, idle_age=0, priority=2,in_port=18 actions=drop

 cookie=0x0, duration=6770.463s, table=23, n_packets=0, n_bytes=0, idle_age=6770, priority=0 actions=drop</pre><div class="formalpara"><p class="title"><strong>Incoming flow example</strong></p><p>
							This example demonstrates the the following br-int OVS flow:
						</p></div><pre class="screen">cookie=0x0, duration=3181.679s, table=0, n_packets=2605, n_bytes=246456, idle_age=0,
priority=3,in_port=18,dl_vlan=172 actions=mod_vlan_vid:3,NORMAL</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A packet with VLAN tag 172 from the external network reaches the <span class="emphasis"><em>br-ex</em></span> bridge via <span class="emphasis"><em>eth1</em></span> on the physical node
							</li><li class="listitem">
								The packet moves to <span class="emphasis"><em>br-int</em></span> via the patch-peer <code class="literal">phy-br-ex &lt;-&gt; int-br-ex</code>.
							</li><li class="listitem">
								The packet matches the flow’s criteria (<code class="literal">in_port=18,dl_vlan=172</code>)
							</li><li class="listitem">
								The flow actions (<code class="literal">actions=mod_vlan_vid:3,NORMAL</code>) replace the VLAN tag 172 with internal VLAN tag 3 and forwards the packet to the instance with normal Layer 2 processing.
							</li></ul></div></section><section class="section" id="physical-connection-troubleshoot-vlan"><div class="titlepage"><div><div><h3 class="title">7.3.5. Troubleshooting instance-physical network connections on VLAN provider networks</h3></div></div></div><p>
						Refer to the packet flow described in <a class="xref" href="index%3F.html#how-does-vlan-packet-flow-work" title="7.3.4. How does the VLAN provider network packet flow work?">Section 7.3.4, “How does the VLAN provider network packet flow work?”</a> when troubleshooting connectivity in a VLAN provider network. In addition, review the following configuration options:
					</p><p>
						<span class="strong strong"><strong>1.</strong></span> Verify that physical network name is used consistently. In this example, <code class="literal">physnet1</code> is used consistently while creating the network, and within the <code class="literal">bridge_mapping</code> configuration:
					</p><pre class="screen"># grep bridge_mapping /etc/neutron/plugins/ml2/openvswitch_agent.ini
bridge_mappings = physnet1:br-ex

# openstack network show provider-vlan171
...
| provider:physical_network | physnet1
...</pre><p>
						<span class="strong strong"><strong>2.</strong></span> Confirm that the network was created as <code class="literal">external</code>, is type <code class="literal">vlan</code>, and uses the correct <code class="literal">segmentation_id</code> value:
					</p><pre class="screen"># openstack network show provider-vlan171
...
| provider:network_type     | vlan                                 |
| provider:physical_network | physnet1                             |
| provider:segmentation_id  | 171                                  |
...</pre><p>
						<span class="strong strong"><strong>3.</strong></span> Run <code class="literal">ovs-vsctl show</code> and verify that <span class="emphasis"><em>br-int</em></span> and <span class="emphasis"><em>br-ex</em></span> are connected using the patch-peer <code class="literal">int-br-ex</code> <span class="emphasis"><em>&lt;→</em></span> <code class="literal">phy-br-ex</code>.<br/> This connection is created while restarting <span class="emphasis"><em>neutron-openvswitch-agent</em></span>, provided that the <code class="literal">bridge_mapping</code> is correctly configured in <code class="literal">/etc/neutron/plugins/ml2/openvswitch_agent.ini</code>.<br/> Recheck the <span class="emphasis"><em>bridge_mapping</em></span> setting if this is not created even after restarting the service.
					</p><p>
						<span class="strong strong"><strong>4.</strong></span> To review the flow of outgoing packets, run <code class="literal">ovs-ofctl dump-flows br-ex</code> and <code class="literal">ovs-ofctl dump-flows br-int</code>, and verify that the flows map the internal VLAN IDs to the external VLAN ID (<span class="emphasis"><em>segmentation_id</em></span>). For incoming packets, map the external VLAN ID to the internal VLAN ID.<br/> This flow is added by the neutron OVS agent when you spawn an instance to this network for the first time. If this flow is not created after spawning the instance, ensure that the network is created as <code class="literal">vlan</code>, is <code class="literal">external</code>, and that the <code class="literal">physical_network</code> name is correct. In addition, re-check the <code class="literal">bridge_mapping</code> settings.
					</p><p>
						<span class="strong strong"><strong>5.</strong></span> Finally, re-check the <span class="emphasis"><em>ifcfg-br-ex</em></span> and <span class="emphasis"><em>ifcfg-ethx</em></span> configuration. Ensure that <span class="emphasis"><em>br-ex</em></span> includes port <span class="emphasis"><em>ethX</em></span>, and that both <span class="emphasis"><em>ifcfg-br-ex</em></span> and <span class="emphasis"><em>ifcfg-ethx</em></span> have an <code class="literal">UP</code> flag in the output of the <code class="literal">ip a</code> command.<br/> For example, the following output shows that <span class="emphasis"><em>eth1</em></span> is a port in <span class="emphasis"><em>br-ex</em></span>:
					</p><pre class="screen">    Bridge br-ex
        Port phy-br-ex
            Interface phy-br-ex
                type: patch
                options: {peer=int-br-ex}
        Port "eth1"
            Interface "eth1"</pre><p>
						The following command shows that <span class="emphasis"><em>eth1</em></span> has been added as a port, and that the kernel is configured to move all packets from the interface to the OVS bridge <span class="emphasis"><em>br-ex</em></span>. This is demonstrated by the entry: <code class="literal">master ovs-system</code>.
					</p><pre class="screen"># ip a
5: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq master ovs-system state UP qlen 1000</pre></section></section><section class="section" id="enabling-compute-metadata-access"><div class="titlepage"><div><div><h2 class="title">7.4. Enabling Compute metadata access</h2></div></div></div><p>
					Instances connected as described in this chapter are directly attached to the provider external networks, and have external routers configured as their default gateway. No OpenStack Networking (neutron) routers are used. This means that <span class="emphasis"><em>neutron</em></span> routers cannot be used to proxy metadata requests from instances to the <span class="emphasis"><em>nova-metadata</em></span> server, which may result in failures while running <span class="emphasis"><em>cloud-init</em></span>. However, this issue can be resolved by configuring the dhcp agent to proxy metadata requests. You can enable this functionality in <code class="literal">/etc/neutron/dhcp_agent.ini</code>. For example:
				</p><pre class="screen">enable_isolated_metadata = True</pre></section><section class="section" id="floating-ip-addresses"><div class="titlepage"><div><div><h2 class="title">7.5. Floating IP addresses</h2></div></div></div><p>
					You can use the same network to allocate floating IP addresses to instances, even if the floating IPs are already associated with private networks. The addresses that you allocate as floating IPs from this network are bound to the <span class="emphasis"><em>qrouter-xxx</em></span> namespace on the Network node, and perform <span class="emphasis"><em>DNAT-SNAT</em></span> to the associated private IP address. In contrast, the IP addresses that you allocate for direct external network access are bound directly inside the instance, and allow the instance to communicate directly with external network.
				</p></section></section><section class="chapter" id="sec-physical-switch"><div class="titlepage"><div><div><h2 class="title">Chapter 8. Configuring physical switches for OpenStack Networking</h2></div></div></div><p>
				This chapter documents the common physical switch configuration steps required for OpenStack Networking. Vendor-specific configuration is included for the following switches:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="index%3F.html#phys-cisco-catalyst" title="8.2. Configuring a Cisco Catalyst switch">Cisco Catalyst</a>
					</li><li class="listitem">
						<a class="link" href="index%3F.html#phys-cisco-nexus" title="8.3. Configuring a Cisco Nexus switch">Cisco Nexus</a>
					</li><li class="listitem">
						<a class="link" href="index%3F.html#phys-cumulus-linux" title="8.4. Configuring a Cumulus Linux switch">Cumulus Linux</a>
					</li><li class="listitem">
						<a class="link" href="index%3F.html#phys-extreme-exos" title="8.5. Configuring a Extreme Exos switch">Extreme Networks EXOS</a>
					</li><li class="listitem">
						<a class="link" href="index%3F.html#phys-juniper-ex-series" title="8.6. Configuring a Juniper EX Series switch">Juniper EX Series</a>
					</li></ul></div><section class="section" id="plan-physical-network-environ"><div class="titlepage"><div><div><h2 class="title">8.1. Planning your physical network environment</h2></div></div></div><p>
					The physical network adapters in your OpenStack nodes carry different types of network traffic, such as instance traffic, storage data, or authentication requests. The type of traffic these NICs carry affects how you must configure the ports on the physical switch.
				</p><p>
					First, you must decide which physical NICs on your Compute node you want to carry which types of traffic. Then, when the NIC is cabled to a physical switch port, you must configure the switch port to allow trunked or general traffic.
				</p><p>
					For example, the following diagram depicts a Compute node with two NICs, eth0 and eth1. Each NIC is cabled to a Gigabit Ethernet port on a physical switch, with eth0 carrying instance traffic, and eth1 providing connectivity for OpenStack services:
				</p><div id="phys-sample-diagram" class="formalpara"><p class="title"><strong>Sample network layout</strong></p><p>
						<span class="inlinemediaobject"><img src="switch-example.png" alt="switch example"/></span>

					</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This diagram does not include any additional redundant NICs required for fault tolerance.
					</p></div></div><p>
					For information on network interface bonds, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/#overcloud-network-interface-bonding">Network Interface Bonding chapter of the Advanced Overcloud Customization</a> guide.
				</p></section><section class="section" id="phys-cisco-catalyst"><div class="titlepage"><div><div><h2 class="title">8.2. Configuring a Cisco Catalyst switch</h2></div></div></div><section class="section" id="about-trunk-ports_cisco-catalyst"><div class="titlepage"><div><div><h3 class="title">8.2.1. About trunk ports</h3></div></div></div><p>
						With OpenStack Networking you can connect instances to the VLANs that already exist on your physical network. The term <span class="emphasis"><em>trunk</em></span> is used to describe a port that allows multiple VLANs to traverse through the same port. Using these ports, VLANs can span across multiple switches, including virtual switches. For example, traffic tagged as VLAN110 in the physical network reaches the Compute node, where the 8021q module directs the tagged traffic to the appropriate VLAN on the vSwitch.
					</p></section><section class="section" id="config-catalyst-trunk-ports"><div class="titlepage"><div><div><h3 class="title">8.2.2. Configuring trunk ports for a Cisco Catalyst switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If using a Cisco Catalyst switch running Cisco IOS, you might use the following configuration syntax to allow traffic for VLANs 110 and 111 to pass through to your instances.
							</p><p class="simpara">
								This configuration assumes that your physical node has an ethernet cable connected to interface GigabitEthernet1/0/12 on the physical switch.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen">interface GigabitEthernet1/0/12
  description Trunk to Compute Node
  spanning-tree portfast trunk
  switchport trunk encapsulation dot1q
  switchport mode trunk
  switchport trunk native vlan 2
  switchport trunk allowed vlan 2,110,111</pre><p class="simpara">
								Use the following list to understand these parameters:
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893199340112" scope="col">Field</th><th align="left" valign="top" id="idm139893199339024" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893199340112"> <p>
												<code class="literal">interface GigabitEthernet1/0/12</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199339024"> <p>
												The switch port that the NIC of the X node connects to. Ensure that you replace the <code class="literal">GigabitEthernet1/0/12</code> value with the correct port value for your environment. Use the show interface command to view a list of ports.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199340112"> <p>
												<code class="literal">description Trunk to Compute Node</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199339024"> <p>
												A unique and descriptive value that you can use to identify this interface.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199340112"> <p>
												<code class="literal">spanning-tree portfast trunk</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199339024"> <p>
												If your environment uses STP, set this value to instruct Port Fast that this port is used to trunk traffic.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199340112"> <p>
												<code class="literal">switchport trunk encapsulation dot1q</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199339024"> <p>
												Enables the 802.1q trunking standard (rather than ISL). This value varies depending on the configuration that your switch supports.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199340112"> <p>
												<code class="literal">switchport mode trunk</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199339024"> <p>
												Configures this port as a trunk port, rather than an access port, meaning that it allows VLAN traffic to pass through to the virtual switches.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199340112"> <p>
												<code class="literal">switchport trunk native vlan 2</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199339024"> <p>
												Set a native VLAN to instruct the switch where to send untagged (non-VLAN) traffic.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199340112"> <p>
												<code class="literal">switchport trunk allowed vlan 2,110,111</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199339024"> <p>
												Defines which VLANs are allowed through the trunk.
											</p>
											 </td></tr></tbody></table></div></li></ul></div></section><section class="section" id="about-access-ports_cisco-catalyst"><div class="titlepage"><div><div><h3 class="title">8.2.3. About access ports</h3></div></div></div><p>
						Not all NICs on your Compute node carry instance traffic, and so you do not need to configure all NICs to allow multiple VLANs to pass through. Access ports require only one VLAN, and might fulfill other operational requirements, such as transporting management traffic or Block Storage data. These ports are commonly known as access ports and usually require a simpler configuration than trunk ports.
					</p></section><section class="section" id="config-catalyst-access-ports"><div class="titlepage"><div><div><h3 class="title">8.2.4. Configuring access ports for a Cisco Catalyst switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Using the example from the <a class="xref" href="index%3F.html#phys-sample-diagram" title="Sample network layout">Sample network layout</a> diagram, GigabitEthernet1/0/13 (on a Cisco Catalyst switch) is configured as an access port for <code class="literal">eth1</code>.
							</p><p class="simpara">
								In this configuration,your physical node has an ethernet cable connected to interface GigabitEthernet1/0/12 on the physical switch.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen">interface GigabitEthernet1/0/13
 description Access port for Compute Node
 switchport mode access
 switchport access vlan 200
 spanning-tree portfast</pre><p class="simpara">
								These settings are described below:
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893199293344" scope="col">Field</th><th align="left" valign="top" id="idm139893199292256" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893199293344"> <p>
												<code class="literal">interface GigabitEthernet1/0/13</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199292256"> <p>
												The switch port that the NIC of the X node connects to. Ensure that you replace the <code class="literal">GigabitEthernet1/0/12</code> value with the correct port value for your environment. Use the show interface command to view a list of ports.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199293344"> <p>
												<code class="literal">description Access port for Compute Node</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199292256"> <p>
												A unique and descriptive value that you can use to identify this interface.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199293344"> <p>
												<code class="literal">switchport mode access</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199292256"> <p>
												Configures this port as an access port, rather than a trunk port.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199293344"> <p>
												<code class="literal">switchport access vlan 200</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199292256"> <p>
												Configures the port to allow traffic on VLAN 200. You must configure your Compute node with an IP address from this VLAN.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm139893199293344"> <p>
												<code class="literal">spanning-tree portfast</code>
											</p>
											 </td><td align="left" valign="top" headers="idm139893199292256"> <p>
												If using STP, set this value to instruct STP not to attempt to initialize this as a trunk, allowing for quicker port handshakes during initial connections (such as server reboot).
											</p>
											 </td></tr></tbody></table></div></li></ul></div></section><section class="section" id="about-lacp-port-aggregation_cisco-catalyst"><div class="titlepage"><div><div><h3 class="title">8.2.5. About LACP port aggregation</h3></div></div></div><p>
						You can use LACP to bundle multiple physical NICs together to form a single logical channel. Also known as 802.3ad (or bonding mode 4 in Linux), LACP creates a dynamic bond for load-balancing and fault tolerance. You must configure LACP at both physical ends: on the physical NICs, and on the physical switch ports.
					</p></section><section class="section" id="config-lacp-phys-nic_cisco-catalyst"><div class="titlepage"><div><div><h3 class="title">8.2.6. Configuring LACP on the physical NIC</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <span class="emphasis"><em>/home/stack/network-environment.yaml</em></span> file:
							</p><pre class="screen">- type: linux_bond
  name: bond1
  mtu: 9000
  bonding_options:{get_param: BondInterfaceOvsOptions};
  members:
    - type: interface
      name: nic3
      mtu: 9000
      primary: true
    - type: interface
      name: nic4
      mtu: 9000</pre></li><li class="listitem"><p class="simpara">
								Configure the Open vSwitch bridge to use LACP:
							</p><pre class="screen">BondInterfaceOvsOptions:
    "mode=802.3ad"</pre></li></ol></div><p>
						For information on configuring network bonds, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/#overcloud-network-interface-bonding">Network Interface Bonding chapter of the Advanced Overcloud Customization</a> guide.
					</p></section><section class="section" id="config-catalyst-lacp"><div class="titlepage"><div><div><h3 class="title">8.2.7. Configuring LACP for a Cisco Catalyst switch</h3></div></div></div><p>
						In this example, the Compute node has two NICs using VLAN 100:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Physically connect both NICs on the Compute node to the switch (for example, ports 12 and 13).
							</li><li class="listitem"><p class="simpara">
								Create the LACP port channel:
							</p><pre class="screen">interface port-channel1
  switchport access vlan 100
  switchport mode access
  spanning-tree guard root</pre></li><li class="listitem"><p class="simpara">
								Configure switch ports 12 (Gi1/0/12) and 13 (Gi1/0/13):
							</p><pre class="screen">sw01# config t
Enter configuration commands, one per line.  End with CNTL/Z.

sw01(config) interface GigabitEthernet1/0/12
   switchport access vlan 100
   switchport mode access
   speed 1000
   duplex full
   channel-group 10 mode active
   channel-protocol lacp

interface GigabitEthernet1/0/13
  switchport access vlan 100
  switchport mode access
  speed 1000
  duplex full
  channel-group 10 mode active
  channel-protocol lacp</pre></li><li class="listitem"><p class="simpara">
								Review your new port channel. The resulting output lists the new port-channel <code class="literal">Po1</code>, with member ports <code class="literal">Gi1/0/12</code> and <code class="literal">Gi1/0/13</code>:
							</p><pre class="screen">sw01# show etherchannel summary
&lt;snip&gt;

Number of channel-groups in use: 1
Number of aggregators:           1

Group  Port-channel  Protocol    Ports
------+-------------+-----------+-----------------------------------------------
1      Po1(SD)         LACP      Gi1/0/12(D)  Gi1/0/13(D)</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Remember to apply your changes by copying the running-config to the startup-config: <code class="literal">copy running-config startup-config</code>.
								</p></div></div></li></ol></div></section><section class="section" id="about-mtu-settings_cisco-catalyst"><div class="titlepage"><div><div><h3 class="title">8.2.8. About MTU settings</h3></div></div></div><p>
						You must adjust your MTU size for certain types of network traffic. For example, jumbo frames (9000 bytes) are required for certain NFS or iSCSI traffic.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must change MTU settings from end-to-end on all hops that the traffic is expected to pass through, including any virtual switches. For information on changing the MTU in your OpenStack environment, see <a class="xref" href="index%3F.html#sec-mtu" title="Chapter 9. Configure maximum transmission unit (MTU) settings">Chapter 9, <em>Configure maximum transmission unit (MTU) settings</em></a>.
						</p></div></div></section><section class="section" id="config-catalyst-mtu-settings"><div class="titlepage"><div><div><h3 class="title">8.2.9. Configuring MTU settings for a Cisco Catalyst switch</h3></div></div></div><p>
						Complete the steps in this example procedure to enable jumbo frames on your Cisco Catalyst 3750 switch.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Review the current MTU settings:
							</p><pre class="screen">sw01# show system mtu

System MTU size is 1600 bytes
System Jumbo MTU size is 1600 bytes
System Alternate MTU size is 1600 bytes
Routing MTU size is 1600 bytes</pre></li><li class="listitem"><p class="simpara">
								MTU settings are changed switch-wide on 3750 switches, and not for individual interfaces. Run the following commands to configure the switch to use jumbo frames of 9000 bytes. You might prefer to configure the MTU settings for individual interfaces, if your switch supports this feature.
							</p><pre class="screen">sw01# config t
Enter configuration commands, one per line.  End with CNTL/Z.

sw01(config)# system mtu jumbo 9000
Changes to the system jumbo MTU will not take effect until the next reload is done</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Remember to save your changes by copying the running-config to the startup-config: <code class="literal">copy running-config startup-config</code>.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Reload the switch to apply the change.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Reloading the switch causes a network outage for any devices that are dependent on the switch. Therefore, reload the switch only during a scheduled maintenance period.
								</p></div></div><pre class="screen">sw01# reload
Proceed with reload? [confirm]</pre></li><li class="listitem"><p class="simpara">
								After the switch reloads, confirm the new jumbo MTU size.
							</p><p class="simpara">
								The exact output may differ depending on your switch model. For example, <span class="strong strong"><strong>System MTU</strong></span> might apply to non-Gigabit interfaces, and <span class="strong strong"><strong>Jumbo MTU</strong></span> might describe all Gigabit interfaces.
							</p><pre class="screen">sw01# show system mtu

System MTU size is 1600 bytes
System Jumbo MTU size is 9000 bytes
System Alternate MTU size is 1600 bytes
Routing MTU size is 1600 bytes</pre></li></ol></div></section><section class="section" id="about-lldp-discovery_cisco-catalyst"><div class="titlepage"><div><div><h3 class="title">8.2.10. About LLDP discovery</h3></div></div></div><p>
						The <code class="literal">ironic-python-agent</code> service listens for LLDP packets from connected switches. The collected information can include the switch name, port details, and available VLANs. Similar to Cisco Discovery Protocol (CDP), LLDP assists with the discovery of physical hardware during the director introspection process.
					</p></section><section class="section" id="config-catalyst-lldp"><div class="titlepage"><div><div><h3 class="title">8.2.11. Configuring LLDP for a Cisco Catalyst switch</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Run the <code class="literal">lldp run</code> command to enable LLDP globally on your Cisco Catalyst switch:
							</p><pre class="screen">sw01# config t
Enter configuration commands, one per line.  End with CNTL/Z.

sw01(config)# lldp run</pre></li><li class="listitem"><p class="simpara">
								View any neighboring LLDP-compatible devices:
							</p><pre class="screen">sw01# show lldp neighbor
Capability codes:
    (R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device
    (W) WLAN Access Point, (P) Repeater, (S) Station, (O) Other

Device ID           Local Intf     Hold-time  Capability      Port ID
DEP42037061562G3     Gi1/0/11       180        B,T             422037061562G3:P1

Total entries displayed: 1</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Remember to save your changes by copying the running-config to the startup-config: <code class="literal">copy running-config startup-config</code>.
						</p></div></div></section></section><section class="section" id="phys-cisco-nexus"><div class="titlepage"><div><div><h2 class="title">8.3. Configuring a Cisco Nexus switch</h2></div></div></div><section class="section" id="about-trunk-ports_cisco-nexus"><div class="titlepage"><div><div><h3 class="title">8.3.1. About trunk ports</h3></div></div></div><p>
						With OpenStack Networking you can connect instances to the VLANs that already exist on your physical network. The term <span class="emphasis"><em>trunk</em></span> is used to describe a port that allows multiple VLANs to traverse through the same port. Using these ports, VLANs can span across multiple switches, including virtual switches. For example, traffic tagged as VLAN110 in the physical network reaches the Compute node, where the 8021q module directs the tagged traffic to the appropriate VLAN on the vSwitch.
					</p></section><section class="section" id="config-nexus-trunk-ports"><div class="titlepage"><div><div><h3 class="title">8.3.2. Configuring trunk ports for a Cisco Nexus switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If using a Cisco Nexus you might use the following configuration syntax to allow traffic for VLANs 110 and 111 to pass through to your instances.
							</p><p class="simpara">
								This configuration assumes that your physical node has an ethernet cable connected to interface <code class="literal">Ethernet1/12</code> on the physical switch.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen">interface Ethernet1/12
  description Trunk to Compute Node
  switchport mode trunk
  switchport trunk allowed vlan 2,110,111
  switchport trunk native vlan 2
end</pre></li></ul></div></section><section class="section" id="about-access-ports_cisco-nexus"><div class="titlepage"><div><div><h3 class="title">8.3.3. About access ports</h3></div></div></div><p>
						Not all NICs on your Compute node carry instance traffic, and so you do not need to configure all NICs to allow multiple VLANs to pass through. Access ports require only one VLAN, and might fulfill other operational requirements, such as transporting management traffic or Block Storage data. These ports are commonly known as access ports and usually require a simpler configuration than trunk ports.
					</p></section><section class="section" id="config-nexus-access-ports"><div class="titlepage"><div><div><h3 class="title">8.3.4. Configuring access ports for a Cisco Nexus switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Using the example from the <a class="xref" href="index%3F.html#phys-sample-diagram" title="Sample network layout">Sample network layout</a> diagram, Ethernet1/13 (on a Cisco Nexus switch) is configured as an access port for <code class="literal">eth1</code>. This configuration assumes that your physical node has an ethernet cable connected to interface <code class="literal">Ethernet1/13</code> on the physical switch.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen">interface Ethernet1/13
 description Access port for Compute Node
 switchport mode access
 switchport access vlan 200</pre></li></ul></div></section><section class="section" id="about-lacp-port-aggregation_cisco-nexus"><div class="titlepage"><div><div><h3 class="title">8.3.5. About LACP port aggregation</h3></div></div></div><p>
						You can use LACP to bundle multiple physical NICs together to form a single logical channel. Also known as 802.3ad (or bonding mode 4 in Linux), LACP creates a dynamic bond for load-balancing and fault tolerance. You must configure LACP at both physical ends: on the physical NICs, and on the physical switch ports.
					</p></section><section class="section" id="config-lacp-phys-nic_cisco-nexus"><div class="titlepage"><div><div><h3 class="title">8.3.6. Configuring LACP on the physical NIC</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <span class="emphasis"><em>/home/stack/network-environment.yaml</em></span> file:
							</p><pre class="screen">- type: linux_bond
  name: bond1
  mtu: 9000
  bonding_options:{get_param: BondInterfaceOvsOptions};
  members:
    - type: interface
      name: nic3
      mtu: 9000
      primary: true
    - type: interface
      name: nic4
      mtu: 9000</pre></li><li class="listitem"><p class="simpara">
								Configure the Open vSwitch bridge to use LACP:
							</p><pre class="screen">BondInterfaceOvsOptions:
    "mode=802.3ad"</pre></li></ol></div><p>
						For information on configuring network bonds, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/#overcloud-network-interface-bonding">Network Interface Bonding chapter of the Advanced Overcloud Customization</a> guide.
					</p></section><section class="section" id="config-nexus-lacp"><div class="titlepage"><div><div><h3 class="title">8.3.7. Configuring LACP for a Cisco Nexus switch</h3></div></div></div><p>
						In this example, the Compute node has two NICs using VLAN 100:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Physically connect the Compute node NICs to the switch (for example, ports 12 and 13).
							</li><li class="listitem"><p class="simpara">
								Confirm that LACP is enabled:
							</p><pre class="screen">(config)# show feature | include lacp
lacp                  1         enabled</pre></li><li class="listitem"><p class="simpara">
								Configure ports 1/12 and 1/13 as access ports, and as members of a channel group.
							</p><p class="simpara">
								Depending on your deployment, you can deploy trunk interfaces rather than access interfaces.
							</p><p class="simpara">
								For example, for Cisco UCI the NICs are virtual interfaces, so you might prefer to configure access ports exclusively. Often these interfaces contain VLAN tagging configurations.
							</p><pre class="screen">interface Ethernet1/13
 description Access port for Compute Node
 switchport mode access
 switchport access vlan 200
 channel-group 10 mode active

interface Ethernet1/13
 description Access port for Compute Node
 switchport mode access
 switchport access vlan 200
 channel-group 10 mode active</pre></li></ol></div></section><section class="section" id="about-mtu-settings_cisco-nexus"><div class="titlepage"><div><div><h3 class="title">8.3.8. About MTU settings</h3></div></div></div><p>
						You must adjust your MTU size for certain types of network traffic. For example, jumbo frames (9000 bytes) are required for certain NFS or iSCSI traffic.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must change MTU settings from end-to-end on all hops that the traffic is expected to pass through, including any virtual switches. For information on changing the MTU in your OpenStack environment, see <a class="xref" href="index%3F.html#sec-mtu" title="Chapter 9. Configure maximum transmission unit (MTU) settings">Chapter 9, <em>Configure maximum transmission unit (MTU) settings</em></a>.
						</p></div></div></section><section class="section" id="config-nexus-mtu-settings"><div class="titlepage"><div><div><h3 class="title">8.3.9. Configuring MTU settings for a Cisco Nexus 7000 switch</h3></div></div></div><p>
						Apply MTU settings to a single interface on 7000-series switches.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Run the following commands to configure interface 1/12 to use jumbo frames of 9000 bytes:
							</p><pre class="screen">interface ethernet 1/12
  mtu 9216
  exit</pre></li></ul></div></section><section class="section" id="about-lldp-discovery_cisco-nexus"><div class="titlepage"><div><div><h3 class="title">8.3.10. About LLDP discovery</h3></div></div></div><p>
						The <code class="literal">ironic-python-agent</code> service listens for LLDP packets from connected switches. The collected information can include the switch name, port details, and available VLANs. Similar to Cisco Discovery Protocol (CDP), LLDP assists with the discovery of physical hardware during the director introspection process.
					</p></section><section class="section" id="config-nexus-lldp"><div class="titlepage"><div><div><h3 class="title">8.3.11. Configuring LLDP for a Cisco Nexus 7000 switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								You can enable LLDP for individual interfaces on Cisco Nexus 7000-series switches:
							</p><pre class="screen">interface ethernet 1/12
  lldp transmit
  lldp receive
  no lacp suspend-individual
  no lacp graceful-convergence

interface ethernet 1/13
  lldp transmit
  lldp receive
  no lacp suspend-individual
  no lacp graceful-convergence</pre></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Remember to save your changes by copying the running-config to the startup-config: <code class="literal">copy running-config startup-config</code>.
						</p></div></div></section></section><section class="section" id="phys-cumulus-linux"><div class="titlepage"><div><div><h2 class="title">8.4. Configuring a Cumulus Linux switch</h2></div></div></div><section class="section" id="about-trunk-ports_cumulus-linux"><div class="titlepage"><div><div><h3 class="title">8.4.1. About trunk ports</h3></div></div></div><p>
						With OpenStack Networking you can connect instances to the VLANs that already exist on your physical network. The term <span class="emphasis"><em>trunk</em></span> is used to describe a port that allows multiple VLANs to traverse through the same port. Using these ports, VLANs can span across multiple switches, including virtual switches. For example, traffic tagged as VLAN110 in the physical network reaches the Compute node, where the 8021q module directs the tagged traffic to the appropriate VLAN on the vSwitch.
					</p></section><section class="section" id="config-cumulus-trunk-ports"><div class="titlepage"><div><div><h3 class="title">8.4.2. Configuring trunk ports for a Cumulus Linux switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use the following configuration syntax to allow traffic for VLANs 100 and 200 to pass through to your instances.
							</p><p class="simpara">
								This configuration assumes that your physical node has transceivers connected to switch ports swp1 and swp2 on the physical switch.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen">auto bridge
iface bridge
  bridge-vlan-aware yes
  bridge-ports glob swp1-2
  bridge-vids 100 200</pre></li></ul></div></section><section class="section" id="about-access-ports_cumulus-linux"><div class="titlepage"><div><div><h3 class="title">8.4.3. About access ports</h3></div></div></div><p>
						Not all NICs on your Compute node carry instance traffic, and so you do not need to configure all NICs to allow multiple VLANs to pass through. Access ports require only one VLAN, and might fulfill other operational requirements, such as transporting management traffic or Block Storage data. These ports are commonly known as access ports and usually require a simpler configuration than trunk ports.
					</p></section><section class="section" id="config-cumulus-access-ports"><div class="titlepage"><div><div><h3 class="title">8.4.4. Configuring access ports for a Cumulus Linux switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Using the example from the <a class="xref" href="index%3F.html#phys-sample-diagram" title="Sample network layout">Sample network layout</a> diagram, <code class="literal">swp1</code> (on a Cumulus Linux switch) is configured as an access port.
							</p><p class="simpara">
								This configuration assumes that your physical node has an ethernet cable connected to the interface on the physical switch. Cumulus Linux switches use <code class="literal">eth</code> for management interfaces and <code class="literal">swp</code> for access/trunk ports.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen">auto bridge
iface bridge
  bridge-vlan-aware yes
  bridge-ports glob swp1-2
  bridge-vids 100 200


auto swp1
iface swp1
  bridge-access 100


auto swp2
iface swp2
  bridge-access 200</pre></li></ul></div></section><section class="section" id="about-lacp-port-aggregation_cumulus-linux"><div class="titlepage"><div><div><h3 class="title">8.4.5. About LACP port aggregation</h3></div></div></div><p>
						You can use LACP to bundle multiple physical NICs together to form a single logical channel. Also known as 802.3ad (or bonding mode 4 in Linux), LACP creates a dynamic bond for load-balancing and fault tolerance. You must configure LACP at both physical ends: on the physical NICs, and on the physical switch ports.
					</p></section><section class="section" id="about-mtu-settings_cumulus-linux"><div class="titlepage"><div><div><h3 class="title">8.4.6. About MTU settings</h3></div></div></div><p>
						You must adjust your MTU size for certain types of network traffic. For example, jumbo frames (9000 bytes) are required for certain NFS or iSCSI traffic.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must change MTU settings from end-to-end on all hops that the traffic is expected to pass through, including any virtual switches. For information on changing the MTU in your OpenStack environment, see <a class="xref" href="index%3F.html#sec-mtu" title="Chapter 9. Configure maximum transmission unit (MTU) settings">Chapter 9, <em>Configure maximum transmission unit (MTU) settings</em></a>.
						</p></div></div></section><section class="section" id="config-cumulus-mtu-settings"><div class="titlepage"><div><div><h3 class="title">8.4.7. Configuring MTU settings for a Cumulus Linux switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								This example enables jumbo frames on your Cumulus Linux switch.
							</p><pre class="screen">auto swp1
iface swp1
  mtu 9000</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Remember to apply your changes by reloading the updated configuration: <code class="literal">sudo ifreload -a</code>
								</p></div></div></li></ul></div></section><section class="section" id="about-lldp-discovery_cumulus-linux"><div class="titlepage"><div><div><h3 class="title">8.4.8. About LLDP discovery</h3></div></div></div><p>
						The <code class="literal">ironic-python-agent</code> service listens for LLDP packets from connected switches. The collected information can include the switch name, port details, and available VLANs. Similar to Cisco Discovery Protocol (CDP), LLDP assists with the discovery of physical hardware during the director introspection process.
					</p></section><section class="section" id="config-cumulus-lldp"><div class="titlepage"><div><div><h3 class="title">8.4.9. Configuring LLDP for a Cumulus Linux switch</h3></div></div></div><p>
						By default, the LLDP service lldpd runs as a daemon and starts when the switch boots.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To view all LLDP neighbors on all ports/interfaces, run the following command:
							</p><pre class="screen">cumulus@switch$ netshow lldp
Local Port  Speed  Mode         Remote Port   Remote Host Summary
----------  ---    ---------    -----  -----  ----------- --------
eth0        10G    Mgmt         ====   swp6   mgmt-sw     IP: 10.0.1.11/24
swp51       10G    Interface/L3 ====   swp1   spine01     IP: 10.0.0.11/32
swp52       10G    Interface/L  ====   swp1   spine02     IP: 10.0.0.11/32</pre></li></ul></div></section></section><section class="section" id="phys-extreme-exos"><div class="titlepage"><div><div><h2 class="title">8.5. Configuring a Extreme Exos switch</h2></div></div></div><section class="section" id="about-trunk-ports_extreme-exos"><div class="titlepage"><div><div><h3 class="title">8.5.1. About trunk ports</h3></div></div></div><p>
						With OpenStack Networking you can connect instances to the VLANs that already exist on your physical network. The term <span class="emphasis"><em>trunk</em></span> is used to describe a port that allows multiple VLANs to traverse through the same port. Using these ports, VLANs can span across multiple switches, including virtual switches. For example, traffic tagged as VLAN110 in the physical network reaches the Compute node, where the 8021q module directs the tagged traffic to the appropriate VLAN on the vSwitch.
					</p></section><section class="section" id="config-exos-trunk-ports"><div class="titlepage"><div><div><h3 class="title">8.5.2. Configuring trunk ports on an Extreme Networks EXOS switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If using an X-670 series switch, refer to the following example to allow traffic for VLANs 110 and 111 to pass through to your instances.
							</p><p class="simpara">
								This configuration assumes that your physical node has an ethernet cable connected to interface 24 on the physical switch. In this example, DATA and MNGT are the VLAN names.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen">#create vlan DATA tag 110
#create vlan MNGT tag 111
#configure vlan DATA add ports 24 tagged
#configure vlan MNGT add ports 24 tagged</pre></li></ul></div></section><section class="section" id="about-access-ports_extreme-exos"><div class="titlepage"><div><div><h3 class="title">8.5.3. About access ports</h3></div></div></div><p>
						Not all NICs on your Compute node carry instance traffic, and so you do not need to configure all NICs to allow multiple VLANs to pass through. Access ports require only one VLAN, and might fulfill other operational requirements, such as transporting management traffic or Block Storage data. These ports are commonly known as access ports and usually require a simpler configuration than trunk ports.
					</p></section><section class="section" id="config-exos-access-ports"><div class="titlepage"><div><div><h3 class="title">8.5.4. Configuring access ports for an Extreme Networks EXOS switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								In this configuration example, on a Extreme Networks X-670 series switch, <code class="literal">10</code> is used as an access port for <code class="literal">eth1</code>.
							</p><p class="simpara">
								This configuration assumes that your physical node has an ethernet cable connected to interface <code class="literal">10</code> on the physical switch.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen">create vlan VLANNAME tag NUMBER
configure vlan Default delete ports PORTSTRING
configure vlan VLANNAME add ports PORTSTRING untagged</pre><p class="simpara">
								For example:
							</p><pre class="screen">#create vlan DATA tag 110
#configure vlan Default delete ports 10
#configure vlan DATA add ports 10 untagged</pre></li></ul></div></section><section class="section" id="about-lacp-port-aggregation_extreme-exos"><div class="titlepage"><div><div><h3 class="title">8.5.5. About LACP port aggregation</h3></div></div></div><p>
						You can use LACP to bundle multiple physical NICs together to form a single logical channel. Also known as 802.3ad (or bonding mode 4 in Linux), LACP creates a dynamic bond for load-balancing and fault tolerance. You must configure LACP at both physical ends: on the physical NICs, and on the physical switch ports.
					</p></section><section class="section" id="config-lacp-phys-nic_extreme-exos"><div class="titlepage"><div><div><h3 class="title">8.5.6. Configuring LACP on the physical NIC</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <span class="emphasis"><em>/home/stack/network-environment.yaml</em></span> file:
							</p><pre class="screen">- type: linux_bond
  name: bond1
  mtu: 9000
  bonding_options:{get_param: BondInterfaceOvsOptions};
  members:
    - type: interface
      name: nic3
      mtu: 9000
      primary: true
    - type: interface
      name: nic4
      mtu: 9000</pre></li><li class="listitem"><p class="simpara">
								Configure the Open vSwitch bridge to use LACP:
							</p><pre class="screen">BondInterfaceOvsOptions:
    "mode=802.3ad"</pre></li></ol></div><p>
						For information on configuring network bonds, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/#overcloud-network-interface-bonding">Network Interface Bonding chapter of the Advanced Overcloud Customization</a> guide.
					</p></section><section class="section" id="config-exos-lacp"><div class="titlepage"><div><div><h3 class="title">8.5.7. Configuring LACP on an Extreme Networks EXOS switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								In this example, the Compute node has two NICs using VLAN 100:
							</p><pre class="screen">enable sharing MASTERPORT grouping ALL_LAG_PORTS lacp
configure vlan VLANNAME add ports PORTSTRING tagged</pre><p class="simpara">
								For example:
							</p><pre class="screen">#enable sharing 11 grouping 11,12 lacp
#configure vlan DATA add port 11 untagged</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You might need to adjust the timeout period in the LACP negotiation script. For more information, see <a class="link" href="https://gtacknowledge.extremenetworks.com/articles/How_To/LACP-configured-ports-interfere-with-PXE-DHCP-on-servers">https://gtacknowledge.extremenetworks.com/articles/How_To/LACP-configured-ports-interfere-with-PXE-DHCP-on-servers</a>
								</p></div></div></li></ul></div></section><section class="section" id="about-mtu-settings_extreme-exos"><div class="titlepage"><div><div><h3 class="title">8.5.8. About MTU settings</h3></div></div></div><p>
						You must adjust your MTU size for certain types of network traffic. For example, jumbo frames (9000 bytes) are required for certain NFS or iSCSI traffic.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must change MTU settings from end-to-end on all hops that the traffic is expected to pass through, including any virtual switches. For information on changing the MTU in your OpenStack environment, see <a class="xref" href="index%3F.html#sec-mtu" title="Chapter 9. Configure maximum transmission unit (MTU) settings">Chapter 9, <em>Configure maximum transmission unit (MTU) settings</em></a>.
						</p></div></div></section><section class="section" id="config-exos-mtu-settings"><div class="titlepage"><div><div><h3 class="title">8.5.9. Configuring MTU settings on an Extreme Networks EXOS switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Run the commands in this example to enable jumbo frames on an Extreme Networks EXOS switch and configure support for forwarding IP packets with 9000 bytes:
							</p><pre class="screen">enable jumbo-frame ports PORTSTRING
configure ip-mtu 9000 vlan VLANNAME</pre><p class="simpara">
								For example:
							</p><pre class="screen"># enable jumbo-frame ports 11
# configure ip-mtu 9000 vlan DATA</pre></li></ul></div></section><section class="section" id="about-lldp-discovery_extreme-exos"><div class="titlepage"><div><div><h3 class="title">8.5.10. About LLDP discovery</h3></div></div></div><p>
						The <code class="literal">ironic-python-agent</code> service listens for LLDP packets from connected switches. The collected information can include the switch name, port details, and available VLANs. Similar to Cisco Discovery Protocol (CDP), LLDP assists with the discovery of physical hardware during the director introspection process.
					</p></section><section class="section" id="config-exos-lldp"><div class="titlepage"><div><div><h3 class="title">8.5.11. Configuring LLDP settings on an Extreme Networks EXOS switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								In this example, LLDP is enabled on an Extreme Networks EXOS switch. <code class="literal">11</code> represents the port string:
							</li></ul></div><pre class="screen">enable lldp ports 11</pre></section></section><section class="section" id="phys-juniper-ex-series"><div class="titlepage"><div><div><h2 class="title">8.6. Configuring a Juniper EX Series switch</h2></div></div></div><section class="section" id="about-trunk-ports_juniperex"><div class="titlepage"><div><div><h3 class="title">8.6.1. About trunk ports</h3></div></div></div><p>
						With OpenStack Networking you can connect instances to the VLANs that already exist on your physical network. The term <span class="emphasis"><em>trunk</em></span> is used to describe a port that allows multiple VLANs to traverse through the same port. Using these ports, VLANs can span across multiple switches, including virtual switches. For example, traffic tagged as VLAN110 in the physical network reaches the Compute node, where the 8021q module directs the tagged traffic to the appropriate VLAN on the vSwitch.
					</p></section><section class="section" id="config-juniperex-trunk-ports"><div class="titlepage"><div><div><h3 class="title">8.6.2. Configuring trunk ports for a Juniper EX Series switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If using a Juniper EX series switch running Juniper JunOS, use the following configuration syntax to allow traffic for VLANs 110 and 111 to pass through to your instances.
							</p><p class="simpara">
								This configuration assumes that your physical node has an ethernet cable connected to interface ge-1/0/12 on the physical switch.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen"> ge-1/0/12 {
          description Trunk to Compute Node;
              unit 0 {
                  family ethernet-switching {
                      port-mode trunk;
                      vlan {
                          members [110 111];
                           }
                      native-vlan-id 2;
                  }
              }
}</pre></li></ul></div></section><section class="section" id="about-access-ports_juniperex"><div class="titlepage"><div><div><h3 class="title">8.6.3. About access ports</h3></div></div></div><p>
						Not all NICs on your Compute node carry instance traffic, and so you do not need to configure all NICs to allow multiple VLANs to pass through. Access ports require only one VLAN, and might fulfill other operational requirements, such as transporting management traffic or Block Storage data. These ports are commonly known as access ports and usually require a simpler configuration than trunk ports.
					</p></section><section class="section" id="config-juniperex-access-ports"><div class="titlepage"><div><div><h3 class="title">8.6.4. Configuring access ports for a Juniper EX Series switch</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								This example on, a Juniper EX series switch, shows <code class="literal">ge-1/0/13</code> as an access port for <code class="literal">eth1</code>.
							</p><p class="simpara">
								This configuration assumes that your physical node has an ethernet cable connected to interface <code class="literal">ge-1/0/13</code> on the physical switch.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									These values are examples. You must change the values in this example to match those in your environment. Copying and pasting these values into your switch configuration without adjustment can result in an unexpected outage.
								</p></div></div><pre class="screen"> ge-1/0/13 {
          description Access port for Compute Node
              unit 0 {
                  family ethernet-switching {
                      port-mode access;
                      vlan {
                          members 200;
                           }
                      native-vlan-id 2;
                  }
              }
}</pre></li></ul></div></section><section class="section" id="about-lacp-port-aggregation_juniperex"><div class="titlepage"><div><div><h3 class="title">8.6.5. About LACP port aggregation</h3></div></div></div><p>
						You can use LACP to bundle multiple physical NICs together to form a single logical channel. Also known as 802.3ad (or bonding mode 4 in Linux), LACP creates a dynamic bond for load-balancing and fault tolerance. You must configure LACP at both physical ends: on the physical NICs, and on the physical switch ports.
					</p></section><section class="section" id="config-lacp-phys-nic_juniperex"><div class="titlepage"><div><div><h3 class="title">8.6.6. Configuring LACP on the physical NIC</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <span class="emphasis"><em>/home/stack/network-environment.yaml</em></span> file:
							</p><pre class="screen">- type: linux_bond
  name: bond1
  mtu: 9000
  bonding_options:{get_param: BondInterfaceOvsOptions};
  members:
    - type: interface
      name: nic3
      mtu: 9000
      primary: true
    - type: interface
      name: nic4
      mtu: 9000</pre></li><li class="listitem"><p class="simpara">
								Configure the Open vSwitch bridge to use LACP:
							</p><pre class="screen">BondInterfaceOvsOptions:
    "mode=802.3ad"</pre></li></ol></div><p>
						For information on configuring network bonds, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/#overcloud-network-interface-bonding">Network Interface Bonding chapter of the Advanced Overcloud Customization</a> guide.
					</p></section><section class="section" id="config-juniperex-lacp"><div class="titlepage"><div><div><h3 class="title">8.6.7. Configuring LACP for a Juniper EX Series switch</h3></div></div></div><p>
						In this example, the Compute node has two NICs using VLAN 100.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Physically connect the Compute node’s two NICs to the switch (for example, ports 12 and 13).
							</li><li class="listitem"><p class="simpara">
								Create the port aggregate:
							</p><pre class="screen">chassis {
    aggregated-devices {
        ethernet {
            device-count 1;
        }
    }
}</pre></li><li class="listitem"><p class="simpara">
								Configure switch ports 12 (ge-1/0/12) and 13 (ge-1/0/13) to join the port aggregate <code class="literal">ae1</code>:
							</p><pre class="screen">interfaces {
    ge-1/0/12 {
        gigether-options {
            802.3ad ae1;
        }
    }
    ge-1/0/13 {
        gigether-options {
            802.3ad ae1;
            }
        }
}</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									For Red Hat OpenStack Platform director deployments, in order to PXE boot from the bond, you must configure one of the bond members as lacp force-up toensure that only one bond member comes up during introspection and first boot. The bond member that you configure with lacp force-up must be the same bond member that has the MAC address in <span class="emphasis"><em>instackenv.json</em></span> (the MAC address known to ironic must be the same MAC address configured with force-up).
								</p></div></div></li><li class="listitem"><p class="simpara">
								Enable LACP on port aggregate <code class="literal">ae1</code>:
							</p><pre class="screen">interfaces {
    ae1 {
        aggregated-ether-options {
            lacp {
                active;
            }
        }
    }
}</pre></li><li class="listitem"><p class="simpara">
								Add aggregate <code class="literal">ae1</code> to VLAN 100:
							</p><pre class="screen">interfaces {
    ae1 {
        vlan-tagging;
        native-vlan-id 2;
        unit 100 {
            vlan-id 100;
        }
    }
}</pre></li><li class="listitem"><p class="simpara">
								Review your new port channel. The resulting output lists the new port aggregate <code class="literal">ae1</code> with member ports <code class="literal">ge-1/0/12</code> and <code class="literal">ge-1/0/13</code>:
							</p><pre class="screen">&gt; show lacp statistics interfaces ae1

Aggregated interface: ae1
LACP Statistics: LACP Rx LACP Tx Unknown Rx Illegal Rx
ge-1/0/12 0 0 0 0
ge-1/0/13 0 0 0 0</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Remember to apply your changes by running the <code class="literal">commit</code> command.
								</p></div></div></li></ol></div></section><section class="section" id="about-mtu-settings_juniperex"><div class="titlepage"><div><div><h3 class="title">8.6.8. About MTU settings</h3></div></div></div><p>
						You must adjust your MTU size for certain types of network traffic. For example, jumbo frames (9000 bytes) are required for certain NFS or iSCSI traffic.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must change MTU settings from end-to-end on all hops that the traffic is expected to pass through, including any virtual switches. For information on changing the MTU in your OpenStack environment, see <a class="xref" href="index%3F.html#sec-mtu" title="Chapter 9. Configure maximum transmission unit (MTU) settings">Chapter 9, <em>Configure maximum transmission unit (MTU) settings</em></a>.
						</p></div></div></section><section class="section" id="config-juniperex-mtu-settings"><div class="titlepage"><div><div><h3 class="title">8.6.9. Configuring MTU settings for a Juniper EX Series switch</h3></div></div></div><p>
						This example enables jumbo frames on your Juniper EX4200 switch.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The MTU value is calculated differently depending on whether you are using Juniper or Cisco devices. For example, <code class="literal">9216</code> on Juniper would equal to <code class="literal">9202</code> for Cisco. The extra bytes are used for L2 headers, where Cisco adds this automatically to the MTU value specified, but the usable MTU will be 14 bytes smaller than specified when using Juniper. So in order to support an MTU of <code class="literal">9000</code> on the VLANs, the MTU of <code class="literal">9014</code> would have to be configured on Juniper.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								For Juniper EX series switches, MTU settings are set for individual interfaces. These commands configure jumbo frames on the <code class="literal">ge-1/0/14</code> and <code class="literal">ge-1/0/15</code> ports:
							</p><pre class="screen">set interfaces ge-1/0/14 mtu 9216
set interfaces ge-1/0/15 mtu 9216</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Remember to save your changes by running the <code class="literal">commit</code> command.
								</p></div></div></li><li class="listitem"><p class="simpara">
								If using a LACP aggregate, you will need to set the MTU size there, and not on the member NICs. For example, this setting configures the MTU size for the ae1 aggregate:
							</p><pre class="screen"> set interfaces ae1 mtu 9216</pre></li></ol></div></section><section class="section" id="about-lldp-discovery_juniperex"><div class="titlepage"><div><div><h3 class="title">8.6.10. About LLDP discovery</h3></div></div></div><p>
						The <code class="literal">ironic-python-agent</code> service listens for LLDP packets from connected switches. The collected information can include the switch name, port details, and available VLANs. Similar to Cisco Discovery Protocol (CDP), LLDP assists with the discovery of physical hardware during the director introspection process.
					</p></section><section class="section" id="config-juniperex-lldp"><div class="titlepage"><div><div><h3 class="title">8.6.11. Configuring LLDP for a Juniper EX Series switch</h3></div></div></div><p>
						You can enable LLDP globally for all interfaces, or just for individual ones:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use the following too enable LLDP globally on your Juniper EX 4200 switch:
							</p><pre class="screen">lldp {
	interface all{
		enable;
	}
	}
}</pre></li><li class="listitem"><p class="simpara">
								Use the following to enable LLDP for the single interface <code class="literal">ge-1/0/14</code>:
							</p><pre class="screen">lldp {
	interface ge-1/0/14{
		enable;
	}
	}
}</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Remember to apply your changes by running the <code class="literal">commit</code> command.
								</p></div></div></li></ul></div></section></section></section></div><div class="part" id="advanced_configuration"><div class="titlepage"><div><div><h1 class="title">Part II. Advanced Configuration</h1></div></div></div><div class="partintro" id="idm139893194177680"><div><!--Empty--></div><p>
				Contains cookbook-style scenarios for advanced Red Hat OpenStack Platform Networking features.
			</p></div><section class="chapter" id="sec-mtu"><div class="titlepage"><div><div><h2 class="title">Chapter 9. Configure maximum transmission unit (MTU) settings</h2></div></div></div><section class="section" id="mtu-overview"><div class="titlepage"><div><div><h2 class="title">9.1. MTU overview</h2></div></div></div><p>
					OpenStack Networking can calculate the largest possible maximum transmission unit (MTU) size that you can apply safely to instances. The MTU value specifies the maximum amount of data that a single network packet can transfer; this number is variable depending on the most appropriate size for the application. For example, NFS shares might require a different MTU size to that of a VoIP application.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can use the neutron net-show command to view the largest possible MTU values that OpenStack Networking calculates. <code class="literal">net-mtu</code> is a neutron API extension that is not present in some implementations. The MTU value that you require can be advertised to DHCPv4 clients for automatic configuration, if supported by the instance, as well as to IPv6 clients through Router Advertisement (RA) packets. To send Router Advertisements, the network must be attached to a router.
					</p></div></div><p>
					You must configure MTU settings consistently from end-to-end. This means that the MTU setting must be the same at every point the packet passes through, including the VM, the virtual network infrastructure, the physical network, and the destination server.
				</p><p>
					For example, the circles in the following diagram indicate the various points where an MTU value must be adjusted for traffic between an instance and a physical server. You must change the MTU value for very interface that handles network traffic to accommodate packets of a particular MTU size. This is necessary if traffic travels from the instance <span class="emphasis"><em>192.168.200.15</em></span> through to the physical server <span class="emphasis"><em>10.20.15.25</em></span>:
				</p><div class="informalfigure"><div class="mediaobject"><img src="mtu.png" alt="MTU settings"/></div></div><p>
					Inconsistent MTU values can result in several network issues, the most common being random packet loss that results in connection drops and slow network performance. Such issues are problematic to troubleshoot because you must identify and examine every possible network point to ensure it has the correct MTU value.
				</p></section><section class="section" id="config-mtu-settings-director"><div class="titlepage"><div><div><h2 class="title">9.2. Configuring MTU Settings in Director</h2></div></div></div><p>
					This example demonstrates how to set the MTU using the NIC config templates. You must set the MTU on the bridge, bond (if applicable), interface(s), and VLAN(s):
				</p><pre class="screen">            -
              type: ovs_bridge
              name: br-isolated
              use_dhcp: false
              mtu: 9000    # &lt;--- Set MTU
              members:
                -
                  type: ovs_bond
                  name: bond1
                  mtu: 9000    # &lt;--- Set MTU
                  ovs_options: {get_param: BondInterfaceOvsOptions}
                  members:
                    -
                      type: interface
                      name: ens15f0
                      mtu: 9000    # &lt;--- Set MTU
                      primary: true
                    -
                      type: interface
                      name: enp131s0f0
                      mtu: 9000    # &lt;--- Set MTU
                -
                  type: vlan
                  device: bond1
                  vlan_id: {get_param: InternalApiNetworkVlanID}
                  mtu: 9000    # &lt;--- Set MTU
                  addresses:
                  -
                    ip_netmask: {get_param: InternalApiIpSubnet}
                -
                  type: vlan
                  device: bond1
                  mtu: 9000    # &lt;--- Set MTU
                  vlan_id: {get_param: TenantNetworkVlanID}
                  addresses:
                  -
                    ip_netmask: {get_param: TenantIpSubnet}</pre></section><section class="section" id="review-mtu-calculation"><div class="titlepage"><div><div><h2 class="title">9.3. Reviewing the resulting MTU calculation</h2></div></div></div><p>
					You can view the calculated MTU value, which is the largest possible MTU value that instances can use. Use this calculated MTU value to configure all interfaces involved in the path of network traffic.
				</p><pre class="screen"># openstack network show &lt;network&gt;</pre></section></section><section class="chapter" id="sec-qos"><div class="titlepage"><div><div><h2 class="title">Chapter 10. Configuring Quality of Service (QoS) policies</h2></div></div></div><p>
				You can offer varying service levels for instances by using quality of service (QoS) policies to apply rate limits to egress and ingress traffic.
			</p><p>
				You can apply QoS policies to individual ports. You can also apply QoS policies to a project network, where ports with no specific policy attached inherit the policy.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Internal network owned ports, such as DHCP and internal router ports, are excluded from network policy application.
				</p></div></div><p>
				You can apply, modify, or remove QoS policies dynamically. However, for guaranteed minimum bandwidth QoS policies, you can only apply modifications when there are no instances that use any of the ports the policy is assigned to.
			</p><section class="section" id="qos-rules"><div class="titlepage"><div><div><h2 class="title">10.1. QoS rules</h2></div></div></div><p>
					The following rule types define the limits of a particular quality of service (QoS) policy:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">bandwidth_limit</code>: Provides bandwidth limitations on networks, ports or floating IPs. If implemented, any traffic that exceeds the specified rate is dropped.
						</li><li class="listitem">
							<code class="literal">minimum_bandwidth</code>: Provides minimum bandwidth constraints on certain types of traffic. If implemented, best efforts are made to provide no less than the specified bandwidth to each port on which the rule is applied.
						</li><li class="listitem">
							<code class="literal">dscp_marking</code>: Marks network traffic with a Differentiated Services Code Point (DSCP) value.
						</li></ul></div><section class="section" id="related_procedures"><div class="titlepage"><div><div><h3 class="title">10.1.1. Related procedures</h3></div></div></div><p>
						The following procedures describe how to create a QoS policy with each rule type:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="index%3F.html#bandwidth-limit">Creating and applying a bandwidth limit QoS policy and rule</a>
							</li><li class="listitem">
								<a class="link" href="index%3F.html#guaranteed-min-bw">Creating and applying a guaranteed minimum bandwidth QoS policy and rule</a>
							</li><li class="listitem">
								<a class="link" href="index%3F.html#dcsp-marking-egress-traffic">Creating and applying a DSCP marking QoS policy and rule for egress traffic</a>
							</li></ul></div></section></section><section class="section" id="qos-policy-management"><div class="titlepage"><div><div><h2 class="title">10.2. Creating and applying a QoS policy and rule</h2></div></div></div><p>
					To create a quality of service (QoS) policy and rule and apply the policy to a port, complete the following steps:
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Identify the ID of the project you want to create the QoS policy for:
						</p><pre class="screen">(overcloud) $ openstack project list</pre><pre class="screen"><code class="literal">----------------------------------</code>---------+
| ID                               | Name    |
<code class="literal">----------------------------------</code>---------+
| 8c409e909fb34d69bc896ab358317d60 | admin   |
| 92b6c16c7c7244378a062be0bfd55fa0 | service |
<code class="literal">----------------------------------</code>---------+</pre></li><li class="listitem"><p class="simpara">
							Create the new QoS policy:
						</p><pre class="screen">(overcloud) $ openstack network qos policy create --share --project &lt;project_ID&gt; &lt;policy_name&gt;</pre></li><li class="listitem"><p class="simpara">
							Create new rules for the QoS policy:
						</p><pre class="screen">(overcloud) $ openstack network qos rule create --type &lt;rule-type&gt; [rule properties] &lt;policy_name&gt;</pre><div class="table" id="idm139893194128688"><p class="title"><strong>Table 10.1. Rule properties</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893194123856" scope="col">Property</th><th align="left" valign="top" id="idm139893194122768" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893194123856"> <p>
											<code class="literal">max_kbps</code>
										</p>
										 </td><td align="left" valign="top" headers="idm139893194122768"> <p>
											The maximum rate (in Kbps) that the instance can send.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893194123856"> <p>
											<code class="literal">max_burst_kbps</code>
										</p>
										 </td><td align="left" valign="top" headers="idm139893194122768"> <p>
											The maximum amount of data (in kbits) that the port can send in an instant if the token buffer is full. The token buffer replenishes at a "max_kbps" rate.
										</p>
										 <p>
											The burst value for TCP traffic can be set as 80% of desired bandwidth limit value. For example, if the bandwidth limit is set to 1000kbps then a burst value of 800kbps is sufficient.
										</p>
										 <div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
														If the burst value is set too low, bandwidth usage is throttled even with a proper bandwidth limit setting, resulting in a lower than expected bandwidth.
													</li><li class="listitem">
														If the configured burst value is too high, too few packets could be limited, resulting in a higher than expected bandwidth limit.
													</li></ul></div></div></div>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893194123856"> <p>
											<code class="literal">min-kbps</code>
										</p>
										 </td><td align="left" valign="top" headers="idm139893194122768"> <p>
											The minimum bandwidth (in Kbps) guaranteed to an instance.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893194123856"> <p>
											<code class="literal">ingress/egress</code>
										</p>
										 </td><td align="left" valign="top" headers="idm139893194122768"> <p>
											The direction of traffic the rule is applied to. From the perspective of a cloud server, ingress indicates download, and egress indicates upload.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893194123856"> <p>
											<code class="literal">dscp-mark</code>
										</p>
										 </td><td align="left" valign="top" headers="idm139893194122768"> <p>
											Specifies the decimal value of a DSCP mark.
										</p>
										 </td></tr></tbody></table></div></div></li><li class="listitem"><p class="simpara">
							Configure a port or network to apply the policy to. You can update an existing port or network, or create a new port or network to apply the policy to:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Apply the policy to an existing port:
								</p><pre class="screen">(overcloud) $ openstack port set --qos-policy &lt;policy_name&gt; &lt;port_name|port_ID&gt;</pre></li><li class="listitem"><p class="simpara">
									Create a new port:
								</p><pre class="screen">(overcloud) $ openstack port create --qos-policy &lt;policy_name&gt; --network &lt;network_name|network_ID&gt; &lt;port_name|port_ID&gt;</pre></li><li class="listitem"><p class="simpara">
									Apply the policy to an existing network:
								</p><pre class="screen">(overcloud) $ openstack network set --qos-policy &lt;policy_name&gt; &lt;network_name|network_ID&gt;</pre></li><li class="listitem"><p class="simpara">
									Create a new network:
								</p><pre class="screen">(overcloud) $ openstack network create --qos-policy &lt;policy_name&gt; &lt;network_name&gt;</pre></li></ul></div></li></ol></div><section class="section" id="bandwidth-limit"><div class="titlepage"><div><div><h3 class="title">10.2.1. Creating and applying a bandwidth limit QoS policy and rule</h3></div></div></div><p>
						You can create a QoS policy that limits the bandwidth on networks, ports or floating IPs, and drops any traffic that exceeds the specified rate. To create and apply a bandwidth limit QoS policy and rule, complete the following steps:
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								If the <code class="literal">qos</code> extension is not already enabled for OpenStack Networking in <span class="emphasis"><em>/etc/neutron/plugins/ml2/&lt;agent_name&gt;_agent.ini</em></span>, then perform the following steps:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Create a custom environment file, and add the following configuration:
									</p><pre class="screen">parameter_defaults:
  NeutronSriovAgentExtensions: 'qos'</pre></li><li class="listitem"><p class="simpara">
										To apply this configuration, deploy the overcloud, adding your custom environment file to the stack along with your other environment files:
									</p><pre class="screen">(undercloud) $ openstack overcloud deploy --templates \
  -e [your environment files]
  -e /home/stack/templates/&lt;custom-environment-file&gt;.yaml</pre><p class="simpara">
										For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/index#modifying-the-overcloud-environment">"Modifying the Overcloud Environment"</a> in the <span class="emphasis"><em>Director Installation and Usage</em></span> guide.
									</p></li></ol></div></li><li class="listitem"><p class="simpara">
								Identify the ID of the project you want to create the QoS policy for:
							</p><pre class="screen">(overcloud) $ openstack project list
+----------------------------------+----------+
| ID                               | Name     |
+----------------------------------+----------+
| 4b0b98f8c6c040f38ba4f7146e8680f5 | auditors |
| 519e6344f82e4c079c8e2eabb690023b | services |
| 80bf5732752a41128e612fe615c886c6 | demo     |
| 98a2f53c20ce4d50a40dac4a38016c69 | admin    |
+----------------------------------+----------+</pre></li><li class="listitem"><p class="simpara">
								Create a QoS policy named "bw-limiter" in the <code class="literal">admin</code> project:
							</p><pre class="screen">(overcloud) $ openstack network qos policy create --share --project 98a2f53c20ce4d50a40dac4a38016c69 bw-limiter</pre></li><li class="listitem"><p class="simpara">
								Configure the rules for the "bw-limiter" policy:
							</p><pre class="screen">(overcloud) $ openstack network qos rule create --type bandwidth-limit --max_kbps 3000 --max_burst_kbps 300 bw-limiter</pre></li><li class="listitem"><p class="simpara">
								Configure a port to apply the "bw-limiter" policy to:
							</p><pre class="screen">(overcloud) $ openstack port set --qos-policy bw-limiter &lt;port_name|port_ID&gt;</pre></li></ol></div></section><section class="section" id="guaranteed-min-bw"><div class="titlepage"><div><div><h3 class="title">10.2.2. Creating and applying a guaranteed minimum bandwidth QoS policy and rule</h3></div></div></div><p>
						You can request bandwidth guarantees for ports on networks with <code class="literal">segmentation_type=flat</code> or <code class="literal">segmentation_type=vlan</code>, which are backed by a physical network (physnet).
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Do not mix ports with and without bandwidth guarantees on the same physical interface, as the ports without a guarantee may starve. Create host aggregates to separate ports with bandwidth guarantees from those without.
								</li><li class="listitem">
									You can only modify a guaranteed minimum bandwidth QoS policy when there are no instances using any of the ports the policy is assigned to.
								</li></ul></div></div></div><div class="itemizedlist"><p class="title"><strong>Supported drivers and agents¶</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								SR-IOV (sriovnicswitch) vnic_types: direct, macvtap
							</li><li class="listitem"><p class="simpara">
								ML2/OVS (openvswitch) vnic_types: normal, direct
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									ML2/OVN does not support minimum bandwidth.
								</p></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The Placement service must support microversion 1.29.
							</li><li class="listitem">
								The Compute (nova) service must support microversion 2.72.
							</li><li class="listitem"><p class="simpara">
								The Networking (neutron) service must support the following API extensions:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">agent-resources-synced</code>
									</li><li class="listitem">
										<code class="literal">port-resource-request</code>
									</li><li class="listitem">
										<code class="literal">qos-bw-minimum-ingress</code>
									</li></ul></div></li><li class="listitem">
								To query placement information using the OpenStack CLI, install the Placement service package, <code class="literal">python3-osc-placement</code>, on the undercloud.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								If the Placement service plugin is not already configured for Openstack networking, then perform the following steps:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										If the <code class="literal">NeutronServicePlugins</code> is already provided in a custom environment file, update the parameter to include "placement", otherwise create a custom environment file and add the following configuration:
									</p><pre class="screen">parameter_defaults:
	NeutronServicePlugins: 'router,qos,segments,trunk,placement'</pre></li><li class="listitem"><p class="simpara">
										To apply this configuration, deploy the overcloud, adding your custom environment file to the stack along with your other environment files:
									</p><pre class="screen">(undercloud) $ openstack overcloud deploy --templates \
  -e [your environment files]
  -e /home/stack/templates/network-environment.yaml</pre><p class="simpara">
										For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/index#modifying-the-overcloud-environment">"Modifying the Overcloud Environment"</a> in the <span class="emphasis"><em>Director Installation and Usage</em></span> guide.
									</p></li></ol></div></li><li class="listitem"><p class="simpara">
								(Optional) To black list <code class="literal">vnic_types</code> when multiple ML2 mechanism drivers support them by default and multiple agents are being tracked in Placement, add <code class="literal">vnic_type_blacklist</code> to <code class="literal">/etc/neutron/plugins/ml2/ml2_conf.ini</code> and restart the agent:
							</p><pre class="screen">[ovs_driver]
vnic_type_blacklist = direct
[sriov_driver]
#vnic_type_blacklist = direct</pre></li><li class="listitem"><p class="simpara">
								Configure the resource provider ingress and egress bandwidths for the relevant agents on each Compute node that needs to provide a minimum bandwidth. You can configure only ingress or egress, or both, using the following formats:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Configure only egress bandwidth, in kbps:
									</p><pre class="screen">resource_provider_bandwidths = &lt;bridge0&gt;:&lt;egress_kbps&gt;:,&lt;bridge1&gt;:&lt;egress_kbps&gt;:,...,&lt;bridgeN&gt;:&lt;egress_kbps&gt;:</pre></li><li class="listitem"><p class="simpara">
										Configure only ingress bandwidth, in kbps:
									</p><pre class="screen">resource_provider_bandwidths = &lt;bridge0&gt;::&lt;ingress_kbps&gt;,&lt;bridge1&gt;::&lt;ingress_kbps&gt;,...,&lt;bridgeN&gt;::&lt;ingress_kbps&gt;</pre></li><li class="listitem"><p class="simpara">
										Configure both egress and ingress bandwidth, in kbps:
									</p><pre class="screen">resource_provider_bandwidths = &lt;bridge0&gt;:&lt;egress_kbps&gt;:&lt;ingress_kbps&gt;,&lt;bridge1&gt;:&lt;egress_kbps&gt;:&lt;ingress_kbps&gt;,...,&lt;bridgeN&gt;:&lt;egress_kbps&gt;:&lt;ingress_kbps&gt;</pre><p class="simpara">
										For example:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
												To configure the resource provider ingress and egress bandwidths for the OVS agent, add <code class="literal">resource_provider_bandwidths</code> to <code class="literal">/etc/neutron/plugins/ml2/openvswitch_agent.ini</code>:
											</p><pre class="screen">[ovs]
bridge_mappings = physnet0:br-physnet0
resource_provider_bandwidths = br-physnet0:10000000:10000000</pre></li><li class="listitem"><p class="simpara">
												To configure the resource provider ingress and egress bandwidths for the SRIOV agent, add <code class="literal">resource_provider_bandwidths</code> to <code class="literal">/etc/neutron/plugins/ml2/sriov_agent.ini</code>:
											</p><pre class="screen">[sriov_nic]
physical_device_mappings = physnet0:ens5,physnet0:ens6
resource_provider_bandwidths = ens5:40000000:40000000,ens6:40000000:40000000</pre></li></ul></div></li></ul></div><p class="simpara">
								To implement the resource provider bandwidths, restart the configured agents.
							</p></li><li class="listitem"><p class="simpara">
								Identify the ID of the project you want to create the QoS policy for:
							</p><pre class="screen">(overcloud) $ openstack project list
+----------------------------------+----------+
| ID                               | Name     |
+----------------------------------+----------+
| 4b0b98f8c6c040f38ba4f7146e8680f5 | auditors |
| 519e6344f82e4c079c8e2eabb690023b | services |
| 80bf5732752a41128e612fe615c886c6 | demo     |
| 98a2f53c20ce4d50a40dac4a38016c69 | admin    |
+----------------------------------+----------+</pre></li><li class="listitem"><p class="simpara">
								Create a QoS policy named "guaranteed_min_bw" in the <code class="literal">admin</code> project:
							</p><pre class="screen">(overcloud) $ openstack network qos policy create --share --project 98a2f53c20ce4d50a40dac4a38016c69 guaranteed_min_bw</pre></li><li class="listitem"><p class="simpara">
								Configure the rules for the "guaranteed_min_bw" policy:
							</p><pre class="screen">(overcloud) $ openstack network qos rule create --type minimum-bandwidth --min-kbps 40000000 --ingress guaranteed_min_bw
(overcloud) $ openstack network qos rule create --type minimum-bandwidth --min-kbps 40000000 --egress guaranteed_min_bw</pre></li><li class="listitem"><p class="simpara">
								Configure a port to apply the "guaranteed_min_bw" policy to:
							</p><pre class="screen">(overcloud) $ openstack port set --qos-policy guaranteed_min_bw &lt;port_name|port_ID&gt;</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								List all of the available resource providers:
							</p><pre class="screen">(undercloud) $ openstack --os-placement-api-version 1.17 resource provider list</pre><p class="simpara">
								Example output:
							</p><pre class="screen"><code class="literal">--------------------------------------</code>-----------------------------------------------------<code class="literal">------------</code>--------------------------------------<code class="literal">--------------------------------------</code>
| uuid                                 | name                                                | generation | root_provider_uuid                   | parent_provider_uuid                 |
<code class="literal">--------------------------------------</code>-----------------------------------------------------<code class="literal">------------</code>--------------------------------------<code class="literal">--------------------------------------</code>
| 31d3d88b-bc3a-41cd-9dc0-fda54028a882 | dell-r730-014.localdomain                           |         28 | 31d3d88b-bc3a-41cd-9dc0-fda54028a882 | None                                 |
| 6b15ddce-13cf-4c85-a58f-baec5b57ab52 | dell-r730-063.localdomain                           |         18 | 6b15ddce-13cf-4c85-a58f-baec5b57ab52 | None                                 |
| e2f5082a-c965-55db-acb3-8daf9857c721 | dell-r730-063.localdomain:NIC Switch agent          |          0 | 6b15ddce-13cf-4c85-a58f-baec5b57ab52 | 6b15ddce-13cf-4c85-a58f-baec5b57ab52 |
| d2fb0ef4-2f45-53a8-88be-113b3e64ba1b | dell-r730-014.localdomain:NIC Switch agent          |          0 | 31d3d88b-bc3a-41cd-9dc0-fda54028a882 | 31d3d88b-bc3a-41cd-9dc0-fda54028a882 |
| f1ca35e2-47ad-53a0-9058-390ade93b73e | dell-r730-063.localdomain:NIC Switch agent:enp6s0f1 |         13 | 6b15ddce-13cf-4c85-a58f-baec5b57ab52 | e2f5082a-c965-55db-acb3-8daf9857c721 |
| e518d381-d590-5767-8f34-c20def34b252 | dell-r730-014.localdomain:NIC Switch agent:enp6s0f1 |         19 | 31d3d88b-bc3a-41cd-9dc0-fda54028a882 | d2fb0ef4-2f45-53a8-88be-113b3e64ba1b |
<code class="literal">--------------------------------------</code>-----------------------------------------------------<code class="literal">------------</code>--------------------------------------<code class="literal">--------------------------------------</code></pre></li><li class="listitem"><p class="simpara">
								Check the bandwidth a specific resource provides:
							</p><pre class="screen">(undercloud) $ openstack --os-placement-api-version 1.17 resource provider inventory list &lt;rp_uuid&gt;</pre><p class="simpara">
								The following example output shows the bandwidth provided by interface enp6s0f1 on dell-r730-014:
							</p><pre class="screen">[stack@dell-r730-014 nova]$ openstack --os-placement-api-version 1.17 resource provider inventory list e518d381-d590-5767-8f34-c20def34b252
<code class="literal">----------------------------</code>------------------<code class="literal">----------</code>------------<code class="literal">----------</code>-----------<code class="literal">----------</code>
| resource_class             | allocation_ratio | min_unit |   max_unit | reserved | step_size |    total |
<code class="literal">----------------------------</code>------------------<code class="literal">----------</code>------------<code class="literal">----------</code>-----------<code class="literal">----------</code>
| NET_BW_EGR_KILOBIT_PER_SEC |              1.0 |        1 | 2147483647 |        0 |         1 | 10000000 |
| NET_BW_IGR_KILOBIT_PER_SEC |              1.0 |        1 | 2147483647 |        0 |         1 | 10000000 |
<code class="literal">----------------------------</code>------------------<code class="literal">----------</code>------------<code class="literal">----------</code>-----------<code class="literal">----------</code></pre></li><li class="listitem"><p class="simpara">
								To check claims against the resource provider when instances are running, run the following command:
							</p><pre class="screen">(undercloud) $ openstack --os-placement-api-version 1.17 resource provider show --allocations  &lt;rp_uuid&gt;</pre><p class="simpara">
								Example output:
							</p><pre class="screen">[stack@dell-r730-014 nova]$ openstack --os-placement-api-version 1.17 resource provider show --allocations  e518d381-d590-5767-8f34-c20def34b252 -f value -c allocations
{<span class="emphasis"><em>3cbb9e07-90a8-4154-8acd-b6ec2f894a83</em></span>: {<span class="emphasis"><em>resources</em></span>: {<span class="emphasis"><em>NET_BW_EGR_KILOBIT_PER_SEC</em></span>: 1000000, <span class="emphasis"><em>NET_BW_IGR_KILOBIT_PER_SEC</em></span>: 1000000}}, <span class="emphasis"><em>8848b88b-4464-443f-bf33-5d4e49fd6204</em></span>: {<span class="emphasis"><em>resources</em></span>: {<span class="emphasis"><em>NET_BW_EGR_KILOBIT_PER_SEC</em></span>: 1000000, <span class="emphasis"><em>NET_BW_IGR_KILOBIT_PER_SEC</em></span>: 1000000}}, <span class="emphasis"><em>9a29e946-698b-4731-bc28-89368073be1a</em></span>: {<span class="emphasis"><em>resources</em></span>: {<span class="emphasis"><em>NET_BW_EGR_KILOBIT_PER_SEC</em></span>: 1000000, <span class="emphasis"><em>NET_BW_IGR_KILOBIT_PER_SEC</em></span>: 1000000}}, <span class="emphasis"><em>a6c83b86-9139-4e98-9341-dc76065136cc</em></span>: {<span class="emphasis"><em>resources</em></span>: {<span class="emphasis"><em>NET_BW_EGR_KILOBIT_PER_SEC</em></span>: 3000000, <span class="emphasis"><em>NET_BW_IGR_KILOBIT_PER_SEC</em></span>: 3000000}}, <span class="emphasis"><em>da60e33f-156e-47be-a632-870172ec5483</em></span>: {<span class="emphasis"><em>resources</em></span>: {<span class="emphasis"><em>NET_BW_EGR_KILOBIT_PER_SEC</em></span>: 1000000, <span class="emphasis"><em>NET_BW_IGR_KILOBIT_PER_SEC</em></span>: 1000000}}, <span class="emphasis"><em>eb582a0e-8274-4f21-9890-9a0d55114663</em></span>: {<span class="emphasis"><em>resources</em></span>: {<span class="emphasis"><em>NET_BW_EGR_KILOBIT_PER_SEC</em></span>: 3000000, <span class="emphasis"><em>NET_BW_IGR_KILOBIT_PER_SEC</em></span>: 3000000}}}</pre></li></ol></div></section><section class="section" id="dcsp-marking-egress-traffic"><div class="titlepage"><div><div><h3 class="title">10.2.3. DSCP marking for egress traffic</h3></div></div></div><p>
						You can use differentiated services code point (DSCP) to implement quality-of-service (QoS) policies on your network by embedding relevant values in the IP headers. OpenStack Networking (neutron) QoS policies can use DSCP marking to manage egress traffic on neutron ports and networks. At present, DSCP is available only for VLAN and flat provider networks using Open vSwitch (OVS).
					</p><p>
						Complete the steps in this example procedure to create a policy, define DSCP rules, and apply the rules to the policy. These rules use the <code class="literal">--dscp-mark</code> parameter, which specifies the decimal value of a DSCP mark.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a new QoS policy:
							</p><pre class="screen">openstack network qos policy create --project 98a2f53c20ce4d50a40dac4a38016c69 qos_policy_name</pre></li><li class="listitem"><p class="simpara">
								Create a DSCP rule and apply it to the <code class="literal">qos-web-servers</code> policy, using DSCP mark <code class="literal">18</code>:
							</p><pre class="screen">openstack network qos rule create --type dscp-marking --dscp-mark 18 qos_policy_name
Created a new dscp_marking_rule:
+-----------+--------------------------------------+
| Field     | Value                                |
+-----------+--------------------------------------+
| dscp_mark | 18                                   |
| id        | d7f976ec-7fab-4e60-af70-f59bf88198e6 |
+-----------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
								View the DSCP rules for QoS policy, <code class="literal">qos-web-servers</code>:
							</p><pre class="screen">openstack network qos rule list qos-web-servers
+-----------+--------------------------------------+
| dscp_mark | id                                   |
+-----------+--------------------------------------+
|        18 | d7f976ec-7fab-4e60-af70-f59bf88198e6 |
+-----------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
								View the details of the DSCP rule assigned to policy, <code class="literal">qos-web-servers</code>:
							</p><pre class="screen">openstack network qos rule show qos-web-servers d7f976ec-7fab-4e60-af70-f59bf88198e6
+-----------+--------------------------------------+
| Field     | Value                                |
+-----------+--------------------------------------+
| dscp_mark | 18                                   |
| id        | d7f976ec-7fab-4e60-af70-f59bf88198e6 |
+-----------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
								Change the DSCP value assigned to a rule:
							</p><pre class="screen">openstack network qos rule set --dscp-mark 22 qos-web-servers d7f976ec-7fab-4e60-af70-f59bf88198e6</pre></li><li class="listitem"><p class="simpara">
								Delete a DSCP rule:
							</p><pre class="screen">openstack network qos rule delete qos-web-servers d7f976ec-7fab-4e60-af70-f59bf88198e6</pre></li></ol></div></section><section class="section" id="verify-qos-policy-rules"><div class="titlepage"><div><div><h3 class="title">10.2.4. How to verify the application of your QoS policy and rules</h3></div></div></div><p>
						Use the following commands to verify the creation and application of your quality of service (QoS) policy and rules.
					</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893193960688" scope="col">Action</th><th align="left" valign="top" id="idm139893193959600" scope="col">Command</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893193960688"> <p>
										List the available QoS policies
									</p>
									 </td><td align="left" valign="top" headers="idm139893193959600"> <p>
										<code class="literal">$ openstack network qos policy list</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893193960688"> <p>
										Show details of a specific QoS policy
									</p>
									 </td><td align="left" valign="top" headers="idm139893193959600"> <p>
										<code class="literal">$ openstack network qos policy show &lt;policy_name&gt;</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893193960688"> <p>
										List the available QoS rules
									</p>
									 </td><td align="left" valign="top" headers="idm139893193959600"> <p>
										<code class="literal">$ openstack network qos rule type list</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893193960688"> <p>
										List the rules of a specific QoS policy
									</p>
									 </td><td align="left" valign="top" headers="idm139893193959600"> <p>
										<code class="literal">$ openstack network qos rule list &lt;policy_name&gt;</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893193960688"> <p>
										Show details of a specific rule
									</p>
									 </td><td align="left" valign="top" headers="idm139893193959600"> <p>
										<code class="literal">$ openstack network qos rule type show &lt;rule_id&gt;</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893193960688"> <p>
										List the available ports
									</p>
									 </td><td align="left" valign="top" headers="idm139893193959600"> <p>
										<code class="literal">$ openstack port list</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893193960688"> <p>
										Show details of a specific port
									</p>
									 </td><td align="left" valign="top" headers="idm139893193959600"> <p>
										<code class="literal">$ openstack port show &lt;port_ID/port_name&gt;</code>
									</p>
									 </td></tr></tbody></table></div></section></section><section class="section" id="rbac-qos-policies"><div class="titlepage"><div><div><h2 class="title">10.3. RBAC for QoS Policies</h2></div></div></div><p>
					You can add a role-based access control (RBAC) for quality-of-service (QoS) policies. As a result, you can now make QoS policies available to certain projects.
				</p><p>
					For example, you can now create a QoS policy that allows for lower-priority network traffic, and have it only apply to certain projects. Run the following command to assign the <code class="literal">bw-limiter</code> policy to the tenant, <code class="literal">demo</code>:
				</p><pre class="screen"># openstack network rbac create --type qos_policy --target-project 80bf5732752a41128e612fe615c886c6 --action access_as_shared bw-limiter</pre></section></section><section class="chapter" id="bridge-mappings"><div class="titlepage"><div><div><h2 class="title">Chapter 11. Configuring bridge mappings</h2></div></div></div><p>
				This chapter contains information about configuring bridge mappings in Red Hat OpenStack Platform.
			</p><section class="section" id="bridge-mappings-usage"><div class="titlepage"><div><div><h2 class="title">11.1. Overview of bridge mappings</h2></div></div></div><p>
					A bridge mapping associates a physical network name (an interface label) to a bridge created with OVS or OVN. In this example, the physical name (datacentre) is mapped to the external bridge (br-ex):
				</p><pre class="screen">bridge_mappings = datacentre:br-ex</pre><p>
					Bridge mappings allow provider network traffic to reach the physical network. Traffic leaves the provider network from the <code class="literal">qg-xxx</code> interface of the router and arrives at <code class="literal">br-int</code>. For OVS, a patch port between <code class="literal">br-int</code> and <code class="literal">br-ex</code> then allows the traffic to pass through the bridge of the provider network and out to the physical network. OVN creates a patch port on a hypervisor only when there is a VM bound to the hypervisor that requires the port.
				</p><p>
					You configure bridge mappings on the network node on which the router is scheduled. Router traffic can egress using the correct physical network, as represented by the provider network.
				</p></section><section class="section" id="traffic-flow"><div class="titlepage"><div><div><h2 class="title">11.2. Traffic flow</h2></div></div></div><p>
					Each external network is represented by an internal VLAN ID, which is tagged to the router <code class="literal">qg-xxx</code> port. When a packet reaches <code class="literal">phy-br-ex</code>, the <code class="literal">br-ex</code> port strips the VLAN tag and moves the packet to the physical interface and then to the external network.
				</p><p>
					The return packet from the external network arrives on <code class="literal">br-ex</code> and moves to <code class="literal">br-int</code> using <code class="literal">phy-br-ex &lt;-&gt; int-br-ex</code>. When the packet is going through <code class="literal">br-ex</code> to <code class="literal">br-int</code>, the packet’s external vlan ID is replaced by an internal vlan tag in <code class="literal">br-int</code>, and this allows <code class="literal">qg-xxx</code> to accept the packet.
				</p><p>
					In the case of egress packets, the packet’s internal vlan tag is replaced with an external vlan tag in br-ex (or in the external bridge that is defined in the <code class="literal">network_vlan_ranges</code> parameter).
				</p></section><section class="section" id="config-bridge-mappings"><div class="titlepage"><div><div><h2 class="title">11.3. Configuring bridge mappings</h2></div></div></div><p>
					Red Hat OpenStack Platform (RHOSP) director uses predefined NIC templates to install and configure your initial networking configuration.
				</p><p>
					You can customize aspects of your initial networking configuration, such as bridge mappings, by using the <code class="literal">NeutronBridgeMappings</code> parameter in a customized environment file. You call the environment file in the <code class="literal">openstack overcloud deploy</code> command.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must configure bridge mappings on the network node on which the router is scheduled.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For both ML2/OVS and ML2/OVN DVR configurations, you must configure bridge mappings for the compute nodes, too.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a custom environment file and add the <code class="literal">NeutronBridgeMappings</code> heat parameter with values that are appropriate for your site.
						</p><pre class="screen">parameter_defaults:
  NeutronBridgeMappings: "datacentre:br-ex,tenant:br-tenant"</pre><p class="simpara">
							The <code class="literal">NeutronBridgeMappings</code> heat parameter associates a physical name (<code class="literal">datacentre</code>) to a bridge (<code class="literal">br-ex</code>).
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								When the <code class="literal">NeutronBridgeMappings</code> parameter is not used, the default maps the external bridge on hosts (br-ex) to a physical name (datacentre).
							</p></div></div></li><li class="listitem"><p class="simpara">
							To apply this configuration, deploy the overcloud, adding your custom environment file to the stack along with your other environment files.
						</p><pre class="screen">(undercloud) $ openstack overcloud deploy --templates \
  -e [your environment files]
  -e /home/stack/templates/&lt;custom-environment-file&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
							You are ready for the next steps, which are the following:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Using the network VLAN ranges, create the provider networks that represent the corresponding external networks. (You use the physical name when creating neutron provider networks or floating IP networks.)
								</li><li class="listitem">
									Connect the external networks to your tenant networks with router interfaces.
								</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/index#network-environment-parameters">Network environment parameters</a> in the <span class="emphasis"><em>Advanced Overcloud Customization</em></span> guide
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/index#sect-Including_Environment_Files_in_Overcloud_Creation">Including Environment Files in Overcloud Creation</a> in the <span class="emphasis"><em>Advanced Overcloud Customization</em></span> guide
						</li></ul></div></section><section class="section" id="maintain-bridge-mappings"><div class="titlepage"><div><div><h2 class="title">11.4. Maintaining bridge mappings for OVS</h2></div></div></div><p>
					After removing any OVS bridge mappings, you must perform a subsequent cleanup to ensure that the bridge configuration is cleared of any associated patch port entries. You can perform this operation in the following ways:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Manual port cleanup - requires careful removal of the superfluous patch ports. No outages of network connectivity are required.
						</li><li class="listitem">
							Automated port cleanup - performs an automated cleanup, but requires an outage, and requires that the necessary bridge mappings be re-added. Choose this option during scheduled maintenance windows when network connectivity outages can be tolerated.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When OVN bridge mappings are removed, the OVN controller automatically cleans up any associated patch ports.
					</p></div></div><section class="section" id="clean-ports-manually"><div class="titlepage"><div><div><h3 class="title">11.4.1. Cleaning up OVS patch ports manually</h3></div></div></div><p>
						After removing any OVS bridge mappings, you must also remove the associated patch ports.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The patch ports that you are cleaning up must be Open Virtual Switch (OVS) ports.
							</li><li class="listitem">
								A system outage is <span class="strong strong"><strong>not</strong></span> required to perform a manual patch port cleanup.
							</li><li class="listitem"><p class="simpara">
								You can identify the patch ports to cleanup by their naming convention:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										In <code class="literal">br-$external_bridge</code> patch ports are named <code class="literal">phy-&lt;external bridge name&gt;</code> (for example, phy-br-ex2).
									</li><li class="listitem">
										In <code class="literal">br-int</code> patch ports are named <code class="literal">int-&lt;external bridge name&gt;</code> (for example, <code class="literal">int-br-ex2</code>).
									</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Use <code class="literal">ovs-vsctl</code> to remove the OVS patch ports associated with the removed bridge mapping entry:
							</p><pre class="screen"># ovs-vsctl del-port br-ex2 datacentre
# ovs-vsctl del-port br-tenant tenant</pre></li><li class="listitem"><p class="simpara">
								Restart <code class="literal">neutron-openvswitch-agent</code>:
							</p><pre class="screen"># service neutron-openvswitch-agent restart</pre></li></ol></div></section><section class="section" id="clean-ports-automatically"><div class="titlepage"><div><div><h3 class="title">11.4.2. Cleaning up OVS patch ports automatically</h3></div></div></div><p>
						After removing any OVS bridge mappings, you must also remove the associated patch ports.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When OVN bridge mappings are removed, the OVN controller automatically cleans up any associated patch ports.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The patch ports that you are cleaning up must be Open Virtual Switch (OVS) ports.
							</li><li class="listitem">
								Cleaning up patch ports automatically with the <code class="literal">neutron-ovs-cleanup</code> command causes a network connectivity outage, and should be performed only during a scheduled maintenance window.
							</li><li class="listitem">
								Use the flag <code class="literal">--ovs_all_ports</code> to remove all patch ports from <code class="literal">br-int</code>, cleaning up tunnel ends from <code class="literal">br-tun</code>, and patch ports from bridge to bridge.
							</li><li class="listitem">
								The <code class="literal">neutron-ovs-cleanup</code> command unplugs all patch ports (instances, qdhcp/qrouter, among others) from all OVS bridges.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Run the <code class="literal">neutron-ovs-cleanup</code> command with the <code class="literal">--ovs_all_ports</code> flag.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Perfoming this step will result in a total networking outage.
								</p></div></div><pre class="screen"># /usr/bin/neutron-ovs-cleanup
--config-file /etc/neutron/plugins/ml2/openvswitch_agent.ini
--log-file /var/log/neutron/ovs-cleanup.log --ovs_all_ports</pre></li><li class="listitem"><p class="simpara">
								Restore connectivity by redeploying the overcloud.
							</p><p class="simpara">
								When you rerun the <code class="literal">openstack overcloud deploy</code> command, your bridge mapping values are reapplied.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									After a restart, the OVS agent does not interfere with any connections that are not present in bridge_mappings. So, if you have <code class="literal">br-int</code> connected to <code class="literal">br-ex2</code>, and <code class="literal">br-ex2</code> has some flows on it, removing <code class="literal">br-int</code> from the bridge_mappings configuration does not disconnect the two bridges when you restart the OVS agent or the node.
								</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/index#network-environment-parameters">Network environment parameters</a> in the <span class="emphasis"><em>Advanced Overcloud Customization</em></span> guide
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/advanced_overcloud_customization/index#sect-Including_Environment_Files_in_Overcloud_Creation">Including Environment Files in Overcloud Creation</a> in the <span class="emphasis"><em>Advanced Overcloud Customization</em></span> guide
							</li></ul></div></section></section></section><section class="chapter" id="sec-trunk-vlan"><div class="titlepage"><div><div><h2 class="title">Chapter 12. VLAN-aware instances</h2></div></div></div><section class="section" id="overview-vlan-aware-instances"><div class="titlepage"><div><div><h2 class="title">12.1. Overview of VLAN-aware instances</h2></div></div></div><p>
					Instances can send and receive VLAN-tagged traffic over a single vNIC. This is particularly useful for NFV applications (VNFs) that expect VLAN-tagged traffic, allowing a single vNIC to serve multiple customers or services.
				</p><p>
					For example, the tenant data network can use VLANs, or tunneling (VXLAN/GRE) segmentation, while the instances see the traffic tagged with VLAN IDs. As a result, network packets are tagged just before they are injected to the instance and do not need to be tagged throughout the entire network.
				</p><p>
					To implement VLAN-tagged traffic, create a parent port and attach the new port to an existing neutron network. When you attach the new port, OpenStack Networking adds a trunk connection to the parent port you created. Next, create subports. These subports connect VLANs to instances, which allow connectivity to the trunk. Within the instance operating system, you must also create a sub-interface that tags traffic for the VLAN associated with the subport.
				</p></section><section class="section" id="review_trunk_plugin"><div class="titlepage"><div><div><h2 class="title">12.2. Reviewing the trunk plug-in</h2></div></div></div><p>
					During a Red Hat openStack deployment, the trunk plug-in is enabled by default. You can review the configuration on the controller nodes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On the controller node, confirm that the trunk plug-in is enabled in the /var/lib/config-data/neutron/etc/neutron/neutron.conf file:
						</p><pre class="screen">service_plugins=router,qos,trunk</pre></li></ul></div></section><section class="section" id="create-trunk-connection"><div class="titlepage"><div><div><h2 class="title">12.3. Creating a trunk connection</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Identify the network that requires the trunk port connection. This would be the network that will contain the instance that requires access to the trunked VLANs. In this example, this is the <span class="emphasis"><em>public</em></span> network:
						</p><pre class="screen">openstack network list
+--------------------------------------+---------+--------------------------------------+
| ID                                   | Name    | Subnets                              |
+--------------------------------------+---------+--------------------------------------+
| 82845092-4701-4004-add7-838837837621 | private | 434c7982-cd96-4c41-a8c9-b93adbdcb197 |
| 8d8bc6d6-5b28-4e00-b99e-157516ff0050 | public  | 3fd811b4-c104-44b5-8ff8-7a86af5e332c |
+--------------------------------------+---------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Create the parent trunk port, and attach it to the network that the instance connects to. In this example, create a neutron port named parent-trunk-port on the <span class="emphasis"><em>public</em></span> network. This trunk is the <span class="emphasis"><em>parent</em></span> port, as you can use it to create <span class="emphasis"><em>subports</em></span>.
						</p><pre class="screen">openstack port create --network public parent-trunk-port
+-----------------------+-----------------------------------------------------------------------------+
| Field                 | Value                                                                       |
+-----------------------+-----------------------------------------------------------------------------+
| admin_state_up        | UP                                                                          |
| allowed_address_pairs |                                                                             |
| binding_host_id       |                                                                             |
| binding_profile       |                                                                             |
| binding_vif_details   |                                                                             |
| binding_vif_type      | unbound                                                                     |
| binding_vnic_type     | normal                                                                      |
| created_at            | 2016-10-20T02:02:33Z                                                        |
| description           |                                                                             |
| device_id             |                                                                             |
| device_owner          |                                                                             |
| extra_dhcp_opts       |                                                                             |
| fixed_ips             | ip_address='172.24.4.230', subnet_id='dc608964-9af3-4fed-9f06-6d3844fb9b9b' |
| headers               |                                                                             |
| id                    | 20b6fdf8-0d43-475a-a0f1-ec8f757a4a39                                        |
| mac_address           | fa:16:3e:33:c4:75                                                           |
| name                  | parent-trunk-port                                                           |
| network_id            | 871a6bd8-4193-45d7-a300-dcb2420e7cc3                                        |
| project_id            | 745d33000ac74d30a77539f8920555e7                                            |
| project_id            | 745d33000ac74d30a77539f8920555e7                                            |
| revision_number       | 4                                                                           |
| security_groups       | 59e2af18-93c6-4201-861b-19a8a8b79b23                                        |
| status                | DOWN                                                                        |
| updated_at            | 2016-10-20T02:02:33Z                                                        |
+-----------------------+-----------------------------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Create a trunk using the port that you created in step 2. In this example the trunk is named <code class="literal">parent-trunk</code>.
						</p><pre class="screen">openstack network trunk create --parent-port parent-trunk-port parent-trunk
+-----------------+--------------------------------------+
| Field           | Value                                |
+-----------------+--------------------------------------+
| admin_state_up  | UP                                   |
| created_at      | 2016-10-20T02:05:17Z                 |
| description     |                                      |
| id              | 0e4263e2-5761-4cf6-ab6d-b22884a0fa88 |
| name            | parent-trunk                         |
| port_id         | 20b6fdf8-0d43-475a-a0f1-ec8f757a4a39 |
| revision_number | 1                                    |
| status          | DOWN                                 |
| sub_ports       |                                      |
| tenant_id       | 745d33000ac74d30a77539f8920555e7     |
| updated_at      | 2016-10-20T02:05:17Z                 |
+-----------------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							View the trunk connection:
						</p><pre class="screen">openstack network trunk list
+--------------------------------------+--------------+--------------------------------------+-------------+
| ID                                   | Name         | Parent Port                          | Description |
+--------------------------------------+--------------+--------------------------------------+-------------+
| 0e4263e2-5761-4cf6-ab6d-b22884a0fa88 | parent-trunk | 20b6fdf8-0d43-475a-a0f1-ec8f757a4a39 |             |
+--------------------------------------+--------------+--------------------------------------+-------------+</pre></li><li class="listitem"><p class="simpara">
							View the details of the trunk connection:
						</p><pre class="screen">openstack network trunk show parent-trunk
+-----------------+--------------------------------------+
| Field           | Value                                |
+-----------------+--------------------------------------+
| admin_state_up  | UP                                   |
| created_at      | 2016-10-20T02:05:17Z                 |
| description     |                                      |
| id              | 0e4263e2-5761-4cf6-ab6d-b22884a0fa88 |
| name            | parent-trunk                         |
| port_id         | 20b6fdf8-0d43-475a-a0f1-ec8f757a4a39 |
| revision_number | 1                                    |
| status          | DOWN                                 |
| sub_ports       |                                      |
| tenant_id       | 745d33000ac74d30a77539f8920555e7     |
| updated_at      | 2016-10-20T02:05:17Z                 |
+-----------------+--------------------------------------+</pre></li></ol></div></section><section class="section" id="add-subports-trunk"><div class="titlepage"><div><div><h2 class="title">12.4. Adding subports to the trunk</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a neutron port.
						</p><p class="simpara">
							This port is a subport connection to the trunk. You must also specify the MAC address that you assigned to the parent port:
						</p><pre class="screen">openstack port create --network private --mac-address fa:16:3e:33:c4:75 subport-trunk-port
+-----------------------+--------------------------------------------------------------------------+
| Field                 | Value                                                                    |
+-----------------------+--------------------------------------------------------------------------+
| admin_state_up        | UP                                                                       |
| allowed_address_pairs |                                                                          |
| binding_host_id       |                                                                          |
| binding_profile       |                                                                          |
| binding_vif_details   |                                                                          |
| binding_vif_type      | unbound                                                                  |
| binding_vnic_type     | normal                                                                   |
| created_at            | 2016-10-20T02:08:14Z                                                     |
| description           |                                                                          |
| device_id             |                                                                          |
| device_owner          |                                                                          |
| extra_dhcp_opts       |                                                                          |
| fixed_ips             | ip_address='10.0.0.11', subnet_id='1a299780-56df-4c0b-a4c0-c5a612cef2e8' |
| headers               |                                                                          |
| id                    | 479d742e-dd00-4c24-8dd6-b7297fab3ee9                                     |
| mac_address           | fa:16:3e:33:c4:75                                                        |
| name                  | subport-trunk-port                                                       |
| network_id            | 3fe6b758-8613-4b17-901e-9ba30a7c4b51                                     |
| project_id            | 745d33000ac74d30a77539f8920555e7                                         |
| project_id            | 745d33000ac74d30a77539f8920555e7                                         |
| revision_number       | 4                                                                        |
| security_groups       | 59e2af18-93c6-4201-861b-19a8a8b79b23                                     |
| status                | DOWN                                                                     |
| updated_at            | 2016-10-20T02:08:15Z                                                     |
+-----------------------+--------------------------------------------------------------------------+</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If you receive the error <code class="literal">HttpException: Conflict</code>, confirm that you are creating the subport on a different network to the one that has the parent trunk port. This example uses the public network for the parent trunk port, and private for the subport.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Associate the port with the trunk (<code class="literal">parent-trunk</code>), and specify the VLAN ID (<code class="literal">55</code>):
						</p><pre class="screen">openstack network trunk set --subport port=subport-trunk-port,segmentation-type=vlan,segmentation-id=55 parent-trunk</pre></li></ol></div></section><section class="section" id="config-instance-use-trunk"><div class="titlepage"><div><div><h2 class="title">12.5. Configuring an instance to use a trunk</h2></div></div></div><p>
					You must configure the instance operating system to use the MAC address that neutron assigned to the subport. You can also configure the subport to use a specific MAC address during the subport creation step.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Review the configuration of your network trunk:
						</p><pre class="screen">$ openstack network trunk list
+--------------------------------------+--------------+--------------------------------------+-------------+
| ID                                   | Name         | Parent Port                          | Description |
+--------------------------------------+--------------+--------------------------------------+-------------+
| 0e4263e2-5761-4cf6-ab6d-b22884a0fa88 | parent-trunk | 20b6fdf8-0d43-475a-a0f1-ec8f757a4a39 |             |
+--------------------------------------+--------------+--------------------------------------+-------------+


$ openstack network trunk show parent-trunk
+-----------------+------------------------------------------------------------------------------------------------+
| Field           | Value                                                                                          |
+-----------------+------------------------------------------------------------------------------------------------+
| admin_state_up  | UP                                                                                             |
| created_at      | 2016-10-20T02:05:17Z                                                                           |
| description     |                                                                                                |
| id              | 0e4263e2-5761-4cf6-ab6d-b22884a0fa88                                                           |
| name            | parent-trunk                                                                                   |
| port_id         | 20b6fdf8-0d43-475a-a0f1-ec8f757a4a39                                                           |
| revision_number | 2                                                                                              |
| status          | DOWN                                                                                           |
| sub_ports       | port_id='479d742e-dd00-4c24-8dd6-b7297fab3ee9', segmentation_id='55', segmentation_type='vlan' |
| tenant_id       | 745d33000ac74d30a77539f8920555e7                                                               |
| updated_at      | 2016-10-20T02:10:06Z                                                                           |
+-----------------+------------------------------------------------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Create an instance that uses the parent <code class="literal">port-id</code> as its vNIC:
						</p><pre class="screen">nova boot --image cirros --flavor m1.tiny testInstance --security-groups default --key-name sshaccess --nic port-id=20b6fdf8-0d43-475a-a0f1-ec8f757a4a39


+--------------------------------------+-----------------------------------------------+
| Property                             | Value                                         |
+--------------------------------------+-----------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                        |
| OS-EXT-AZ:availability_zone          |                                               |
| OS-EXT-SRV-ATTR:host                 | -                                             |
| OS-EXT-SRV-ATTR:hostname             | testinstance                                  |
| OS-EXT-SRV-ATTR:hypervisor_hostname  | -                                             |
| OS-EXT-SRV-ATTR:instance_name        |                                               |
| OS-EXT-SRV-ATTR:kernel_id            |                                               |
| OS-EXT-SRV-ATTR:launch_index         | 0                                             |
| OS-EXT-SRV-ATTR:ramdisk_id           |                                               |
| OS-EXT-SRV-ATTR:reservation_id       | r-juqco0el                                    |
| OS-EXT-SRV-ATTR:root_device_name     | -                                             |
| OS-EXT-SRV-ATTR:user_data            | -                                             |
| OS-EXT-STS:power_state               | 0                                             |
| OS-EXT-STS:task_state                | scheduling                                    |
| OS-EXT-STS:vm_state                  | building                                      |
| OS-SRV-USG:launched_at               | -                                             |
| OS-SRV-USG:terminated_at             | -                                             |
| accessIPv4                           |                                               |
| accessIPv6                           |                                               |
| adminPass                            | uMyL8PnZRBwQ                                  |
| config_drive                         |                                               |
| created                              | 2016-10-20T03:02:51Z                          |
| description                          | -                                             |
| flavor                               | m1.tiny (1)                                   |
| hostId                               |                                               |
| host_status                          |                                               |
| id                                   | 88b7aede-1305-4d91-a180-67e7eac8b70d          |
| image                                | cirros (568372f7-15df-4e61-a05f-10954f79a3c4) |
| key_name                             | sshaccess                                     |
| locked                               | False                                         |
| metadata                             | {}                                            |
| name                                 | testInstance                                  |
| os-extended-volumes:volumes_attached | []                                            |
| progress                             | 0                                             |
| security_groups                      | default                                       |
| status                               | BUILD                                         |
| tags                                 | []                                            |
| tenant_id                            | 745d33000ac74d30a77539f8920555e7              |
| updated                              | 2016-10-20T03:02:51Z                          |
| user_id                              | 8c4aea738d774967b4ef388eb41fef5e              |
+--------------------------------------+-----------------------------------------------+</pre></li></ol></div></section><section class="section" id="understand-trunk-states"><div class="titlepage"><div><div><h2 class="title">12.6. Understanding trunk states</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">ACTIVE</code>: The trunk is working as expected and there are no current requests.
						</li><li class="listitem">
							<code class="literal">DOWN</code>: The virtual and physical resources for the trunk are not in sync. This can be a temporary state during negotiation.
						</li><li class="listitem">
							<code class="literal">BUILD</code>: There has been a request and the resources are being provisioned. After successful completion the trunk returns to <code class="literal">ACTIVE</code>.
						</li><li class="listitem">
							<code class="literal">DEGRADED</code>: The provisioning request did not complete, so the trunk has only been partially provisioned. It is recommended to remove the subports and try again.
						</li><li class="listitem">
							<code class="literal">ERROR</code>: The provisioning request was unsuccessful. Remove the resource that caused the error to return the trunk to a healthier state. Do not add more subports while in the <code class="literal">ERROR</code> state, as this can cause more issues.
						</li></ul></div></section></section><section class="chapter" id="sec-rbac"><div class="titlepage"><div><div><h2 class="title">Chapter 13. Configuring RBAC policies</h2></div></div></div><section class="section" id="con_overview-rbac-policies"><div class="titlepage"><div><div><h2 class="title">13.1. Overview of RBAC policies</h2></div></div></div><p>
					Role-based access control (RBAC) policies in OpenStack Networking allow granular control over shared <span class="emphasis"><em>neutron</em></span> networks. OpenStack Networking uses a RBAC table to control sharing of <span class="emphasis"><em>neutron</em></span> networks among tenants, allowing an administrator to control which tenants are granted permission to attach instances to a network.
				</p><p>
					As a result, cloud administrators can remove the ability for some tenants to create networks and can instead allow them to attach to pre-existing networks that correspond to their project.
				</p></section><section class="section" id="proc_create-rbac-policies"><div class="titlepage"><div><div><h2 class="title">13.2. Creating RBAC policies</h2></div></div></div><p>
					This example procedure demonstrates how to use a role-based access control (RBAC) policy to grant a project access to a shared network.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							View the list of available networks:
						</p><pre class="screen"># openstack network list
+--------------------------------------+-------------+-------------------------------------------------------+
| id                                   | name        | subnets                                               |
+--------------------------------------+-------------+-------------------------------------------------------+
| fa9bb72f-b81a-4572-9c7f-7237e5fcabd3 | web-servers | 20512ffe-ad56-4bb4-b064-2cb18fecc923 192.168.200.0/24 |
| bcc16b34-e33e-445b-9fde-dd491817a48a | private     | 7fe4a05a-4b81-4a59-8c47-82c965b0e050 10.0.0.0/24      |
| 9b2f4feb-fee8-43da-bb99-032e4aaf3f85 | public      | 2318dc3b-cff0-43fc-9489-7d4cf48aaab9 172.24.4.224/28  |
+--------------------------------------+-------------+-------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							View the list of projects:
						</p><pre class="screen"># openstack project list
+----------------------------------+----------+
| ID                               | Name     |
+----------------------------------+----------+
| 4b0b98f8c6c040f38ba4f7146e8680f5 | auditors |
| 519e6344f82e4c079c8e2eabb690023b | services |
| 80bf5732752a41128e612fe615c886c6 | demo     |
| 98a2f53c20ce4d50a40dac4a38016c69 | admin    |
+----------------------------------+----------+</pre></li><li class="listitem"><p class="simpara">
							Create a RBAC entry for the <code class="literal">web-servers</code> network that grants access to the <span class="emphasis"><em>auditors</em></span> project (<code class="literal">4b0b98f8c6c040f38ba4f7146e8680f5</code>):
						</p><pre class="screen"># openstack network rbac create --type network --target-project 4b0b98f8c6c040f38ba4f7146e8680f5 --action access_as_shared web-servers
Created a new rbac_policy:
+----------------+--------------------------------------+
| Field          | Value                                |
+----------------+--------------------------------------+
| action         | access_as_shared                     |
| id             | 314004d0-2261-4d5e-bda7-0181fcf40709 |
| object_id      | fa9bb72f-b81a-4572-9c7f-7237e5fcabd3 |
| object_type    | network                              |
| target_project | 4b0b98f8c6c040f38ba4f7146e8680f5     |
| project_id     | 98a2f53c20ce4d50a40dac4a38016c69     |
+----------------+--------------------------------------+</pre></li></ol></div><p>
					As a result, users in the <span class="emphasis"><em>auditors</em></span> project can connect instances to the <code class="literal">web-servers</code> network.
				</p></section><section class="section" id="proc_review-rbac-polices"><div class="titlepage"><div><div><h2 class="title">13.3. Reviewing RBAC policies</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal">openstack network rbac list</code> command to retrieve the ID of your existing role-based access control (RBAC) policies:
						</p><pre class="screen"># openstack network rbac list
+--------------------------------------+-------------+--------------------------------------+
| id                                   | object_type | object_id                            |
+--------------------------------------+-------------+--------------------------------------+
| 314004d0-2261-4d5e-bda7-0181fcf40709 | network     | fa9bb72f-b81a-4572-9c7f-7237e5fcabd3 |
| bbab1cf9-edc5-47f9-aee3-a413bd582c0a | network     | 9b2f4feb-fee8-43da-bb99-032e4aaf3f85 |
+--------------------------------------+-------------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Run the <code class="literal">openstack network rbac-show</code> command to view the details of a specific RBAC entry:
						</p><pre class="screen"># openstack network rbac show 314004d0-2261-4d5e-bda7-0181fcf40709
+----------------+--------------------------------------+
| Field          | Value                                |
+----------------+--------------------------------------+
| action         | access_as_shared                     |
| id             | 314004d0-2261-4d5e-bda7-0181fcf40709 |
| object_id      | fa9bb72f-b81a-4572-9c7f-7237e5fcabd3 |
| object_type    | network                              |
| target_project | 4b0b98f8c6c040f38ba4f7146e8680f5     |
| project_id     | 98a2f53c20ce4d50a40dac4a38016c69     |
+----------------+--------------------------------------+</pre></li></ol></div></section><section class="section" id="proc_delete-rbac-polices"><div class="titlepage"><div><div><h2 class="title">13.4. Deleting RBAC policies</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal">openstack network rbac list</code> command to retrieve the ID of your existing role-based access control (RBAC) policies:
						</p><pre class="screen"># openstack network rbac list
+--------------------------------------+-------------+--------------------------------------+
| id                                   | object_type | object_id                            |
+--------------------------------------+-------------+--------------------------------------+
| 314004d0-2261-4d5e-bda7-0181fcf40709 | network     | fa9bb72f-b81a-4572-9c7f-7237e5fcabd3 |
| bbab1cf9-edc5-47f9-aee3-a413bd582c0a | network     | 9b2f4feb-fee8-43da-bb99-032e4aaf3f85 |
+--------------------------------------+-------------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Run the <code class="literal">openstack network rbac delete</code> command to delete the RBAC, using the ID of the RBAC that you want to delete:
						</p><pre class="screen"># openstack network rbac delete 314004d0-2261-4d5e-bda7-0181fcf40709
Deleted rbac_policy: 314004d0-2261-4d5e-bda7-0181fcf40709</pre></li></ol></div></section><section class="section" id="proc_rbac-grant-access-ext-networks"><div class="titlepage"><div><div><h2 class="title">13.5. Granting RBAC policy access for external networks</h2></div></div></div><p>
					You can grant role-based access control (RBAC) policy access to external networks (networks with gateway interfaces attached) using the <code class="literal">--action access_as_external</code> parameter.
				</p><p>
					Complete the steps in the following example procedure to create a RBAC for the web-servers network and grant access to the engineering project (c717f263785d4679b16a122516247deb):
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a new RBAC policy using the <code class="literal">--action access_as_external</code> option:
						</p><pre class="screen"># openstack network rbac create --type network --target-project c717f263785d4679b16a122516247deb --action access_as_external web-servers
 Created a new rbac_policy:
+----------------+--------------------------------------+
| Field          | Value                                |
+----------------+--------------------------------------+
| action         | access_as_external                   |
| id             | ddef112a-c092-4ac1-8914-c714a3d3ba08 |
| object_id      | 6e437ff0-d20f-4483-b627-c3749399bdca |
| object_type    | network                              |
| target_project | c717f263785d4679b16a122516247deb     |
| project_id     | c717f263785d4679b16a122516247deb     |
+----------------+--------------------------------------+</pre><p class="simpara">
							As a result, users in the engineering project are able to view the network or connect instances to it:
						</p><pre class="screen">$ openstack network list
+--------------------------------------+-------------+------------------------------------------------------+
| id                                   | name        | subnets                                              |
+--------------------------------------+-------------+------------------------------------------------------+
| 6e437ff0-d20f-4483-b627-c3749399bdca | web-servers | fa273245-1eff-4830-b40c-57eaeac9b904 192.168.10.0/24 |
+--------------------------------------+-------------+------------------------------------------------------+</pre></li></ul></div></section></section><section class="chapter" id="sec-dvr"><div class="titlepage"><div><div><h2 class="title">Chapter 14. Configuring distributed virtual routing (DVR)</h2></div></div></div><section class="section" id="understand-dvr"><div class="titlepage"><div><div><h2 class="title">14.1. Understanding distributed virtual routing (DVR)</h2></div></div></div><p>
					When you deploy Red Hat OpenStack Platform you can choose between a centralized routing model or DVR.
				</p><p>
					Each model has advantages and disadvantages. Use this document to carefully plan whether centralized routing or DVR better suits your needs.
				</p><p>
					DVR is enabled by default in new ML2/OVN deployments and disabled by default in new ML2/OVS deployments. The Heat template for the OpenStack Networking (neutron) API (<code class="literal">deployment/neutron/neutron-api-container-puppet.yaml</code>) contains a parameter to enable and disable Distributed Virtual Routing (DVR). To disable DVR, use the following in an environment file:
				</p><pre class="screen">parameter_defaults:
  NeutronEnableDVR: false</pre><section class="section" id="overview-l3-routing"><div class="titlepage"><div><div><h3 class="title">14.1.1. Overview of Layer 3 routing</h3></div></div></div><p>
						OpenStack Networking (neutron) provides routing services for project networks. Without a router, instances in a project network can communicate with other instances over a shared L2 broadcast domain. Creating a router and assigning it to a tenant network allows the instances in that network to communicate with other project networks or upstream (if an external gateway is defined for the router).
					</p></section><section class="section" id="routing-flows"><div class="titlepage"><div><div><h3 class="title">14.1.2. Routing flows</h3></div></div></div><p>
						Routing services in OpenStack can be categorized into three main flows:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>East-West routing</strong></span> - routing of traffic between different networks in the same tenant. This traffic does not leave the OpenStack deployment. This definition applies to both IPv4 and IPv6 subnets.
							</li><li class="listitem">
								<span class="strong strong"><strong>North-South routing with floating IPs</strong></span> - Floating IP addressing is a one-to-one NAT that can be modified and that floats between instances. While floating IPs are modeled as a one-to-one association between the floating IP and a neutron port, they are implemented by association with a neutron router that performs the NAT translation. The floating IPs themselves are taken from the uplink network that provides the router with external connectivity. As a result, instances can communicate with external resources (such as endpoints in the internet) or the other way around. Floating IPs are an IPv4 concept and do not apply to IPv6. It is assumed that the IPv6 addressing used by projects uses Global Unicast Addresses (GUAs) with no overlap across the projects, and therefore can be routed without NAT.
							</li><li class="listitem">
								<span class="strong strong"><strong>North-South routing without floating IPs</strong></span> (also known as <span class="emphasis"><em>SNAT</em></span>) - Neutron offers a default port address translation (PAT) service for instances that do not have allocated floating IPs. With this service, instances can communicate with external endpoints through the router, but not the other way around. For example, an instance can browse a website in the Internet, but a web browser outside cannot browse a website hosted within the instance. SNAT is applied for IPv4 traffic only. In addition, neutron project networks that are assigned GUAs prefixes do not require NAT on the neutron router external gateway port to access the outside world.
							</li></ul></div></section><section class="section" id="central-routing"><div class="titlepage"><div><div><h3 class="title">14.1.3. Centralized routing</h3></div></div></div><p>
						Originally, neutron was designed with a centralized routing model where a project’s virtual routers, managed by the neutron L3 agent, are all deployed in a dedicated node or cluster of nodes (referred to as the Network node, or Controller node). This means that each time a routing function is required (east/west, floating IPs or SNAT), traffic would traverse through a dedicated node in the topology. This introduced multiple challenges and resulted in sub-optimal traffic flows. For example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Traffic between instances flows through a Controller node - when two instances need to communicate with each other using L3, traffic has to hit the Controller node. Even if the instances are scheduled on the same Compute node, traffic still has to leave the Compute node, flow through the Controller, and route back to the Compute node. This negatively impacts performance.
							</li><li class="listitem">
								Instances with floating IPs receive and send packets through the Controller node - the external network gateway interface is available only at the Controller node, so whether the traffic is originating from an instance, or destined to an instance from the external network, it has to flow through the Controller node. Consequently, in large environments the Controller node is subject to heavy traffic load. This would affect performance and scalability, and also requires careful planning to accommodate enough bandwidth in the external network gateway interface. The same requirement applies for SNAT traffic.
							</li></ul></div><p>
						To better scale the L3 agent, neutron can use the L3 HA feature, which distributes the virtual routers across multiple nodes. In the event that a Controller node is lost, the HA router will failover to a standby on another node and there will be packet loss until the HA router failover completes.
					</p></section></section><section class="section" id="overview-dvr"><div class="titlepage"><div><div><h2 class="title">14.2. DVR overview</h2></div></div></div><p>
					Distributed Virtual Routing (DVR) offers an alternative routing design. DVR isolates the failure domain of the Controller node and optimizes network traffic by deploying the L3 agent and schedule routers on every Compute node. DVR has these characteristics:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							East-West traffic is routed directly on the Compute nodes in a distributed fashion.
						</li><li class="listitem">
							North-South traffic with floating IP is distributed and routed on the Compute nodes. This requires the external network to be connected to every Compute node.
						</li><li class="listitem">
							North-South traffic without floating IP is not distributed and still requires a dedicated Controller node.
						</li><li class="listitem">
							The L3 agent on the Controller node uses the <code class="literal">dvr_snat</code> mode so that the node serves only SNAT traffic.
						</li><li class="listitem">
							The neutron metadata agent is distributed and deployed on all Compute nodes. The metadata proxy service is hosted on all the distributed routers.
						</li></ul></div></section><section class="section" id="dvr-known-issues"><div class="titlepage"><div><div><h2 class="title">14.3. DVR known issues and caveats</h2></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For Red Hat OpenStack Platform 16.1, do not use DVR unless your kernel version is at least <code class="literal">kernel-3.10.0-514.1.1.el7</code>
					</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Support for DVR is limited to the ML2 core plug-in and the Open vSwitch (OVS) mechanism driver or ML2/OVN mechanism driver. Other back ends are not supported.
						</li><li class="listitem">
							On OVS DVR deployments, network traffic for the Red Hat OpenStack Platform Load-balancing service (octavia) goes through the Controller and network nodes, instead of the compute nodes.
						</li><li class="listitem">
							SNAT (source network address translation) traffic is not distributed, even when DVR is enabled. SNAT does work, but all ingress/egress traffic must traverse through the centralized Controller node.
						</li><li class="listitem">
							IPv6 traffic is not distributed, even when DVR is enabled. IPv6 routing does work, but all ingress/egress traffic must traverse through the centralized Controller node. If you use IPv6 routing extensively, do not use DVR.
						</li><li class="listitem">
							DVR is not supported in conjunction with L3 HA. If you use DVR with Red Hat OpenStack Platform 16.1 director, L3 HA is disabled. This means that routers are still scheduled on the Network nodes (and load-shared between the L3 agents), but if one agent fails, all routers hosted by this agent fail as well. This affects only SNAT traffic. The <code class="literal">allow_automatic_l3agent_failover</code> feature is recommended in such cases, so that if one network node fails, the routers are rescheduled to a different node.
						</li><li class="listitem">
							DHCP servers, which are managed by the neutron DHCP agent, are not distributed and are still deployed on the Controller node. The DHCP agent is deployed in a highly available configuration on the Controller nodes, regardless of the routing design (centralized or DVR).
						</li><li class="listitem">
							To work with floating IPs, each Compute node requires an interface on the <span class="emphasis"><em>External</em></span> network. In addition, each Compute node requires one additional IP address. This is due to the implementation of the external gateway port and the floating IP network namespace.
						</li><li class="listitem">
							VLAN, GRE, and VXLAN are all supported for project data separation. When you use GRE or VXLAN, you must enable the L2 Population feature. The Red Hat OpenStack Platform director enforces L2 Population during installation.
						</li></ul></div></section><section class="section" id="support-routing-archit"><div class="titlepage"><div><div><h2 class="title">14.4. Supported routing architectures</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Red Hat Enterprise Linux OpenStack Platform 8 through to Red Hat OpenStack Platform 15 for centralized, HA routing.
						</li><li class="listitem">
							Red Hat OpenStack Platform 12 or later with distributed routing.
						</li><li class="listitem">
							Upgrading from a Red Hat OpenStack Platform 8 or later deployment running centralized HA routing to Red Hat OpenStack Platform 10 or later with only distributed routing.
						</li></ul></div></section><section class="section" id="deploying-dvr"><div class="titlepage"><div><div><h2 class="title">14.5. Deploying DVR with ML2 OVS</h2></div></div></div><p>
					The <code class="literal">neutron-ovs-dvr.yaml</code> environment file contains the configuration for the required DVR-specific parameters. Configuring DVR for arbitrary deployment configuration requires additional consideration. The requirements are the following:
				</p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem">
							You must configure the interface connected to the physical network for external network traffic on both the Compute and Controller nodes.
						</li><li class="listitem">
							You must create a bridge on Compute and Controller nodes, with an interface for external network traffic.
						</li><li class="listitem">
							You must configure Neutron to allow X to use this bridge.
						</li></ol></div><p>
					The host networking configuration (A. and B.) are controlled by Heat templates that pass configuration to the Heat-managed nodes for consumption by the os-net-config process. This is essentially automation of provisioning host networking. You must also configure Neutron (C.) to match the provisioned networking environment. The defaults are not expected to work in production environments.
				</p><p>
					A proof-of-concept environment using the typical defaults might be similar to the following example:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify that the value for <code class="literal">OS::TripleO::Compute::Net::SoftwareConfig</code> in the <span class="emphasis"><em>environments/neutron-ovs-dvr.yaml</em></span> file is the same as the current <code class="literal">OS::TripleO::Controller::Net::SoftwareConfig</code> value.
						</p><p class="simpara">
							Normally, you can find this value in the network environment file that you use when deploying the overcloud, for example, <span class="emphasis"><em>environments/net-multiple-nics.yaml</em></span>. This value creates the appropriate external network bridge for the Compute node L3 agent.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If you customize the network configuration of the Compute node, it may be necessary to add the appropriate configuration to those files instead.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Include the <span class="emphasis"><em>environments/neutron-ovs-dvr.yaml</em></span> file in the deployment command when deploying the overcloud:
						</p><pre class="screen">$ openstack overcloud deploy --templates -e /usr/share/openstack-tripleo-heat-templates/environments/neutron-ovs-dvr.yaml</pre></li><li class="listitem"><p class="simpara">
							Verify that L3 HA is disabled.
						</p><p class="simpara">
							For production environments (or test environments that require special customization, for example, involving network isolation, dedicated NICs, among others) you can use the example environments as a guide. Ensure that the bridge mapping type parameters that the L2 agents use are correct, as well as any reference to external facing bridges for other agents,such as the L3 agent.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The external bridge configuration for the L3 agent, while currently still provided, is deprecated and will be removed in the future.
							</p></div></div></li></ol></div></section><section class="section" id="migrate-central-routers-distrib-routers"><div class="titlepage"><div><div><h2 class="title">14.6. Migrating centralized routers to distributed routing</h2></div></div></div><p>
					This section contains information about upgrading to distributed routing for Red Hat OpenStack Platform deployments that use L3 HA centralized routing.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Upgrade your deployment and validate that it is working correctly.
						</li><li class="listitem"><p class="simpara">
							Run the director stack update to configure DVR.
						</p><p class="simpara">
							For more information, see <a class="link" href="index%3F.html#deploying-dvr" title="14.5. Deploying DVR with ML2 OVS">Deploying DVR with ML2 OVS</a>.
						</p></li><li class="listitem">
							Confirm that routing functions correctly through the existing routers.
						</li><li class="listitem">
							You cannot transition a L3 HA router to <span class="emphasis"><em>distributed</em></span> directly. Instead, for each router, disable the L3 HA option, and then enable the distributed option:
						</li></ol></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							Disable the router:
						</p><pre class="screen">$ openstack router set --disable</pre></li><li class="listitem"><p class="simpara">
							Clear high availability:
						</p><pre class="screen">$ openstack router set --no-ha</pre></li><li class="listitem"><p class="simpara">
							Configure the router to use DVR:
						</p><pre class="screen">$ openstack router set --distributed</pre></li></ol></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							Enable the router:
						</p><pre class="screen">$ openstack router set --enable</pre></li><li class="listitem">
							Confirm that distributed routing functions correctly.
						</li></ol></div></section></section><section class="chapter" id="sec-octavia"><div class="titlepage"><div><div><h2 class="title">Chapter 15. Load Balancing-as-a-Service (LBaaS) with Octavia</h2></div></div></div><p>
				The OpenStack Load-balancing service (Octavia) provides a Load Balancing-as-a-Service (LBaaS) version 2 implementation for Red Hat OpenStack platform director installations. This section contains information about enabling Octavia and assumes that Octavia services are hosted on the same nodes as the Networking API server. By default, the load-balancing services are on the Controller nodes.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Red Hat does not support a migration path from Neutron-LBaaS to Octavia. However, there are some unsupported open source tools that are available. For more information, see <a class="link" href="https://github.com/nmagnezi/nlbaas2octavia-lb-replicator/tree/stable_1">https://github.com/nmagnezi/nlbaas2octavia-lb-replicator/tree/stable_1</a>.
				</p></div></div><section class="section" id="overview_of_octavia"><div class="titlepage"><div><div><h2 class="title">15.1. Overview of Octavia</h2></div></div></div><p>
					Octavia uses a set of instances on a Compute node called <span class="emphasis"><em>amphorae</em></span> and communicates with the amphorae over a load-balancing management network (<code class="literal">lb-mgmt-net</code>).
				</p><p>
					Octavia includes the following services:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">API Controller(<code class="literal">octavia_api container</code>)</span></dt><dd>
								Communicates with the controller worker for configuration updates and to deploy, monitor, or remove amphora instances.
							</dd><dt><span class="term">Controller Worker(<code class="literal">octavia_worker container</code>)</span></dt><dd>
								Sends configuration and configuration updates to amphorae over the LB network.
							</dd><dt><span class="term">Health Manager</span></dt><dd>
								Monitors the health of individual amphorae and handles failover events if amphorae fail unexpectedly.
							</dd></dl></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Health monitors of type <code class="literal">PING</code> only check if the member is reachable and responds to ICMP echo requests. <code class="literal">PING</code> does not detect if your application running on that instance is healthy or not. <code class="literal">PING</code> should only be used in specific cases where an ICMP echo request is a valid health check.
					</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Housekeeping Manager</span></dt><dd>
								Cleans up stale (deleted) database records, manages the spares pool, and manages amphora certificate rotation.
							</dd><dt><span class="term">Loadbalancer</span></dt><dd>
								The top API object that represents the load balancing entity. The VIP address is allocated when the loadbalancer is created. When creating the loadbalancer, an Amphora instance launches on the compute node.
							</dd><dt><span class="term">Amphora</span></dt><dd>
								The instance that performs the load balancing. Amphorae are typically instances running on Compute nodes and are configured with load balancing parameters according to the listener, pool, health monitor, L7 policies, and members configuration. Amphorae send a periodic heartbeat to the Health Manager.
							</dd><dt><span class="term">Listener</span></dt><dd>
								The listening endpoint,for example HTTP, of a load balanced service. A listener might refer to several pools and switch between pools using layer 7 rules.
							</dd><dt><span class="term">Pool</span></dt><dd>
								A group of members that handle client requests from the load balancer (amphora). A pool is associated with only one listener.
							</dd><dt><span class="term">Member</span></dt><dd>
								Compute instances that serve traffic behind the load balancer (amphora) in a pool.
							</dd></dl></div><p>
					The following diagram shows the flow of HTTPS traffic through to a pool member:
				</p><div class="informalfigure"><div class="mediaobject"><img src="OpenStack_Networking-Guide_471659_0518_LBaaS-Topology.png" alt="OpenStack Networking Guide 471659 0518 LBaaS Topology"/></div></div></section><section class="section" id="octavia-software-reqs"><div class="titlepage"><div><div><h2 class="title">15.2. Octavia software requirements</h2></div></div></div><p>
					Octavia requires that you configure the following core OpenStack components:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Compute (nova)
						</li><li class="listitem">
							Networking (enable <code class="literal">allowed_address_pairs</code>)
						</li><li class="listitem">
							Image (glance)
						</li><li class="listitem">
							Identity (keystone)
						</li><li class="listitem">
							RabbitMQ
						</li><li class="listitem">
							MySQL
						</li></ul></div></section><section class="section" id="octavia-prereqs-undercloud"><div class="titlepage"><div><div><h2 class="title">15.3. Prerequisites for the undercloud</h2></div></div></div><p>
					This section assumes that:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							your undercloud is already installed and ready to deploy an overcloud with Octavia enabled.
						</li><li class="listitem">
							only container deployments are supported.
						</li><li class="listitem">
							Octavia runs on your Controller node.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you want to enable the Octavia service on an existing overcloud deployment, you must prepare the undercloud. Failure to do so results in the overcloud installation being reported as successful yet without Octavia running. To prepare the undercloud, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/transitioning_to_containerized_services/">Transitioning to Containerized Services</a>.
					</p></div></div><section class="section" id="octavia-feature-support-matrix"><div class="titlepage"><div><div><h3 class="title">15.3.1. Octavia feature support matrix</h3></div></div></div><div class="table" id="idm139893195299952"><p class="title"><strong>Table 15.1. Octavia feature support matrix</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893195295104" scope="col">Feature</th><th align="left" valign="top" id="idm139893195294016" scope="col">Support level in RHOSP 16.1</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										ML2/OVS L3 HA
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										ML2/OVS DVR
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										ML2/OVS L3 HA + composable network node
									</p>
									 <p>
										[Network node with OVS, metadata, DHCP, L3 and Octavia (worker, health monitor, house keeping]
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										ML2/OVS DVR + composable network node
									</p>
									 <p>
										[Network node with OVS, metadata, DHCP, L3 and Octavia (worker, health monitor, house keeping]
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										ML2/OVN L3 HA
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										ML2/OVN DVR
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Amphora active-standby
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support—​16.1 and later
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Terminated HTTPS load balancers (with barbican)
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support—​16.0.1 and later
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Amphora spare pool
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										<a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview only</a>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										UDP
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support—​16.1 and later
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Backup members
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Technology Preview only
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Provider framework
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Technology Preview only
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										TLS client authentication
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Technology Preview only
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										TLS backend encryption
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Technology Preview only
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Octavia flavors
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Object tags - API only
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support 16.1 and later
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Listener API timeouts
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Log offloading
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Technology Preview only
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										VIP access control list
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										Full support
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139893195295104"> <p>
										Volume-based amphora
									</p>
									 </td><td align="left" valign="top" headers="idm139893195294016"> <p>
										No support
									</p>
									 </td></tr></tbody></table></div></div></section></section><section class="section" id="plan-octavia-deploy"><div class="titlepage"><div><div><h2 class="title">15.4. Planning your Octavia deployment</h2></div></div></div><p>
					Red Hat OpenStack Platform provides a workflow task to simplify the post-deployment steps for the Load-balancing service. This Octavia workflow runs a set of Ansible playbooks to provide the following post-deployment steps as the last phase of the overcloud deployment:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Configure certificates and keys.
						</li><li class="listitem">
							Configure the load-balancing management network between the amphorae and the Octavia Controller worker and health manager.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Do not modify the OpenStack heat templates directly. Create a custom environment file (for example, <code class="literal">octavia-environment.yaml</code>) to override default parameter values.
					</p></div></div><div class="formalpara"><p class="title"><strong>Amphora Image</strong></p><p>
						On pre-provisioned servers, you must install the amphora image on the undercloud before deploying octavia:
					</p></div><pre class="screen">$ sudo dnf install octavia-amphora-image-x86_64.noarch</pre><p>
					On servers that are not pre-provisioned, Red Hat OpenStack Platform director automatically downloads the default amphora image, uploads it to the overcloud Image service, and then configures Octavia to use this amphora image. During a stack update or upgrade, director updates this image to the latest amphora image.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Custom amphora images are not supported.
					</p></div></div><section class="section" id="config-octavia-certs-keys"><div class="titlepage"><div><div><h3 class="title">15.4.1. Configuring Octavia certificates and keys</h3></div></div></div><p>
						Octavia containers require secure communication with load balancers and with each other. You can specify your own certificates and keys or allow these to be automatically generated by Red Hat OpenStack Platform director. We recommend you allow director to automatically create the required private certificate authorities and issue the necessary certificates.
					</p><p>
						If you must use your own certificates and keys, complete the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								On the machine on which you run the <code class="literal">openstack overcloud deploy</code> command, create a custom YAML environment file.
							</p><pre class="screen">$ vi /home/stack/templates/octavia-environment.yaml</pre></li><li class="listitem"><p class="simpara">
								In the YAML environment file, add the following parameters with values appropriate for your site:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										<code class="literal">OctaviaCaCert</code>:
									</p><p class="simpara">
										The certificate for the CA Octavia will use to generate certificates.
									</p></li><li class="listitem"><p class="simpara">
										<code class="literal">OctaviaCaKey</code>:
									</p><p class="simpara">
										The private CA key used to sign the generated certificates.
									</p></li><li class="listitem"><p class="simpara">
										<code class="literal">OctaviaClientCert</code>:
									</p><p class="simpara">
										The client certificate and un-encrypted key issued by the Octavia CA for the controllers.
									</p></li><li class="listitem"><p class="simpara">
										<code class="literal">OctaviaCaKeyPassphrase</code>:
									</p><p class="simpara">
										The passphrase used with the private CA key above.
									</p></li><li class="listitem"><p class="simpara">
										<code class="literal">OctaviaGenerateCerts</code>:
									</p><p class="simpara">
										The Boolean that instructs director to enable (true) or disable (false) automatic certificate and key generation.
									</p><p class="simpara">
										Here is an example:
									</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											The certificates and keys are multi-line values, and you must indent all of the lines to the same level.
										</p></div></div><pre class="screen">parameter_defaults:
    OctaviaCaCert: |
      -----BEGIN CERTIFICATE-----
      MIIDgzCCAmugAwIBAgIJAKk46qw6ncJaMA0GCSqGSIb3DQEBCwUAMFgxCzAJBgNV
      [snip]
      sFW3S2roS4X0Af/kSSD8mlBBTFTCMBAj6rtLBKLaQbIxEpIzrgvp
      -----END CERTIFICATE-----

    OctaviaCaKey: |
      -----BEGIN RSA PRIVATE KEY-----
      Proc-Type: 4,ENCRYPTED
      [snip]
      -----END RSA PRIVATE KEY-----[

    OctaviaClientCert: |
      -----BEGIN CERTIFICATE-----
      MIIDmjCCAoKgAwIBAgIBATANBgkqhkiG9w0BAQsFADBcMQswCQYDVQQGEwJVUzEP
      [snip]
      270l5ILSnfejLxDH+vI=
      -----END CERTIFICATE-----
      -----BEGIN PRIVATE KEY-----
      MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDU771O8MTQV8RY
      [snip]
      KfrjE3UqTF+ZaaIQaz3yayXW
      -----END PRIVATE KEY-----

    OctaviaCaKeyPassphrase:
      b28c519a-5880-4e5e-89bf-c042fc75225d

    OctaviaGenerateCerts: false
    [rest of file snipped]</pre></li></ul></div></li></ol></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							If you use the default certificates that director generates, and if you set the <code class="literal">OctaviaGenerateCerts</code> parameter to <code class="literal">false</code>, then your certificates do not renew automatically when they expire.
						</p></div></div></section></section><section class="section" id="enable-amphora-active-standby-topo"><div class="titlepage"><div><div><h2 class="title">15.5. Enabling Amphora active-standby topology</h2></div></div></div><p>
					By default, the amphora provider driver is configured for a single amphora topology with limited support for high availability (HA). However, you are able to make amphora highly available when you implement an active-standby topology for amphora. In this topology, Octavia boots an active and standby amphora for each load balancer, and maintains session persistence between each. Should the active amphora become unhealthy, the amphora automatically fails over to the standby amphora making it active. The octavia health manager automatically rebuilds an amphora that has failed.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On the machine on which you run the openstack overcloud deploy command, create a custom YAML environment file.
						</p><pre class="screen">$ vi /home/stack/templates/octavia-environment.yaml</pre></li><li class="listitem"><p class="simpara">
							In the custom environment file, add the following parameter:
						</p><pre class="screen">parameter_defaults:
  OctaviaLoadBalancerTopology: "ACTIVE_STANDBY"</pre></li><li class="listitem">
							Run the RHOSP director command, <code class="literal">openstack overcloud deploy</code> and include all your current environment files and this custom new one.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							After the deployment is complete and you have created a load balancer, run the following command:
						</p><pre class="screen">$ openstack loadbalancer amphora list</pre><p class="simpara">
							If your amphora HA configuration is successful, you see output for two amphorae. One amphora has the <code class="literal">MASTER</code> role, and the other amphora has the <code class="literal">BACKUP</code> role.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/director_installation_and_usage/performing-basic-overcloud-administration-tasks#modifying-the-overcloud-environment">Modifying the overcloud environment</a> in the <span class="emphasis"><em>Director Installation and Usage</em></span> guide.
						</li></ul></div></section><section class="section" id="deploy-octavia"><div class="titlepage"><div><div><h2 class="title">15.6. Deploying Octavia</h2></div></div></div><p>
					You deploy Octavia using the Red Hat OpenStack Platform (RHOSP) director. Director uses heat templates to deploy Octavia (and other RHOSP components).
				</p><p>
					Ensure that your environment has access to the Octavia image. For more information about image registry methods, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/director_installation_and_usage/#sect-Containerization">Containerization</a> section of the <span class="emphasis"><em>Director Installation and Usage</em></span> guide.
				</p><p>
					To deploy Octavia in the overcloud:
				</p><pre class="screen">$ openstack overcloud deploy --templates -e \
/usr/share/openstack-tripleo-heat-templates/environments/services/octavia.yaml</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The director updates the amphora image to the latest amphora image during a stack update or upgrade.
					</p></div></div></section><section class="section" id="change-octavia-default-settings"><div class="titlepage"><div><div><h2 class="title">15.7. Changing Octavia default settings</h2></div></div></div><p>
					If you want to override the default parameters that director uses to deploy Octavia, you can specify your values in one or more custom, YAML-formatted environment files (for example, <code class="literal">octavia-environment.yaml</code>).
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						As a best practice, always make Octavia configuration changes to the appropriate Heat templates and re-run Red Hat OpenStack Platform director. You risk losing ad hoc configuration changes when you manually change individual files and do not use director.
					</p></div></div><p>
					The parameters that director uses to deploy and configure Octavia are pretty straightforward. Here are a few examples:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">OctaviaControlNetwork</code>
						</p><p class="simpara">
							The name for the neutron network used for the amphora control network.
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">OctaviaControlSubnetCidr</code>
						</p><p class="simpara">
							The subnet for amphora control subnet in CIDR form.
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">OctaviaMgmtPortDevName</code>
						</p><p class="simpara">
							The name of the Octavia management network interface used for communication between octavia worker/health-manager with the amphora machine.
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">OctaviaConnectionLogging</code>
						</p><p class="simpara">
							A Boolean that enables (true) and disables connection flow logging in load-balancing instances (amphorae). As the amphorae have log rotation on, logs are unlikely to fill up disks. When disabled, performance is marginally impacted.
						</p></li></ul></div><p>
					For the list of Octavia parameters that director uses, consult the following file on the undercloud:
				</p><pre class="screen">/usr/share/openstack-tripleo-heat-templates/deployment/octavia/octavia-deployment-config.j2.yaml</pre><p>
					Your environment file must contain the keywords <code class="literal">parameter_defaults:</code>. Put your parameter value pairs after the <code class="literal">parameter_defaults:</code> keyword. Here is an example:
				</p><pre class="screen">parameter_defaults:
    OctaviaMgmtPortDevName: "o-hm0"
    OctaviaControlNetwork: 'lb-mgmt-net'
    OctaviaControlSubnet: 'lb-mgmt-subnet'
    OctaviaControlSecurityGroup: 'lb-mgmt-sec-group'
    OctaviaControlSubnetCidr: '172.24.0.0/16'
    OctaviaControlSubnetGateway: '172.24.0.1'
    OctaviaControlSubnetPoolStart: '172.24.0.2'
    OctaviaControlSubnetPoolEnd: '172.24.255.254'</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					YAML files are extremely sensitive about where in the file a parameter is placed. Make sure that <code class="literal">parameter_defaults:</code> starts in the first column (no leading whitespace characters), and your parameter value pairs start in column five (each parameter has four whitespace characters in front of it).
				</p></div></div></section><section class="section" id="secure_a_load_balancer_with_an_access_control_list"><div class="titlepage"><div><div><h2 class="title">15.8. Secure a load balancer with an access control list</h2></div></div></div><p>
					You can use the Octavia API to create an access control list (ACL) to limit incoming traffic to a listener to a set of allowed source IP addresses. Any other incoming traffic is rejected.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						This document uses the following assumptions for demonstrating how to secure an Octavia load balancer:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The back-end servers, 192.0.2.10 and 192.0.2.11, are on subnet named <code class="literal">private-subnet</code>, and have been configured with a custom application on TCP port 80.
						</li><li class="listitem">
							The subnet, <code class="literal">public-subnet</code>, is a shared external subnet created by the cloud operator that is reachable from the internet.
						</li><li class="listitem">
							The load balancer is a basic load balancer that is accessible from the internet and distributes requests to the back-end servers.
						</li><li class="listitem">
							The application on TCP port 80 is accessible to limited-source IP addresses (192.0.2.0/24 and 198.51.100/24).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a load balancer (<code class="literal">lb1</code>) on the subnet (<code class="literal">public-subnet</code>):
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Replace the names in parentheses () with names that your site uses.
							</p></div></div><pre class="screen">$ openstack loadbalancer create --name lb1 --vip-subnet-id public-subnet</pre></li><li class="listitem"><p class="simpara">
							Re-run the following command until the load balancer (<code class="literal">lb1</code>) shows a status that is <code class="literal">ACTIVE</code> and <code class="literal">ONLINE</code>:
						</p><pre class="screen">$ openstack loadbalancer show lb1</pre></li><li class="listitem"><p class="simpara">
							Create listener (<code class="literal">listener1</code>) with the allowed CIDRs:
						</p><pre class="screen">$ openstack loadbalancer listener create --name listener1 --protocol TCP --protocol-port 80 --allowed-cidr 192.0.2.0/24 --allowed-cidr 198.51.100/24 lb1</pre></li><li class="listitem"><p class="simpara">
							Create the default pool (<code class="literal">pool1</code>) for the listener (<code class="literal">listener1</code>):
						</p><pre class="screen">$ openstack loadbalancer pool create --name pool1 --lb-algorithm ROUND_ROBIN --listener listener1 --protocol TCP</pre></li><li class="listitem"><p class="simpara">
							Add members 192.0.2.10 and 192.0.2.11 on the subnet (<code class="literal">private-subnet</code>) to the pool (<code class="literal">pool1</code>) that you created:
						</p><pre class="screen">$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.10 --protocol-port 80 pool1

$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.11 --protocol-port 80 pool1</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enter the following command:
						</p><pre class="screen">$ openstack loadbalancer listener show listener1</pre><p class="simpara">
							You should see output similar to the following:
						</p><pre class="screen">+-----------------------------+--------------------------------------+
| Field                       | Value                                |
+-----------------------------+--------------------------------------+
| admin_state_up              | True                                 |
| connection_limit            | -1                                   |
| created_at                  | 2019-12-09T11:38:05                  |
| default_pool_id             | None                                 |
| default_tls_container_ref   | None                                 |
| description                 |                                      |
| id                          | d26ba156-03c3-4051-86e8-f8997a202d8e |
| insert_headers              | None                                 |
| l7policies                  |                                      |
| loadbalancers               | 2281487a-54b9-4c2a-8d95-37262ec679d6 |
| name                        | listener1                            |
| operating_status            | ONLINE                               |
| project_id                  | 308ca9f600064f2a8b3be2d57227ef8f     |
| protocol                    | TCP                                  |
| protocol_port               | 80                                   |
| provisioning_status         | ACTIVE                               |
| sni_container_refs          | []                                   |
| timeout_client_data         | 50000                                |
| timeout_member_connect      | 5000                                 |
| timeout_member_data         | 50000                                |
| timeout_tcp_inspect         | 0                                    |
| updated_at                  | 2019-12-09T11:38:14                  |
| client_ca_tls_container_ref | None                                 |
| client_authentication       | NONE                                 |
| client_crl_container_ref    | None                                 |
| allowed_cidrs               | 192.0.2.0/24                         |
|                             | 198.51.100/24                        |
+-----------------------------+--------------------------------------+</pre><p class="simpara">
							The parameter, <code class="literal">allowed_cidrs</code>, is set to allow traffic only from 192.0.2.0/24 and 198.51.100/24.
						</p></li><li class="listitem"><p class="simpara">
							To verify that the load balancer is secure, try to make a request to the listener from a client whose CIDR is not in the <code class="literal">allowed_cidrs</code> list; the request should not succeed. You should see output similar to the following:
						</p><pre class="screen">curl: (7) Failed to connect to 10.0.0.226 port 80: Connection timed out
curl: (7) Failed to connect to 10.0.0.226 port 80: Connection timed out
curl: (7) Failed to connect to 10.0.0.226 port 80: Connection timed out
curl: (7) Failed to connect to 10.0.0.226 port 80: Connection timed out</pre></li></ol></div></section><section class="section" id="config-http-load-balancer"><div class="titlepage"><div><div><h2 class="title">15.9. Configuring an HTTP load balancer</h2></div></div></div><p>
					To configure a simple HTTP load balancer, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the load balancer on a subnet:
						</p><pre class="screen">$ openstack loadbalancer create --name lb1 --vip-subnet-id private-subnet</pre></li><li class="listitem"><p class="simpara">
							Monitor the state of the load balancer:
						</p><pre class="screen">$ openstack loadbalancer show lb1</pre><p class="simpara">
							When you see a status of <span class="emphasis"><em>Active</em></span> and <span class="emphasis"><em>ONLINE</em></span>, the load balancer is created and running and you can go to the next step.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								To check load balancer status from the Compute service (nova), use the <code class="literal">openstack server list --all | grep amphora</code> command. Creating load balancers can be a slow process (status displaying as <span class="emphasis"><em>PENDING</em></span>) because load balancers are virtual machines (VMs) and not containers.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Create a listener:
						</p><pre class="screen">$ openstack loadbalancer listener create --name listener1 --protocol HTTP --protocol-port 80 lb1</pre></li><li class="listitem"><p class="simpara">
							Create the listener default pool:
						</p><pre class="screen">$ openstack loadbalancer pool create --name pool1 --lb-algorithm ROUND_ROBIN --listener listener1 --protocol HTTP</pre></li><li class="listitem"><p class="simpara">
							Create a health monitor on the pool to test the “/healthcheck” path:
						</p><pre class="screen">$ openstack loadbalancer healthmonitor create --delay 5 --max-retries 4 --timeout 10 --type HTTP --url-path /healthcheck pool1</pre></li><li class="listitem"><p class="simpara">
							Add load balancer members to the pool:
						</p><pre class="screen">$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.10 --protocol-port 80 pool1
$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.11 --protocol-port 80 pool1</pre></li><li class="listitem"><p class="simpara">
							Create a floating IP address on a public subnet:
						</p><pre class="screen">$ openstack floating ip create public</pre></li><li class="listitem"><p class="simpara">
							Associate this floating IP with the load balancer VIP port:
						</p><pre class="screen">$ openstack floating ip set --port `_LOAD_BALANCER_VIP_PORT_` `_FLOATING_IP_`</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							To locate <span class="emphasis"><em>LOAD_BALANCER_VIP_PORT</em></span>, run the <code class="literal">openstack loadbalancer show lb1</code> command.
						</p></div></div></li></ol></div></section><section class="section" id="verify-load-balancer"><div class="titlepage"><div><div><h2 class="title">15.10. Verifying the load balancer</h2></div></div></div><p>
					To verify the load balancer, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal">openstack loadbalancer show</code> command to verify the load balancer settings:
						</p><pre class="screen">(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer show lb1
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| admin_state_up      | True                                 |
| created_at          | 2018-04-18T12:28:34                  |
| description         |                                      |
| flavor              |                                      |
| id                  | 788fe121-3dec-4e1b-8360-4020642238b0 |
| listeners           | 09f28053-fde8-4c78-88b9-0f191d84120e |
| name                | lb1                                  |
| operating_status    | ONLINE                               |
| pools               | 627842b3-eed8-4f5f-9f4a-01a738e64d6a |
| project_id          | dda678ca5b1241e7ad7bf7eb211a2fd7     |
| provider            | octavia                              |
| provisioning_status | ACTIVE                               |
| updated_at          | 2018-04-18T14:03:09                  |
| vip_address         | 192.168.0.11                         |
| vip_network_id      | 9bca13be-f18d-49a5-a83d-9d487827fd16 |
| vip_port_id         | 69a85edd-5b1c-458f-96f2-b4552b15b8e6 |
| vip_qos_policy_id   | None                                 |
| vip_subnet_id       | 5bd7334b-49b3-4849-b3a2-b0b83852dba1 |
+---------------------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Run the <code class="literal">amphora list</code> command to find the UUID of the amphora associated with load balancer lb1:
						</p><pre class="screen">(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer amphora list | grep &lt;UUID of loadbalancer lb1&gt;</pre></li><li class="listitem"><p class="simpara">
							Run the <code class="literal">amphora show</code> command with the amphora UUID to view amphora information:
						</p><pre class="screen">(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer amphora show 62e41d30-1484-4e50-851c-7ab6e16b88d0
+-----------------+--------------------------------------+
| Field           | Value                                |
+-----------------+--------------------------------------+
| id              | 62e41d30-1484-4e50-851c-7ab6e16b88d0 |
| loadbalancer_id | 53a497b3-267d-4abc-968f-94237829f78f |
| compute_id      | 364efdb9-679c-4af4-a80c-bfcb74fc0563 |
| lb_network_ip   | 192.168.0.13                         |
| vrrp_ip         | 10.0.0.11                            |
| ha_ip           | 10.0.0.10                            |
| vrrp_port_id    | 74a5c1b4-a414-46b8-9263-6328d34994d4 |
| ha_port_id      | 3223e987-5dd6-4ec8-9fb8-ee34e63eef3c |
| cert_expiration | 2020-07-16T12:26:07                  |
| cert_busy       | False                                |
| role            | BACKUP                               |
| status          | ALLOCATED                            |
| vrrp_interface  | eth1                                 |
| vrrp_id         | 1                                    |
| vrrp_priority   | 90                                   |
| cached_zone     | nova                                 |
| created_at      | 2018-07-17T12:26:07                  |
| updated_at      | 2018-07-17T12:30:36                  |
| image_id        | a3f9f3e4-92b6-4a27-91c8-ddc69714da8f |
+-----------------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Run the <code class="literal">openstack loadbalancer listener show</code> command to view the listener details:
						</p><pre class="screen">(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer listener show listener1
<code class="literal">---------------------------</code>------------------------------------------------------------------------+
| Field                     | Value                                                                  |
<code class="literal">---------------------------</code>------------------------------------------------------------------------+
| admin_state_up            | True                                                                   |
| connection_limit          | -1                                                                     |
| created_at                | 2018-04-18T12:51:25                                                    |
| default_pool_id           | 627842b3-eed8-4f5f-9f4a-01a738e64d6a                                   |
| default_tls_container_ref | http://10.0.0.101:9311/v1/secrets/7eafeabb-b4a1-4bc4-8098-b6281736bfe2 |
| description               |                                                                        |
| id                        | 09f28053-fde8-4c78-88b9-0f191d84120e                                   |
| insert_headers            | None                                                                   |
| l7policies                |                                                                        |
| loadbalancers             | 788fe121-3dec-4e1b-8360-4020642238b0                                   |
| name                      | listener1                                                              |
| operating_status          | ONLINE                                                                 |
| project_id                | dda678ca5b1241e7ad7bf7eb211a2fd7                                       |
| protocol                  | TERMINATED_HTTPS                                                       |
| protocol_port             | 443                                                                    |
| provisioning_status       | ACTIVE                                                                 |
| sni_container_refs        | []                                                                     |
| updated_at                | 2018-04-18T14:03:09                                                    |
<code class="literal">---------------------------</code>------------------------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Run the <code class="literal">openstack loadbalancer pool show</code> command to view the pool and load-balancer members:
						</p><pre class="screen">(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer pool show pool1
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| admin_state_up      | True                                 |
| created_at          | 2018-04-18T12:53:49                  |
| description         |                                      |
| healthmonitor_id    |                                      |
| id                  | 627842b3-eed8-4f5f-9f4a-01a738e64d6a |
| lb_algorithm        | ROUND_ROBIN                          |
| listeners           | 09f28053-fde8-4c78-88b9-0f191d84120e |
| loadbalancers       | 788fe121-3dec-4e1b-8360-4020642238b0 |
| members             | b85c807e-4d7c-4cbd-b725-5e8afddf80d2 |
|                     | 40db746d-063e-4620-96ee-943dcd351b37 |
| name                | pool1                                |
| operating_status    | ONLINE                               |
| project_id          | dda678ca5b1241e7ad7bf7eb211a2fd7     |
| protocol            | HTTP                                 |
| provisioning_status | ACTIVE                               |
| session_persistence | None                                 |
| updated_at          | 2018-04-18T14:03:09                  |
+---------------------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							If a health monitor is present, you can check the status of each member.
						</p><p class="simpara">
							A working member should have an <code class="literal">ONLINE</code> value for its <code class="literal">operating_status</code>.
						</p><pre class="screen">(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer member show &lt;member UUID&gt;
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| address             | 192.168.0.32                         |
| admin_state_up      | True                                 |
| created_at          | 2018-04-18T14:03:09                  |
| id                  | &lt;member UUID&gt;                        |
| name                |                                      |
| operating_status    | ONLINE                               |
| project_id          | dda678ca5b1241e7ad7bf7eb211a2fd7     |
| protocol_port       | 80                                   |
| provisioning_status | ACTIVE                               |
| subnet_id           | 5bd7334b-49b3-4849-b3a2-b0b83852dba1 |
| updated_at          | 2018-04-18T14:03:09                  |
| weight              | 1                                    |
| monitor_port        | None                                 |
| monitor_address     | None                                 |
| backup              | False                                |
+---------------------+--------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Run the <code class="literal">openstack floating ip list</code> command to verify the floating IP address:
						</p><pre class="screen">(overcloud) [stack@undercloud-0 ~]$ openstack floating ip list
<code class="literal">--------------------------------------</code>---------------------<code class="literal">------------------</code>--------------------------------------<code class="literal">--------------------------------------</code>----------------------------------+
| ID                                   | Floating IP Address | Fixed IP Address | Port                                 | Floating Network                     | Project                          |
<code class="literal">--------------------------------------</code>---------------------<code class="literal">------------------</code>--------------------------------------<code class="literal">--------------------------------------</code>----------------------------------+
| 89661971-fa65-4fa6-b639-563967a383e7 | 10.0.0.213          | 192.168.0.11     | 69a85edd-5b1c-458f-96f2-b4552b15b8e6 | fe0f3854-fcdc-4433-bc57-3e4568e4d944 | dda678ca5b1241e7ad7bf7eb211a2fd7 |
<code class="literal">--------------------------------------</code>---------------------<code class="literal">------------------</code>--------------------------------------<code class="literal">--------------------------------------</code>----------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Verify HTTPS traffic flows across the load balancer:
						</p><pre class="screen">(overcloud) [stack@undercloud-0 ~]$ curl -v https://10.0.0.213 --insecure
* About to connect() to 10.0.0.213 port 443 (#0)
*   Trying 10.0.0.213...
* Connected to 10.0.0.213 (10.0.0.213) port 443 (#0)
* Initializing NSS with certpath: sql:/etc/pki/nssdb
* skipping SSL peer certificate verification
* SSL connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
* Server certificate:
* 	subject: CN=www.example.com,O=Dis,L=Springfield,ST=Denial,C=US
* 	start date: Apr 18 09:21:45 2018 GMT
* 	expire date: Apr 18 09:21:45 2019 GMT
* 	common name: www.example.com
* 	issuer: CN=www.example.com,O=Dis,L=Springfield,ST=Denial,C=US
&gt; GET / HTTP/1.1
&gt; User-Agent: curl/7.29.0
&gt; Host: 10.0.0.213
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Content-Length: 30
&lt;
* Connection #0 to host 10.0.0.213 left intact</pre></li></ol></div></section><section class="section" id="overview-tls-term-https-lb"><div class="titlepage"><div><div><h2 class="title">15.11. Overview of TLS-terminated HTTPS load balancer</h2></div></div></div><p>
					When a TLS-terminated HTTPS load balancer is implemented, web clients communicate with the load balancer over Transport Layer Security (TLS) protocols. The load balancer terminates the TLS session and forwards the decrypted requests to the back end servers.
				</p><p>
					By terminating the TLS session on the load balancer, we offload the CPU-intensive encryption operations to the load balancer, and allows the load balancer to use advanced features such as Layer 7 inspection.
				</p></section><section class="section" id="create-tls-term-https-lb"><div class="titlepage"><div><div><h2 class="title">15.12. Creating a TLS-terminated HTTPS load balancer</h2></div></div></div><p>
					This procedure describes how to configure a TLS-terminated HTTPS load balancer that is accessible from the internet through Transport Layer Security (TLS) and distributes requests to the back end servers over the non-encrypted HTTP protocol.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A private subnet that contains back end servers that host non-secure HTTP applications on TCP port 80.
						</li><li class="listitem">
							A shared external (public) subnet that is reachable from the internet.
						</li><li class="listitem"><p class="simpara">
							TLS public-key cryptography has been configured with the following characteristics:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									A TLS certificate, key, and intermediate certificate chain have been obtained from an external certificate authority (CA) for the DNS name assigned to the load balancer VIP address (for example, www.example.com).
								</li><li class="listitem">
									The certificate, key, and intermediate certificate chain reside in separate files in the current directory.
								</li><li class="listitem">
									The key and certificate are PEM-encoded.
								</li><li class="listitem">
									The key is not encrypted with a passphrase.
								</li><li class="listitem">
									The intermediate certificate chain is contains multiple certificates that are PEM-encoded and concatenated together.
								</li></ul></div></li><li class="listitem">
							You must configure the Load-balancing service (octavia) to use the Key Manager service (barbican). For more information, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/manage_secrets_with_openstack_key_manager/index">Manage Secrets with OpenStack Key Manager guide</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Combine the key (<code class="literal">server.key</code>), certificate (<code class="literal">server.crt</code>), and intermediate certificate chain (<code class="literal">ca-chain.crt</code>) into a single PKCS12 file (<code class="literal">server.p12</code>).
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The values in parentheses are provided as examples. Replace these with values appropriate for your site.
							</p></div></div><pre class="screen">$ openssl pkcs12 -export -inkey server.key -in server.crt -certfile ca-chain.crt -passout pass: -out server.p12</pre></li><li class="listitem"><p class="simpara">
							Using the Key Manager service, create a secret resource (<code class="literal">tls_secret1</code>) for the PKCS12 file.
						</p><pre class="screen">$ openstack secret store --name='tls_secret1' -t 'application/octet-stream' -e 'base64' --payload="$(base64 &lt; server.p12)"</pre></li><li class="listitem"><p class="simpara">
							Create a load balancer (<code class="literal">lb1</code>) on the public subnet (<code class="literal">public-subnet</code>).
						</p><pre class="screen">$ openstack loadbalancer create --name lb1 --vip-subnet-id public-subnet</pre></li><li class="listitem"><p class="simpara">
							Before you can proceed, the load balancer that you created (<code class="literal">lb1</code>) must be in an active and online state.
						</p><p class="simpara">
							Run the <code class="literal">openstack loadbalancer show</code> command, until the load balancer responds with an <code class="literal">ACTIVE</code> and <code class="literal">ONLINE</code> status. (You might need to run this command more than once.)
						</p><pre class="screen">$ openstack loadbalancer show lb1</pre></li><li class="listitem"><p class="simpara">
							Create a TERMINATED_HTTPS listener (<code class="literal">listener1</code>), and reference the secret resource as the default TLS container for the listener.
						</p><pre class="screen">$ openstack loadbalancer listener create --protocol-port 443 --protocol TERMINATED_HTTPS --name listener1 --default-tls-container=$(openstack secret list | awk '/ tls_secret1 / {print $2}') lb1</pre></li><li class="listitem"><p class="simpara">
							Create a pool (<code class="literal">pool1</code>) and make it the default pool for the listener.
						</p><pre class="screen">$ openstack loadbalancer pool create --name pool1 --lb-algorithm ROUND_ROBIN --listener listener1 --protocol HTTP</pre></li><li class="listitem"><p class="simpara">
							Add the non-secure HTTP back end servers (<code class="literal">192.0.2.10</code> and <code class="literal">192.0.2.11</code>) on the private subnet (<code class="literal">private-subnet</code>) to the pool.
						</p><pre class="screen">$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.10 --protocol-port 80 pool1
$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.11 --protocol-port 80 pool1</pre></li></ol></div></section><section class="section" id="create-tls-term-https-lb-sni"><div class="titlepage"><div><div><h2 class="title">15.13. Creating a TLS-terminated HTTPS load balancer with SNI</h2></div></div></div><p>
					This procedure describes how to configure a TLS-terminated HTTPS load balancer that is accessible from the internet through Transport Layer Security (TLS) and distributes requests to the back end servers over the non-encrypted HTTP protocol. In this configuration, there is one listener that contains multiple TLS certificates and implements Server Name Indication (SNI) technology.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A private subnet that contains back end servers that host non-secure HTTP applications on TCP port 80.
						</li><li class="listitem">
							A shared external (public) subnet that is reachable from the internet.
						</li><li class="listitem"><p class="simpara">
							TLS public-key cryptography has been configured with the following characteristics:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Multiple TLS certificates, keys, and intermediate certificate chains have been obtained from an external certificate authority (CA) for the DNS names assigned to the load balancer VIP address (for example, www.example.com and www2.example.com).
								</li><li class="listitem">
									The certificates, keys, and intermediate certificate chains reside in separate files in the current directory.
								</li><li class="listitem">
									The keys and certificates are PEM-encoded.
								</li><li class="listitem">
									The keys are not encrypted with passphrases.
								</li><li class="listitem">
									The intermediate certificate chains contain multiple certificates that are PEM-encoded and are concatenated together.
								</li></ul></div></li><li class="listitem">
							You must configure the Load-balancing service (octavia) to use the Key Manager service (barbican). For more information, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/manage_secrets_with_openstack_key_manager/index">Manage Secrets with OpenStack Key Manager guide</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							For each of the TLS certificates in the SNI list, combine the key (<code class="literal">server.key</code>), certificate (<code class="literal">server.crt</code>), and intermediate certificate chain (<code class="literal">ca-chain.crt</code>) into a single PKCS12 file (<code class="literal">server.p12</code>).
						</p><p class="simpara">
							In this example, you create two PKCS12 files (<code class="literal">server.p12</code> and <code class="literal">server2.p12</code>) one for each certificate (<code class="literal">www.example.com</code> and <code class="literal">www2.example.com</code>).
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The values in parentheses are provided as examples. Replace these with values appropriate for your site.
							</p></div></div><pre class="screen">$ openssl pkcs12 -export -inkey server.key -in server.crt -certfile ca-chain.crt -passout pass: -out server.p12

$ openssl pkcs12 -export -inkey server2.key -in server2.crt -certfile ca-chain2.crt -passout pass: -out server2.p12</pre></li><li class="listitem"><p class="simpara">
							Using the Key Manager service, create secret resources (<code class="literal">tls_secret1</code> and <code class="literal">tls_secret2</code>) for the PKCS12 file.
						</p><pre class="screen">$ openstack secret store --name='tls_secret1' -t 'application/octet-stream' -e 'base64' --payload="$(base64 &lt; server.p12)"
$ openstack secret store --name='tls_secret2' -t 'application/octet-stream' -e 'base64' --payload="$(base64 &lt; server2.p12)"</pre></li><li class="listitem"><p class="simpara">
							Create a load balancer (<code class="literal">lb1</code>) on the public subnet (<code class="literal">public-subnet</code>).
						</p><pre class="screen">$ openstack loadbalancer create --name lb1 --vip-subnet-id public-subnet</pre></li><li class="listitem"><p class="simpara">
							Before you can proceed, the load balancer that you created (<code class="literal">lb1</code>) must be in an active and online state.
						</p><p class="simpara">
							Run the <code class="literal">openstack loadbalancer show</code> command, until the load balancer responds with an <code class="literal">ACTIVE</code> and <code class="literal">ONLINE</code> status. (You might need to run this command more than once.)
						</p><pre class="screen">$ openstack loadbalancer show lb1</pre></li><li class="listitem"><p class="simpara">
							Create a TERMINATED_HTTPS listener (<code class="literal">listener1</code>), and reference both the secret resources using SNI.
						</p><p class="simpara">
							(Reference <code class="literal">tls_secret1</code> as the default TLS container for the listener.)
						</p><pre class="screen">$ openstack loadbalancer listener create --protocol-port 443 \
--protocol TERMINATED_HTTPS --name listener1 \
--default-tls-container=$(openstack secret list | awk '/ tls_secret1 / {print $2}') \
--sni-container-refs $(openstack secret list | awk '/ tls_secret1 / {print $2}') \
$(openstack secret list | awk '/ tls_secret2 / {print $2}') -- lb1</pre></li><li class="listitem"><p class="simpara">
							Create a pool (<code class="literal">pool1</code>) and make it the default pool for the listener.
						</p><pre class="screen">$ openstack loadbalancer pool create --name pool1 --lb-algorithm ROUND_ROBIN --listener listener1 --protocol HTTP</pre></li><li class="listitem"><p class="simpara">
							Add the non-secure HTTP back end servers (<code class="literal">192.0.2.10</code> and <code class="literal">192.0.2.11</code>) on the private subnet (<code class="literal">private-subnet</code>) to the pool.
						</p><pre class="screen">$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.10 --protocol-port 80 pool1
$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.11 --protocol-port 80 pool1</pre></li></ol></div></section><section class="section" id="create-tls-term-https-lb-same-backend"><div class="titlepage"><div><div><h2 class="title">15.14. Creating HTTP and TLS-terminated HTTPS load balancers on the same back end</h2></div></div></div><p>
					This procedure describes how to configure a non-secure listener and a TLS-terminated HTTPS listener on the same load balancer (and same IP address). You would use this configuration when you want to respond to web clients with the exact same content, regardless if the client is connected with secure or non-secure HTTP protocol.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A private subnet that contains back end servers that host non-secure HTTP applications on TCP port 80.
						</li><li class="listitem">
							A shared external (public) subnet that is reachable from the internet.
						</li><li class="listitem"><p class="simpara">
							TLS public-key cryptography has been configured with the following characteristics:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									A TLS certificate, key, and optional intermediate certificate chain have been obtained from an external certificate authority (CA) for the DNS name assigned to the load balancer VIP address (for example, www.example.com).
								</li><li class="listitem">
									The certificate, key, and intermediate certificate chain reside in separate files in the current directory.
								</li><li class="listitem">
									The key and certificate are PEM-encoded.
								</li><li class="listitem">
									The key is not encrypted with a passphrase.
								</li><li class="listitem">
									The intermediate certificate chain is contains multiple certificates that are PEM-encoded and concatenated together.
								</li></ul></div></li><li class="listitem">
							You must configure the Load-balancing service (octavia) to use the Key Manager service (barbican). For more information, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/manage_secrets_with_openstack_key_manager/index">Manage Secrets with OpenStack Key Manager guide</a>.
						</li><li class="listitem">
							The non-secure HTTP listener is configured with the same pool as the HTTPS TLS-terminated load balancer.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Combine the key (<code class="literal">server.key</code>), certificate (<code class="literal">server.crt</code>), and intermediate certificate chain (<code class="literal">ca-chain.crt</code>) into a single PKCS12 file (<code class="literal">server.p12</code>).
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The values in parentheses are provided as examples. Replace these with values appropriate for your site.
							</p></div></div><pre class="screen">$ openssl pkcs12 -export -inkey server.key -in server.crt -certfile ca-chain.crt -passout pass: -out server.p12</pre></li><li class="listitem"><p class="simpara">
							Using the Key Manager service, create a secret resource (<code class="literal">tls_secret1</code>) for the PKCS12 file.
						</p><pre class="screen">$ openstack secret store --name='tls_secret1' -t 'application/octet-stream' -e 'base64' --payload="$(base64 &lt; server.p12)"</pre></li><li class="listitem"><p class="simpara">
							Create a load balancer (<code class="literal">lb1</code>) on the public subnet (<code class="literal">public-subnet</code>).
						</p><pre class="screen">$ openstack loadbalancer create --name lb1 --vip-subnet-id public-subnet</pre></li><li class="listitem"><p class="simpara">
							Before you can proceed, the load balancer that you created (<code class="literal">lb1</code>) must be in an active and online state.
						</p><p class="simpara">
							Run the <code class="literal">openstack loadbalancer show</code> command, until the load balancer responds with an <code class="literal">ACTIVE</code> and <code class="literal">ONLINE</code> status. (You might need to run this command more than once.)
						</p><pre class="screen">$ openstack loadbalancer show lb1</pre></li><li class="listitem"><p class="simpara">
							Create a TERMINATED_HTTPS listener (<code class="literal">listener1</code>), and reference the secret resource as the default TLS container for the listener.
						</p><pre class="screen">$ openstack loadbalancer listener create --protocol-port 443 --protocol TERMINATED_HTTPS --name listener1 --default-tls-container=$(openstack secret list | awk '/ tls_secret1 / {print $2}') lb1</pre></li><li class="listitem"><p class="simpara">
							Create a pool (<code class="literal">pool1</code>) and make it the default pool for the listener.
						</p><pre class="screen">$ openstack loadbalancer pool create --name pool1 --lb-algorithm ROUND_ROBIN --listener listener1 --protocol HTTP</pre></li><li class="listitem"><p class="simpara">
							Add the non-secure HTTP back end servers (<code class="literal">192.0.2.10</code> and <code class="literal">192.0.2.11</code>) on the private subnet (<code class="literal">private-subnet</code>) to the pool.
						</p><pre class="screen">$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.10 --protocol-port 80 pool1
$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.11 --protocol-port 80 pool1</pre></li><li class="listitem"><p class="simpara">
							Create a non-secure, HTTP listener (<code class="literal">listener2</code>), and make its default pool, the same as the secure listener.
						</p><pre class="screen">$ openstack loadbalancer listener create --protocol-port 80 --protocol HTTP --name listener2 --default-pool pool1 lb1</pre></li></ol></div></section><section class="section" id="create-udp-load-balancer"><div class="titlepage"><div><div><h2 class="title">15.15. Creating a UDP load balancer with a health monitor</h2></div></div></div><p>
					You can use the Red Hat OpenStack Platform Load-balancing service (octavia) to balance network traffic on UDP ports.
				</p><p>
					While it is possible to set up a listener without a health monitor, if a back end pool member goes down, octavia does not remove the failed server from the pool. To avoid service disruption, always configure load balancers to use a health monitor on production systems.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A private subnet that contains back end servers that host one or more applications configured to use UDP ports.
						</li><li class="listitem">
							A shared external (public) subnet that is reachable from the internet.
						</li><li class="listitem">
							A basic load balancer that is reachable from the internet, and that distributes requests to its members (back end servers).
						</li><li class="listitem">
							Establish a UDP health check to ensure that the back end servers are available with a UDP-CONNECT health monitor.
						</li><li class="listitem">
							Ensure that no security rules block ICMP Destination Unreachable messages (ICMP type 3).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a load balancer (lb1) on a private subnet (private-subnet):
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Values inside parentheses are sample values that are used in the example commands in this procedure. Substitute these sample values with ones that are appropriate for your site.
							</p></div></div><pre class="screen">$ openstack loadbalancer create --name lb1 --vip-subnet-id private-subnet</pre></li><li class="listitem"><p class="simpara">
							Monitor the state of the load balancer:
						</p><pre class="screen">$ openstack loadbalancer show lb1</pre><p class="simpara">
							When you see a status of <span class="emphasis"><em>Active</em></span> and <span class="emphasis"><em>ONLINE</em></span>, the load balancer is created and running and you can go to the next step.
						</p></li><li class="listitem"><p class="simpara">
							Create a listener (listener1) on a port (1234):
						</p><pre class="screen">$ openstack loadbalancer listener create --name listener1 --protocol UDP --protocol-port 1234 lb1</pre></li><li class="listitem"><p class="simpara">
							Create the listener default pool (pool1):
						</p><pre class="screen">$ openstack loadbalancer pool create --name pool1 --lb-algorithm ROUND_ROBIN --listener listener1 --protocol UDP</pre></li><li class="listitem"><p class="simpara">
							Create a health monitor on the pool that connects to the back end servers:
						</p><pre class="screen">$ openstack loadbalancer healthmonitor create --delay 5 --max-retries 2 --timeout 3 --type UDP-CONNECT pool1</pre></li><li class="listitem"><p class="simpara">
							Add load balancer members (192.0.2.10 and 192.0.2.11) on the private subnet to the default pool:
						</p><pre class="screen">$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.10 --protocol-port 1234 pool1
$ openstack loadbalancer member create --subnet-id private-subnet --address 192.0.2.11 --protocol-port 1234 pool1</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_guide/sec-octavia#verify-load-balancer">Verifying the load balancer</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/command_line_interface_reference/index#loadbalancer">loadbalancer</a> in the <span class="emphasis"><em>Command Line Interface Reference</em></span>.
						</li></ul></div></section><section class="section" id="access-amphora-logs"><div class="titlepage"><div><div><h2 class="title">15.16. Accessing Amphora logs</h2></div></div></div><p>
					Amphora is the instance that performs load balancing. You can view Amphora logging information in the systemd journal.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the ssh-agent, and add your user identity key to the agent:
						</p><pre class="screen">[stack@undercloud-0] $ eval `ssh-agent -s`
[stack@undercloud-0] $ ssh-add</pre></li><li class="listitem"><p class="simpara">
							Use SSH to connect to the Amphora instance:
						</p><pre class="screen">[stack@undercloud-0] $ ssh -A -t heat-admin@&lt;controller node IP address&gt; ssh cloud-user@&lt;IP address of Amphora in load-balancing management network&gt;</pre></li><li class="listitem"><p class="simpara">
							View the systemd journal:
						</p><pre class="screen">[cloud-user@amphora-f60af64d-570f-4461-b80a-0f1f8ab0c422 ~] $ sudo journalctl</pre><p class="simpara">
							Refer to the journalctl man page for information about filtering journal output.
						</p></li><li class="listitem"><p class="simpara">
							When you are finished viewing the journal, and have closed your connections to the Amphora instance and the Controller node, make sure that you stop the SSH agent:
						</p><pre class="screen">[stack@undercloud-0] $ exit</pre></li></ol></div></section><section class="section" id="update-running-amphora-instances"><div class="titlepage"><div><div><h2 class="title">15.17. Updating running amphora instances</h2></div></div></div><section class="section" id="overview"><div class="titlepage"><div><div><h3 class="title">15.17.1. Overview</h3></div></div></div><p>
						Periodically, you must update a running load balancing instance (amphora) with a newer image. For example, you must update an amphora instance during the following events:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								An update or upgrade of Red Hat OpenStack Platform.
							</li><li class="listitem">
								A security update to your system.
							</li><li class="listitem">
								A change to a different flavor for the underlying virtual machine.
							</li></ul></div><p>
						To update an amphora image, you must fail over the load balancer and then wait for the load balancer to regain an active state. When the load balancer is again active, it is running the new image.
					</p></section><section class="section" id="prerequisites"><div class="titlepage"><div><div><h3 class="title">15.17.2. Prerequisites</h3></div></div></div><p>
						New images for amphora are available during an OpenStack update or upgrade.
					</p></section><section class="section" id="update_amphora_instances_with_new_images"><div class="titlepage"><div><div><h3 class="title">15.17.3. Update amphora instances with new images</h3></div></div></div><p>
						During an OpenStack update or upgrade, director automatically downloads the default amphora image, uploads it to the overcloud Image service (glance), and then configures Octavia to use the new image. When you failover the load balancer, you are forcing Octavia to start the new amphora image.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Make sure that you have reviewed the prerequisites before you begin updating amphora.
							</li><li class="listitem"><p class="simpara">
								List the IDs for all of the load balancers that you want to update:
							</p><pre class="screen">$ openstack loadbalancer list -c id -f value</pre></li><li class="listitem"><p class="simpara">
								Fail over each load balancer:
							</p><pre class="screen">$ openstack loadbalancer failover &lt;loadbalancer_id&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									When you start failing over the load balancers, monitor system utilization, and as needed, adjust the rate at which you perform failovers. A load balancer failover creates new virtual machines and ports, which might temporarily increase the load on OpenStack Networking.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Monitor the state of the failed over load balancer:
							</p><pre class="screen">$ openstack loadbalancer show &lt;loadbalancer_id&gt;</pre><p class="simpara">
								The update is complete when the load balancer status is <code class="literal">ACTIVE</code>.
							</p></li></ol></div></section></section></section><section class="chapter" id="sec-ipv6"><div class="titlepage"><div><div><h2 class="title">Chapter 16. Tenant networking with IPv6</h2></div></div></div><section class="section" id="overview-tenant-network"><div class="titlepage"><div><div><h2 class="title">16.1. Overview of tenant networking</h2></div></div></div><p>
					This chapter contains information about implementing IPv6 subnets in a Red Hat OpenStack Platform (RHOSP) tenant network. In addition to tenant networking, with RHOSP director, you can configure IPv6-native deployments for the overcloud nodes.
				</p><p>
					RHOSP supports IPv6 in tenant networks. IPv6 subnets are created within existing tenant networks, and support a number of address assignment modes: <span class="strong strong"><strong>Stateless Address Autoconfiguration (SLAAC)</strong></span>, <span class="strong strong"><strong>Stateful DHCPv6</strong></span>, and <span class="strong strong"><strong>Stateless DHCPv6</strong></span>.
				</p></section><section class="section" id="ipv6-subnet-options"><div class="titlepage"><div><div><h2 class="title">16.2. IPv6 subnet options</h2></div></div></div><p>
					Create IPv6 subnets using the <code class="literal">openstack subnet create</code> command. You can also specify the address mode and the Router Advertisement mode. Use the following list to understand the possible combinations of options that you can include with the <code class="literal">openstack subnet create</code> command.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893202276656" scope="col">RA Mode</th><th align="left" valign="top" id="idm139893202275568" scope="col">Address Mode</th><th align="left" valign="top" id="idm139893202274480" scope="col">Result</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=not set
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=slaac
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance receives an IPv6 address from the external router (not managed by OpenStack Networking) using <span class="strong strong"><strong>SLAAC</strong></span>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=not set
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=dhcpv6-stateful
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance receives an IPv6 address and optional information from OpenStack Networking (dnsmasq) using <span class="strong strong"><strong>DHCPv6 stateful</strong></span>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=not set
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=dhcpv6-stateless
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance receives an IPv6 address from the external router using SLAAC, and optional information from OpenStack Networking (dnsmasq) using <span class="strong strong"><strong>DHCPv6 stateless</strong></span>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=slaac
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=not-set
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance uses SLAAC to receive an IPv6 address from OpenStack Networking (<span class="strong strong"><strong>radvd</strong></span>).
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=dhcpv6-stateful
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=not-set
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance receives an IPv6 address and optional information from an external DHCPv6 server using <span class="strong strong"><strong>DHCPv6 stateful</strong></span>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=dhcpv6-stateless
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=not-set
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance receives an IPv6 address from OpenStack Networking (<span class="strong strong"><strong>radvd</strong></span>) using SLAAC, and optional information from an external DHCPv6 server using <span class="strong strong"><strong>DHCPv6 stateless</strong></span>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=slaac
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=slaac
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance receives an IPv6 address from OpenStack Networking (<span class="strong strong"><strong>radvd</strong></span>) using <span class="strong strong"><strong>SLAAC</strong></span>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=dhcpv6-stateful
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=dhcpv6-stateful
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance receives an IPv6 address from OpenStack Networking (<span class="strong strong"><strong>dnsmasq</strong></span>) using <span class="strong strong"><strong>DHCPv6 stateful</strong></span>, and optional information from OpenStack Networking (<span class="strong strong"><strong>dnsmasq</strong></span>) using <span class="strong strong"><strong>DHCPv6 stateful</strong></span>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139893202276656"> <p>
									ipv6_ra_mode=dhcpv6-stateless
								</p>
								 </td><td align="left" valign="top" headers="idm139893202275568"> <p>
									ipv6-address-mode=dhcpv6-stateless
								</p>
								 </td><td align="left" valign="top" headers="idm139893202274480"> <p>
									The instance receives an IPv6 address from OpenStack Networking (<span class="strong strong"><strong>radvd</strong></span>) using <span class="strong strong"><strong>SLAAC</strong></span>, and optional information from OpenStack Networking (<span class="strong strong"><strong>dnsmasq</strong></span>) using <span class="strong strong"><strong>DHCPv6 stateless</strong></span>.
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="create-ipv6-subnet-state-dchpv6"><div class="titlepage"><div><div><h2 class="title">16.3. Create an IPv6 subnet using Stateful DHCPv6</h2></div></div></div><p>
					Complete the steps in this procedure to create an IPv6 subnet in a tenant network using some of the options in section 17.1. First, gather the necessary tenant and network information, then include this information in the <code class="literal">openstack subnet create</code> command.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenStack Networking supports only EUI-64 IPv6 address assignment for SLAAC. This allows for simplified IPv6 networking, as hosts self-assign addresses based on the base 64-bits plus the MAC address. You cannot create subnets with a different netmask and <span class="emphasis"><em>address_assign_type</em></span> of SLAAC.
					</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Retrieve the tenant ID of the Project where you want to create the IPv6 subnet. These values are unique between OpenStack deployments, so your values differ from the values in this example.
						</p><pre class="screen"># openstack project list
+----------------------------------+----------+
| ID                               | Name     |
+----------------------------------+----------+
| 25837c567ed5458fbb441d39862e1399 |    QA    |
| f59f631a77264a8eb0defc898cb836af |  admin   |
| 4e2e1951e70643b5af7ed52f3ff36539 |   demo   |
| 8561dff8310e4cd8be4b6fd03dc8acf5 | services |
+----------------------------------+----------+</pre></li><li class="listitem"><p class="simpara">
							Retrieve a list of all networks present in OpenStack Networking (neutron), and note the name of the network that you want to host the IPv6 subnet:
						</p><pre class="screen"># openstack network list
+--------------------------------------+------------------+-------------------------------------------------------------+
| id                                   | name             | subnets                                                     |
+--------------------------------------+------------------+-------------------------------------------------------------+
| 8357062a-0dc2-4146-8a7f-d2575165e363 | private          | c17f74c4-db41-4538-af40-48670069af70 10.0.0.0/24            |
| 31d61f7d-287e-4ada-ac29-ed7017a54542 | public           | 303ced03-6019-4e79-a21c-1942a460b920 172.24.4.224/28        |
| 6aff6826-4278-4a35-b74d-b0ca0cbba340 | database-servers |                                                             |
+--------------------------------------+------------------+-------------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Include the tenant ID and network name in the <code class="literal">openstack subnet create</code> command:
						</p><pre class="screen"># openstack subnet create --ip-version 6 --ipv6-address-mode dhcpv6-stateful --project 25837c567ed5458fbb441d39862e1399 --network database-servers --subnet-range fdf8:f53b:82e4::53/125 subnet_name

Created a new subnet:
+-------------------+--------------------------------------------------------------+
| Field             | Value                                                        |
+-------------------+--------------------------------------------------------------+
| allocation_pools  | {"start": "fdf8:f53b:82e4::52", "end": "fdf8:f53b:82e4::56"} |
| cidr              | fdf8:f53b:82e4::53/125                                       |
| dns_nameservers   |                                                              |
| enable_dhcp       | True                                                         |
| gateway_ip        | fdf8:f53b:82e4::51                                           |
| host_routes       |                                                              |
| id                | cdfc3398-997b-46eb-9db1-ebbd88f7de05                         |
| ip_version        | 6                                                            |
| ipv6_address_mode | dhcpv6-stateful                                              |
| ipv6_ra_mode      |                                                              |
| name              |                                                              |
| network_id        | 6aff6826-4278-4a35-b74d-b0ca0cbba340                         |
| tenant_id         | 25837c567ed5458fbb441d39862e1399                             |
+-------------------+--------------------------------------------------------------+</pre></li><li class="listitem"><p class="simpara">
							Validate this configuration by reviewing the network list. Note that the entry for <span class="emphasis"><em>database-servers</em></span> now reflects the newly created IPv6 subnet:
						</p><pre class="screen"># openstack network list
+--------------------------------------+------------------+-------------------------------------------------------------+
| id                                   | name             | subnets                                                     |
+--------------------------------------+------------------+-------------------------------------------------------------+
| 6aff6826-4278-4a35-b74d-b0ca0cbba340 | database-servers | cdfc3398-997b-46eb-9db1-ebbd88f7de05 fdf8:f53b:82e4::50/125 |
| 8357062a-0dc2-4146-8a7f-d2575165e363 | private          | c17f74c4-db41-4538-af40-48670069af70 10.0.0.0/24            |
| 31d61f7d-287e-4ada-ac29-ed7017a54542 | public           | 303ced03-6019-4e79-a21c-1942a460b920 172.24.4.224/28        |
+--------------------------------------+------------------+-------------------------------------------------------------+</pre><p class="simpara">
							As a result of this configuration, instances that the QA tenant creates can receive a DHCP IPv6 address when added to the database-servers subnet:
						</p><pre class="screen"># openstack server list
+--------------------------------------+------------+--------+------------+-------------+-------------------------------------+
| ID                                   | Name       | Status | Task State | Power State | Networks                            |
+--------------------------------------+------------+--------+------------+-------------+-------------------------------------+
| fad04b7a-75b5-4f96-aed9-b40654b56e03 | corp-vm-01 | ACTIVE | -          | Running     | database-servers=fdf8:f53b:82e4::52 |
+--------------------------------------+------------+--------+------------+-------------+-------------------------------------+</pre></li></ol></div></section></section><section class="chapter" id="sec-quotas"><div class="titlepage"><div><div><h2 class="title">Chapter 17. Managing tenant quotas</h2></div></div></div><section class="section" id="config-tenant-quotas"><div class="titlepage"><div><div><h2 class="title">17.1. Configuring tenant quotas</h2></div></div></div><p>
					OpenStack Networking (neutron) supports the use of quotas to constrain the number of resources created by tenants/projects.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You can set tenant quotas for various network components in the /var/lib/config-data/neutron/etc/neutron/neutron.conf file.
						</p><p class="simpara">
							For example, to limit the number of routers that a tenant can create, change the <code class="literal">quota_router</code> value:
						</p><pre class="screen">quota_router = 10</pre><p class="simpara">
							In this example, each tenant is limited to a maximum of 10 routers.
						</p></li></ul></div><p>
					For a listing of the quota settings, see sections that immediately follow.
				</p></section><section class="section" id="l3-quota-options"><div class="titlepage"><div><div><h2 class="title">17.2. L3 quota options</h2></div></div></div><p>
					Here are quota options available for layer 3 (L3) networking:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>quota_floatingip</strong></span> - The number of floating IPs available to a tenant.
						</li><li class="listitem">
							<span class="strong strong"><strong>quota_network</strong></span> - The number of networks available to a tenant.
						</li><li class="listitem">
							<span class="strong strong"><strong>quota_port</strong></span> - The number of ports available to a tenant.
						</li><li class="listitem">
							<span class="strong strong"><strong>quota_router</strong></span> - The number of routers available to a tenant.
						</li><li class="listitem">
							<span class="strong strong"><strong>quota_subnet</strong></span> - The number of subnets available to a tenant.
						</li><li class="listitem">
							<span class="strong strong"><strong>quota_vip</strong></span> - The number of virtual IP addresses available to a tenant.
						</li></ul></div></section><section class="section" id="firewall-quota-options"><div class="titlepage"><div><div><h2 class="title">17.3. Firewall quota options</h2></div></div></div><p>
					Here are quota options available for managing firewalls for tenants:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>quota_firewall</strong></span> - The number of firewalls available to a tenant.
						</li><li class="listitem">
							<span class="strong strong"><strong>quota_firewall_policy</strong></span> - The number of firewall policies available to a tenant.
						</li><li class="listitem">
							<span class="strong strong"><strong>quota_firewall_rule</strong></span> - The number of firewall rules available to a tenant.
						</li></ul></div></section><section class="section" id="security-group-quota-options"><div class="titlepage"><div><div><h2 class="title">17.4. Security group quota options</h2></div></div></div><p>
					Here are quota options available for managing the number of security groups that tenants can create:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>quota_security_group</strong></span> - The number of security groups available to a tenant.
						</li><li class="listitem">
							<span class="strong strong"><strong>quota_security_group_rule</strong></span> - The number of security group rules available to a tenant.
						</li></ul></div></section><section class="section" id="management-quota-options"><div class="titlepage"><div><div><h2 class="title">17.5. Management quota options</h2></div></div></div><p>
					Here are additonal options available to administrators for managing quotas for tenants:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>default_quota</strong></span>* - The default number of resources available to a tenant.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>quota_health_monitor</strong></span>* - The number of health monitors available to a tenant.
						</p><p class="simpara">
							Health monitors do not consume resources, however the quota option is available because OpenStack Networking considers health monitors as resource consumers.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>quota_member</strong></span> - The number of pool members available to a tenant.
						</p><p class="simpara">
							Pool members do not consume resources, however the quota option is available because OpenStack Networking considers pool members as resource consumers.
						</p></li><li class="listitem">
							<span class="strong strong"><strong>quota_pool</strong></span> - The number of pools available to a tenant.
						</li></ul></div></section></section><section class="chapter" id="deploy-routed-prov-networks"><div class="titlepage"><div><div><h2 class="title">Chapter 18. Deploying routed provider networks</h2></div></div></div><section class="section" id="advantages-routed-prov-networks"><div class="titlepage"><div><div><h2 class="title">18.1. Advantages of routed provider networks</h2></div></div></div><p>
					In Red Hat OpenStack Platform, operators can create routed provider networks (RPNs). RPNs are typically used in edge deployments, and rely on multiple layer 2 network segments instead of traditional networks that have only one segment.
				</p><p>
					RPNs simplify the cloud for end users because they see only one network. For cloud operators, RPNs deliver scalabilty and fault tolerance. For example, if a major error occurs, only one segment is impacted instead of the entire network failing.
				</p><p>
					Before routed provider networks (RPNs), operators typically had to choose from one of the following architectures:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A single, large layer 2 network
						</li><li class="listitem">
							Multiple, smaller layer 2 networks
						</li></ul></div><p>
					Single, large layer 2 networks become complex when scaling and reduce fault tolerance (increase failure domains).
				</p><p>
					Multiple, smaller layer 2 networks scale better and shrink failure domains, but can introduce complexity for end users.
				</p><p>
					Starting with Red Hat OpenStack Platform 16.1.1 and later, you can deploy RPNs using the ML2/OVS or the SR-IOV mechanism drivers.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#fundamentals-prov-networks">Fundamentals of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#ref_limitations-routed-prov-networks">Limitations of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#prepare-routed-prov-network">Preparing for a routed provider network</a>
						</li><li class="listitem">
							<a class="link" href="index.html#create-routed-prov-network">Creating a routed provider network</a>
						</li><li class="listitem">
							<a class="link" href="index.html#migrate-nonrouted-routed-prov-network">Migrating a non-routed to a routed provider network</a>
						</li></ul></div></section><section class="section" id="fundamentals-prov-networks"><div class="titlepage"><div><div><h2 class="title">18.2. Fundamentals of routed provider networks</h2></div></div></div><p>
					The association between a segment and a subnet distinguishes a routed provider network (RPN) from other types of networks. Each network segment requires at least one subnet that explicitly belongs to that segment. The OpenStack Networking service (neutron) enforces that either zero or all subnets on a particular network associate with a segment. For example, attempting to create a subnet without a segment on a network containing subnets with segments generates an error.
				</p><p>
					With RPNs, the IP addresses available to virtual machine (VM) instances depend on the segment of the network available on the particular compute node. The Networking service port can be associated with only one network segment.
				</p><p>
					Similar to conventional networking, layer 2 (switching) handles transit of traffic between ports on the same network segment and layer 3 (routing) handles transit of traffic between segments.
				</p><p>
					The Networking service does not provide layer 3 services between segments. Instead, it relies on physical network infrastructure to route subnets. Thus, both the Networking service and physical network infrastructure must contain configuration for routed provider networks, similar to conventional provider networks.
				</p><p>
					Because the Compute service (nova) scheduler is not network segment aware, when you deploy RPNs, you must map each leaf or rack segment or DCN edge site to a Compute service host-aggregate or availability zone.
				</p><p>
					If you require a DHCP-metadata service, you must define an availability zone for each edge site or network segment, to ensure that the local DHCP agent is deployed.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#advantages-routed-prov-networks">Advantages of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#ref_limitations-routed-prov-networks">Limitations of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#prepare-routed-prov-network">Preparing for a routed provider network</a>
						</li><li class="listitem">
							<a class="link" href="index.html#create-routed-prov-network">Creating a routed provider network</a>
						</li><li class="listitem">
							<a class="link" href="index.html#migrate-nonrouted-routed-prov-network">Migrating a non-routed to a routed provider network</a>
						</li></ul></div></section><section class="section" id="ref_limitations_routed_prov_networks"><div class="titlepage"><div><div><h2 class="title">18.3. Limitations of routed provider networks</h2></div></div></div><p>
					Routed provider networks (RPNs) are not supported by all mechanism drivers and there are restrictions with the Compute service scheduler and other software as noted in the following list:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Routed provider networks are supported only by the ML2/OVS and SR-IOV mechanism drivers.
						</p><p class="simpara">
							Open Virtual Network (OVN) is not supported.
						</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							North-south routing with central SNAT or a floating IP is not supported.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							When using SR-IOV or PCI pass-through, physical network (physnet) names must be the same in central and remote sites or segments. You cannot reuse segment IDs.
						</li><li class="listitem"><p class="simpara">
							The Compute service (nova) scheduler is not segment-aware. (You must map each segment or edge site to a Compute host-aggregate or availability zone.) Currently, there are only two VM instance boot options available:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Boot using <code class="literal">port-id</code> and no IP address, specifying Compute availability zone (segment or edge site).
								</li><li class="listitem">
									Boot using <code class="literal">network-id</code>, specifying the Compute availability zone (segment or edge site).
								</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Cold or live migration works only when you specify the destination Compute availability zone (segment or edge site).
						</li></ul></div></section><section class="section" id="prepare-routed-prov-network"><div class="titlepage"><div><div><h2 class="title">18.4. Preparing for a routed provider network</h2></div></div></div><p>
					There are several tasks that you must perform before you can create a routed provider network in Red Hat OpenStack Platform.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Within a network, use a unique physical network name for each segment. This enables reuse of the same segmentation details between subnets.
						</p><p class="simpara">
							For example, use the same VLAN ID across all segments of a particular provider network.
						</p></li><li class="listitem"><p class="simpara">
							Implement routing between segments.
						</p><p class="simpara">
							Each subnet on a segment must contain the gateway address of the router interface on that particular subnet.
						</p><div class="table" id="idm139893195984880"><p class="title"><strong>Table 18.1. Sample segments for routing</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893195978176" scope="col">Segment</th><th align="left" valign="top" id="idm139893195977088" scope="col">Version</th><th align="left" valign="top" id="idm139893195976000" scope="col">Addresses</th><th align="left" valign="top" id="idm139893195974912" scope="col">Gateway</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893195978176"> <p>
											segment1
										</p>
										 </td><td align="left" valign="top" headers="idm139893195977088"> <p>
											4
										</p>
										 </td><td align="left" valign="top" headers="idm139893195976000"> <p>
											203.0.113.0/24
										</p>
										 </td><td align="left" valign="top" headers="idm139893195974912"> <p>
											203.0.113.1
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195978176"> <p>
											segment1
										</p>
										 </td><td align="left" valign="top" headers="idm139893195977088"> <p>
											6
										</p>
										 </td><td align="left" valign="top" headers="idm139893195976000"> <p>
											fd00:203:0:113::/64
										</p>
										 </td><td align="left" valign="top" headers="idm139893195974912"> <p>
											fd00:203:0:113::1
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195978176"> <p>
											segment2
										</p>
										 </td><td align="left" valign="top" headers="idm139893195977088"> <p>
											4
										</p>
										 </td><td align="left" valign="top" headers="idm139893195976000"> <p>
											198.51.100.0/24
										</p>
										 </td><td align="left" valign="top" headers="idm139893195974912"> <p>
											198.51.100.1
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195978176"> <p>
											segment2
										</p>
										 </td><td align="left" valign="top" headers="idm139893195977088"> <p>
											6
										</p>
										 </td><td align="left" valign="top" headers="idm139893195976000"> <p>
											fd00:198:51:100::/64
										</p>
										 </td><td align="left" valign="top" headers="idm139893195974912"> <p>
											fd00:198:51:100::1
										</p>
										 </td></tr></tbody></table></div></div></li><li class="listitem"><p class="simpara">
							Map segments to compute nodes.
						</p><p class="simpara">
							Routed provider networks imply that compute nodes reside on different segments. Ensure that every compute host in a router provider network has direct connectivity to one of its segments.
						</p><div class="table" id="idm139893195943712"><p class="title"><strong>Table 18.2. Sample segment to Compute node mappings</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893195937936" scope="col">Host</th><th align="left" valign="top" id="idm139893195936848" scope="col">Rack</th><th align="left" valign="top" id="idm139893195935760" scope="col">Physical network</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893195937936"> <p>
											compute0001
										</p>
										 </td><td align="left" valign="top" headers="idm139893195936848"> <p>
											rack 1
										</p>
										 </td><td align="left" valign="top" headers="idm139893195935760"> <p>
											segment 1
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195937936"> <p>
											compute0002
										</p>
										 </td><td align="left" valign="top" headers="idm139893195936848"> <p>
											rack 1
										</p>
										 </td><td align="left" valign="top" headers="idm139893195935760"> <p>
											segment 1
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195937936"> <p>
											…
										</p>
										 </td><td align="left" valign="top" headers="idm139893195936848"> <p>
											…
										</p>
										 </td><td align="left" valign="top" headers="idm139893195935760"> <p>
											…
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195937936"> <p>
											compute0101
										</p>
										 </td><td align="left" valign="top" headers="idm139893195936848"> <p>
											rack 2
										</p>
										 </td><td align="left" valign="top" headers="idm139893195935760"> <p>
											segment 2
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195937936"> <p>
											compute0102
										</p>
										 </td><td align="left" valign="top" headers="idm139893195936848"> <p>
											rack 2
										</p>
										 </td><td align="left" valign="top" headers="idm139893195935760"> <p>
											segment 2
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195937936"> <p>
											compute0102
										</p>
										 </td><td align="left" valign="top" headers="idm139893195936848"> <p>
											rack 2
										</p>
										 </td><td align="left" valign="top" headers="idm139893195935760"> <p>
											segment 2
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195937936"> <p>
											…
										</p>
										 </td><td align="left" valign="top" headers="idm139893195936848"> <p>
											…
										</p>
										 </td><td align="left" valign="top" headers="idm139893195935760"> <p>
											…
										</p>
										 </td></tr></tbody></table></div></div></li><li class="listitem"><p class="simpara">
							Deploy at least one DHCP agent per segment.
						</p><p class="simpara">
							Unlike conventional provider networks, a DHCP agent cannot support more than one segment within a network. Deploy DHCP agents on the compute nodes containing the segments rather than on the network nodes to reduce the node count.
						</p><div class="table" id="idm139893195895120"><p class="title"><strong>Table 18.3. Sample DCHP agent per segment mapping</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139893195889344" scope="col">Host</th><th align="left" valign="top" id="idm139893195888256" scope="col">Rack</th><th align="left" valign="top" id="idm139893195887168" scope="col">Physical network</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139893195889344"> <p>
											network0001
										</p>
										 </td><td align="left" valign="top" headers="idm139893195888256"> <p>
											rack 1
										</p>
										 </td><td align="left" valign="top" headers="idm139893195887168"> <p>
											segment 1
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195889344"> <p>
											network0002
										</p>
										 </td><td align="left" valign="top" headers="idm139893195888256"> <p>
											rack 1
										</p>
										 </td><td align="left" valign="top" headers="idm139893195887168"> <p>
											segment 1
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139893195889344"> <p>
											…
										</p>
										 </td><td align="left" valign="top" headers="idm139893195888256"> <p>
											…
										</p>
										 </td><td align="left" valign="top" headers="idm139893195887168"> <p>
											…
										</p>
										 </td></tr></tbody></table></div></div><p class="simpara">
							You deploy a DCHP agent and a Networking service metadata agent on the Compute nodes by using a custom roles file.
						</p><p class="simpara">
							Here is an example:
						</p><pre class="screen">###############################################################################
# Role: ComputeSriov                                                          #
###############################################################################
- name: ComputeSriov
  description: |
    Compute SR-IOV Role
  CountDefault: 1
  networks:
    External:
      subnet: external_subnet
    InternalApi:
      subnet: internal_api_subnet
    Tenant:
      subnet: tenant_subnet
    Storage:
      subnet: storage_subnet
  RoleParametersDefault:
    TunedProfileName: "cpu-partitioning"
  update_serial: 25
  ServicesDefault:
    - OS::TripleO::Services::Aide
    - OS::TripleO::Services::AuditD
    - OS::TripleO::Services::BootParams
    - OS::TripleO::Services::CACerts
...
    - OS::TripleO::Services::NeutronDhcpAgent
    - OS::TripleO::Services::NeutronMetadataAgent
...</pre><p class="simpara">
							In a custom environment file, add the following key-value pair:
						</p><pre class="screen">parameter_defaults:
    ....
    NeutronEnableIsolatedMetadata: 'True'
    ....</pre></li><li class="listitem"><p class="simpara">
							The OpenStackClient plug-in for the Placement service must be installed.
						</p><p class="simpara">
							Install this plug-in as root by running this command:
						</p><pre class="screen"># yum install python3-osc-placement</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#advantages-routed-prov-networks">Advantages of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#fundamentals-prov-networks">Fundamentals of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#ref_limitations-routed-prov-networks">Limitations of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#create-routed-prov-network">Creating a routed provider network</a>
						</li><li class="listitem">
							<a class="link" href="index.html#migrate-nonrouted-routed-prov-network">Migrating a non-routed to a routed provider network</a>
						</li></ul></div></section><section class="section" id="create-routed-prov-network"><div class="titlepage"><div><div><h2 class="title">18.5. Creating a routed provider network</h2></div></div></div><p>
					Routed provider networks (RPNs) simplify the cloud for end users because they see only one network. For cloud operators, RPNs deliver scalabilty and fault tolerance.
				</p><p>
					When you perform this procedure, you create a routed provider network with two network segments. Each segment contains one IPv4 subnet and one IPv6 subnet.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Complete the steps in <a class="link" href="index.html#prepare-routed-prov-network">Preparing for a routed provider network</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a VLAN provider network that includes a default segment.
						</p><p class="simpara">
							In this example, the VLAN provider network is named <code class="literal">multisegment1</code> and uses a physical network called <code class="literal">provider1</code> and a VLAN whose ID is <code class="literal">2019</code>:
						</p><pre class="screen">$ openstack network create --share --provider-physical-network provider1 \
  --provider-network-type vlan --provider-segment 2019 multisegment1</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | UP                                   |
| id                        | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9 |
| ipv4_address_scope        | None                                 |
| ipv6_address_scope        | None                                 |
| l2_adjacency              | True                                 |
| mtu                       | 1500                                 |
| name                      | multisegment1                        |
| port_security_enabled     | True                                 |
| provider:network_type     | vlan                                 |
| provider:physical_network | provider1                            |
| provider:segmentation_id  | 2019                                 |
| revision_number           | 1                                    |
| router:external           | Internal                             |
| shared                    | True                                 |
| status                    | ACTIVE                               |
| subnets                   |                                      |
| tags                      | []                                   |
+---------------------------+--------------------------------------+</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Rename the default network segment to <code class="literal">segment1</code>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Obtain the segment ID:
								</p><pre class="screen">$ openstack network segment list --network multisegment1</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="screen">+--------------------------------------+----------+--------------------------------------+--------------+---------+
| ID                                   | Name     | Network                              | Network Type | Segment |
+--------------------------------------+----------+--------------------------------------+--------------+---------+
| 43e16869-ad31-48e4-87ce-acf756709e18 | None     | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9 | vlan         |    2019 |
+--------------------------------------+----------+--------------------------------------+--------------+---------+</pre>

									</p></div></li><li class="listitem"><p class="simpara">
									Using the segment ID, rename the network segment to <code class="literal">segment1</code>:
								</p><pre class="screen">$ openstack network segment set --name segment1 43e16869-ad31-48e4-87ce-acf756709e18</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Create a second segment on the provider network.
						</p><p class="simpara">
							In this example, the network segment uses a physical network called <code class="literal">provider2</code> and a VLAN whose ID is <code class="literal">2020</code>:
						</p><pre class="screen">$ openstack network segment create --physical-network provider2 \
  --network-type vlan --segment 2020 --network multisegment1 segment2</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+------------------+--------------------------------------+
| Field            | Value                                |
+------------------+--------------------------------------+
| description      | None                                 |
| headers          |                                      |
| id               | 053b7925-9a89-4489-9992-e164c8cc8763 |
| name             | segment2                             |
| network_id       | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9 |
| network_type     | vlan                                 |
| physical_network | provider2                            |
| revision_number  | 1                                    |
| segmentation_id  | 2020                                 |
| tags             | []                                   |
+------------------+--------------------------------------+</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Verify that the network contains the <code class="literal">segment1</code> and <code class="literal">segment2</code> segments:
						</p><pre class="screen">$ openstack network segment list --network multisegment1</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+--------------------------------------+----------+--------------------------------------+--------------+---------+
| ID                                   | Name     | Network                              | Network Type | Segment |
+--------------------------------------+----------+--------------------------------------+--------------+---------+
| 053b7925-9a89-4489-9992-e164c8cc8763 | segment2 | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9 | vlan         |    2020 |
| 43e16869-ad31-48e4-87ce-acf756709e18 | segment1 | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9 | vlan         |    2019 |
+--------------------------------------+----------+--------------------------------------+--------------+---------+</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Create one IPv4 subnet and one IPv6 subnet on the <code class="literal">segment1</code> segment.
						</p><p class="simpara">
							In this example, the IPv4 subnet uses <code class="literal">203.0.113.0/24</code>:
						</p><pre class="screen">$ openstack subnet create \
  --network multisegment1 --network-segment segment1 \
  --ip-version 4 --subnet-range 203.0.113.0/24 \
  multisegment1-segment1-v4</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| allocation_pools  | 203.0.113.2-203.0.113.254            |
| cidr              | 203.0.113.0/24                       |
| enable_dhcp       | True                                 |
| gateway_ip        | 203.0.113.1                          |
| id                | c428797a-6f8e-4cb1-b394-c404318a2762 |
| ip_version        | 4                                    |
| name              | multisegment1-segment1-v4            |
| network_id        | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9 |
| revision_number   | 1                                    |
| segment_id        | 43e16869-ad31-48e4-87ce-acf756709e18 |
| tags              | []                                   |
+-------------------+--------------------------------------+</pre>

							</p></div><p class="simpara">
							In this example, the IPv6 subnet uses <code class="literal">fd00:203:0:113::/64</code>:
						</p><pre class="screen">$ openstack subnet create \
  --network multisegment1 --network-segment segment1 \
  --ip-version 6 --subnet-range fd00:203:0:113::/64 \
  --ipv6-address-mode slaac multisegment1-segment1-v6</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+-------------------+------------------------------------------------------+
| Field             | Value                                                |
+-------------------+------------------------------------------------------+
| allocation_pools  | fd00:203:0:113::2-fd00:203:0:113:ffff:ffff:ffff:ffff |
| cidr              | fd00:203:0:113::/64                                  |
| enable_dhcp       | True                                                 |
| gateway_ip        | fd00:203:0:113::1                                    |
| id                | e41cb069-9902-4c01-9e1c-268c8252256a                 |
| ip_version        | 6                                                    |
| ipv6_address_mode | slaac                                                |
| ipv6_ra_mode      | None                                                 |
| name              | multisegment1-segment1-v6                            |
| network_id        | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9                 |
| revision_number   | 1                                    |
| segment_id        | 43e16869-ad31-48e4-87ce-acf756709e18                 |
| tags              | []                                                   |
+-------------------+------------------------------------------------------+</pre>

							</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, IPv6 subnets on provider networks rely on physical network infrastructure for stateless address autoconfiguration (SLAAC) and router advertisement.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Create one IPv4 subnet and one IPv6 subnet on the <code class="literal">segment2</code> segment.
						</p><p class="simpara">
							In this example, the IPv4 subnet uses <code class="literal">198.51.100.0/24</code>:
						</p><pre class="screen">$ openstack subnet create \
  --network multisegment1 --network-segment segment2 \
  --ip-version 4 --subnet-range 198.51.100.0/24 \
  multisegment1-segment2-v4</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| allocation_pools  | 198.51.100.2-198.51.100.254          |
| cidr              | 198.51.100.0/24                      |
| enable_dhcp       | True                                 |
| gateway_ip        | 198.51.100.1                         |
| id                | 242755c2-f5fd-4e7d-bd7a-342ca95e50b2 |
| ip_version        | 4                                    |
| name              | multisegment1-segment2-v4            |
| network_id        | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9 |
| revision_number   | 1                                    |
| segment_id        | 053b7925-9a89-4489-9992-e164c8cc8763 |
| tags              | []                                   |
+-------------------+--------------------------------------+</pre>

							</p></div><p class="simpara">
							In this example, the IPv6 subnet uses <code class="literal">fd00:198:51:100::/64</code>:
						</p><pre class="screen">$ openstack subnet create \
  --network multisegment1 --network-segment segment2 \
  --ip-version 6 --subnet-range fd00:198:51:100::/64 \
  --ipv6-address-mode slaac multisegment1-segment2-v6</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+-------------------+--------------------------------------------------------+
| Field             | Value                                                  |
+-------------------+--------------------------------------------------------+
| allocation_pools  | fd00:198:51:100::2-fd00:198:51:100:ffff:ffff:ffff:ffff |
| cidr              | fd00:198:51:100::/64                                   |
| enable_dhcp       | True                                                   |
| gateway_ip        | fd00:198:51:100::1                                     |
| id                | b884c40e-9cfe-4d1b-a085-0a15488e9441                   |
| ip_version        | 6                                                      |
| ipv6_address_mode | slaac                                                  |
| ipv6_ra_mode      | None                                                   |
| name              | multisegment1-segment2-v6                              |
| network_id        | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9                   |
| revision_number   | 1                                                      |
| segment_id        | 053b7925-9a89-4489-9992-e164c8cc8763                   |
| tags              | []                                                     |
+-------------------+--------------------------------------------------------+</pre>

							</p></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify that each IPv4 subnet associates with at least one DHCP agent:
						</p><pre class="screen">$ openstack network agent list --agent-type dhcp --network multisegment1</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+--------------------------------------+------------+-------------+-------------------+-------+-------+--------------------+
| ID                                   | Agent Type | Host        | Availability Zone | Alive | State | Binary             |
+--------------------------------------+------------+-------------+-------------------+-------+-------+--------------------+
| c904ed10-922c-4c1a-84fd-d928abaf8f55 | DHCP agent | compute0001 | nova              | :-)   | UP    | neutron-dhcp-agent |
| e0b22cc0-d2a6-4f1c-b17c-27558e20b454 | DHCP agent | compute0101 | nova              | :-)   | UP    | neutron-dhcp-agent |
+--------------------------------------+------------+-------------+-------------------+-------+-------+--------------------+</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Verify that inventories were created for each segment IPv4 subnet in the Compute service placement API.
						</p><p class="simpara">
							Run this command for all segment IDs:
						</p><pre class="screen">$ SEGMENT_ID=053b7925-9a89-4489-9992-e164c8cc8763
$ openstack resource provider inventory list $SEGMENT_ID</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								In this example, only one of the segments is shown:
							</p></div><pre class="screen">+----------------+------------------+----------+----------+-----------+----------+-------+
| resource_class | allocation_ratio | max_unit | reserved | step_size | min_unit | total |
+----------------+------------------+----------+----------+-----------+----------+-------+
| IPV4_ADDRESS   |              1.0 |        1 |        2 |         1 |        1 |    30 |
+----------------+------------------+----------+----------+-----------+----------+-------+</pre></li><li class="listitem"><p class="simpara">
							Verify that host aggregates were created for each segment in the Compute service:
						</p><pre class="screen">$ openstack aggregate list</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								In this example, only one of the segments is shown:
							</p></div><pre class="screen">+----+---------------------------------------------------------+-------------------+
| Id | Name                                                    | Availability Zone |
+----+---------------------------------------------------------+-------------------+
| 10 | Neutron segment id 053b7925-9a89-4489-9992-e164c8cc8763 | None              |
+----+---------------------------------------------------------+-------------------+</pre></li><li class="listitem"><p class="simpara">
							Launch one or more instances. Each instance obtains IP addresses according to the segment it uses on the particular compute node.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a fixed IP is specified by the user in the port create request, that particular IP is allocated immediately to the port. However, creating a port and passing it to an instance yields a different behavior than conventional networks. If the fixed IP is not specified on the port create request, the Networking service defers assignment of IP addresses to the port until the particular compute node becomes apparent. For example, when you run this command:
							</p><pre class="screen">$ openstack port create --network multisegment1 port1</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="screen">+-----------------------+--------------------------------------+
| Field                 | Value                                |
+-----------------------+--------------------------------------+
| admin_state_up        | UP                                   |
| binding_vnic_type     | normal                               |
| id                    | 6181fb47-7a74-4add-9b6b-f9837c1c90c4 |
| ip_allocation         | deferred                             |
| mac_address           | fa:16:3e:34:de:9b                    |
| name                  | port1                                |
| network_id            | 6ab19caa-dda9-4b3d-abc4-5b8f435b98d9 |
| port_security_enabled | True                                 |
| revision_number       | 1                                    |
| security_groups       | e4fcef0d-e2c5-40c3-a385-9c33ac9289c5 |
| status                | DOWN                                 |
| tags                  | []                                   |
+-----------------------+--------------------------------------+</pre>

								</p></div></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#advantages-routed-prov-networks">Advantages of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#fundamentals-prov-networks">Fundamentals of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#ref_limitations-routed-prov-networks">Limitations of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#prepare-routed-prov-network">Preparing for a routed provider network</a>
						</li><li class="listitem">
							<a class="link" href="index.html#migrate-nonrouted-routed-prov-network">Migrating a non-routed to a routed provider network</a>
						</li></ul></div></section><section class="section" id="migrate-nonrouted-routed-prov-network"><div class="titlepage"><div><div><h2 class="title">18.6. Migrating a non-routed network to a routed provider network</h2></div></div></div><p>
					You migrate a non-routed network by associating its subnet with the ID of the network segment.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The non-routed network you are migrating must contain <span class="emphasis"><em>only</em></span> one segment and <span class="emphasis"><em>only</em></span> one subnet.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								In non-routed provider networks that contain multiple subnets or network segments it is not possible to safely migrate to a routed provider network. In non-routed networks, addresses from the subnet allocation pools are assigned to ports without consideration of the network segment to which the port is bound.
							</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Obtain the ID of the current network segment on the network that is being migrated.
						</p><p class="simpara">
							Here is an example:
						</p><pre class="screen">$ openstack network segment list --network my_network</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+--------------------------------------+------+--------------------------------------+--------------+---------+
| ID                                   | Name | Network                              | Network Type | Segment |
+--------------------------------------+------+--------------------------------------+--------------+---------+
| 81e5453d-4c9f-43a5-8ddf-feaf3937e8c7 | None | 45e84575-2918-471c-95c0-018b961a2984 | flat         | None    |
+--------------------------------------+------+--------------------------------------+--------------+---------+</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Obtain the ID or name of the current subnet on the network that you are migrating.
						</p><p class="simpara">
							Here is an example:
						</p><pre class="screen">$ openstack network segment list --network my_network</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+--------------------------------------+-----------+--------------------------------------+---------------+
| ID                                   | Name      | Network                              | Subnet        |
+--------------------------------------+-----------+--------------------------------------+---------------+
| 71d931d2-0328-46ae-93bc-126caf794307 | my_subnet | 45e84575-2918-471c-95c0-018b961a2984 | 172.24.4.0/24 |
+--------------------------------------+-----------+--------------------------------------+---------------+</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Verify the current <code class="literal">segment_id</code> of the subnet has a value of <code class="literal">None</code>.
						</p><p class="simpara">
							Here is an example:
						</p><pre class="screen">$ openstack subnet show my_subnet --c segment_id</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+------------+-------+
| Field      | Value |
+------------+-------+
| segment_id | None  |
+------------+-------+</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Change the value of the subnet <code class="literal">segment_id</code> to the network segment ID.
						</p><p class="simpara">
							Here is an example:
						</p><pre class="screen">$ openstack subnet set --network-segment 81e5453d-4c9f-43a5-8ddf-feaf3937e8c7 my_subnet</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Verify that the subnet is now associated with the desired network segment.
						</p><p class="simpara">
							Here is an example:
						</p><pre class="screen">$ openstack subnet show my_subnet --c segment_id</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">+------------+--------------------------------------+
| Field      | Value                                |
+------------+--------------------------------------+
| segment_id | 81e5453d-4c9f-43a5-8ddf-feaf3937e8c7 |
+------------+--------------------------------------+</pre>

							</p></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#advantages-routed-prov-networks">Advantages of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#fundamentals-prov-networks">Fundamentals of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#ref_limitations-routed-prov-networks">Limitations of routed provider networks</a>
						</li><li class="listitem">
							<a class="link" href="index.html#prepare-routed-prov-network">Preparing for a routed provider network</a>
						</li><li class="listitem">
							<a class="link" href="index.html#create-routed-prov-network">Creating a routed provider network</a>
						</li></ul></div></section></section><section class="chapter" id="sec-allowed-address-pairs"><div class="titlepage"><div><div><h2 class="title">Chapter 19. Configuring allowed address pairs</h2></div></div></div><section class="section" id="overview-allow-addr-pairs"><div class="titlepage"><div><div><h2 class="title">19.1. Overview of allowed address pairs</h2></div></div></div><p>
					An <span class="emphasis"><em>allowed address pair</em></span> is when you identify a specific MAC address, IP address, or both to allow network traffic to pass through a port regardless of the subnet. When you define allowed address pairs, you are able to use protocols like VRRP (Virtual Router Redundancy Protocol) that float an IP address between two VM instances to enable fast data plane failover.
				</p><p>
					You define allowed address pairs using the Red Hat OpenStack Platform command-line client <code class="literal">openstack port</code> command.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The allowed-address pairs extension is currently supported only by the ML2 and Open vSwitch plug-ins.
					</p></div></div><p>
					Be aware that you should not use the default security group with a wider IP address range in an allowed address pair. Doing so can allow a single port to bypass security groups for all other ports within the same network.
				</p><p>
					For example, this command impacts all ports in the network and bypasses all security groups:
				</p><pre class="screen"># openstack port set 9e67d44eab334f07bf82fa1b17d824b6 --allowed-address mac_address=3e:37:09:4b, ip_address=0.0.0.0/0</pre><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/command_line_interface_reference/index#port">port command</a> in the <span class="emphasis"><em>Command Line Interface Reference</em></span>
						</li><li class="listitem">
							<a class="link" href="index.html#create-port-allow-addr-pairs">Creating a port and allowing one address pair</a>
						</li><li class="listitem">
							<a class="link" href="index.html#add-allow-addr-pairs">Adding allowed address pairs</a>
						</li></ul></div></section><section class="section" id="create-port-allow-addr-pairs"><div class="titlepage"><div><div><h2 class="title">19.2. Creating a port and allowing one address pair</h2></div></div></div><p>
					Creating a port with an allowed address pair enables network traffic to flow through the port regardless of the subnet.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You are using an ML2/OVS plug-in.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the following command to create a port and allow one address pair:
						</p><pre class="screen"># openstack port create &lt;port-name&gt; --network &lt;network&gt; --allowed-address mac_address=&lt;mac-address&gt;,ip_address=&lt;ip-cidr&gt;</pre></li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Do not use the default security group with a wider IP address range in an allowed address pair. Doing so can allow a single port to bypass security groups for all other ports within the same network.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/command_line_interface_reference/index#port">port command</a> in the <span class="emphasis"><em>Command Line Interface Reference</em></span>
						</li><li class="listitem">
							<a class="link" href="index.html#overview-allow-addr-pairs">Overview of allowed address pairs</a>
						</li><li class="listitem">
							<a class="link" href="index.html#add-allow-addr-pairs">Adding allowed address pairs</a>
						</li></ul></div></section><section class="section" id="add-allow-addr-pairs"><div class="titlepage"><div><div><h2 class="title">19.3. Adding allowed address pairs</h2></div></div></div><p>
					You can add an allowed address pair to a port to enable network traffic to flow through the port regardless of the subnet.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You are using an ML2/OVS plug-in.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the following command to add allowed address pairs:
						</p><pre class="screen"># openstack port set &lt;port-uuid&gt; --allowed-address mac_address=&lt;mac_address&gt;,ip_address=&lt;ip_cidr&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You cannot set an allowed-address pair that matches the <code class="literal">mac_address</code> and <code class="literal">ip_address</code> of a port. This is because such a setting has no effect since traffic matching the <code class="literal">mac_address</code> and <code class="literal">ip_address</code> is already allowed to pass through the port.
							</p></div></div></li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Do not use the default security group with a wider IP address range in an allowed address pair. Doing so can allow a single port to bypass security groups for all other ports within the same network.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html-single/command_line_interface_reference/index#port">port command</a> in the <span class="emphasis"><em>Command Line Interface Reference</em></span>
						</li><li class="listitem">
							<a class="link" href="index.html#overview-allow-addr-pairs">Overview of allowed address pairs</a>
						</li><li class="listitem">
							<a class="link" href="index.html#create-port-allow-addr-pairs">Creating a port and allowing one address pair</a>
						</li></ul></div></section></section><section class="chapter" id="sec-l3-ha"><div class="titlepage"><div><div><h2 class="title">Chapter 20. Configuring Layer 3 high availability (HA)</h2></div></div></div><section class="section" id="network-without-ha"><div class="titlepage"><div><div><h2 class="title">20.1. OpenStack Networking without high availability (HA)</h2></div></div></div><p>
					OpenStack Networking deployments without any high availability (HA) features are vulnerable to physical node failures.
				</p><p>
					In a typical deployment, tenants create virtual routers, which are scheduled to run on physical L3 agent nodes. This becomes an issue when you lose a L3 agent node and the dependent virtual machines subsequently lose connectivity to external networks. Any floating IP addresses will also be unavailable. In addition, connectivity is lost between any networks that the router hosts.
				</p></section><section class="section" id="overview-l3-ha"><div class="titlepage"><div><div><h2 class="title">20.2. Overview of Layer 3 high availability (HA)</h2></div></div></div><p>
					This active/passive high availability (HA) configuration uses the industry standard VRRP (as defined in RFC 3768) to protect tenant routers and floating IP addresses. A virtual router is randomly scheduled across multiple OpenStack Networking nodes, with one designated as the <span class="emphasis"><em>active</em></span> router, and the remainder serving in a <span class="emphasis"><em>standby</em></span> role.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To deploy Layer 3 HA, you must maintain similar configuration on the redundant OpenStack Networking nodes, including floating IP ranges and access to external networks.
					</p></div></div><p>
					In the following diagram, the active Router1 and Router2 routers are running on separate physical L3 agent nodes. Layer 3 HA has scheduled backup virtual routers on the corresponding nodes, ready to resume service in the case of a physical node failure. When the L3 agent node fails, Layer 3 HA reschedules the affected virtual router and floating IP addresses to a working node:
				</p><p>
					<span class="inlinemediaobject"><img src="vrrp-scheduling.png" alt="vrrp scheduling"/></span>

				</p><p>
					During a failover event, instance TCP sessions through floating IPs remain unaffected, and migrate to the new L3 node without disruption. Only SNAT traffic is affected by failover events.
				</p><p>
					The L3 agent is further protected when in an active/active HA mode.
				</p></section><section class="section" id="l3-ha-failover-conditions"><div class="titlepage"><div><div><h2 class="title">20.3. Layer 3 high availability (HA) failover conditions</h2></div></div></div><p>
					Layer 3 high availability (HA) automatically reschedules protected resources in the following events:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The L3 agent node shuts down or otherwise loses power because of a hardware failure.
						</li><li class="listitem">
							The L3 agent node becomes isolated from the physical network and loses connectivity.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Manually stopping the L3 agent service does not induce a failover event.
					</p></div></div></section><section class="section" id="tenant-consider-l3-ha"><div class="titlepage"><div><div><h2 class="title">20.4. Tenant considerations for Layer 3 high availability (HA)</h2></div></div></div><p>
					Layer 3 high availability (HA) configuration occurs in the back end and is invisible to the tenant. Tenants can continue to create and manage their virtual routers as usual, however there are some limitations to be aware of when designing your Layer 3 HA implementation:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Layer 3 HA supports up to 255 virtual routers per tenant.
						</li><li class="listitem">
							Internal VRRP messages are transported within a separate internal network, created automatically for each project. This process occurs transparently to the user.
						</li></ul></div></section><section class="section" id="ha-changes-neutron"><div class="titlepage"><div><div><h2 class="title">20.5. High availability (HA) changes to OpenStack Networking</h2></div></div></div><p>
					The Neutron API has been updated to allow administrators to set the <code class="literal">--ha=True/False</code> flag when creating a router, which overrides the default configuration of <code class="literal">l3_ha</code> in /var/lib/config-data/neutron/etc/neutron/neutron.conf.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>HA changes to neutron-server:</strong></span>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Layer 3 HA assigns the active role randomly, regardless of the scheduler used by OpenStack Networking (whether random or leastrouter).
								</li><li class="listitem">
									The database schema has been modified to handle allocation of virtual IP addresses (VIPs) to virtual routers.
								</li><li class="listitem">
									A transport network is created to direct Layer 3 HA traffic.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>High availability (HA) changes to L3 agent:</strong></span>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									A new keepalived manager has been added, providing load-balancing and HA capabilities.
								</li><li class="listitem">
									IP addresses are converted to VIPs.
								</li></ul></div></li></ul></div></section><section class="section" id="enable-l3-ha-network-nodes"><div class="titlepage"><div><div><h2 class="title">20.6. Enabling Layer 3 high availability (HA) on OpenStack Networking nodes</h2></div></div></div><p>
					Complete the following steps to enable Layer 3 high availability (HA) on OpenStack Networking and L3 agent nodes.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure Layer 3 HA in the /var/lib/config-data/neutron/etc/neutron/neutron.conf file by enabling L3 HA and defining the number of L3 agent nodes that you want to protect each virtual router:
						</p><pre class="screen">l3_ha = True
max_l3_agents_per_router = 2
min_l3_agents_per_router = 2</pre><p class="simpara">
							L3 HA parameters:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>l3_ha</strong></span> - When set to True, all virtual routers created from this point onwards default to HA (and not legacy) routers. Administrators can override the value for each router using the following option in the <code class="literal">openstack router create</code> command:
								</p><pre class="screen"># openstack router create --ha</pre><p class="simpara">
									or
								</p><pre class="screen"># openstack router create --no-ha</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>max_l3_agents_per_router</strong></span> - Set this to a value between the minimum and total number of network nodes in your deployment.
								</p><p class="simpara">
									For example, if you deploy four OpenStack Networking nodes but set this parameter to 2, only two L3 agents protect each HA virtual router: one active, and one standby. In addition, each time a new L3 agent node is deployed, additional standby versions of the virtual routers are scheduled until the <code class="literal">max_l3_agents_per_router</code> limit is reached. As a result, you can scale out the number of standby routers by adding new L3 agents.
								</p><p class="simpara">
									In addition, each time a new L3 agent node is deployed, additional standby versions of the virtual routers are scheduled until the <code class="literal">max_l3_agents_per_router</code> limit is reached. As a result, you can scale out the number of standby routers by adding new L3 agents.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>min_l3_agents_per_router</strong></span> - The minimum setting ensures that the HA rules remain enforced. This setting is validated during the virtual router creation process to ensure a sufficient number of L3 Agent nodes are available to provide HA.
								</p><p class="simpara">
									For example, if you have two network nodes and one becomes unavailable, no new routers can be created during that time, as you need at least min active L3 agents when creating a HA router.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Restart the <span class="strong strong"><strong>neutron-server</strong></span> service to apply the changes:
						</p><pre class="screen"># systemctl restart neutron-server.service</pre></li></ol></div></section><section class="section" id="review-ha-node-config"><div class="titlepage"><div><div><h2 class="title">20.7. Reviewing high availability (HA) node configurations</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the <code class="literal">ip address</code> command within the virtual router namespace to return a HA device in the result, prefixed with <span class="emphasis"><em>ha-</em></span>.
						</p><pre class="screen"># ip netns exec qrouter-b30064f9-414e-4c98-ab42-646197c74020 ip address
&lt;snip&gt;
2794: ha-45249562-ec: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state DOWN group default
link/ether 12:34:56:78:2b:5d brd ff:ff:ff:ff:ff:ff
inet 169.254.0.2/24 brd 169.254.0.255 scope global ha-54b92d86-4f</pre></li></ul></div><p>
					With Layer 3 HA enabled, virtual routers and floating IP addresses are protected against individual node failure.
				</p></section></section><section class="chapter" id="sec-tag-vnic"><div class="titlepage"><div><div><h2 class="title">Chapter 21. Identifying virtual devices with tags</h2></div></div></div><section class="section" id="overview-virt-device-tag"><div class="titlepage"><div><div><h2 class="title">21.1. Overview of virtual device tagging</h2></div></div></div><p>
					If you launch an instance with multiple network interfaces or block devices, you can use device tagging to communicate the intended role of each device to the instance operating system. Tags are assigned to devices at instance boot time, and are available to the instance operating system through the metadata API and the configuration drive (if enabled).
				</p><p>
					The tags are set using the following parameters:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">--block-device tag=device metadata</code>
						</li><li class="listitem">
							<code class="literal">--nic tag=device metadata</code>
						</li></ul></div></section><section class="section" id="tag-virt-devices"><div class="titlepage"><div><div><h2 class="title">21.2. Tagging virtual devices</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To tag virtual devices, use the tag parameters, <code class="literal">--block-device</code> and <code class="literal">--nic</code>, when creating instances.
						</p><p class="simpara">
							Here is an example:
						</p><pre class="screen">$ nova boot test-vm --flavor m1.tiny --image cirros \
--nic net-id=55411ca3-83dd-4036-9158-bf4a6b8fb5ce,tag=nfv1 \
--block-device id=b8c9bef7-aa1d-4bf4-a14d-17674b370e13,bus=virtio,tag=database-server NFVappServer</pre><p class="simpara">
							The resulting tags are added to the existing instance metadata and are available through both the metadata API, and on the configuration drive.
						</p><p class="simpara">
							In this example, the following devices section populates the metadata:
						</p><p class="simpara">
							Sample contents of the <span class="emphasis"><em>meta_data.json</em></span> file:
						</p><pre class="screen">    {
  "devices": [
    {
        "type": "nic",
        "bus": "pci",
        "address": "0030:00:02.0",
        "mac": "aa:00:00:00:01",
        "tags": ["nfv1"]
    },
    {
        "type": "disk",
        "bus": "pci",
        "address": "0030:00:07.0",
        "serial": "disk-vol-227",
        "tags": ["database-server"]
    }
  ]
}</pre><p class="simpara">
							The device tag metadata is available using <code class="literal">GET /openstack/latest/meta_data.json</code> from the metadata API.
						</p><p class="simpara">
							If the configuration drive is enabled, and mounted under <span class="emphasis"><em>/configdrive</em></span> in the instance operating system, the metadata is also present in <span class="emphasis"><em>/configdrive/openstack/latest/meta_data.json</em></span>.
						</p></li></ul></div></section></section></div><div><div xml:lang="en-US" class="legalnotice" id="idm139893205250016"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index%3F.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="rh-summit-red-a.svg" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
